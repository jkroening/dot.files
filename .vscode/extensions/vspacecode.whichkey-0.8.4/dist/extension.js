module.exports=function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=5)}([function(e,t){e.exports=require("vscode")},function(e,t,i){"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),t.defaultStatusBarTimeout=t.whichKeyOpenFile=t.whichKeyTrigger=t.whichKeyRegister=t.whichKeyShow=t.ContextKey=t.SortOrder=t.CommandKey=t.ConfigKey=t.contributePrefix=t.publisherId=t.extensionId=void 0,t.extensionId="vscode-which-key",t.publisherId="VSpaceCode",t.contributePrefix="whichkey",function(e){e.Delay="delay",e.SortOrder="sortOrder",e.Bindings="bindings",e.Overrides="bindingOverrides"}(t.ConfigKey||(t.ConfigKey={})),function(e){e.Show="show",e.Register="register",e.Trigger="triggerKey",e.OpenFile="openFile"}(s=t.CommandKey||(t.CommandKey={})),function(e){e.None="none",e.Alphabetically="alphabetically",e.NonNumberFirst="nonNumberFirst"}(t.SortOrder||(t.SortOrder={})),function(e){e.Active="whichkeyActive",e.Visible="whichkeyVisible"}(t.ContextKey||(t.ContextKey={})),t.whichKeyShow=`${t.contributePrefix}.${s.Show}`,t.whichKeyRegister=`${t.contributePrefix}.${s.Register}`,t.whichKeyTrigger=`${t.contributePrefix}.${s.Trigger}`,t.whichKeyOpenFile=`${t.contributePrefix}.${s.OpenFile}`,t.defaultStatusBarTimeout=5e3},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setStatusBarMessage=void 0;const s=i(0);let n;t.setStatusBarMessage=function(e,t,i){null==n||n.dispose();const o=s.window.createStatusBarItem();let r;o.color=i?new s.ThemeColor("errorForeground"):void 0,o.text=e,o.show();const c=new s.Disposable(()=>{clearTimeout(r),o.dispose()});return r=setTimeout(()=>{c.dispose()},t),n=c,c}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToMenuLabel=t.RootMenuItem=t.BaseMenuItem=void 0;const s=i(1),n=i(2);class o{constructor(e,t){this.key=e,this.name=t}get label(){return p(this.key)}get description(){return"\t"+this.name}sortItems(e){}get(e){}overrideItem(e){}}t.BaseMenuItem=o;class r extends o{constructor(e,t,i){super(e,t),this.items=i}sortItems(e){!function(e,t){t!==s.SortOrder.None&&(t===s.SortOrder.Alphabetically?e.sort((e,t)=>e.key.localeCompare(t.key)):t===s.SortOrder.NonNumberFirst&&e.sort((e,t)=>{const i=/^[0-9]/,s=i.test(e.key);return s!==i.test(t.key)?s?1:-1:e.key.localeCompare(t.key)}))}(this.items,e);for(const t of this.items)t.sortItems(e)}get(e){return this.items.find(t=>t.key===e)}getIndex(e){return this.items.findIndex(t=>t.key===e)}overrideItem(e){const t="string"==typeof e.keys?e.keys.split("."):e.keys,i=t[t.length-1],s=this.getIndex(i);if(void 0===e.position){const t=f(e,i);-1!==s?this.items.splice(s,1,t):this.items.push(t)}else if(e.position<0)-1!==s&&this.items.splice(s,1);else{-1!==s&&this.items.splice(s,1);const t=f(e,i);this.items.splice(e.position,0,t)}}}class c extends r{constructor(e){if(!e.bindings)throw new w("bindings","bindings");const t=y(e.bindings);super(e.key,e.name,t)}select(e){return{items:this.items,isTransient:!1}}}class a extends o{constructor(e){if(!e.commands)throw new w("commands","commands");super(e.key,e.name),this.commands=e.commands,this.args=e.args}select(e){return{commands:this.commands,args:this.args}}}function u(e,t){return function(e,t){if(e&&t){let i=!0;return i=i&&e.when===t.when,i=i&&e.languageId===t.languageId,i}return e===t}(d(e),d(t))}function d(e){if(e&&e.length>0){const t=e.split(";").reduce((e,t)=>{const[i,s]=t.split(":");return e[i]=s,e},{});if("when"in t||"languageId"in t)return{when:t.when,languageId:t.languageId}}}class h extends r{constructor(e){if(!e.bindings)throw new w("bindings","conditional");const t=y(e.bindings);super(e.key,e.name,t)}get(e){return this.items.find(t=>u(e,t.key))}getIndex(e){return this.items.findIndex(t=>u(e,t.key))}eval(e){return this.items.find(t=>function(e,t){if(t&&e){let i=!0;return e.when&&(i=i&&e.when===t.when),e.languageId&&(i=i&&e.languageId===t.languageId),i}return e===t}(d(t.key),e))}select(e){var t;let i=null!==(t=this.eval(e))&&void 0!==t?t:this.eval(void 0);if(i)return i.select(e);const o="No conditions matched";return console.warn(`${o};key=${this.key};name=${this.name}`),n.setStatusBarMessage(o,s.defaultStatusBarTimeout,!0),{}}}class l extends o{constructor(e){if(!e.command)throw new w("command","command");super(e.key,e.name),this.command=e.command,this.args=e.args}select(e){return{commands:[this.command],args:this.args?[this.args]:this.args}}}class m extends r{constructor(e){if(!e.bindings)throw new w("bindings","transient");const t=y(e.bindings);super(e.key,e.name,t),e.commands?(this.commands=e.commands,this.args=e.args):e.command&&(this.commands=[e.command],this.args=[e.args])}select(e){return{items:this.items,isTransient:!0,commands:this.commands,args:this.args}}}function g(e){switch(e.type){case"command":return new l(e);case"commands":return new a(e);case"bindings":return new c(e);case"transient":return new m(e);case"conditional":return new h(e);default:throw new Error(`type ${e.type} is not supported`)}}function f(e,t){if(void 0!==e.name&&void 0!==e.type)return g({key:t,name:e.name,type:e.type,command:e.command,commands:e.commands,args:e.args,bindings:e.bindings});throw new Error("name or type of the override is undefined")}function y(e){return e.map(g)}function p(e){return e.replace(/ /g,"␣").replace(/\t/g,"↹")}t.RootMenuItem=class extends r{constructor(e){super("","",y(e))}select(e){return{items:this.items,isTransient:!1}}override(e){for(const t of e)try{const e="string"==typeof t.keys?t.keys.split("."):t.keys;let i=this;for(let s=0;s<e.length-1;s++){const n=e[s];if(i=null==i?void 0:i.get(n),void 0===i){console.warn(`Key ${n} of ${t.keys} not found`);break}}null==i||i.overrideItem(t)}catch(e){console.error(e)}}},t.convertToMenuLabel=p;class w extends Error{constructor(e,t){super(),this.name=`Property ${e} is not defined for type ${t}`}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultWhichKeyConfig=t.getFullSection=t.toWhichKeyConfig=void 0;const s=i(1);t.toWhichKeyConfig=function(e){if("object"==typeof e){const t=e;if(t.bindings&&2===t.bindings.length&&(!t.overrides||2===t.overrides.length)&&(!t.title||"string"==typeof t.title))return t}},t.getFullSection=function(e){return`${e[0]}.${e[1]}`},t.defaultWhichKeyConfig={bindings:[s.contributePrefix,s.ConfigKey.Bindings],overrides:[s.contributePrefix,s.ConfigKey.Overrides]}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deactivate=t.activate=void 0;const s=i(0),n=i(6),o=i(1),r=i(7),c=i(8),a=i(4),u={},d=new r.default;function h(e){const t=a.toWhichKeyConfig(e);if(t){const e=a.getFullSection(t.bindings);e in u||(u[e]=new c.default(d)),u[e].register(t)}else console.warn("Incorrect which-key config format.")}async function l(e){if("string"==typeof e)await u[e].show();else if(Array.isArray(e)&&e.length>0){const t=e.map(n.toBindingItem).filter((function(e){return null!=e}));await c.default.show(t,d)}else{const e=a.getFullSection(a.defaultWhichKeyConfig.bindings);e in u||await s.commands.executeCommand(o.whichKeyRegister,a.defaultWhichKeyConfig),await u[e].show()}}async function m(){try{await s.commands.executeCommand("workbench.action.files.openFile")}catch(e){await s.commands.executeCommand("workbench.action.files.openFileFolder")}}t.activate=function(e){e.subscriptions.push(s.commands.registerCommand(o.whichKeyTrigger,d.trigger.bind(d))),e.subscriptions.push(s.commands.registerCommand(o.whichKeyRegister,h)),e.subscriptions.push(s.commands.registerCommand(o.whichKeyShow,l)),e.subscriptions.push(s.commands.registerCommand(o.whichKeyOpenFile,m))},t.deactivate=function(){for(const e of Object.keys(u))u[e].unregister();d.dispose()}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toBindingItem=void 0,t.toBindingItem=function(e){if("object"==typeof e){const t=e;if(t.key&&t.name&&t.type)return t}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0);t.default=class{constructor(){this.emitter=new s.EventEmitter}trigger(e){"string"==typeof e&&(e={key:e}),this.emitter.fire(e)}get onDidKeyPressed(){return this.emitter.event}dispose(){this.emitter.dispose()}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),n=i(1),o=i(9),r=i(3),c=i(4);function a(e,t,i,r){var c;const a=null!==(c=s.workspace.getConfiguration(n.contributePrefix).get(n.ConfigKey.Delay))&&void 0!==c?c:0;return o.WhichKeyMenu.show(e,t,i,a,r)}t.default=class{constructor(e){this.keyListener=e}register(e){var t,i,o,a;this.unregister(),this.config=e;const u=s.workspace.getConfiguration(e.bindings[0]).get(e.bindings[1]);if(u&&(this.root=new r.RootMenuItem(u)),e.overrides){const n=null!==(t=s.workspace.getConfiguration(e.overrides[0]).get(e.overrides[1]))&&void 0!==t?t:[];null===(i=this.root)||void 0===i||i.override(n)}const d=null!==(o=s.workspace.getConfiguration(n.contributePrefix).get(n.ConfigKey.SortOrder))&&void 0!==o?o:n.SortOrder.None;null===(a=this.root)||void 0===a||a.sortItems(d),this.onConfigChangeListener=s.workspace.onDidChangeConfiguration(t=>{(t.affectsConfiguration(c.getFullSection([n.contributePrefix,n.ConfigKey.SortOrder]))||t.affectsConfiguration(c.getFullSection(e.bindings))||e.overrides&&t.affectsConfiguration(c.getFullSection(e.overrides)))&&this.register(e)},this)}unregister(){var e;this.root=void 0,null===(e=this.onConfigChangeListener)||void 0===e||e.dispose()}show(){var e,t;const i=null===(e=this.root)||void 0===e?void 0:e.select().items;if(i)return a(this.keyListener,i,!1,null===(t=this.config)||void 0===t?void 0:t.title);throw new Error("No bindings are available")}static show(e,t){return a(t,new r.RootMenuItem(e).select().items,!1)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WhichKeyMenu=void 0;const s=i(0),n=i(1),o=i(2),r=i(3);class c{constructor(e,t,i,n,o){this.enteredValue="",this.keyListener=e,this.items=t,this.isTransient=i,this.delay=n,this.title=o,this.quickPick=s.window.createQuickPick(),this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t}),this.disposables=[this.keyListener.onDidKeyPressed(this.onDidKeyPressed,this),this.quickPick.onDidChangeValue(this.onDidChangeValue,this),this.quickPick.onDidAccept(this.onDidAccept,this),this.quickPick.onDidHide(this.onDidHide,this)],this.isHiding=!1,this.itemHistory=[]}get condition(){var e;const t=null===(e=s.window.activeTextEditor)||void 0===e?void 0:e.document.languageId;return{when:this.when,languageId:t}}onDidKeyPressed(e){this.quickPick.value+=e.key,this.onDidChangeValue(this.quickPick.value,e.when)}async onDidChangeValue(e,t){if(this.when=t,this.timeoutId)if(e.startsWith(this.enteredValue))e=e.substring(this.enteredValue.length);else{if(this.enteredValue.startsWith(e))return void(this.quickPick.value=this.enteredValue);this.quickPick.value=this.enteredValue+e}const i=this.items.find(t=>t.key===e);if(this.items.find(t=>e.startsWith(t.key)))i&&await this.select(i);else{await this.hide();const t=this.getHistoryString(e);o.setStatusBarMessage(t+" is undefined",n.defaultStatusBarTimeout,!0),this.dispose(),this.resolve()}}getHistoryString(e){let t=this.itemHistory.map(e=>e.key);return e&&(t=t.concat(e)),t.map(r.convertToMenuLabel).join(" ")}async onDidAccept(){if(this.quickPick.activeItems.length>0){const e=this.quickPick.activeItems[0];await this.select(e)}}async onDidHide(){this.clearDelay(),this.isHiding||(this.dispose(),this.resolve()),await a(n.ContextKey.Visible,!1)}hide(){return new Promise(e=>{this.isHiding=!0;const t=this.quickPick.onDidHide(()=>{this.isHiding=!1,t.dispose(),e()});this.quickPick.hide()})}async select(e){try{await(this.isTransient?this.selectActionTransient(e):this.selectAction(e))}catch(e){this.dispose(),this.reject(e)}}async selectAction(e){const t=e.select(this.condition);t.commands&&(await this.hide(),await d(t.commands,t.args)),t.items?(this.updateState(t.items,!!t.isTransient,e.name),this.itemHistory.push(e),await this.show()):(this.dispose(),this.resolve())}async selectActionTransient(e){await this.hide();const t=e.select(this.condition);t.commands&&await d(t.commands,t.args),t.items&&(this.updateState(t.items,!!t.isTransient,e.name),this.itemHistory.push(e)),await this.show()}updateState(e,t,i){this.items=e,this.isTransient=t,this.title=i}clearDelay(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)}async show(){const e=()=>{this.quickPick.busy=!1,this.enteredValue="",this.quickPick.value="",this.quickPick.title=this.title,this.quickPick.items=this.items};!this.isTransient&&this.delay>0?(this.clearDelay(),this.enteredValue=this.quickPick.value,this.quickPick.busy=!0,this.quickPick.items=[],this.timeoutId=setTimeout(()=>{this.clearDelay(),e()},this.delay)):e();const t=a(n.ContextKey.Visible,!0);this.quickPick.show(),await t}dispose(){for(const e of this.disposables)e.dispose();this.quickPick.dispose()}static show(e,t,i,o,r){return new Promise(async u=>{try{const s=new c(e,t,i,o,r);await Promise.all([a(n.ContextKey.Active,!0),s.show()]),u(),await s.promise}catch(e){s.window.showErrorMessage(e.toString())}finally{await Promise.all([a(n.ContextKey.Active,!1),a(n.ContextKey.Visible,!1)])}})}}function a(e,t){return s.commands.executeCommand("setContext",e,t)}function u(e,t){if(Array.isArray(t)){const i=t;return s.commands.executeCommand(e,...i)}return t?s.commands.executeCommand(e,t):s.commands.executeCommand(e)}async function d(e,t){for(let i=0;i<e.length;i++){const s=e[i],n=null==t?void 0:t[i];await u(s,n)}}t.WhichKeyMenu=c}]);
//# sourceMappingURL=extension.js.map