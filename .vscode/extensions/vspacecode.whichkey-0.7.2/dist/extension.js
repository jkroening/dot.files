module.exports=function(e){var i={};function t(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,t),n.l=!0,n.exports}return t.m=e,t.c=i,t.d=function(e,i,s){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:s})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var n in e)t.d(s,n,function(i){return e[i]}.bind(null,n));return s},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},t.p="",t(t.s=3)}([function(e,i){e.exports=require("vscode")},function(e,i,t){"use strict";var s;Object.defineProperty(i,"__esModule",{value:!0}),i.whichKeyTrigger=i.whichKeyRegister=i.whichKeyShow=i.ContextKey=i.CommandKey=i.ConfigKey=i.contributePrefix=i.publisherId=i.extensionId=void 0,i.extensionId="vscode-which-key",i.publisherId="VSpaceCode",i.contributePrefix="whichkey",function(e){e.Delay="delay",e.Bindings="bindings",e.Overrides="bindingOverrides"}(i.ConfigKey||(i.ConfigKey={})),function(e){e.Show="show",e.Register="register",e.Trigger="triggerKey"}(s=i.CommandKey||(i.CommandKey={})),function(e){e.Active="whichkeyActive"}(i.ContextKey||(i.ContextKey={})),i.whichKeyShow=`${i.contributePrefix}.${s.Show}`,i.whichKeyRegister=`${i.contributePrefix}.${s.Register}`,i.whichKeyTrigger=`${i.contributePrefix}.${s.Trigger}`},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.convertToMenuLabel=void 0;class s{constructor(e){this.name=e.name,this.key=e.key,this.type=e.type,this.command=e.command,this.commands=e.commands,this.args=e.args,("bindings"===this.type&&e.bindings||"transient"===this.type&&e.bindings)&&(this.items=s.createItems(e.bindings))}get label(){return n(this.key)}get description(){return"\t"+this.name}static createItems(e){return e.map(e=>new s(e))}static overrideItems(e,i){null==i||i.forEach(i=>{var t;try{const n="string"==typeof i.keys?i.keys.split("."):i.keys;let o=e;for(let e=0;e<n.length-1;e++){const s=n[e],r=null==o?void 0:o.findIndex(e=>e.key===s);if(void 0===r||-1===r){console.warn(`Key ${s} of ${i.keys} not found`);break}o=null===(t=null==o?void 0:o[r])||void 0===t?void 0:t.items}if(void 0!==o){const e=n[n.length-1],t=o.findIndex(i=>i.key===e);if(void 0===i.position){const n=s.createFromOverride(i,e);-1!==t?o.splice(t,1,n):o.push(n)}else if(i.position<0)-1!==t&&o.splice(t,1);else{-1!==t&&o.splice(t,1);const n=s.createFromOverride(i,e);o.splice(i.position,0,n)}}}catch(e){console.error(e)}})}static createFromBinding(e){return new s(e)}static createFromOverride(e,i){if(void 0!==e.name&&void 0!==e.type)return new s({key:i,name:e.name,type:e.type,command:e.command,commands:e.commands,args:e.args,bindings:e.bindings});throw new Error("name or type of the override is undefined")}}function n(e){return e.replace(" ","␣").replace("\t","↹")}i.default=s,i.convertToMenuLabel=n},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.deactivate=i.activate=void 0;const s=t(0),n=t(4),o=t(1),r=t(5),c=t(6),a=t(8),d={},h=new r.default;i.activate=function(e){e.subscriptions.push(s.commands.registerCommand(o.whichKeyTrigger,h.trigger.bind(h))),e.subscriptions.push(s.commands.registerCommand(o.whichKeyRegister,e=>{const i=a.toWhichKeyConfig(e);if(i){const e=a.getFullSection(i.bindings);e in d||(d[e]=new c.default(h)),d[e].register(i)}else console.warn("Incorrect which-key config format.")})),e.subscriptions.push(s.commands.registerCommand(o.whichKeyShow,async e=>{if("string"==typeof e)await d[e].show();else if(Array.isArray(e)&&e.length>0){const i=e.map(n.toBindingItem).filter((function(e){return null!=e}));await c.default.show(i,h)}else{const e=a.getFullSection(a.defaultWhichKeyConfig.bindings);e in d||await s.commands.executeCommand(o.whichKeyRegister,a.defaultWhichKeyConfig),await d[e].show()}}))},i.deactivate=function(){Object.keys(d).forEach(e=>{d[e].unregister()}),h.dispose()}},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.toBindingItem=void 0,i.toBindingItem=function(e){if("object"==typeof e){const i=e;if(i.key&&i.name&&i.type)return i}}},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const s=t(0);i.default=class{constructor(){this.emitter=new s.EventEmitter}trigger(e){this.emitter.fire(e)}get onDidKeyPressed(){return this.emitter.event}dispose(){this.emitter.dispose()}}},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const s=t(0),n=t(7),o=t(2),r=t(1);function c(e,i){return s.commands.executeCommand("setContext",e,i)}async function a(e,i,t,o){var a;try{const d=null!==(a=s.workspace.getConfiguration(r.contributePrefix).get(r.ConfigKey.Delay))&&void 0!==a?a:0;await c(r.ContextKey.Active,!0),await n.WhichKeyMenu.show(e,i,t,d,o)}finally{await c(r.ContextKey.Active,!1)}}i.default=class{constructor(e){this.keyListener=e}register(e){this.unregister(),this.config=e;const i=s.workspace.getConfiguration(e.bindings[0]).get(e.bindings[1]);if(this.items=i?o.default.createItems(i):void 0,e.overrides){const i=s.workspace.getConfiguration(e.overrides[0]).get(e.overrides[1]);o.default.overrideItems(this.items,i)}this.onConfigChangeListener=s.workspace.onDidChangeConfiguration(i=>{i.affectsConfiguration(e.bindings[0])&&this.register(e),e.overrides&&e.overrides[0]!==e.bindings[0]&&i.affectsConfiguration(e.bindings[0])&&this.register(e)})}unregister(){var e;this.items=void 0,null===(e=this.onConfigChangeListener)||void 0===e||e.dispose()}show(){var e;return this.items?a(this.keyListener,this.items,!1,null===(e=this.config)||void 0===e?void 0:e.title):s.window.showErrorMessage("No bindings is available")}static show(e,i){return a(i,o.default.createItems(e),!1)}}},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.WhichKeyMenu=void 0;const s=t(0),n=t(2);class o{constructor(e,i,t,n,o){this.enteredValue="",this.keyListener=e,this.items=i,this.isTransient=t,this.delay=n,this.title=o,this.quickPick=s.window.createQuickPick(),this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i}),this.disposables=[this.keyListener.onDidKeyPressed(this.onDidKeyPressed.bind(this)),this.quickPick.onDidChangeValue(this.onDidChangeValue.bind(this)),this.quickPick.onDidAccept(this.onDidAccept.bind(this)),this.quickPick.onDidHide(this.onDidHide.bind(this))],this.isHiding=!1,this.itemHistory=[]}onDidKeyPressed(e){this.quickPick.value+=e,this.onDidChangeValue(this.quickPick.value)}async onDidChangeValue(e){if(this.timeoutId){if(!e.startsWith(this.enteredValue))return void(this.quickPick.value=this.enteredValue);e=e.substring(this.enteredValue.length)}const i=this.items.find(i=>i.key===e);if(this.items.find(i=>e.startsWith(i.key)))i&&await this.select(i);else{await this.hide();const i=this.getHistoryString(e);s.window.setStatusBarMessage(i+" is undefined",5e3),this.dispose(),this.resolve()}}getHistoryString(e){let i=this.itemHistory.map(e=>e.key);return e&&(i=i.concat(e)),i.map(n.convertToMenuLabel).join(" ")}onDidAccept(){if(this.quickPick.activeItems.length>0){const e=this.quickPick.activeItems[0];this.select(e)}}onDidHide(){this.clearDelay(),this.isHiding||(this.dispose(),this.resolve())}hide(){return new Promise(e=>{this.isHiding=!0;const i=this.quickPick.onDidHide(()=>{this.isHiding=!1,i.dispose(),e()});this.quickPick.hide()})}async select(e){try{await(this.isTransient?this.selectActionTransient(e):this.selectAction(e))}catch(e){this.dispose(),this.reject(e)}}async selectAction(e){if("command"===e.type&&e.command)await this.hide(),await r(e.command,e.args),this.dispose(),this.resolve();else if("commands"===e.type&&e.commands)await this.hide(),await c(e.commands,e.args),this.dispose(),this.resolve();else if("bindings"===e.type&&e.items)this.updateState(e.items,!1,e.name),this.itemHistory.push(e),this.show();else{if("transient"!==e.type||!e.items){const i=this.getHistoryString(e.key);throw new a(e.type,i)}await this.hide(),e.commands?await c(e.commands,e.args):e.command&&await r(e.command,e.args),this.updateState(e.items,!0,e.name),this.itemHistory.push(e),this.show()}}async selectActionTransient(e){if(await this.hide(),"command"===e.type&&e.command)await r(e.command,e.args);else if("commands"===e.type&&e.commands)await c(e.commands,e.args);else if("bindings"===e.type&&e.items)this.updateState(e.items,!1,e.name),this.itemHistory.push(e);else{if("transient"!==e.type||!e.items){const i=this.getHistoryString(e.key);throw new a(e.type,i)}e.commands?await c(e.commands,e.args):e.command&&await r(e.command,e.args),this.updateState(e.items,!0,e.name),this.itemHistory.push(e)}this.show()}updateState(e,i,t){this.items=e,this.isTransient=i,this.title=t}clearDelay(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)}show(){const e=()=>{this.quickPick.busy=!1,this.enteredValue="",this.quickPick.value="",this.quickPick.title=this.title,this.quickPick.items=this.items};!this.isTransient&&this.delay>0?(this.clearDelay(),this.enteredValue=this.quickPick.value,this.quickPick.busy=!0,this.quickPick.items=[],this.timeoutId=setTimeout(()=>{this.clearDelay(),e()},this.delay)):e(),this.quickPick.show()}dispose(){for(const e of this.disposables)e.dispose();this.quickPick.dispose()}static show(e,i,t,s,n){const r=new o(e,i,t,s,n);return r.show(),r.promise}}function r(e,i){if(Array.isArray(i)){const t=i;return s.commands.executeCommand(e,...t)}return i?s.commands.executeCommand(e,i):s.commands.executeCommand(e)}async function c(e,i){for(let t=0;t<e.length;t++){const s=e[t],n=null==i?void 0:i[t];await r(s,n)}}i.WhichKeyMenu=o;class a extends Error{constructor(e,i){super(`Incorrect properties for ${e} type with the key combination of ${i}`)}}},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.defaultWhichKeyConfig=i.getFullSection=i.toWhichKeyConfig=void 0;const s=t(1);i.toWhichKeyConfig=function(e){if("object"==typeof e){const i=e;if(i.bindings&&2===i.bindings.length&&(!i.overrides||2===i.overrides.length)&&(!i.title||"string"==typeof i.title))return i}},i.getFullSection=function(e){return`${e[0]}.${e[1]}`},i.defaultWhichKeyConfig={bindings:[s.contributePrefix,s.ConfigKey.Bindings],overrides:[s.contributePrefix,s.ConfigKey.Overrides]}}]);
//# sourceMappingURL=extension.js.map