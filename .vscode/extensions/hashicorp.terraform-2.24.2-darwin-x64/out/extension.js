"use strict";var mv=Object.create;var vo=Object.defineProperty;var vv=Object.getOwnPropertyDescriptor;var _v=Object.getOwnPropertyNames;var yv=Object.getPrototypeOf,Ev=Object.prototype.hasOwnProperty;var ee=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),bv=(e,t)=>{for(var r in t)vo(e,r,{get:t[r],enumerable:!0})},Fl=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of _v(t))!Ev.call(e,o)&&o!==r&&vo(e,o,{get:()=>t[o],enumerable:!(n=vv(t,o))||n.enumerable});return e};var st=(e,t,r)=>(r=e!=null?mv(yv(e)):{},Fl(t||!e||!e.__esModule?vo(r,"default",{value:e,enumerable:!0}):r,e)),Cv=e=>Fl(vo({},"__esModule",{value:!0}),e);var Nd=ee((DP,xd)=>{var Tv=Object.create,Ri=Object.defineProperty,Sv=Object.getOwnPropertyDescriptor,Rv=Object.getOwnPropertyNames,Hl=Object.getOwnPropertySymbols,wv=Object.getPrototypeOf,Bl=Object.prototype.hasOwnProperty,Pv=Object.prototype.propertyIsEnumerable,$l=(e,t,r)=>t in e?Ri(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,nn=(e,t)=>{for(var r in t||(t={}))Bl.call(t,r)&&$l(e,r,t[r]);if(Hl)for(var r of Hl(t))Pv.call(t,r)&&$l(e,r,t[r]);return e},A=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ov=(e,t)=>{for(var r in t)Ri(e,r,{get:t[r],enumerable:!0})},Vl=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Rv(t))!Bl.call(e,o)&&o!==r&&Ri(e,o,{get:()=>t[o],enumerable:!(n=Sv(t,o))||n.enumerable});return e},wi=(e,t,r)=>(r=e!=null?Tv(wv(e)):{},Vl(t||!e||!e.__esModule?Ri(r,"default",{value:e,enumerable:!0}):r,e)),Iv=e=>Vl(Ri({},"__esModule",{value:!0}),e),Kt=A((e,t)=>{"use strict";var r=function(){function n(){}return n.info=function(o){for(var a=[],i=1;i<arguments.length;i++)a[i-1]=arguments[i];n.enableDebug&&console.info(n.TAG+o,a)},n.warn=function(o){for(var a=[],i=1;i<arguments.length;i++)a[i-1]=arguments[i];n.disableWarnings||console.warn(n.TAG+o,a)},n.enableDebug=!1,n.disableWarnings=!1,n.disableErrors=!1,n.TAG="ApplicationInsights:",n}();t.exports=r}),Gl=A(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(a){for(var i,s=1,c=arguments.length;s<c;s++){i=arguments[s];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(a[u]=i[u])}return a},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncScopeManager=e.OpenTelemetryScopeManagerWrapper=void 0;var r=Qn(),n=require("events"),o=function(){function a(){}return a.prototype.active=function(){var i=this,s=r.CorrelationContextManager.getCurrentContext();return t(t({},s),{getValue:function(c){return i._activeSymbol?c===i._activeSymbol?s:!1:(i._activeSymbol=c,s)},setValue:function(){}})},a.prototype.with=function(i,s){var c=i.parentSpanId,u=i.name,d=a._spanToContext(i,c,u);return r.CorrelationContextManager.runWithContext(d,s)()},a.prototype.bind=function(i){return typeof i=="function"?r.CorrelationContextManager.wrapCallback(i):(i instanceof n.EventEmitter&&r.CorrelationContextManager.wrapEmitter(i),i)},a.prototype.enable=function(){return r.CorrelationContextManager.enable(),this},a.prototype.disable=function(){return r.CorrelationContextManager.disable(),this},a._spanToContext=function(i,s,c){var u=s?"|"+i.spanContext().traceId+"."+s+".":i.spanContext().traceId,d=t(t({},i.spanContext()),{traceFlags:i.spanContext().traceFlags}),l=r.CorrelationContextManager.spanToContextObject(d,u,c);return l},a}();e.OpenTelemetryScopeManagerWrapper=o,e.AsyncScopeManager=new o}),Dv=A((e,t)=>{e=t.exports=re;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var h=Array.prototype.slice.call(arguments,0);h.unshift("SEMVER"),console.log.apply(console,h)}:r=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,a=16,i=e.re=[],s=e.src=[],c=0,u=c++;s[u]="0|[1-9]\\d*";var d=c++;s[d]="[0-9]+";var l=c++;s[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=c++;s[p]="("+s[u]+")\\.("+s[u]+")\\.("+s[u]+")";var f=c++;s[f]="("+s[d]+")\\.("+s[d]+")\\.("+s[d]+")";var g=c++;s[g]="(?:"+s[u]+"|"+s[l]+")";var m=c++;s[m]="(?:"+s[d]+"|"+s[l]+")";var _=c++;s[_]="(?:-("+s[g]+"(?:\\."+s[g]+")*))";var E=c++;s[E]="(?:-?("+s[m]+"(?:\\."+s[m]+")*))";var T=c++;s[T]="[0-9A-Za-z-]+";var w=c++;s[w]="(?:\\+("+s[T]+"(?:\\."+s[T]+")*))";var R=c++,I="v?"+s[p]+s[_]+"?"+s[w]+"?";s[R]="^"+I+"$";var H="[v=\\s]*"+s[f]+s[E]+"?"+s[w]+"?",z=c++;s[z]="^"+H+"$";var K=c++;s[K]="((?:<|>)?=?)";var J=c++;s[J]=s[d]+"|x|X|\\*";var te=c++;s[te]=s[u]+"|x|X|\\*";var U=c++;s[U]="[v=\\s]*("+s[te]+")(?:\\.("+s[te]+")(?:\\.("+s[te]+")(?:"+s[_]+")?"+s[w]+"?)?)?";var V=c++;s[V]="[v=\\s]*("+s[J]+")(?:\\.("+s[J]+")(?:\\.("+s[J]+")(?:"+s[E]+")?"+s[w]+"?)?)?";var Q=c++;s[Q]="^"+s[K]+"\\s*"+s[U]+"$";var ne=c++;s[ne]="^"+s[K]+"\\s*"+s[V]+"$";var ve=c++;s[ve]="(?:^|[^\\d])(\\d{1,"+a+"})(?:\\.(\\d{1,"+a+"}))?(?:\\.(\\d{1,"+a+"}))?(?:$|[^\\d])";var de=c++;s[de]="(?:~>?)";var X=c++;s[X]="(\\s*)"+s[de]+"\\s+",i[X]=new RegExp(s[X],"g");var ce="$1~",ie=c++;s[ie]="^"+s[de]+s[U]+"$";var pe=c++;s[pe]="^"+s[de]+s[V]+"$";var he=c++;s[he]="(?:\\^)";var be=c++;s[be]="(\\s*)"+s[he]+"\\s+",i[be]=new RegExp(s[be],"g");var _e="$1^",Ue=c++;s[Ue]="^"+s[he]+s[U]+"$";var Qe=c++;s[Qe]="^"+s[he]+s[V]+"$";var Ke=c++;s[Ke]="^"+s[K]+"\\s*("+H+")$|^$";var je=c++;s[je]="^"+s[K]+"\\s*("+I+")$|^$";var xe=c++;s[xe]="(\\s*)"+s[K]+"\\s*("+H+"|"+s[U]+")",i[xe]=new RegExp(s[xe],"g");var it="$1$2$3",lt=c++;s[lt]="^\\s*("+s[U]+")\\s+-\\s+("+s[U]+")\\s*$";var Oe=c++;s[Oe]="^\\s*("+s[V]+")\\s+-\\s+("+s[V]+")\\s*$";var me=c++;for(s[me]="(<|>)?=?\\s*\\*",Ae=0;Ae<c;Ae++)r(Ae,s[Ae]),i[Ae]||(i[Ae]=new RegExp(s[Ae]));var Ae;e.parse=ke;function ke(h,v){if((!v||typeof v!="object")&&(v={loose:!!v,includePrerelease:!1}),h instanceof re)return h;if(typeof h!="string"||h.length>n)return null;var C=v.loose?i[z]:i[R];if(!C.test(h))return null;try{return new re(h,v)}catch{return null}}e.valid=ir;function ir(h,v){var C=ke(h,v);return C?C.version:null}e.clean=ct;function ct(h,v){var C=ke(h.trim().replace(/^[=v]+/,""),v);return C?C.version:null}e.SemVer=re;function re(h,v){if((!v||typeof v!="object")&&(v={loose:!!v,includePrerelease:!1}),h instanceof re){if(h.loose===v.loose)return h;h=h.version}else if(typeof h!="string")throw new TypeError("Invalid Version: "+h);if(h.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof re))return new re(h,v);r("SemVer",h,v),this.options=v,this.loose=!!v.loose;var C=h.trim().match(v.loose?i[z]:i[R]);if(!C)throw new TypeError("Invalid Version: "+h);if(this.raw=h,this.major=+C[1],this.minor=+C[2],this.patch=+C[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");C[4]?this.prerelease=C[4].split(".").map(function(D){if(/^[0-9]+$/.test(D)){var k=+D;if(k>=0&&k<o)return k}return D}):this.prerelease=[],this.build=C[5]?C[5].split("."):[],this.format()}re.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},re.prototype.toString=function(){return this.version},re.prototype.compare=function(h){return r("SemVer.compare",this.version,this.options,h),h instanceof re||(h=new re(h,this.options)),this.compareMain(h)||this.comparePre(h)},re.prototype.compareMain=function(h){return h instanceof re||(h=new re(h,this.options)),tt(this.major,h.major)||tt(this.minor,h.minor)||tt(this.patch,h.patch)},re.prototype.comparePre=function(h){if(h instanceof re||(h=new re(h,this.options)),this.prerelease.length&&!h.prerelease.length)return-1;if(!this.prerelease.length&&h.prerelease.length)return 1;if(!this.prerelease.length&&!h.prerelease.length)return 0;var v=0;do{var C=this.prerelease[v],D=h.prerelease[v];if(r("prerelease compare",v,C,D),C===void 0&&D===void 0)return 0;if(D===void 0)return 1;if(C===void 0)return-1;if(C!==D)return tt(C,D)}while(++v)},re.prototype.inc=function(h,v){switch(h){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",v);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",v);break;case"prepatch":this.prerelease.length=0,this.inc("patch",v),this.inc("pre",v);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",v),this.inc("pre",v);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var C=this.prerelease.length;--C>=0;)typeof this.prerelease[C]=="number"&&(this.prerelease[C]++,C=-2);C===-1&&this.prerelease.push(0)}v&&(this.prerelease[0]===v?isNaN(this.prerelease[1])&&(this.prerelease=[v,0]):this.prerelease=[v,0]);break;default:throw new Error("invalid increment argument: "+h)}return this.format(),this.raw=this.version,this},e.inc=er;function er(h,v,C,D){typeof C=="string"&&(D=C,C=void 0);try{return new re(h,C).inc(v,D).version}catch{return null}}e.diff=or;function or(h,v){if(L(h,v))return null;var C=ke(h),D=ke(v),k="";if(C.prerelease.length||D.prerelease.length){k="pre";var $="prerelease"}for(var W in C)if((W==="major"||W==="minor"||W==="patch")&&C[W]!==D[W])return k+W;return $}e.compareIdentifiers=tt;var gt=/^[0-9]+$/;function tt(h,v){var C=gt.test(h),D=gt.test(v);return C&&D&&(h=+h,v=+v),h===v?0:C&&!D?-1:D&&!C?1:h<v?-1:1}e.rcompareIdentifiers=xt;function xt(h,v){return tt(v,h)}e.major=dt;function dt(h,v){return new re(h,v).major}e.minor=Ht;function Ht(h,v){return new re(h,v).minor}e.patch=Pt;function Pt(h,v){return new re(h,v).patch}e.compare=M;function M(h,v,C){return new re(h,C).compare(new re(v,C))}e.compareLoose=N;function N(h,v){return M(h,v,!0)}e.rcompare=P;function P(h,v,C){return M(v,h,C)}e.sort=q;function q(h,v){return h.sort(function(C,D){return e.compare(C,D,v)})}e.rsort=F;function F(h,v){return h.sort(function(C,D){return e.rcompare(C,D,v)})}e.gt=y;function y(h,v,C){return M(h,v,C)>0}e.lt=b;function b(h,v,C){return M(h,v,C)<0}e.eq=L;function L(h,v,C){return M(h,v,C)===0}e.neq=G;function G(h,v,C){return M(h,v,C)!==0}e.gte=ue;function ue(h,v,C){return M(h,v,C)>=0}e.lte=fe;function fe(h,v,C){return M(h,v,C)<=0}e.cmp=Re;function Re(h,v,C,D){switch(v){case"===":return typeof h=="object"&&(h=h.version),typeof C=="object"&&(C=C.version),h===C;case"!==":return typeof h=="object"&&(h=h.version),typeof C=="object"&&(C=C.version),h!==C;case"":case"=":case"==":return L(h,C,D);case"!=":return G(h,C,D);case">":return y(h,C,D);case">=":return ue(h,C,D);case"<":return b(h,C,D);case"<=":return fe(h,C,D);default:throw new TypeError("Invalid operator: "+v)}}e.Comparator=ye;function ye(h,v){if((!v||typeof v!="object")&&(v={loose:!!v,includePrerelease:!1}),h instanceof ye){if(h.loose===!!v.loose)return h;h=h.value}if(!(this instanceof ye))return new ye(h,v);r("comparator",h,v),this.options=v,this.loose=!!v.loose,this.parse(h),this.semver===Fe?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var Fe={};ye.prototype.parse=function(h){var v=this.options.loose?i[Ke]:i[je],C=h.match(v);if(!C)throw new TypeError("Invalid comparator: "+h);this.operator=C[1],this.operator==="="&&(this.operator=""),C[2]?this.semver=new re(C[2],this.options.loose):this.semver=Fe},ye.prototype.toString=function(){return this.value},ye.prototype.test=function(h){return r("Comparator.test",h,this.options.loose),this.semver===Fe?!0:(typeof h=="string"&&(h=new re(h,this.options)),Re(h,this.operator,this.semver,this.options))},ye.prototype.intersects=function(h,v){if(!(h instanceof ye))throw new TypeError("a Comparator is required");(!v||typeof v!="object")&&(v={loose:!!v,includePrerelease:!1});var C;if(this.operator==="")return C=new le(h.value,v),yt(this.value,C,v);if(h.operator==="")return C=new le(this.value,v),yt(h.semver,C,v);var D=(this.operator===">="||this.operator===">")&&(h.operator===">="||h.operator===">"),k=(this.operator==="<="||this.operator==="<")&&(h.operator==="<="||h.operator==="<"),$=this.semver.version===h.semver.version,W=(this.operator===">="||this.operator==="<=")&&(h.operator===">="||h.operator==="<="),se=Re(this.semver,"<",h.semver,v)&&(this.operator===">="||this.operator===">")&&(h.operator==="<="||h.operator==="<"),oe=Re(this.semver,">",h.semver,v)&&(this.operator==="<="||this.operator==="<")&&(h.operator===">="||h.operator===">");return D||k||$&&W||se||oe},e.Range=le;function le(h,v){if((!v||typeof v!="object")&&(v={loose:!!v,includePrerelease:!1}),h instanceof le)return h.loose===!!v.loose&&h.includePrerelease===!!v.includePrerelease?h:new le(h.raw,v);if(h instanceof ye)return new le(h.value,v);if(!(this instanceof le))return new le(h,v);if(this.options=v,this.loose=!!v.loose,this.includePrerelease=!!v.includePrerelease,this.raw=h,this.set=h.split(/\s*\|\|\s*/).map(function(C){return this.parseRange(C.trim())},this).filter(function(C){return C.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+h);this.format()}le.prototype.format=function(){return this.range=this.set.map(function(h){return h.join(" ").trim()}).join("||").trim(),this.range},le.prototype.toString=function(){return this.range},le.prototype.parseRange=function(h){var v=this.options.loose;h=h.trim();var C=v?i[Oe]:i[lt];h=h.replace(C,Be),r("hyphen replace",h),h=h.replace(i[xe],it),r("comparator trim",h,i[xe]),h=h.replace(i[X],ce),h=h.replace(i[be],_e),h=h.split(/\s+/).join(" ");var D=v?i[Ke]:i[je],k=h.split(" ").map(function($){return Nt($,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(k=k.filter(function($){return!!$.match(D)})),k=k.map(function($){return new ye($,this.options)},this),k},le.prototype.intersects=function(h,v){if(!(h instanceof le))throw new TypeError("a Range is required");return this.set.some(function(C){return C.every(function(D){return h.set.some(function(k){return k.every(function($){return D.intersects($,v)})})})})},e.toComparators=Me;function Me(h,v){return new le(h,v).set.map(function(C){return C.map(function(D){return D.value}).join(" ").trim().split(" ")})}function Nt(h,v){return r("comp",h,v),h=Gr(h,v),r("caret",h),h=$t(h,v),r("tildes",h),h=S(h,v),r("xrange",h),h=ge(h,v),r("stars",h),h}function De(h){return!h||h.toLowerCase()==="x"||h==="*"}function $t(h,v){return h.trim().split(/\s+/).map(function(C){return Vr(C,v)}).join(" ")}function Vr(h,v){var C=v.loose?i[pe]:i[ie];return h.replace(C,function(D,k,$,W,se){r("tilde",h,D,k,$,W,se);var oe;return De(k)?oe="":De($)?oe=">="+k+".0.0 <"+(+k+1)+".0.0":De(W)?oe=">="+k+"."+$+".0 <"+k+"."+(+$+1)+".0":se?(r("replaceTilde pr",se),oe=">="+k+"."+$+"."+W+"-"+se+" <"+k+"."+(+$+1)+".0"):oe=">="+k+"."+$+"."+W+" <"+k+"."+(+$+1)+".0",r("tilde return",oe),oe})}function Gr(h,v){return h.trim().split(/\s+/).map(function(C){return Wr(C,v)}).join(" ")}function Wr(h,v){r("caret",h,v);var C=v.loose?i[Qe]:i[Ue];return h.replace(C,function(D,k,$,W,se){r("caret",h,D,k,$,W,se);var oe;return De(k)?oe="":De($)?oe=">="+k+".0.0 <"+(+k+1)+".0.0":De(W)?k==="0"?oe=">="+k+"."+$+".0 <"+k+"."+(+$+1)+".0":oe=">="+k+"."+$+".0 <"+(+k+1)+".0.0":se?(r("replaceCaret pr",se),k==="0"?$==="0"?oe=">="+k+"."+$+"."+W+"-"+se+" <"+k+"."+$+"."+(+W+1):oe=">="+k+"."+$+"."+W+"-"+se+" <"+k+"."+(+$+1)+".0":oe=">="+k+"."+$+"."+W+"-"+se+" <"+(+k+1)+".0.0"):(r("no pr"),k==="0"?$==="0"?oe=">="+k+"."+$+"."+W+" <"+k+"."+$+"."+(+W+1):oe=">="+k+"."+$+"."+W+" <"+k+"."+(+$+1)+".0":oe=">="+k+"."+$+"."+W+" <"+(+k+1)+".0.0"),r("caret return",oe),oe})}function S(h,v){return r("replaceXRanges",h,v),h.split(/\s+/).map(function(C){return Z(C,v)}).join(" ")}function Z(h,v){h=h.trim();var C=v.loose?i[ne]:i[Q];return h.replace(C,function(D,k,$,W,se,oe){r("xRange",h,D,k,$,W,se,oe);var Ze=De($),Xe=Ze||De(W),Ve=Xe||De(se),Le=Ve;return k==="="&&Le&&(k=""),Ze?k===">"||k==="<"?D="<0.0.0":D="*":k&&Le?(Xe&&(W=0),se=0,k===">"?(k=">=",Xe?($=+$+1,W=0,se=0):(W=+W+1,se=0)):k==="<="&&(k="<",Xe?$=+$+1:W=+W+1),D=k+$+"."+W+"."+se):Xe?D=">="+$+".0.0 <"+(+$+1)+".0.0":Ve&&(D=">="+$+"."+W+".0 <"+$+"."+(+W+1)+".0"),r("xRange return",D),D})}function ge(h,v){return r("replaceStars",h,v),h.trim().replace(i[me],"")}function Be(h,v,C,D,k,$,W,se,oe,Ze,Xe,Ve,Le){return De(C)?v="":De(D)?v=">="+C+".0.0":De(k)?v=">="+C+"."+D+".0":v=">="+v,De(oe)?se="":De(Ze)?se="<"+(+oe+1)+".0.0":De(Xe)?se="<"+oe+"."+(+Ze+1)+".0":Ve?se="<="+oe+"."+Ze+"."+Xe+"-"+Ve:se="<="+se,(v+" "+se).trim()}le.prototype.test=function(h){if(!h)return!1;typeof h=="string"&&(h=new re(h,this.options));for(var v=0;v<this.set.length;v++)if(Ye(this.set[v],h,this.options))return!0;return!1};function Ye(h,v,C){for(var D=0;D<h.length;D++)if(!h[D].test(v))return!1;if(v.prerelease.length&&!C.includePrerelease){for(D=0;D<h.length;D++)if(r(h[D].semver),h[D].semver!==Fe&&h[D].semver.prerelease.length>0){var k=h[D].semver;if(k.major===v.major&&k.minor===v.minor&&k.patch===v.patch)return!0}return!1}return!0}e.satisfies=yt;function yt(h,v,C){try{v=new le(v,C)}catch{return!1}return v.test(h)}e.maxSatisfying=pr;function pr(h,v,C){var D=null,k=null;try{var $=new le(v,C)}catch{return null}return h.forEach(function(W){$.test(W)&&(!D||k.compare(W)===-1)&&(D=W,k=new re(D,C))}),D}e.minSatisfying=Cn;function Cn(h,v,C){var D=null,k=null;try{var $=new le(v,C)}catch{return null}return h.forEach(function(W){$.test(W)&&(!D||k.compare(W)===1)&&(D=W,k=new re(D,C))}),D}e.minVersion=Tr;function Tr(h,v){h=new le(h,v);var C=new re("0.0.0");if(h.test(C)||(C=new re("0.0.0-0"),h.test(C)))return C;C=null;for(var D=0;D<h.set.length;++D){var k=h.set[D];k.forEach(function($){var W=new re($.semver.version);switch($.operator){case">":W.prerelease.length===0?W.patch++:W.prerelease.push(0),W.raw=W.format();case"":case">=":(!C||y(C,W))&&(C=W);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+$.operator)}})}return C&&h.test(C)?C:null}e.validRange=Tn;function Tn(h,v){try{return new le(h,v).range||"*"}catch{return null}}e.ltr=Sn;function Sn(h,v,C){return mr(h,v,"<",C)}e.gtr=Rn;function Rn(h,v,C){return mr(h,v,">",C)}e.outside=mr;function mr(h,v,C,D){h=new re(h,D),v=new le(v,D);var k,$,W,se,oe;switch(C){case">":k=y,$=fe,W=b,se=">",oe=">=";break;case"<":k=b,$=ue,W=y,se="<",oe="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(yt(h,v,D))return!1;for(var Ze=0;Ze<v.set.length;++Ze){var Xe=v.set[Ze],Ve=null,Le=null;if(Xe.forEach(function(pt){pt.semver===Fe&&(pt=new ye(">=0.0.0")),Ve=Ve||pt,Le=Le||pt,k(pt.semver,Ve.semver,D)?Ve=pt:W(pt.semver,Le.semver,D)&&(Le=pt)}),Ve.operator===se||Ve.operator===oe||(!Le.operator||Le.operator===se)&&$(h,Le.semver)||Le.operator===oe&&W(h,Le.semver))return!1}return!0}e.prerelease=wn;function wn(h,v){var C=ke(h,v);return C&&C.prerelease.length?C.prerelease:null}e.intersects=Sr;function Sr(h,v,C){return h=new le(h,C),v=new le(v,C),h.intersects(v)}e.coerce=Pn;function Pn(h){if(h instanceof re)return h;if(typeof h!="string")return null;var v=h.match(i[ve]);return v==null?null:ke(v[1]+"."+(v[2]||"0")+"."+(v[3]||"0"))}}),Ul=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.makePatchingRequire=void 0;var t=require("path"),r=Dv(),n=require("module"),o=Object.keys(process.binding("natives")),a=n.prototype.require;function i(s){var c={};return function(u){var d=a.apply(this,arguments);if(s[u]){var l=n._resolveFilename(u,this);if(c.hasOwnProperty(l))return c[l];var p=void 0;if(o.indexOf(u)<0)try{p=a.call(this,t.join(u,"package.json")).version}catch{return d}else p=process.version.substring(1);var f=p.indexOf("-");f>=0&&(p=p.substring(0,f));for(var g=d,m=0,_=s[u];m<_.length;m++){var E=_[m];r.satisfies(p,E.versionSpecifier)&&(g=E.patch(g,l))}return c[l]=g}return d}}e.makePatchingRequire=i}),Av=A((e,t)=>{t.exports={name:"diagnostic-channel",version:"1.0.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}}),kt=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.channel=e.makePatchingRequire=void 0;var t=Ul(),r=Ul();Object.defineProperty(e,"makePatchingRequire",{enumerable:!0,get:function(){return r.makePatchingRequire}});var n=function(i){return!0},o=function(){function i(){this.version=Av().version,this.subscribers={},this.contextPreservationFunction=function(s){return s},this.knownPatches={},this.currentlyPublishing=!1}return i.prototype.shouldPublish=function(s){var c=this.subscribers[s];return c?c.some(function(u){var d=u.filter;return!d||d(!1)}):!1},i.prototype.publish=function(s,c){if(!this.currentlyPublishing){var u=this.subscribers[s];if(u){var d={timestamp:Date.now(),data:c};this.currentlyPublishing=!0,u.forEach(function(l){var p=l.listener,f=l.filter;try{f&&f(!0)&&p(d)}catch{}}),this.currentlyPublishing=!1}}},i.prototype.subscribe=function(s,c,u){u===void 0&&(u=n),this.subscribers[s]||(this.subscribers[s]=[]),this.subscribers[s].push({listener:c,filter:u})},i.prototype.unsubscribe=function(s,c,u){u===void 0&&(u=n);var d=this.subscribers[s];if(d){for(var l=0;l<d.length;++l)if(d[l].listener===c&&d[l].filter===u)return d.splice(l,1),!0}return!1},i.prototype.reset=function(){var s=this;this.subscribers={},this.contextPreservationFunction=function(c){return c},Object.getOwnPropertyNames(this.knownPatches).forEach(function(c){return delete s.knownPatches[c]})},i.prototype.bindToContext=function(s){return this.contextPreservationFunction(s)},i.prototype.addContextPreservation=function(s){var c=this.contextPreservationFunction;this.contextPreservationFunction=function(u){return s(c(u))}},i.prototype.registerMonkeyPatch=function(s,c){this.knownPatches[s]||(this.knownPatches[s]=[]),this.knownPatches[s].push(c)},i.prototype.getPatchesObject=function(){return this.knownPatches},i}();global.diagnosticsSource||(global.diagnosticsSource=new o,a=require("module"),a.prototype.require=t.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var a;e.channel=global.diagnosticsSource}),xv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Nv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._globalThis=void 0,e._globalThis=typeof globalThis=="object"?globalThis:global}),kv=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(Nv(),e)}),Mv=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(kv(),e)}),Wl=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="1.0.3"}),qv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isCompatible=e._makeCompatibilityCheck=void 0;var t=Wl(),r=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function n(o){var a=new Set([o]),i=new Set,s=o.match(r);if(!s)return function(){return!1};var c={major:+s[1],minor:+s[2],patch:+s[3],prerelease:s[4]};if(c.prerelease!=null)return function(l){return l===o};function u(l){return i.add(l),!1}function d(l){return a.add(l),!0}return function(l){if(a.has(l))return!0;if(i.has(l))return!1;var p=l.match(r);if(!p)return u(l);var f={major:+p[1],minor:+p[2],patch:+p[3],prerelease:p[4]};return f.prerelease!=null||c.major!==f.major?u(l):c.major===0?c.minor===f.minor&&c.patch<=f.patch?d(l):u(l):c.minor<=f.minor?d(l):u(l)}}e._makeCompatibilityCheck=n,e.isCompatible=n(t.VERSION)}),Pi=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unregisterGlobal=e.getGlobal=e.registerGlobal=void 0;var t=Mv(),r=Wl(),n=qv(),o=r.VERSION.split(".")[0],a=Symbol.for("opentelemetry.js.api."+o),i=t._globalThis;function s(d,l,p,f){var g;f===void 0&&(f=!1);var m=i[a]=(g=i[a])!==null&&g!==void 0?g:{version:r.VERSION};if(!f&&m[d]){var _=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+d);return p.error(_.stack||_.message),!1}if(m.version!==r.VERSION){var _=new Error("@opentelemetry/api: All API registration versions must match");return p.error(_.stack||_.message),!1}return m[d]=l,p.debug("@opentelemetry/api: Registered a global for "+d+" v"+r.VERSION+"."),!0}e.registerGlobal=s;function c(d){var l,p,f=(l=i[a])===null||l===void 0?void 0:l.version;if(!(!f||!n.isCompatible(f)))return(p=i[a])===null||p===void 0?void 0:p[d]}e.getGlobal=c;function u(d,l){l.debug("@opentelemetry/api: Unregistering a global for "+d+" v"+r.VERSION+".");var p=i[a];p&&delete p[d]}e.unregisterGlobal=u}),Lv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagComponentLogger=void 0;var t=Pi(),r=function(){function o(a){this._namespace=a.namespace||"DiagComponentLogger"}return o.prototype.debug=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return n("debug",this._namespace,a)},o.prototype.error=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return n("error",this._namespace,a)},o.prototype.info=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return n("info",this._namespace,a)},o.prototype.warn=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return n("warn",this._namespace,a)},o.prototype.verbose=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return n("verbose",this._namespace,a)},o}();e.DiagComponentLogger=r;function n(o,a,i){var s=t.getGlobal("diag");if(s)return i.unshift(a),s[o].apply(s,i)}}),Qs=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagLogLevel=void 0;var t;(function(r){r[r.NONE=0]="NONE",r[r.ERROR=30]="ERROR",r[r.WARN=50]="WARN",r[r.INFO=60]="INFO",r[r.DEBUG=70]="DEBUG",r[r.VERBOSE=80]="VERBOSE",r[r.ALL=9999]="ALL"})(t=e.DiagLogLevel||(e.DiagLogLevel={}))}),jv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createLogLevelDiagLogger=void 0;var t=Qs();function r(n,o){n<t.DiagLogLevel.NONE?n=t.DiagLogLevel.NONE:n>t.DiagLogLevel.ALL&&(n=t.DiagLogLevel.ALL),o=o||{};function a(i,s){var c=o[i];return typeof c=="function"&&n>=s?c.bind(o):function(){}}return{error:a("error",t.DiagLogLevel.ERROR),warn:a("warn",t.DiagLogLevel.WARN),info:a("info",t.DiagLogLevel.INFO),debug:a("debug",t.DiagLogLevel.DEBUG),verbose:a("verbose",t.DiagLogLevel.VERBOSE)}}e.createLogLevelDiagLogger=r}),Oi=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagAPI=void 0;var t=Lv(),r=jv(),n=Qs(),o=Pi(),a="diag",i=function(){function s(){function c(d){return function(){var l=o.getGlobal("diag");if(l)return l[d].apply(l,arguments)}}var u=this;u.setLogger=function(d,l){var p,f;if(l===void 0&&(l=n.DiagLogLevel.INFO),d===u){var g=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return u.error((p=g.stack)!==null&&p!==void 0?p:g.message),!1}var m=o.getGlobal("diag"),_=r.createLogLevelDiagLogger(l,d);if(m){var E=(f=new Error().stack)!==null&&f!==void 0?f:"<failed to generate stacktrace>";m.warn("Current logger will be overwritten from "+E),_.warn("Current logger will overwrite one already registered from "+E)}return o.registerGlobal("diag",_,u,!0)},u.disable=function(){o.unregisterGlobal(a,u)},u.createComponentLogger=function(d){return new t.DiagComponentLogger(d)},u.verbose=c("verbose"),u.debug=c("debug"),u.info=c("info"),u.warn=c("warn"),u.error=c("error")}return s.instance=function(){return this._instance||(this._instance=new s),this._instance},s}();e.DiagAPI=i}),Fv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaggageImpl=void 0;var t=function(){function r(n){this._entries=n?new Map(n):new Map}return r.prototype.getEntry=function(n){var o=this._entries.get(n);if(o)return Object.assign({},o)},r.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(n){var o=n[0],a=n[1];return[o,a]})},r.prototype.setEntry=function(n,o){var a=new r(this._entries);return a._entries.set(n,o),a},r.prototype.removeEntry=function(n){var o=new r(this._entries);return o._entries.delete(n),o},r.prototype.removeEntries=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];for(var a=new r(this._entries),i=0,s=n;i<s.length;i++){var c=s[i];a._entries.delete(c)}return a},r.prototype.clear=function(){return new r},r}();e.BaggageImpl=t}),Hv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataSymbol=void 0,e.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")}),Kl=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataFromString=e.createBaggage=void 0;var t=Oi(),r=Fv(),n=Hv(),o=t.DiagAPI.instance();function a(s){return s===void 0&&(s={}),new r.BaggageImpl(new Map(Object.entries(s)))}e.createBaggage=a;function i(s){return typeof s!="string"&&(o.error("Cannot create baggage metadata from unknown type: "+typeof s),s=""),{__TYPE__:n.baggageEntryMetadataSymbol,toString:function(){return s}}}e.baggageEntryMetadataFromString=i}),$v=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Uv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Bv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagConsoleLogger=void 0;var t=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],r=function(){function n(){function o(i){return function(){var s=arguments;if(console){var c=console[i];if(typeof c!="function"&&(c=console.log),typeof c=="function")return c.apply(console,s)}}}for(var a=0;a<t.length;a++)this[t[a].n]=o(t[a].c)}return n}();e.DiagConsoleLogger=r}),Vv=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(Bv(),e),r(Qs(),e)}),zl=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultTextMapSetter=e.defaultTextMapGetter=void 0,e.defaultTextMapGetter={get:function(t,r){if(t!=null)return t[r]},keys:function(t){return t==null?[]:Object.keys(t)}},e.defaultTextMapSetter={set:function(t,r,n){t!=null&&(t[r]=n)}}}),Gv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Wv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),yo=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ROOT_CONTEXT=e.createContextKey=void 0;function t(n){return Symbol.for(n)}e.createContextKey=t;var r=function(){function n(o){var a=this;a._currentContext=o?new Map(o):new Map,a.getValue=function(i){return a._currentContext.get(i)},a.setValue=function(i,s){var c=new n(a._currentContext);return c._currentContext.set(i,s),c},a.deleteValue=function(i){var s=new n(a._currentContext);return s._currentContext.delete(i),s}}return n}();e.ROOT_CONTEXT=new r}),Kv=A(e=>{"use strict";var t=e&&e.__spreadArray||function(o,a){for(var i=0,s=a.length,c=o.length;i<s;i++,c++)o[c]=a[i];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.NoopContextManager=void 0;var r=yo(),n=function(){function o(){}return o.prototype.active=function(){return r.ROOT_CONTEXT},o.prototype.with=function(a,i,s){for(var c=[],u=3;u<arguments.length;u++)c[u-3]=arguments[u];return i.call.apply(i,t([s],c))},o.prototype.bind=function(a,i){return i},o.prototype.enable=function(){return this},o.prototype.disable=function(){return this},o}();e.NoopContextManager=n}),Xl=A(e=>{"use strict";var t=e&&e.__spreadArray||function(c,u){for(var d=0,l=u.length,p=c.length;d<l;d++,p++)c[p]=u[d];return c};Object.defineProperty(e,"__esModule",{value:!0}),e.ContextAPI=void 0;var r=Kv(),n=Pi(),o=Oi(),a="context",i=new r.NoopContextManager,s=function(){function c(){}return c.getInstance=function(){return this._instance||(this._instance=new c),this._instance},c.prototype.setGlobalContextManager=function(u){return n.registerGlobal(a,u,o.DiagAPI.instance())},c.prototype.active=function(){return this._getContextManager().active()},c.prototype.with=function(u,d,l){for(var p,f=[],g=3;g<arguments.length;g++)f[g-3]=arguments[g];return(p=this._getContextManager()).with.apply(p,t([u,d,l],f))},c.prototype.bind=function(u,d){return this._getContextManager().bind(u,d)},c.prototype._getContextManager=function(){return n.getGlobal(a)||i},c.prototype.disable=function(){this._getContextManager().disable(),n.unregisterGlobal(a,o.DiagAPI.instance())},c}();e.ContextAPI=s}),Yl=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceFlags=void 0;var t;(function(r){r[r.NONE=0]="NONE",r[r.SAMPLED=1]="SAMPLED"})(t=e.TraceFlags||(e.TraceFlags={}))}),Js=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=void 0;var t=Yl();e.INVALID_SPANID="0000000000000000",e.INVALID_TRACEID="00000000000000000000000000000000",e.INVALID_SPAN_CONTEXT={traceId:e.INVALID_TRACEID,spanId:e.INVALID_SPANID,traceFlags:t.TraceFlags.NONE}}),Zs=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NonRecordingSpan=void 0;var t=Js(),r=function(){function n(o){o===void 0&&(o=t.INVALID_SPAN_CONTEXT),this._spanContext=o}return n.prototype.spanContext=function(){return this._spanContext},n.prototype.setAttribute=function(o,a){return this},n.prototype.setAttributes=function(o){return this},n.prototype.addEvent=function(o,a){return this},n.prototype.setStatus=function(o){return this},n.prototype.updateName=function(o){return this},n.prototype.end=function(o){},n.prototype.isRecording=function(){return!1},n.prototype.recordException=function(o,a){},n}();e.NonRecordingSpan=r}),Ql=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSpanContext=e.setSpanContext=e.deleteSpan=e.setSpan=e.getSpan=void 0;var t=yo(),r=Zs(),n=t.createContextKey("OpenTelemetry Context Key SPAN");function o(u){return u.getValue(n)||void 0}e.getSpan=o;function a(u,d){return u.setValue(n,d)}e.setSpan=a;function i(u){return u.deleteValue(n)}e.deleteSpan=i;function s(u,d){return a(u,new r.NonRecordingSpan(d))}e.setSpanContext=s;function c(u){var d;return(d=o(u))===null||d===void 0?void 0:d.spanContext()}e.getSpanContext=c}),ea=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wrapSpanContext=e.isSpanContextValid=e.isValidSpanId=e.isValidTraceId=void 0;var t=Js(),r=Zs(),n=/^([0-9a-f]{32})$/i,o=/^[0-9a-f]{16}$/i;function a(u){return n.test(u)&&u!==t.INVALID_TRACEID}e.isValidTraceId=a;function i(u){return o.test(u)&&u!==t.INVALID_SPANID}e.isValidSpanId=i;function s(u){return a(u.traceId)&&i(u.spanId)}e.isSpanContextValid=s;function c(u){return new r.NonRecordingSpan(u)}e.wrapSpanContext=c}),Jl=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracer=void 0;var t=Xl(),r=Ql(),n=Zs(),o=ea(),a=t.ContextAPI.getInstance(),i=function(){function c(){}return c.prototype.startSpan=function(u,d,l){var p=Boolean(d?.root);if(p)return new n.NonRecordingSpan;var f=l&&r.getSpanContext(l);return s(f)&&o.isSpanContextValid(f)?new n.NonRecordingSpan(f):new n.NonRecordingSpan},c.prototype.startActiveSpan=function(u,d,l,p){var f,g,m;if(!(arguments.length<2)){arguments.length===2?m=d:arguments.length===3?(f=d,m=l):(f=d,g=l,m=p);var _=g??a.active(),E=this.startSpan(u,f,_),T=r.setSpan(_,E);return a.with(T,m,void 0,E)}},c}();e.NoopTracer=i;function s(c){return typeof c=="object"&&typeof c.spanId=="string"&&typeof c.traceId=="string"&&typeof c.traceFlags=="number"}}),Zl=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracer=void 0;var t=Jl(),r=new t.NoopTracer,n=function(){function o(a,i,s){this._provider=a,this.name=i,this.version=s}return o.prototype.startSpan=function(a,i,s){return this._getTracer().startSpan(a,i,s)},o.prototype.startActiveSpan=function(a,i,s,c){var u=this._getTracer();return Reflect.apply(u.startActiveSpan,u,arguments)},o.prototype._getTracer=function(){if(this._delegate)return this._delegate;var a=this._provider.getDelegateTracer(this.name,this.version);return a?(this._delegate=a,this._delegate):r},o}();e.ProxyTracer=n}),zv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracerProvider=void 0;var t=Jl(),r=function(){function n(){}return n.prototype.getTracer=function(o,a){return new t.NoopTracer},n}();e.NoopTracerProvider=r}),ed=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracerProvider=void 0;var t=Zl(),r=zv(),n=new r.NoopTracerProvider,o=function(){function a(){}return a.prototype.getTracer=function(i,s){var c;return(c=this.getDelegateTracer(i,s))!==null&&c!==void 0?c:new t.ProxyTracer(this,i,s)},a.prototype.getDelegate=function(){var i;return(i=this._delegate)!==null&&i!==void 0?i:n},a.prototype.setDelegate=function(i){this._delegate=i},a.prototype.getDelegateTracer=function(i,s){var c;return(c=this._delegate)===null||c===void 0?void 0:c.getTracer(i,s)},a}();e.ProxyTracerProvider=o}),Xv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Yv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SamplingDecision=void 0;var t;(function(r){r[r.NOT_RECORD=0]="NOT_RECORD",r[r.RECORD=1]="RECORD",r[r.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(t=e.SamplingDecision||(e.SamplingDecision={}))}),Qv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Jv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpanKind=void 0;var t;(function(r){r[r.INTERNAL=0]="INTERNAL",r[r.SERVER=1]="SERVER",r[r.CLIENT=2]="CLIENT",r[r.PRODUCER=3]="PRODUCER",r[r.CONSUMER=4]="CONSUMER"})(t=e.SpanKind||(e.SpanKind={}))}),Zv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),e_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),t_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpanStatusCode=void 0;var t;(function(r){r[r.UNSET=0]="UNSET",r[r.OK=1]="OK",r[r.ERROR=2]="ERROR"})(t=e.SpanStatusCode||(e.SpanStatusCode={}))}),r_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),n_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),i_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),o_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),s_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceAPI=void 0;var t=Pi(),r=ed(),n=ea(),o=Ql(),a=Oi(),i="trace",s=function(){function c(){this._proxyTracerProvider=new r.ProxyTracerProvider,this.wrapSpanContext=n.wrapSpanContext,this.isSpanContextValid=n.isSpanContextValid,this.deleteSpan=o.deleteSpan,this.getSpan=o.getSpan,this.getSpanContext=o.getSpanContext,this.setSpan=o.setSpan,this.setSpanContext=o.setSpanContext}return c.getInstance=function(){return this._instance||(this._instance=new c),this._instance},c.prototype.setGlobalTracerProvider=function(u){var d=t.registerGlobal(i,this._proxyTracerProvider,a.DiagAPI.instance());return d&&this._proxyTracerProvider.setDelegate(u),d},c.prototype.getTracerProvider=function(){return t.getGlobal(i)||this._proxyTracerProvider},c.prototype.getTracer=function(u,d){return this.getTracerProvider().getTracer(u,d)},c.prototype.disable=function(){t.unregisterGlobal(i,a.DiagAPI.instance()),this._proxyTracerProvider=new r.ProxyTracerProvider},c}();e.TraceAPI=s}),a_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTextMapPropagator=void 0;var t=function(){function r(){}return r.prototype.inject=function(n,o){},r.prototype.extract=function(n,o){return n},r.prototype.fields=function(){return[]},r}();e.NoopTextMapPropagator=t}),c_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deleteBaggage=e.setBaggage=e.getBaggage=void 0;var t=yo(),r=t.createContextKey("OpenTelemetry Baggage Key");function n(i){return i.getValue(r)||void 0}e.getBaggage=n;function o(i,s){return i.setValue(r,s)}e.setBaggage=o;function a(i){return i.deleteValue(r)}e.deleteBaggage=a}),u_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PropagationAPI=void 0;var t=Pi(),r=a_(),n=zl(),o=c_(),a=Kl(),i=Oi(),s="propagation",c=new r.NoopTextMapPropagator,u=function(){function d(){this.createBaggage=a.createBaggage,this.getBaggage=o.getBaggage,this.setBaggage=o.setBaggage,this.deleteBaggage=o.deleteBaggage}return d.getInstance=function(){return this._instance||(this._instance=new d),this._instance},d.prototype.setGlobalPropagator=function(l){return t.registerGlobal(s,l,i.DiagAPI.instance())},d.prototype.inject=function(l,p,f){return f===void 0&&(f=n.defaultTextMapSetter),this._getGlobalPropagator().inject(l,p,f)},d.prototype.extract=function(l,p,f){return f===void 0&&(f=n.defaultTextMapGetter),this._getGlobalPropagator().extract(l,p,f)},d.prototype.fields=function(){return this._getGlobalPropagator().fields()},d.prototype.disable=function(){t.unregisterGlobal(s,i.DiagAPI.instance())},d.prototype._getGlobalPropagator=function(){return t.getGlobal(s)||c},d}();e.PropagationAPI=u}),Ct=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(d,l,p,f){f===void 0&&(f=p),Object.defineProperty(d,f,{enumerable:!0,get:function(){return l[p]}})}:function(d,l,p,f){f===void 0&&(f=p),d[f]=l[p]}),r=e&&e.__exportStar||function(d,l){for(var p in d)p!=="default"&&!Object.prototype.hasOwnProperty.call(l,p)&&t(l,d,p)};Object.defineProperty(e,"__esModule",{value:!0}),e.diag=e.propagation=e.trace=e.context=e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=e.isValidSpanId=e.isValidTraceId=e.isSpanContextValid=e.baggageEntryMetadataFromString=void 0,r(xv(),e);var n=Kl();Object.defineProperty(e,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return n.baggageEntryMetadataFromString}}),r($v(),e),r(Uv(),e),r(Vv(),e),r(zl(),e),r(Gv(),e),r(Wv(),e),r(Zl(),e),r(ed(),e),r(Xv(),e),r(Yv(),e),r(Qv(),e),r(Jv(),e),r(Zv(),e),r(e_(),e),r(t_(),e),r(Yl(),e),r(r_(),e),r(n_(),e),r(i_(),e);var o=ea();Object.defineProperty(e,"isSpanContextValid",{enumerable:!0,get:function(){return o.isSpanContextValid}}),Object.defineProperty(e,"isValidTraceId",{enumerable:!0,get:function(){return o.isValidTraceId}}),Object.defineProperty(e,"isValidSpanId",{enumerable:!0,get:function(){return o.isValidSpanId}});var a=Js();Object.defineProperty(e,"INVALID_SPANID",{enumerable:!0,get:function(){return a.INVALID_SPANID}}),Object.defineProperty(e,"INVALID_TRACEID",{enumerable:!0,get:function(){return a.INVALID_TRACEID}}),Object.defineProperty(e,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return a.INVALID_SPAN_CONTEXT}}),r(yo(),e),r(o_(),e);var i=Xl();e.context=i.ContextAPI.getInstance();var s=s_();e.trace=s.TraceAPI.getInstance();var c=u_();e.propagation=c.PropagationAPI.getInstance();var u=Oi();e.diag=u.DiagAPI.instance(),e.default={trace:e.trace,context:e.context,propagation:e.propagation,diag:e.diag}}),ta=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTracingSuppressed=e.unsuppressTracing=e.suppressTracing=void 0;var t=Ct(),r=t.createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function n(i){return i.setValue(r,!0)}e.suppressTracing=n;function o(i){return i.deleteValue(r)}e.unsuppressTracing=o;function a(i){return i.getValue(r)===!0}e.isTracingSuppressed=a}),td=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BAGGAGE_MAX_TOTAL_LENGTH=e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=e.BAGGAGE_MAX_NAME_VALUE_PAIRS=e.BAGGAGE_HEADER=e.BAGGAGE_ITEMS_SEPARATOR=e.BAGGAGE_PROPERTIES_SEPARATOR=e.BAGGAGE_KEY_PAIR_SEPARATOR=void 0,e.BAGGAGE_KEY_PAIR_SEPARATOR="=",e.BAGGAGE_PROPERTIES_SEPARATOR=";",e.BAGGAGE_ITEMS_SEPARATOR=",",e.BAGGAGE_HEADER="baggage",e.BAGGAGE_MAX_NAME_VALUE_PAIRS=180,e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096,e.BAGGAGE_MAX_TOTAL_LENGTH=8192}),rd=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseKeyPairsIntoRecord=e.parsePairKeyValue=e.getKeyPairs=e.serializeKeyPairs=void 0;var t=Ct(),r=td(),n=s=>s.reduce((c,u)=>{let d=`${c}${c!==""?r.BAGGAGE_ITEMS_SEPARATOR:""}${u}`;return d.length>r.BAGGAGE_MAX_TOTAL_LENGTH?c:d},"");e.serializeKeyPairs=n;var o=s=>s.getAllEntries().map(([c,u])=>`${encodeURIComponent(c)}=${encodeURIComponent(u.value)}`);e.getKeyPairs=o;var a=s=>{let c=s.split(r.BAGGAGE_PROPERTIES_SEPARATOR);if(c.length<=0)return;let u=c.shift();if(!u)return;let d=u.split(r.BAGGAGE_KEY_PAIR_SEPARATOR);if(d.length!==2)return;let l=decodeURIComponent(d[0].trim()),p=decodeURIComponent(d[1].trim()),f;return c.length>0&&(f=t.baggageEntryMetadataFromString(c.join(r.BAGGAGE_PROPERTIES_SEPARATOR))),{key:l,value:p,metadata:f}};e.parsePairKeyValue=a;var i=s=>typeof s!="string"||s.length===0?{}:s.split(r.BAGGAGE_ITEMS_SEPARATOR).map(c=>e.parsePairKeyValue(c)).filter(c=>c!==void 0&&c.value.length>0).reduce((c,u)=>(c[u.key]=u.value,c),{});e.parseKeyPairsIntoRecord=i}),l_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpBaggagePropagator=void 0;var t=Ct(),r=ta(),n=td(),o=rd(),a=class{inject(i,s,c){let u=t.propagation.getBaggage(i);if(!u||r.isTracingSuppressed(i))return;let d=o.getKeyPairs(u).filter(p=>p.length<=n.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,n.BAGGAGE_MAX_NAME_VALUE_PAIRS),l=o.serializeKeyPairs(d);l.length>0&&c.set(s,n.BAGGAGE_HEADER,l)}extract(i,s,c){let u=c.get(s,n.BAGGAGE_HEADER);if(!u)return i;let d={};return u.length===0||(u.split(n.BAGGAGE_ITEMS_SEPARATOR).forEach(l=>{let p=o.parsePairKeyValue(l);if(p){let f={value:p.value};p.metadata&&(f.metadata=p.metadata),d[p.key]=f}}),Object.entries(d).length===0)?i:t.propagation.setBaggage(i,t.propagation.createBaggage(d))}fields(){return[n.BAGGAGE_HEADER]}};e.HttpBaggagePropagator=a}),d_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isAttributeValue=e.sanitizeAttributes=void 0;function t(a){let i={};if(a==null||typeof a!="object")return i;for(let[s,c]of Object.entries(a))r(c)&&(Array.isArray(c)?i[s]=c.slice():i[s]=c);return i}e.sanitizeAttributes=t;function r(a){return a==null?!0:Array.isArray(a)?n(a):o(a)}e.isAttributeValue=r;function n(a){let i;for(let s of a)if(s!=null){if(!i){if(o(s)){i=typeof s;continue}return!1}if(typeof s!==i)return!1}return!0}function o(a){switch(typeof a){case"number":return!0;case"boolean":return!0;case"string":return!0}return!1}}),nd=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loggingErrorHandler=void 0;var t=Ct();function r(){return a=>{t.diag.error(n(a))}}e.loggingErrorHandler=r;function n(a){return typeof a=="string"?a:JSON.stringify(o(a))}function o(a){let i={},s=a;for(;s!==null;)Object.getOwnPropertyNames(s).forEach(c=>{if(i[c])return;let u=s[c];u&&(i[c]=String(u))}),s=Object.getPrototypeOf(s);return i}}),id=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.globalErrorHandler=e.setGlobalErrorHandler=void 0;var t=nd(),r=t.loggingErrorHandler();function n(a){r=a}e.setGlobalErrorHandler=n;var o=a=>{try{r(a)}catch{}};e.globalErrorHandler=o}),od=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TracesSamplerValues=void 0;var t;(function(r){r.AlwaysOff="always_off",r.AlwaysOn="always_on",r.ParentBasedAlwaysOff="parentbased_always_off",r.ParentBasedAlwaysOn="parentbased_always_on",r.ParentBasedTraceIdRatio="parentbased_traceidratio",r.TraceIdRatio="traceidratio"})(t=e.TracesSamplerValues||(e.TracesSamplerValues={}))}),sd=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseEnvironment=e.DEFAULT_ENVIRONMENT=void 0;var t=Ct(),r=od(),n=",",o=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function a(f){return o.indexOf(f)>-1}var i=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function s(f){return i.indexOf(f)>-1}e.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:t.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:r.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};function c(f,g,m,_=-1/0,E=1/0){if(typeof m[f]<"u"){let T=Number(m[f]);isNaN(T)||(T<_?g[f]=_:T>E?g[f]=E:g[f]=T)}}function u(f,g,m,_=n){let E=m[f];typeof E=="string"&&(g[f]=E.split(_).map(T=>T.trim()))}var d={ALL:t.DiagLogLevel.ALL,VERBOSE:t.DiagLogLevel.VERBOSE,DEBUG:t.DiagLogLevel.DEBUG,INFO:t.DiagLogLevel.INFO,WARN:t.DiagLogLevel.WARN,ERROR:t.DiagLogLevel.ERROR,NONE:t.DiagLogLevel.NONE};function l(f,g,m){let _=m[f];if(typeof _=="string"){let E=d[_.toUpperCase()];E!=null&&(g[f]=E)}}function p(f){let g={};for(let m in e.DEFAULT_ENVIRONMENT){let _=m;switch(_){case"OTEL_LOG_LEVEL":l(_,g,f);break;default:if(a(_))c(_,g,f);else if(s(_))u(_,g,f);else{let E=f[_];typeof E<"u"&&E!==null&&(g[_]=String(E))}}}return g}e.parseEnvironment=p}),p_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getEnv=void 0;var t=require("os"),r=sd();function n(){let o=r.parseEnvironment(process.env);return Object.assign({HOSTNAME:t.hostname()},r.DEFAULT_ENVIRONMENT,o)}e.getEnv=n}),f_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hexToBase64=void 0;function t(r){let n=r.length,o="";for(let a=0;a<n;a+=2){let i=r.substring(a,a+2),s=parseInt(i,16);o+=String.fromCharCode(s)}return Buffer.from(o,"ascii").toString("base64")}e.hexToBase64=t}),h_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RandomIdGenerator=void 0;var t=8,r=16,n=class{constructor(){this.generateTraceId=a(r),this.generateSpanId=a(t)}};e.RandomIdGenerator=n;var o=Buffer.allocUnsafe(r);function a(i){return function(){for(let s=0;s<i/4;s++)o.writeUInt32BE(Math.random()*2**32>>>0,s*4);for(let s=0;s<i&&!(o[s]>0);s++)s===i-1&&(o[i-1]=1);return o.toString("hex",0,i)}}}),g_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.otperformance=void 0;var t=require("perf_hooks");e.otperformance=t.performance}),Ys=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="0.23.0"}),m_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RpcGrpcStatusCodeValues=e.MessagingOperationValues=e.MessagingDestinationKindValues=e.HttpFlavorValues=e.NetTransportValues=e.FaasInvokedProviderValues=e.FaasDocumentOperationValues=e.FaasTriggerValues=e.DbCassandraConsistencyLevelValues=e.DbSystemValues=e.SemanticAttributes=void 0,e.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"};var t;(function(l){l.OTHER_SQL="other_sql",l.MSSQL="mssql",l.MYSQL="mysql",l.ORACLE="oracle",l.DB2="db2",l.POSTGRESQL="postgresql",l.REDSHIFT="redshift",l.HIVE="hive",l.CLOUDSCAPE="cloudscape",l.HSQLDB="hsqldb",l.PROGRESS="progress",l.MAXDB="maxdb",l.HANADB="hanadb",l.INGRES="ingres",l.FIRSTSQL="firstsql",l.EDB="edb",l.CACHE="cache",l.ADABAS="adabas",l.FIREBIRD="firebird",l.DERBY="derby",l.FILEMAKER="filemaker",l.INFORMIX="informix",l.INSTANTDB="instantdb",l.INTERBASE="interbase",l.MARIADB="mariadb",l.NETEZZA="netezza",l.PERVASIVE="pervasive",l.POINTBASE="pointbase",l.SQLITE="sqlite",l.SYBASE="sybase",l.TERADATA="teradata",l.VERTICA="vertica",l.H2="h2",l.COLDFUSION="coldfusion",l.CASSANDRA="cassandra",l.HBASE="hbase",l.MONGODB="mongodb",l.REDIS="redis",l.COUCHBASE="couchbase",l.COUCHDB="couchdb",l.COSMOSDB="cosmosdb",l.DYNAMODB="dynamodb",l.NEO4J="neo4j",l.GEODE="geode",l.ELASTICSEARCH="elasticsearch",l.MEMCACHED="memcached",l.COCKROACHDB="cockroachdb"})(t=e.DbSystemValues||(e.DbSystemValues={}));var r;(function(l){l.ALL="all",l.EACH_QUORUM="each_quorum",l.QUORUM="quorum",l.LOCAL_QUORUM="local_quorum",l.ONE="one",l.TWO="two",l.THREE="three",l.LOCAL_ONE="local_one",l.ANY="any",l.SERIAL="serial",l.LOCAL_SERIAL="local_serial"})(r=e.DbCassandraConsistencyLevelValues||(e.DbCassandraConsistencyLevelValues={}));var n;(function(l){l.DATASOURCE="datasource",l.HTTP="http",l.PUBSUB="pubsub",l.TIMER="timer",l.OTHER="other"})(n=e.FaasTriggerValues||(e.FaasTriggerValues={}));var o;(function(l){l.INSERT="insert",l.EDIT="edit",l.DELETE="delete"})(o=e.FaasDocumentOperationValues||(e.FaasDocumentOperationValues={}));var a;(function(l){l.AWS="aws",l.AZURE="azure",l.GCP="gcp"})(a=e.FaasInvokedProviderValues||(e.FaasInvokedProviderValues={}));var i;(function(l){l.IP_TCP="ip_tcp",l.IP_UDP="ip_udp",l.IP="ip",l.UNIX="unix",l.PIPE="pipe",l.INPROC="inproc",l.OTHER="other"})(i=e.NetTransportValues||(e.NetTransportValues={}));var s;(function(l){l.HTTP_1_0="1.0",l.HTTP_1_1="1.1",l.HTTP_2_0="2.0",l.SPDY="SPDY",l.QUIC="QUIC"})(s=e.HttpFlavorValues||(e.HttpFlavorValues={}));var c;(function(l){l.QUEUE="queue",l.TOPIC="topic"})(c=e.MessagingDestinationKindValues||(e.MessagingDestinationKindValues={}));var u;(function(l){l.RECEIVE="receive",l.PROCESS="process"})(u=e.MessagingOperationValues||(e.MessagingOperationValues={}));var d;(function(l){l[l.OK=0]="OK",l[l.CANCELLED=1]="CANCELLED",l[l.UNKNOWN=2]="UNKNOWN",l[l.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",l[l.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",l[l.NOT_FOUND=5]="NOT_FOUND",l[l.ALREADY_EXISTS=6]="ALREADY_EXISTS",l[l.PERMISSION_DENIED=7]="PERMISSION_DENIED",l[l.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",l[l.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",l[l.ABORTED=10]="ABORTED",l[l.OUT_OF_RANGE=11]="OUT_OF_RANGE",l[l.UNIMPLEMENTED=12]="UNIMPLEMENTED",l[l.INTERNAL=13]="INTERNAL",l[l.UNAVAILABLE=14]="UNAVAILABLE",l[l.DATA_LOSS=15]="DATA_LOSS",l[l.UNAUTHENTICATED=16]="UNAUTHENTICATED"})(d=e.RpcGrpcStatusCodeValues||(e.RpcGrpcStatusCodeValues={}))}),v_=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(m_(),e)}),__=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetrySdkLanguageValues=e.OsTypeValues=e.HostArchValues=e.AwsEcsLaunchtypeValues=e.CloudPlatformValues=e.CloudProviderValues=e.ResourceAttributes=void 0,e.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};var t;(function(s){s.AWS="aws",s.AZURE="azure",s.GCP="gcp"})(t=e.CloudProviderValues||(e.CloudProviderValues={}));var r;(function(s){s.AWS_EC2="aws_ec2",s.AWS_ECS="aws_ecs",s.AWS_EKS="aws_eks",s.AWS_LAMBDA="aws_lambda",s.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",s.AZURE_VM="azure_vm",s.AZURE_CONTAINER_INSTANCES="azure_container_instances",s.AZURE_AKS="azure_aks",s.AZURE_FUNCTIONS="azure_functions",s.AZURE_APP_SERVICE="azure_app_service",s.GCP_COMPUTE_ENGINE="gcp_compute_engine",s.GCP_CLOUD_RUN="gcp_cloud_run",s.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",s.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",s.GCP_APP_ENGINE="gcp_app_engine"})(r=e.CloudPlatformValues||(e.CloudPlatformValues={}));var n;(function(s){s.EC2="ec2",s.FARGATE="fargate"})(n=e.AwsEcsLaunchtypeValues||(e.AwsEcsLaunchtypeValues={}));var o;(function(s){s.AMD64="amd64",s.ARM32="arm32",s.ARM64="arm64",s.IA64="ia64",s.PPC32="ppc32",s.PPC64="ppc64",s.X86="x86"})(o=e.HostArchValues||(e.HostArchValues={}));var a;(function(s){s.WINDOWS="windows",s.LINUX="linux",s.DARWIN="darwin",s.FREEBSD="freebsd",s.NETBSD="netbsd",s.OPENBSD="openbsd",s.DRAGONFLYBSD="dragonflybsd",s.HPUX="hpux",s.AIX="aix",s.SOLARIS="solaris",s.Z_OS="z_os"})(a=e.OsTypeValues||(e.OsTypeValues={}));var i;(function(s){s.CPP="cpp",s.DOTNET="dotnet",s.ERLANG="erlang",s.GO="go",s.JAVA="java",s.NODEJS="nodejs",s.PHP="php",s.PYTHON="python",s.RUBY="ruby",s.WEBJS="webjs"})(i=e.TelemetrySdkLanguageValues||(e.TelemetrySdkLanguageValues={}))}),y_=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(__(),e)}),Ii=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(v_(),e),r(y_(),e)}),E_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SDK_INFO=void 0;var t=Ys(),r=Ii();e.SDK_INFO={[r.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[r.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[r.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.TelemetrySdkLanguageValues.NODEJS,[r.ResourceAttributes.TELEMETRY_SDK_VERSION]:t.VERSION}}),b_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unrefTimer=void 0;function t(r){r.unref()}e.unrefTimer=t}),C_=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(p_(),e),r(f_(),e),r(h_(),e),r(g_(),e),r(E_(),e),r(b_(),e)}),ad=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(C_(),e)}),T_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTimeInput=e.isTimeInputHrTime=e.hrTimeToMicroseconds=e.hrTimeToMilliseconds=e.hrTimeToNanoseconds=e.hrTimeToTimeStamp=e.hrTimeDuration=e.timeInputToHrTime=e.hrTime=void 0;var t=ad(),r=9,n=Math.pow(10,r);function o(m){let _=m/1e3,E=Math.trunc(_),T=Number((_-E).toFixed(r))*n;return[E,T]}function a(){let m=t.otperformance.timeOrigin;if(typeof m!="number"){let _=t.otperformance;m=_.timing&&_.timing.fetchStart}return m}function i(m){let _=o(a()),E=o(typeof m=="number"?m:t.otperformance.now()),T=_[0]+E[0],w=_[1]+E[1];return w>n&&(w-=n,T+=1),[T,w]}e.hrTime=i;function s(m){if(f(m))return m;if(typeof m=="number")return m<a()?i(m):o(m);if(m instanceof Date)return o(m.getTime());throw TypeError("Invalid input type")}e.timeInputToHrTime=s;function c(m,_){let E=_[0]-m[0],T=_[1]-m[1];return T<0&&(E-=1,T+=n),[E,T]}e.hrTimeDuration=c;function u(m){let _=r,E=`${"0".repeat(_)}${m[1]}Z`,T=E.substr(E.length-_-1);return new Date(m[0]*1e3).toISOString().replace("000Z",T)}e.hrTimeToTimeStamp=u;function d(m){return m[0]*n+m[1]}e.hrTimeToNanoseconds=d;function l(m){return Math.round(m[0]*1e3+m[1]/1e6)}e.hrTimeToMilliseconds=l;function p(m){return Math.round(m[0]*1e6+m[1]/1e3)}e.hrTimeToMicroseconds=p;function f(m){return Array.isArray(m)&&m.length===2&&typeof m[0]=="number"&&typeof m[1]=="number"}e.isTimeInputHrTime=f;function g(m){return f(m)||typeof m=="number"||m instanceof Date}e.isTimeInput=g}),S_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),R_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExportResultCode=void 0;var t;(function(r){r[r.SUCCESS=0]="SUCCESS",r[r.FAILED=1]="FAILED"})(t=e.ExportResultCode||(e.ExportResultCode={}))}),w_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompositePropagator=void 0;var t=Ct(),r=class{constructor(n={}){var o;this._propagators=(o=n.propagators)!==null&&o!==void 0?o:[],this._fields=Array.from(new Set(this._propagators.map(a=>typeof a.fields=="function"?a.fields():[]).reduce((a,i)=>a.concat(i),[])))}inject(n,o,a){for(let i of this._propagators)try{i.inject(n,o,a)}catch(s){t.diag.warn(`Failed to inject with ${i.constructor.name}. Err: ${s.message}`)}}extract(n,o,a){return this._propagators.reduce((i,s)=>{try{return s.extract(i,o,a)}catch(c){t.diag.warn(`Failed to inject with ${s.constructor.name}. Err: ${c.message}`)}return i},n)}fields(){return this._fields.slice()}};e.CompositePropagator=r}),P_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateValue=e.validateKey=void 0;var t="[_0-9a-z-*/]",r=`[a-z]${t}{0,255}`,n=`[a-z0-9]${t}{0,240}@[a-z]${t}{0,13}`,o=new RegExp(`^(?:${r}|${n})$`),a=/^[ -~]{0,255}[!-~]$/,i=/,|=/;function s(u){return o.test(u)}e.validateKey=s;function c(u){return a.test(u)&&!i.test(u)}e.validateValue=c}),cd=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceState=void 0;var t=P_(),r=32,n=512,o=",",a="=",i=class{constructor(s){this._internalState=new Map,s&&this._parse(s)}set(s,c){let u=this._clone();return u._internalState.has(s)&&u._internalState.delete(s),u._internalState.set(s,c),u}unset(s){let c=this._clone();return c._internalState.delete(s),c}get(s){return this._internalState.get(s)}serialize(){return this._keys().reduce((s,c)=>(s.push(c+a+this.get(c)),s),[]).join(o)}_parse(s){s.length>n||(this._internalState=s.split(o).reverse().reduce((c,u)=>{let d=u.trim(),l=d.indexOf(a);if(l!==-1){let p=d.slice(0,l),f=d.slice(l+1,u.length);t.validateKey(p)&&t.validateValue(f)&&c.set(p,f)}return c},new Map),this._internalState.size>r&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,r))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let s=new i;return s._internalState=new Map(this._internalState),s}};e.TraceState=i}),O_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpTraceContextPropagator=e.parseTraceParent=e.TRACE_STATE_HEADER=e.TRACE_PARENT_HEADER=void 0;var t=Ct(),r=ta(),n=cd();e.TRACE_PARENT_HEADER="traceparent",e.TRACE_STATE_HEADER="tracestate";var o="00",a="(?!ff)[\\da-f]{2}",i="(?![0]{32})[\\da-f]{32}",s="(?![0]{16})[\\da-f]{16}",c="[\\da-f]{2}",u=new RegExp(`^\\s?(${a})-(${i})-(${s})-(${c})(-.*)?\\s?$`);function d(p){let f=u.exec(p);return!f||f[1]==="00"&&f[5]?null:{traceId:f[2],spanId:f[3],traceFlags:parseInt(f[4],16)}}e.parseTraceParent=d;var l=class{inject(p,f,g){let m=t.trace.getSpanContext(p);if(!m||r.isTracingSuppressed(p)||!t.isSpanContextValid(m))return;let _=`${o}-${m.traceId}-${m.spanId}-0${Number(m.traceFlags||t.TraceFlags.NONE).toString(16)}`;g.set(f,e.TRACE_PARENT_HEADER,_),m.traceState&&g.set(f,e.TRACE_STATE_HEADER,m.traceState.serialize())}extract(p,f,g){let m=g.get(f,e.TRACE_PARENT_HEADER);if(!m)return p;let _=Array.isArray(m)?m[0]:m;if(typeof _!="string")return p;let E=d(_);if(!E)return p;E.isRemote=!0;let T=g.get(f,e.TRACE_STATE_HEADER);if(T){let w=Array.isArray(T)?T.join(","):T;E.traceState=new n.TraceState(typeof w=="string"?w:void 0)}return t.trace.setSpanContext(p,E)}fields(){return[e.TRACE_PARENT_HEADER,e.TRACE_STATE_HEADER]}};e.HttpTraceContextPropagator=l}),I_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),D_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRPCMetadata=e.deleteRPCMetadata=e.setRPCMetadata=e.RPCType=void 0;var t=Ct(),r=t.createContextKey("OpenTelemetry SDK Context Key RPC_METADATA"),n;(function(s){s.HTTP="http"})(n=e.RPCType||(e.RPCType={}));function o(s,c){return s.setValue(r,c)}e.setRPCMetadata=o;function a(s){return s.deleteValue(r)}e.deleteRPCMetadata=a;function i(s){return s.getValue(r)}e.getRPCMetadata=i}),ud=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOffSampler=void 0;var t=Ct(),r=class{shouldSample(){return{decision:t.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};e.AlwaysOffSampler=r}),ld=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOnSampler=void 0;var t=Ct(),r=class{shouldSample(){return{decision:t.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};e.AlwaysOnSampler=r}),A_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ParentBasedSampler=void 0;var t=Ct(),r=id(),n=ud(),o=ld(),a=class{constructor(i){var s,c,u,d;this._root=i.root,this._root||(r.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new o.AlwaysOnSampler),this._remoteParentSampled=(s=i.remoteParentSampled)!==null&&s!==void 0?s:new o.AlwaysOnSampler,this._remoteParentNotSampled=(c=i.remoteParentNotSampled)!==null&&c!==void 0?c:new n.AlwaysOffSampler,this._localParentSampled=(u=i.localParentSampled)!==null&&u!==void 0?u:new o.AlwaysOnSampler,this._localParentNotSampled=(d=i.localParentNotSampled)!==null&&d!==void 0?d:new n.AlwaysOffSampler}shouldSample(i,s,c,u,d,l){let p=t.trace.getSpanContext(i);return!p||!t.isSpanContextValid(p)?this._root.shouldSample(i,s,c,u,d,l):p.isRemote?p.traceFlags&t.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(i,s,c,u,d,l):this._remoteParentNotSampled.shouldSample(i,s,c,u,d,l):p.traceFlags&t.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(i,s,c,u,d,l):this._localParentNotSampled.shouldSample(i,s,c,u,d,l)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};e.ParentBasedSampler=a}),x_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceIdRatioBasedSampler=void 0;var t=Ct(),r=class{constructor(n=0){this._ratio=n,this._ratio=this._normalize(n),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(n,o){return{decision:t.isValidTraceId(o)&&this._accumulate(o)<this._upperBound?t.SamplingDecision.RECORD_AND_SAMPLED:t.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(n){return typeof n!="number"||isNaN(n)?0:n>=1?1:n<=0?0:n}_accumulate(n){let o=0;for(let a=0;a<n.length/8;a++){let i=a*8,s=parseInt(n.slice(i,i+8),16);o=(o^s)>>>0}return o}};e.TraceIdRatioBasedSampler=r}),N_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isUrlIgnored=e.urlMatches=void 0;function t(n,o){return typeof o=="string"?n===o:o.test(n)}e.urlMatches=t;function r(n,o){if(!o)return!1;for(let a of o)if(t(n,a))return!0;return!1}e.isUrlIgnored=r}),k_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isWrapped=void 0;function t(r){return typeof r=="function"&&typeof r.__original=="function"&&typeof r.__unwrap=="function"&&r.__wrapped===!0}e.isWrapped=t}),Ar=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),e.baggageUtils=void 0,r(l_(),e),r(d_(),e),r(id(),e),r(nd(),e),r(T_(),e),r(S_(),e),r(R_(),e),r(Ys(),e),e.baggageUtils=rd(),r(ad(),e),r(w_(),e),r(O_(),e),r(I_(),e),r(D_(),e),r(ud(),e),r(ld(),e),r(A_(),e),r(x_(),e),r(ta(),e),r(cd(),e),r(sd(),e),r(od(),e),r(N_(),e),r(k_(),e),r(Ys(),e)}),M_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExceptionEventName=void 0,e.ExceptionEventName="exception"}),dd=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Span=void 0;var t=Ct(),r=Ar(),n=Ii(),o=M_(),a=class{constructor(i,s,c,u,d,l,p=[],f=r.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:t.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=c,this._spanContext=u,this.parentSpanId=l,this.kind=d,this.links=p,this.startTime=r.timeInputToHrTime(f),this.resource=i.resource,this.instrumentationLibrary=i.instrumentationLibrary,this._spanLimits=i.getSpanLimits(),this._spanProcessor=i.getActiveSpanProcessor(),this._spanProcessor.onStart(this,s)}spanContext(){return this._spanContext}setAttribute(i,s){return s==null||this._isSpanEnded()?this:i.length===0?(t.diag.warn(`Invalid attribute key: ${i}`),this):r.isAttributeValue(s)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,i)?this:(this.attributes[i]=s,this):(t.diag.warn(`Invalid attribute value set for key: ${i}`),this)}setAttributes(i){for(let[s,c]of Object.entries(i))this.setAttribute(s,c);return this}addEvent(i,s,c){return this._isSpanEnded()?this:(this.events.length>=this._spanLimits.eventCountLimit&&(t.diag.warn("Dropping extra events."),this.events.shift()),r.isTimeInput(s)&&(typeof c>"u"&&(c=s),s=void 0),typeof c>"u"&&(c=r.hrTime()),this.events.push({name:i,attributes:s,time:r.timeInputToHrTime(c)}),this)}setStatus(i){return this._isSpanEnded()?this:(this.status=i,this)}updateName(i){return this._isSpanEnded()?this:(this.name=i,this)}end(i=r.hrTime()){if(this._isSpanEnded()){t.diag.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=r.timeInputToHrTime(i),this._duration=r.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&t.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this)}isRecording(){return this._ended===!1}recordException(i,s=r.hrTime()){let c={};typeof i=="string"?c[n.SemanticAttributes.EXCEPTION_MESSAGE]=i:i&&(i.code?c[n.SemanticAttributes.EXCEPTION_TYPE]=i.code.toString():i.name&&(c[n.SemanticAttributes.EXCEPTION_TYPE]=i.name),i.message&&(c[n.SemanticAttributes.EXCEPTION_MESSAGE]=i.message),i.stack&&(c[n.SemanticAttributes.EXCEPTION_STACKTRACE]=i.stack)),c[n.SemanticAttributes.EXCEPTION_TYPE]||c[n.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(o.ExceptionEventName,c,s):t.diag.warn(`Failed to record an exception ${i}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&t.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}};e.Span=a}),pd=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buildSamplerFromEnv=e.DEFAULT_CONFIG=void 0;var t=Ct(),r=Ar(),n=r.getEnv(),o=r.TracesSamplerValues.AlwaysOn;e.DEFAULT_CONFIG={sampler:a(n),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:r.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:r.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:r.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}};function a(c=r.getEnv()){switch(c.OTEL_TRACES_SAMPLER){case r.TracesSamplerValues.AlwaysOn:return new r.AlwaysOnSampler;case r.TracesSamplerValues.AlwaysOff:return new r.AlwaysOffSampler;case r.TracesSamplerValues.ParentBasedAlwaysOn:return new r.ParentBasedSampler({root:new r.AlwaysOnSampler});case r.TracesSamplerValues.ParentBasedAlwaysOff:return new r.ParentBasedSampler({root:new r.AlwaysOffSampler});case r.TracesSamplerValues.TraceIdRatio:return new r.TraceIdRatioBasedSampler(s(c));case r.TracesSamplerValues.ParentBasedTraceIdRatio:return new r.ParentBasedSampler({root:new r.TraceIdRatioBasedSampler(s(c))});default:return t.diag.error(`OTEL_TRACES_SAMPLER value "${c.OTEL_TRACES_SAMPLER} invalid, defaulting to ${o}".`),new r.AlwaysOnSampler}}e.buildSamplerFromEnv=a;var i=1;function s(c){if(c.OTEL_TRACES_SAMPLER_ARG===void 0||c.OTEL_TRACES_SAMPLER_ARG==="")return t.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${i}.`),i;let u=Number(c.OTEL_TRACES_SAMPLER_ARG);return isNaN(u)?(t.diag.error(`OTEL_TRACES_SAMPLER_ARG=${c.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${i}.`),i):u<0||u>1?(t.diag.error(`OTEL_TRACES_SAMPLER_ARG=${c.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${i}.`),i):u}}),q_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeConfig=void 0;var t=pd();function r(n){let o={sampler:t.buildSamplerFromEnv()},a=Object.assign({},t.DEFAULT_CONFIG,o,n);return a.spanLimits=Object.assign({},t.DEFAULT_CONFIG.spanLimits,n.spanLimits||{}),a}e.mergeConfig=r}),L_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tracer=void 0;var t=Ct(),r=Ar(),n=dd(),o=q_(),a=class{constructor(s,c,u){this._tracerProvider=u;let d=o.mergeConfig(c);this._sampler=d.sampler,this._spanLimits=d.spanLimits,this._idGenerator=c.idGenerator||new r.RandomIdGenerator,this.resource=u.resource,this.instrumentationLibrary=s}startSpan(s,c={},u=t.context.active()){var d,l;if(r.isTracingSuppressed(u))return t.diag.debug("Instrumentation suppressed, returning Noop Span"),t.trace.wrapSpanContext(t.INVALID_SPAN_CONTEXT);let p=i(c,u),f=this._idGenerator.generateSpanId(),g,m,_;!p||!t.trace.isSpanContextValid(p)?g=this._idGenerator.generateTraceId():(g=p.traceId,m=p.traceState,_=p.spanId);let E=(d=c.kind)!==null&&d!==void 0?d:t.SpanKind.INTERNAL,T=(l=c.links)!==null&&l!==void 0?l:[],w=r.sanitizeAttributes(c.attributes),R=this._sampler.shouldSample(c.root?t.trace.setSpanContext(u,t.INVALID_SPAN_CONTEXT):u,g,s,E,w,T),I=R.decision===t.SamplingDecision.RECORD_AND_SAMPLED?t.TraceFlags.SAMPLED:t.TraceFlags.NONE,H={traceId:g,spanId:f,traceFlags:I,traceState:m};if(R.decision===t.SamplingDecision.NOT_RECORD)return t.diag.debug("Recording is off, propagating context in a non-recording span"),t.trace.wrapSpanContext(H);let z=new n.Span(this,u,s,H,E,_,T,c.startTime);return z.setAttributes(Object.assign(w,R.attributes)),z}startActiveSpan(s,c,u,d){let l,p,f;if(arguments.length<2)return;arguments.length===2?f=c:arguments.length===3?(l=c,f=u):(l=c,p=u,f=d);let g=p??t.context.active(),m=this.startSpan(s,l,g),_=t.trace.setSpan(g,m);return t.context.with(_,f,void 0,m)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}};e.Tracer=a;function i(s,c){if(!s.root)return t.trace.getSpanContext(c)}}),j_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultServiceName=void 0;function t(){return`unknown_service:${process.argv0}`}e.defaultServiceName=t}),F_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.detectResources=void 0;var t=hd(),r=Ct(),n=require("util"),o=async(i={})=>{let s=Object.assign(i),c=await Promise.all((s.detectors||[]).map(async u=>{try{let d=await u.detect(s);return r.diag.debug(`${u.constructor.name} found resource.`,d),d}catch(d){return r.diag.debug(`${u.constructor.name} failed: ${d.message}`),t.Resource.empty()}}));return a(c),c.reduce((u,d)=>u.merge(d),t.Resource.empty())};e.detectResources=o;var a=i=>{i.forEach(s=>{if(Object.keys(s.attributes).length>0){let c=n.inspect(s.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});r.diag.verbose(c)}})}}),H_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.envDetector=void 0;var t=Ct(),r=Ar(),n=Ii(),o=ra(),a=class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(i){let s={},c=r.getEnv(),u=c.OTEL_RESOURCE_ATTRIBUTES,d=c.OTEL_SERVICE_NAME;if(u)try{let l=this._parseResourceAttributes(u);Object.assign(s,l)}catch(l){t.diag.debug(`EnvDetector failed: ${l.message}`)}return d&&(s[n.ResourceAttributes.SERVICE_NAME]=d),new o.Resource(s)}_parseResourceAttributes(i){if(!i)return{};let s={},c=i.split(this._COMMA_SEPARATOR,-1);for(let u of c){let d=u.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(d.length!==2)continue;let[l,p]=d;if(l=l.trim(),p=p.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(l))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(p))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);s[l]=p}return s}_isValid(i){return i.length<=this._MAX_LENGTH&&this._isPrintableString(i)}_isPrintableString(i){for(let s=0;s<i.length;s++){let c=i.charAt(s);if(c<=" "||c>="~")return!1}return!0}_isValidAndNotEmpty(i){return i.length>0&&this._isValid(i)}};e.envDetector=new a}),$_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.processDetector=void 0;var t=Ct(),r=Ii(),n=ra(),o=class{async detect(a){let i={[r.ResourceAttributes.PROCESS_PID]:process.pid,[r.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[r.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[r.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(i,a)}_getResourceAttributes(a,i){return a[r.ResourceAttributes.PROCESS_EXECUTABLE_NAME]===""||a[r.ResourceAttributes.PROCESS_EXECUTABLE_PATH]===""||a[r.ResourceAttributes.PROCESS_COMMAND]===""||a[r.ResourceAttributes.PROCESS_COMMAND_LINE]===""?(t.diag.debug("ProcessDetector failed: Unable to find required process resources. "),n.Resource.empty()):new n.Resource(Object.assign({},a))}};e.processDetector=new o}),U_=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(H_(),e),r($_(),e)}),B_=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(j_(),e),r(F_(),e),r(U_(),e)}),fd=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(B_(),e)}),hd=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Resource=void 0;var t=Ii(),r=Ar(),n=fd(),o=class{constructor(a){this.attributes=a}static empty(){return o.EMPTY}static default(){return new o({[t.ResourceAttributes.SERVICE_NAME]:n.defaultServiceName(),[t.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[t.ResourceAttributes.TELEMETRY_SDK_NAME]:r.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_NAME],[t.ResourceAttributes.TELEMETRY_SDK_VERSION]:r.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(a){if(!a||!Object.keys(a.attributes).length)return this;let i=Object.assign({},this.attributes,a.attributes);return new o(i)}};e.Resource=o,o.EMPTY=new o({})}),V_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),G_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),ra=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(hd(),e),r(fd(),e),r(V_(),e),r(G_(),e)}),W_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiSpanProcessor=void 0;var t=Ar(),r=class{constructor(n){this._spanProcessors=n}forceFlush(){let n=[];for(let o of this._spanProcessors)n.push(o.forceFlush());return new Promise(o=>{Promise.all(n).then(()=>{o()}).catch(a=>{t.globalErrorHandler(a||new Error("MultiSpanProcessor: forceFlush failed")),o()})})}onStart(n,o){for(let a of this._spanProcessors)a.onStart(n,o)}onEnd(n){for(let o of this._spanProcessors)o.onEnd(n)}shutdown(){let n=[];for(let o of this._spanProcessors)n.push(o.shutdown());return new Promise((o,a)=>{Promise.all(n).then(()=>{o()},a)})}};e.MultiSpanProcessor=r}),gd=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopSpanProcessor=void 0;var t=class{onStart(r,n){}onEnd(r){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}};e.NoopSpanProcessor=t}),K_=A((e,t)=>{var r=200,n="__lodash_hash_undefined__",o=800,a=16,i=9007199254740991,s="[object Arguments]",c="[object Array]",u="[object AsyncFunction]",d="[object Boolean]",l="[object Date]",p="[object Error]",f="[object Function]",g="[object GeneratorFunction]",m="[object Map]",_="[object Number]",E="[object Null]",T="[object Object]",w="[object Proxy]",R="[object RegExp]",I="[object Set]",H="[object String]",z="[object Undefined]",K="[object WeakMap]",J="[object ArrayBuffer]",te="[object DataView]",U="[object Float32Array]",V="[object Float64Array]",Q="[object Int8Array]",ne="[object Int16Array]",ve="[object Int32Array]",de="[object Uint8Array]",X="[object Uint8ClampedArray]",ce="[object Uint16Array]",ie="[object Uint32Array]",pe=/[\\^$.*+?()[\]{}|]/g,he=/^\[object .+?Constructor\]$/,be=/^(?:0|[1-9]\d*)$/,_e={};_e[U]=_e[V]=_e[Q]=_e[ne]=_e[ve]=_e[de]=_e[X]=_e[ce]=_e[ie]=!0,_e[s]=_e[c]=_e[J]=_e[d]=_e[te]=_e[l]=_e[p]=_e[f]=_e[m]=_e[_]=_e[T]=_e[R]=_e[I]=_e[H]=_e[K]=!1;var Ue=typeof global=="object"&&global&&global.Object===Object&&global,Qe=typeof self=="object"&&self&&self.Object===Object&&self,Ke=Ue||Qe||Function("return this")(),je=typeof e=="object"&&e&&!e.nodeType&&e,xe=je&&typeof t=="object"&&t&&!t.nodeType&&t,it=xe&&xe.exports===je,lt=it&&Ue.process,Oe=function(){try{var O=xe&&xe.require&&xe.require("util").types;return O||lt&&lt.binding&&lt.binding("util")}catch{}}(),me=Oe&&Oe.isTypedArray;function Ae(O,B,Y){switch(Y.length){case 0:return O.call(B);case 1:return O.call(B,Y[0]);case 2:return O.call(B,Y[0],Y[1]);case 3:return O.call(B,Y[0],Y[1],Y[2])}return O.apply(B,Y)}function ke(O,B){for(var Y=-1,Ee=Array(O);++Y<O;)Ee[Y]=B(Y);return Ee}function ir(O){return function(B){return O(B)}}function ct(O,B){return O?.[B]}function re(O,B){return function(Y){return O(B(Y))}}var er=Array.prototype,or=Function.prototype,gt=Object.prototype,tt=Ke["__core-js_shared__"],xt=or.toString,dt=gt.hasOwnProperty,Ht=function(){var O=/[^.]+$/.exec(tt&&tt.keys&&tt.keys.IE_PROTO||"");return O?"Symbol(src)_1."+O:""}(),Pt=gt.toString,M=xt.call(Object),N=RegExp("^"+xt.call(dt).replace(pe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),P=it?Ke.Buffer:void 0,q=Ke.Symbol,F=Ke.Uint8Array,y=P?P.allocUnsafe:void 0,b=re(Object.getPrototypeOf,Object),L=Object.create,G=gt.propertyIsEnumerable,ue=er.splice,fe=q?q.toStringTag:void 0,Re=function(){try{var O=$s(Object,"defineProperty");return O({},"",{}),O}catch{}}(),ye=P?P.isBuffer:void 0,Fe=Math.max,le=Date.now,Me=$s(Ke,"Map"),Nt=$s(Object,"create"),De=function(){function O(){}return function(B){if(!On(B))return{};if(L)return L(B);O.prototype=B;var Y=new O;return O.prototype=void 0,Y}}();function $t(O){var B=-1,Y=O==null?0:O.length;for(this.clear();++B<Y;){var Ee=O[B];this.set(Ee[0],Ee[1])}}function Vr(){this.__data__=Nt?Nt(null):{},this.size=0}function Gr(O){var B=this.has(O)&&delete this.__data__[O];return this.size-=B?1:0,B}function Wr(O){var B=this.__data__;if(Nt){var Y=B[O];return Y===n?void 0:Y}return dt.call(B,O)?B[O]:void 0}function S(O){var B=this.__data__;return Nt?B[O]!==void 0:dt.call(B,O)}function Z(O,B){var Y=this.__data__;return this.size+=this.has(O)?0:1,Y[O]=Nt&&B===void 0?n:B,this}$t.prototype.clear=Vr,$t.prototype.delete=Gr,$t.prototype.get=Wr,$t.prototype.has=S,$t.prototype.set=Z;function ge(O){var B=-1,Y=O==null?0:O.length;for(this.clear();++B<Y;){var Ee=O[B];this.set(Ee[0],Ee[1])}}function Be(){this.__data__=[],this.size=0}function Ye(O){var B=this.__data__,Y=se(B,O);if(Y<0)return!1;var Ee=B.length-1;return Y==Ee?B.pop():ue.call(B,Y,1),--this.size,!0}function yt(O){var B=this.__data__,Y=se(B,O);return Y<0?void 0:B[Y][1]}function pr(O){return se(this.__data__,O)>-1}function Cn(O,B){var Y=this.__data__,Ee=se(Y,O);return Ee<0?(++this.size,Y.push([O,B])):Y[Ee][1]=B,this}ge.prototype.clear=Be,ge.prototype.delete=Ye,ge.prototype.get=yt,ge.prototype.has=pr,ge.prototype.set=Cn;function Tr(O){var B=-1,Y=O==null?0:O.length;for(this.clear();++B<Y;){var Ee=O[B];this.set(Ee[0],Ee[1])}}function Tn(){this.size=0,this.__data__={hash:new $t,map:new(Me||ge),string:new $t}}function Sn(O){var B=go(this,O).delete(O);return this.size-=B?1:0,B}function Rn(O){return go(this,O).get(O)}function mr(O){return go(this,O).has(O)}function wn(O,B){var Y=go(this,O),Ee=Y.size;return Y.set(O,B),this.size+=Y.size==Ee?0:1,this}Tr.prototype.clear=Tn,Tr.prototype.delete=Sn,Tr.prototype.get=Rn,Tr.prototype.has=mr,Tr.prototype.set=wn;function Sr(O){var B=this.__data__=new ge(O);this.size=B.size}function Pn(){this.__data__=new ge,this.size=0}function h(O){var B=this.__data__,Y=B.delete(O);return this.size=B.size,Y}function v(O){return this.__data__.get(O)}function C(O){return this.__data__.has(O)}function D(O,B){var Y=this.__data__;if(Y instanceof ge){var Ee=Y.__data__;if(!Me||Ee.length<r-1)return Ee.push([O,B]),this.size=++Y.size,this;Y=this.__data__=new Tr(Ee)}return Y.set(O,B),this.size=Y.size,this}Sr.prototype.clear=Pn,Sr.prototype.delete=h,Sr.prototype.get=v,Sr.prototype.has=C,Sr.prototype.set=D;function k(O,B){var Y=Vs(O),Ee=!Y&&Bs(O),et=!Y&&!Ee&&Nl(O),mt=!Y&&!Ee&&!et&&Ml(O),Et=Y||Ee||et||mt,Je=Et?ke(O.length,String):[],bt=Je.length;for(var Rr in O)(B||dt.call(O,Rr))&&!(Et&&(Rr=="length"||et&&(Rr=="offset"||Rr=="parent")||mt&&(Rr=="buffer"||Rr=="byteLength"||Rr=="byteOffset")||Al(Rr,bt)))&&Je.push(Rr);return Je}function $(O,B,Y){(Y!==void 0&&!mo(O[B],Y)||Y===void 0&&!(B in O))&&oe(O,B,Y)}function W(O,B,Y){var Ee=O[B];(!(dt.call(O,B)&&mo(Ee,Y))||Y===void 0&&!(B in O))&&oe(O,B,Y)}function se(O,B){for(var Y=O.length;Y--;)if(mo(O[Y][0],B))return Y;return-1}function oe(O,B,Y){B=="__proto__"&&Re?Re(O,B,{configurable:!0,enumerable:!0,value:Y,writable:!0}):O[B]=Y}var Ze=Jm();function Xe(O){return O==null?O===void 0?z:E:fe&&fe in Object(O)?Zm(O):ov(O)}function Ve(O){return Ci(O)&&Xe(O)==s}function Le(O){if(!On(O)||nv(O))return!1;var B=Ws(O)?N:he;return B.test(uv(O))}function pt(O){return Ci(O)&&kl(O.length)&&!!_e[Xe(O)]}function Um(O){if(!On(O))return iv(O);var B=xl(O),Y=[];for(var Ee in O)Ee=="constructor"&&(B||!dt.call(O,Ee))||Y.push(Ee);return Y}function Dl(O,B,Y,Ee,et){O!==B&&Ze(B,function(mt,Et){if(et||(et=new Sr),On(mt))Bm(O,B,Et,Y,Dl,Ee,et);else{var Je=Ee?Ee(Us(O,Et),mt,Et+"",O,B,et):void 0;Je===void 0&&(Je=mt),$(O,Et,Je)}},ql)}function Bm(O,B,Y,Ee,et,mt,Et){var Je=Us(O,Y),bt=Us(B,Y),Rr=Et.get(bt);if(Rr){$(O,Y,Rr);return}var vr=mt?mt(Je,bt,Y+"",O,B,Et):void 0,Ti=vr===void 0;if(Ti){var Ks=Vs(bt),zs=!Ks&&Nl(bt),jl=!Ks&&!zs&&Ml(bt);vr=bt,Ks||zs||jl?Vs(Je)?vr=Je:lv(Je)?vr=Xm(Je):zs?(Ti=!1,vr=Wm(bt,!0)):jl?(Ti=!1,vr=zm(bt,!0)):vr=[]:dv(bt)||Bs(bt)?(vr=Je,Bs(Je)?vr=pv(Je):(!On(Je)||Ws(Je))&&(vr=ev(bt))):Ti=!1}Ti&&(Et.set(bt,vr),et(vr,bt,Ee,mt,Et),Et.delete(bt)),$(O,Y,vr)}function Vm(O,B){return av(sv(O,B,Ll),O+"")}var Gm=Re?function(O,B){return Re(O,"toString",{configurable:!0,enumerable:!1,value:hv(B),writable:!0})}:Ll;function Wm(O,B){if(B)return O.slice();var Y=O.length,Ee=y?y(Y):new O.constructor(Y);return O.copy(Ee),Ee}function Km(O){var B=new O.constructor(O.byteLength);return new F(B).set(new F(O)),B}function zm(O,B){var Y=B?Km(O.buffer):O.buffer;return new O.constructor(Y,O.byteOffset,O.length)}function Xm(O,B){var Y=-1,Ee=O.length;for(B||(B=Array(Ee));++Y<Ee;)B[Y]=O[Y];return B}function Ym(O,B,Y,Ee){var et=!Y;Y||(Y={});for(var mt=-1,Et=B.length;++mt<Et;){var Je=B[mt],bt=Ee?Ee(Y[Je],O[Je],Je,Y,O):void 0;bt===void 0&&(bt=O[Je]),et?oe(Y,Je,bt):W(Y,Je,bt)}return Y}function Qm(O){return Vm(function(B,Y){var Ee=-1,et=Y.length,mt=et>1?Y[et-1]:void 0,Et=et>2?Y[2]:void 0;for(mt=O.length>3&&typeof mt=="function"?(et--,mt):void 0,Et&&tv(Y[0],Y[1],Et)&&(mt=et<3?void 0:mt,et=1),B=Object(B);++Ee<et;){var Je=Y[Ee];Je&&O(B,Je,Ee,mt)}return B})}function Jm(O){return function(B,Y,Ee){for(var et=-1,mt=Object(B),Et=Ee(B),Je=Et.length;Je--;){var bt=Et[O?Je:++et];if(Y(mt[bt],bt,mt)===!1)break}return B}}function go(O,B){var Y=O.__data__;return rv(B)?Y[typeof B=="string"?"string":"hash"]:Y.map}function $s(O,B){var Y=ct(O,B);return Le(Y)?Y:void 0}function Zm(O){var B=dt.call(O,fe),Y=O[fe];try{O[fe]=void 0;var Ee=!0}catch{}var et=Pt.call(O);return Ee&&(B?O[fe]=Y:delete O[fe]),et}function ev(O){return typeof O.constructor=="function"&&!xl(O)?De(b(O)):{}}function Al(O,B){var Y=typeof O;return B=B??i,!!B&&(Y=="number"||Y!="symbol"&&be.test(O))&&O>-1&&O%1==0&&O<B}function tv(O,B,Y){if(!On(Y))return!1;var Ee=typeof B;return(Ee=="number"?Gs(Y)&&Al(B,Y.length):Ee=="string"&&B in Y)?mo(Y[B],O):!1}function rv(O){var B=typeof O;return B=="string"||B=="number"||B=="symbol"||B=="boolean"?O!=="__proto__":O===null}function nv(O){return!!Ht&&Ht in O}function xl(O){var B=O&&O.constructor,Y=typeof B=="function"&&B.prototype||gt;return O===Y}function iv(O){var B=[];if(O!=null)for(var Y in Object(O))B.push(Y);return B}function ov(O){return Pt.call(O)}function sv(O,B,Y){return B=Fe(B===void 0?O.length-1:B,0),function(){for(var Ee=arguments,et=-1,mt=Fe(Ee.length-B,0),Et=Array(mt);++et<mt;)Et[et]=Ee[B+et];et=-1;for(var Je=Array(B+1);++et<B;)Je[et]=Ee[et];return Je[B]=Y(Et),Ae(O,this,Je)}}function Us(O,B){if(!(B==="constructor"&&typeof O[B]=="function")&&B!="__proto__")return O[B]}var av=cv(Gm);function cv(O){var B=0,Y=0;return function(){var Ee=le(),et=a-(Ee-Y);if(Y=Ee,et>0){if(++B>=o)return arguments[0]}else B=0;return O.apply(void 0,arguments)}}function uv(O){if(O!=null){try{return xt.call(O)}catch{}try{return O+""}catch{}}return""}function mo(O,B){return O===B||O!==O&&B!==B}var Bs=Ve(function(){return arguments}())?Ve:function(O){return Ci(O)&&dt.call(O,"callee")&&!G.call(O,"callee")},Vs=Array.isArray;function Gs(O){return O!=null&&kl(O.length)&&!Ws(O)}function lv(O){return Ci(O)&&Gs(O)}var Nl=ye||gv;function Ws(O){if(!On(O))return!1;var B=Xe(O);return B==f||B==g||B==u||B==w}function kl(O){return typeof O=="number"&&O>-1&&O%1==0&&O<=i}function On(O){var B=typeof O;return O!=null&&(B=="object"||B=="function")}function Ci(O){return O!=null&&typeof O=="object"}function dv(O){if(!Ci(O)||Xe(O)!=T)return!1;var B=b(O);if(B===null)return!0;var Y=dt.call(B,"constructor")&&B.constructor;return typeof Y=="function"&&Y instanceof Y&&xt.call(Y)==M}var Ml=me?ir(me):pt;function pv(O){return Ym(O,ql(O))}function ql(O){return Gs(O)?k(O,!0):Um(O)}var fv=Qm(function(O,B,Y){Dl(O,B,Y)});function hv(O){return function(){return O}}function Ll(O){return O}function gv(){return!1}t.exports=fv}),z_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessorBase=void 0;var t=Ct(),r=Ar(),n=class{constructor(o,a){this._exporter=o,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let i=r.getEnv();this._maxExportBatchSize=typeof a?.maxExportBatchSize=="number"?a.maxExportBatchSize:i.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof a?.maxQueueSize=="number"?a.maxQueueSize:i.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof a?.scheduledDelayMillis=="number"?a.scheduledDelayMillis:i.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof a?.exportTimeoutMillis=="number"?a.exportTimeoutMillis:i.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(o){}onEnd(o){this._isShutdown||this._addToBuffer(o)}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((o,a)=>{Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown()).then(o).catch(i=>{a(i)})}),this._shuttingDownPromise)}_addToBuffer(o){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(o),this._maybeStartTimer())}_flushAll(){return new Promise((o,a)=>{let i=[],s=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let c=0,u=s;c<u;c++)i.push(this._flushOneBatch());Promise.all(i).then(()=>{o()}).catch(a)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((o,a)=>{let i=setTimeout(()=>{a(new Error("Timeout"))},this._exportTimeoutMillis);t.context.with(r.suppressTracing(t.context.active()),()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),s=>{var c;clearTimeout(i),s.code===r.ExportResultCode.SUCCESS?o():a((c=s.error)!==null&&c!==void 0?c:new Error("BatchSpanProcessor: span export failed"))})})})}_maybeStartTimer(){this._timer===void 0&&(this._timer=setTimeout(()=>{this._flushOneBatch().then(()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(o=>{r.globalErrorHandler(o)})},this._scheduledDelayMillis),r.unrefTimer(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};e.BatchSpanProcessorBase=n}),X_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessor=void 0;var t=z_(),r=class extends t.BatchSpanProcessorBase{onShutdown(){}};e.BatchSpanProcessor=r}),Y_=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(X_(),e)}),md=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(Y_(),e)}),Q_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BasicTracerProvider=e.ForceFlushState=void 0;var t=Ct(),r=Ar(),n=ra(),o=vd(),a=pd(),i=W_(),s=gd(),c=K_(),u=md(),d;(function(p){p[p.resolved=0]="resolved",p[p.timeout=1]="timeout",p[p.error=2]="error",p[p.unresolved=3]="unresolved"})(d=e.ForceFlushState||(e.ForceFlushState={}));var l=class{constructor(p={}){var f;this._registeredSpanProcessors=[],this._tracers=new Map;let g=c({},a.DEFAULT_CONFIG,p);this.resource=(f=g.resource)!==null&&f!==void 0?f:n.Resource.empty(),this.resource=n.Resource.default().merge(this.resource),this._config=Object.assign({},g,{resource:this.resource});let m=this._buildExporterFromEnv();if(m!==void 0){let _=new u.BatchSpanProcessor(m);this.activeSpanProcessor=_}else this.activeSpanProcessor=new s.NoopSpanProcessor}getTracer(p,f){let g=`${p}@${f||""}`;return this._tracers.has(g)||this._tracers.set(g,new o.Tracer({name:p,version:f},this._config,this)),this._tracers.get(g)}addSpanProcessor(p){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(f=>t.diag.error("Error while trying to shutdown current span processor",f)),this._registeredSpanProcessors.push(p),this.activeSpanProcessor=new i.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(p={}){t.trace.setGlobalTracerProvider(this),p.propagator===void 0&&(p.propagator=this._buildPropagatorFromEnv()),p.contextManager&&t.context.setGlobalContextManager(p.contextManager),p.propagator&&t.propagation.setGlobalPropagator(p.propagator)}forceFlush(){let p=this._config.forceFlushTimeoutMillis,f=this._registeredSpanProcessors.map(g=>new Promise(m=>{let _,E=setTimeout(()=>{m(new Error(`Span processor did not completed within timeout period of ${p} ms`)),_=d.timeout},p);g.forceFlush().then(()=>{clearTimeout(E),_!==d.timeout&&(_=d.resolved,m(_))}).catch(T=>{clearTimeout(E),_=d.error,m(T)})}));return new Promise((g,m)=>{Promise.all(f).then(_=>{let E=_.filter(T=>T!==d.resolved);E.length>0?m(E):g()}).catch(_=>m([_]))})}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(p){var f;return(f=l._registeredPropagators.get(p))===null||f===void 0?void 0:f()}_getSpanExporter(p){var f;return(f=l._registeredExporters.get(p))===null||f===void 0?void 0:f()}_buildPropagatorFromEnv(){let p=Array.from(new Set(r.getEnv().OTEL_PROPAGATORS)),f=p.map(g=>{let m=this._getPropagator(g);return m||t.diag.warn(`Propagator "${g}" requested through environment variable is unavailable.`),m}).reduce((g,m)=>(m&&g.push(m),g),[]);if(f.length!==0)return p.length===1?f[0]:new r.CompositePropagator({propagators:f})}_buildExporterFromEnv(){let p=r.getEnv().OTEL_TRACES_EXPORTER;if(p==="none")return;let f=this._getSpanExporter(p);return f||t.diag.error(`Exporter "${p}" requested through environment variable is unavailable.`),f}};e.BasicTracerProvider=l,l._registeredPropagators=new Map([["tracecontext",()=>new r.HttpTraceContextPropagator],["baggage",()=>new r.HttpBaggagePropagator]]),l._registeredExporters=new Map}),J_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConsoleSpanExporter=void 0;var t=Ar(),r=class{export(n,o){return this._sendSpans(n,o)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(n){return{traceId:n.spanContext().traceId,parentId:n.parentSpanId,name:n.name,id:n.spanContext().spanId,kind:n.kind,timestamp:t.hrTimeToMicroseconds(n.startTime),duration:t.hrTimeToMicroseconds(n.duration),attributes:n.attributes,status:n.status,events:n.events}}_sendSpans(n,o){for(let a of n)console.log(this._exportInfo(a));if(o)return o({code:t.ExportResultCode.SUCCESS})}};e.ConsoleSpanExporter=r}),Z_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InMemorySpanExporter=void 0;var t=Ar(),r=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(n,o){if(this._stopped)return o({code:t.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...n),setTimeout(()=>o({code:t.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}};e.InMemorySpanExporter=r}),ey=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),ty=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleSpanProcessor=void 0;var t=Ct(),r=Ar(),n=class{constructor(o){this._exporter=o,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(o){}onEnd(o){this._isShutdown||t.context.with(r.suppressTracing(t.context.active()),()=>{this._exporter.export([o],a=>{var i;a.code!==r.ExportResultCode.SUCCESS&&r.globalErrorHandler((i=a.error)!==null&&i!==void 0?i:new Error(`SimpleSpanProcessor: span export failed (status ${a})`))})})}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((o,a)=>{Promise.resolve().then(()=>this._exporter.shutdown()).then(o).catch(i=>{a(i)})}),this._shuttingDownPromise)}};e.SimpleSpanProcessor=n}),ry=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),ny=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),iy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),oy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),vd=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(L_(),e),r(Q_(),e),r(md(),e),r(J_(),e),r(Z_(),e),r(ey(),e),r(ty(),e),r(ry(),e),r(gd(),e),r(dd(),e),r(ny(),e),r(iy(),e),r(oy(),e)}),sy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.azureCoreTracing=e.AzureMonitorSymbol=void 0;var t=kt();e.AzureMonitorSymbol="Azure_Monitor_Tracer";var r=!1,n=function(a){if(r)return a;try{var i=vd(),s=Ct(),c=new i.BasicTracerProvider,u=c.getTracer("applicationinsights tracer"),d=a.setTracer;a.setTracer=function(l){var p=l.startSpan;l.startSpan=function(f,g,m){var _=p.call(this,f,g,m),E=_.end;return _.end=function(){var T=E.apply(this,arguments);return t.channel.publish("azure-coretracing",_),T},_},l[e.AzureMonitorSymbol]=!0,d.call(this,l)},s.trace.getSpan(s.context.active()),a.setTracer(u),r=!0}catch{}return a};e.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:n};function o(){t.channel.registerMonkeyPatch("@azure/core-tracing",e.azureCoreTracing)}e.enable=o}),ay=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.bunyan=void 0;var t=kt(),r=function(o){var a=o.prototype._emit;return o.prototype._emit=function(i,s){var c=a.apply(this,arguments);if(!s){var u=c;u||(u=a.call(this,i,!0)),t.channel.publish("bunyan",{level:i.level,result:u})}return c},o};e.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:r};function n(){t.channel.registerMonkeyPatch("bunyan",e.bunyan)}e.enable=n}),cy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.console=void 0;var t=kt(),r=require("stream"),n=function(a){var i=new r.Writable,s=new r.Writable;i.write=function(g){if(!g)return!0;var m=g.toString();return t.channel.publish("console",{message:m}),!0},s.write=function(g){if(!g)return!0;var m=g.toString();return t.channel.publish("console",{message:m,stderr:!0}),!0};for(var c=new a.Console(i,s),u=["log","info","warn","error","dir","time","timeEnd","trace","assert"],d=function(g){var m=a[g];m&&(a[g]=function(){if(c[g])try{c[g].apply(c,arguments)}catch{}return m.apply(a,arguments)})},l=0,p=u;l<p.length;l++){var f=p[l];d(f)}return a};e.console={versionSpecifier:">= 4.0.0",patch:n};function o(){t.channel.registerMonkeyPatch("console",e.console),require("console")}e.enable=o}),uy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongoCore=void 0;var t=kt(),r=function(o){var a=o.Server.prototype.connect;return o.Server.prototype.connect=function(){var i=a.apply(this,arguments),s=this.s.pool.write;this.s.pool.write=function(){var u=typeof arguments[1]=="function"?1:2;return typeof arguments[u]=="function"&&(arguments[u]=t.channel.bindToContext(arguments[u])),s.apply(this,arguments)};var c=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=t.channel.bindToContext(arguments[1])),c.apply(this,arguments)},i},o};e.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:r};function n(){t.channel.registerMonkeyPatch("mongodb-core",e.mongoCore)}e.enable=n}),ly=A(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(c){for(var u,d=1,l=arguments.length;d<l;d++){u=arguments[d];for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(c[p]=u[p])}return c},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongo330=e.mongo3=e.mongo2=void 0;var r=kt(),n=function(c){var u=c.instrument({operationIdGenerator:{next:function(){return r.channel.bindToContext(function(l){return l()})}}}),d={};return u.on("started",function(l){d[l.requestId]||(d[l.requestId]=t(t({},l),{time:new Date}))}),u.on("succeeded",function(l){var p=d[l.requestId];p&&delete d[l.requestId],typeof l.operationId=="function"?l.operationId(function(){return r.channel.publish("mongodb",{startedData:p,event:l,succeeded:!0})}):r.channel.publish("mongodb",{startedData:p,event:l,succeeded:!0})}),u.on("failed",function(l){var p=d[l.requestId];p&&delete d[l.requestId],typeof l.operationId=="function"?l.operationId(function(){return r.channel.publish("mongodb",{startedData:p,event:l,succeeded:!1})}):r.channel.publish("mongodb",{startedData:p,event:l,succeeded:!1})}),c},o=function(c){var u=c.instrument(),d={},l={};return u.on("started",function(p){d[p.requestId]||(l[p.requestId]=r.channel.bindToContext(function(f){return f()}),d[p.requestId]=t(t({},p),{time:new Date}))}),u.on("succeeded",function(p){var f=d[p.requestId];f&&delete d[p.requestId],typeof p=="object"&&typeof l[p.requestId]=="function"&&(l[p.requestId](function(){return r.channel.publish("mongodb",{startedData:f,event:p,succeeded:!0})}),delete l[p.requestId])}),u.on("failed",function(p){var f=d[p.requestId];f&&delete d[p.requestId],typeof p=="object"&&typeof l[p.requestId]=="function"&&(l[p.requestId](function(){return r.channel.publish("mongodb",{startedData:f,event:p,succeeded:!1})}),delete l[p.requestId])}),c},a=function(c){var u=c.Server.prototype.connect;return c.Server.prototype.connect=function(){var d=u.apply(this,arguments),l=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var f=typeof arguments[1]=="function"?1:2;return typeof arguments[f]=="function"&&(arguments[f]=r.channel.bindToContext(arguments[f])),l.apply(this,arguments)};var p=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=r.channel.bindToContext(arguments[1])),p.apply(this,arguments)},d},c},i=function(c){a(c);var u=c.instrument(),d={},l={};return u.on("started",function(p){d[p.requestId]||(l[p.requestId]=r.channel.bindToContext(function(f){return f()}),d[p.requestId]=p)}),u.on("succeeded",function(p){var f=d[p.requestId];f&&delete d[p.requestId],typeof p=="object"&&typeof l[p.requestId]=="function"&&(l[p.requestId](function(){return r.channel.publish("mongodb",{startedData:f,event:p,succeeded:!0})}),delete l[p.requestId])}),u.on("failed",function(p){var f=d[p.requestId];f&&delete d[p.requestId],typeof p=="object"&&typeof l[p.requestId]=="function"&&(l[p.requestId](function(){return r.channel.publish("mongodb",{startedData:f,event:p,succeeded:!1})}),delete l[p.requestId])}),c};e.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:n},e.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:o},e.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:i};function s(){r.channel.registerMonkeyPatch("mongodb",e.mongo2),r.channel.registerMonkeyPatch("mongodb",e.mongo3),r.channel.registerMonkeyPatch("mongodb",e.mongo330)}e.enable=s}),dy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mysql=void 0;var t=kt(),r=require("path"),n=function(a,i){var s=function(f,g){return function(m,_){var E=f[m];E&&(f[m]=function(){for(var T=arguments.length-1,w=arguments.length-1;w>=0;--w)if(typeof arguments[w]=="function"){T=w;break}else if(typeof arguments[w]<"u")break;var R=arguments[T],I={result:null,startTime:null,startDate:null};typeof R=="function"&&(_?(I.startTime=process.hrtime(),I.startDate=new Date,arguments[T]=t.channel.bindToContext(_(I,R))):arguments[T]=t.channel.bindToContext(R));var H=E.apply(this,arguments);return I.result=H,H})}},c=function(f,g){return s(f.prototype,g+".prototype")},u=["connect","changeUser","ping","statistics","end"],d=require(r.dirname(i)+"/lib/Connection");u.forEach(function(f){return c(d,"Connection")(f)}),s(d,"Connection")("createQuery",function(f,g){return function(m){var _=process.hrtime(f.startTime),E=_[0]*1e3+_[1]/1e6|0;t.channel.publish("mysql",{query:f.result,callbackArgs:arguments,err:m,duration:E,time:f.startDate}),g.apply(this,arguments)}});var l=["_enqueueCallback"],p=require(r.dirname(i)+"/lib/Pool");return l.forEach(function(f){return c(p,"Pool")(f)}),a};e.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:n};function o(){t.channel.registerMonkeyPatch("mysql",e.mysql)}e.enable=o}),py=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgresPool1=void 0;var t=kt();function r(o){var a=o.prototype.connect;return o.prototype.connect=function(i){return i&&(arguments[0]=t.channel.bindToContext(i)),a.apply(this,arguments)},o}e.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:r};function n(){t.channel.registerMonkeyPatch("pg-pool",e.postgresPool1)}e.enable=n}),fy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgres7=e.postgres6=void 0;var t=kt(),r=require("events");function n(i,s){var c=i.Client.prototype.query,u="__diagnosticOriginalFunc";return i.Client.prototype.query=function(d,l,p){var f={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},g=process.hrtime(),m;function _(E){E&&E[u]&&(E=E[u]);var T=t.channel.bindToContext(function(w,R){var I=process.hrtime(g);if(f.result=R&&{rowCount:R.rowCount,command:R.command},f.error=w,f.duration=Math.ceil(I[0]*1e3+I[1]/1e6),t.channel.publish("postgres",f),w){if(E)return E.apply(this,arguments);m&&m instanceof r.EventEmitter&&m.emit("error",w)}else E&&E.apply(this,arguments)});try{return Object.defineProperty(T,u,{value:E}),T}catch{return E}}try{typeof d=="string"?l instanceof Array?(f.query.preparable={text:d,args:l},p=_(p)):(f.query.text=d,p?p=_(p):l=_(l)):(typeof d.name=="string"?f.query.plan=d.name:d.values instanceof Array?f.query.preparable={text:d.text,args:d.values}:f.query.text=d.text,p?p=_(p):l?l=_(l):d.callback=_(d.callback))}catch{return c.apply(this,arguments)}return arguments[0]=d,arguments[1]=l,arguments[2]=p,arguments.length=arguments.length>3?arguments.length:3,m=c.apply(this,arguments),m},i}function o(i,s){var c=i.Client.prototype.query,u="__diagnosticOriginalFunc";return i.Client.prototype.query=function(d,l,p){var f=this,g=!!p,m={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},_=process.hrtime(),E;function T(w){w&&w[u]&&(w=w[u]);var R=t.channel.bindToContext(function(I,H){var z=process.hrtime(_);if(m.result=H&&{rowCount:H.rowCount,command:H.command},m.error=I,m.duration=Math.ceil(z[0]*1e3+z[1]/1e6),t.channel.publish("postgres",m),I){if(w)return w.apply(this,arguments);E&&E instanceof r.EventEmitter&&E.emit("error",I)}else w&&w.apply(this,arguments)});try{return Object.defineProperty(R,u,{value:w}),R}catch{return w}}try{typeof d=="string"?l instanceof Array?(m.query.preparable={text:d,args:l},g=typeof p=="function",p=g?T(p):p):(m.query.text=d,p?(g=typeof p=="function",p=g?T(p):p):(g=typeof l=="function",l=g?T(l):l)):(typeof d.name=="string"?m.query.plan=d.name:d.values instanceof Array?m.query.preparable={text:d.text,args:d.values}:m.query.text=d.text,p?(g=typeof p=="function",p=T(p)):l?(g=typeof l=="function",l=g?T(l):l):(g=typeof d.callback=="function",d.callback=g?T(d.callback):d.callback))}catch{return c.apply(this,arguments)}return arguments[0]=d,arguments[1]=l,arguments[2]=p,arguments.length=arguments.length>3?arguments.length:3,E=c.apply(this,arguments),g?E:E.then(function(w){return T()(void 0,w),new f._Promise(function(R,I){R(w)})}).catch(function(w){return T()(w,void 0),new f._Promise(function(R,I){I(w)})})},i}e.postgres6={versionSpecifier:"6.*",patch:n},e.postgres7={versionSpecifier:">=7.* <=8.*",patch:o};function a(){t.channel.registerMonkeyPatch("pg",e.postgres6),t.channel.registerMonkeyPatch("pg",e.postgres7)}e.enable=a}),hy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.redis=void 0;var t=kt(),r=function(o){var a=o.RedisClient.prototype.internal_send_command;return o.RedisClient.prototype.internal_send_command=function(i){if(i){var s=i.callback;if(!s||!s.pubsubBound){var c=this.address,u=process.hrtime(),d=new Date;i.callback=t.channel.bindToContext(function(l,p){var f=process.hrtime(u),g=f[0]*1e3+f[1]/1e6|0;t.channel.publish("redis",{duration:g,address:c,commandObj:i,err:l,result:p,time:d}),typeof s=="function"&&s.apply(this,arguments)}),i.callback.pubsubBound=!0}}return a.call(this,i)},o};e.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:r};function n(){t.channel.registerMonkeyPatch("redis",e.redis)}e.enable=n}),gy=A(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(a){for(var i,s=1,c=arguments.length;s<c;s++){i=arguments[s];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(a[u]=i[u])}return a},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=void 0;var r=kt(),n=function(a){var i=a.Connection.prototype.makeRequest;return a.Connection.prototype.makeRequest=function(){function s(u){var d=process.hrtime(),l={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return r.channel.bindToContext(function(p,f,g){var m=process.hrtime(d);l=t(t({},l),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!p&&{rowCount:f,rows:g},query:{text:this.parametersByName.statement.value},error:p,duration:Math.ceil(m[0]*1e3+m[1]/1e6)}),r.channel.publish("tedious",l),u.call(this,p,f,g)})}var c=arguments[0];arguments[0].callback=s(c.callback),i.apply(this,arguments)},a};e.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:n};function o(){r.channel.registerMonkeyPatch("tedious",e.tedious)}e.enable=o}),my=A(e=>{"use strict";var t=e&&e.__extends||function(){var s=function(c,u){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,l){d.__proto__=l}||function(d,l){for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(d[p]=l[p])},s(c,u)};return function(c,u){s(c,u);function d(){this.constructor=c}c.prototype=u===null?Object.create(u):(d.prototype=u.prototype,new d)}}(),r=e&&e.__rest||function(s,c){var u={};for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&c.indexOf(d)<0&&(u[d]=s[d]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,d=Object.getOwnPropertySymbols(s);l<d.length;l++)c.indexOf(d[l])<0&&Object.prototype.propertyIsEnumerable.call(s,d[l])&&(u[d[l]]=s[d[l]]);return u};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.winston2=e.winston3=void 0;var n=kt(),o=function(s){var c=s.Logger.prototype.log,u,d=function(l,p,f){var g;return u===s.config.npm.levels?g="npm":u===s.config.syslog.levels?g="syslog":g="unknown",n.channel.publish("winston",{level:l,message:p,meta:f,levelKind:g}),p};return s.Logger.prototype.log=function(){return u=this.levels,!this.filters||this.filters.length===0?this.filters=[d]:this.filters[this.filters.length-1]!==d&&(this.filters=this.filters.filter(function(l){return l!==d}),this.filters.push(d)),c.apply(this,arguments)},s},a=function(s){var c=function(f,g){var m;return f.config.npm.levels[g]!=null?m="npm":f.config.syslog.levels[g]!=null?m="syslog":m="unknown",m},u=function(f){t(g,f);function g(m,_){var E=f.call(this,_)||this;return E.winston=m,E}return g.prototype.log=function(m,_){var E=m.message,T=m.level,w=m.meta,R=r(m,["message","level","meta"]);T=typeof Symbol.for=="function"?m[Symbol.for("level")]:T,E=m instanceof Error?m:E;var I=c(this.winston,T);w=w||{};for(var H in R)R.hasOwnProperty(H)&&(w[H]=R[H]);n.channel.publish("winston",{message:E,level:T,levelKind:I,meta:w}),_()},g}(s.Transport);function d(){var f=arguments[0].levels||s.config.npm.levels,g;for(var m in f)f.hasOwnProperty(m)&&(g=g===void 0||f[m]>f[g]?m:g);this.add(new u(s,{level:g}))}var l=s.createLogger;s.createLogger=function(){var f=arguments[0].levels||s.config.npm.levels,g;for(var m in f)f.hasOwnProperty(m)&&(g=g===void 0||f[m]>f[g]?m:g);var _=l.apply(this,arguments);_.add(new u(s,{level:g}));var E=_.configure;return _.configure=function(){E.apply(this,arguments),d.apply(this,arguments)},_};var p=s.configure;return s.configure=function(){p.apply(this,arguments),d.apply(this,arguments)},s.add(new u(s)),s};e.winston3={versionSpecifier:"3.x",patch:a},e.winston2={versionSpecifier:"2.x",patch:o};function i(){n.channel.registerMonkeyPatch("winston",e.winston2),n.channel.registerMonkeyPatch("winston",e.winston3)}e.enable=i}),vy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=e.pgPool=e.pg=e.winston=e.redis=e.mysql=e.mongodb=e.mongodbCore=e.console=e.bunyan=e.azuresdk=void 0;var t=sy();e.azuresdk=t;var r=ay();e.bunyan=r;var n=cy();e.console=n;var o=uy();e.mongodbCore=o;var a=ly();e.mongodb=a;var i=dy();e.mysql=i;var s=py();e.pgPool=s;var c=fy();e.pg=c;var u=hy();e.redis=u;var d=gy();e.tedious=d;var l=my();e.winston=l;function p(){r.enable(),n.enable(),o.enable(),a.enable(),i.enable(),c.enable(),s.enable(),u.enable(),l.enable(),t.enable(),d.enable()}e.enable=p}),na=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerContextPreservation=e.IsInitialized=void 0;var t=Gl(),r=Kt();e.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var n="DiagnosticChannel";if(e.IsInitialized){o=vy(),a=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",i=a.split(","),s={bunyan:o.bunyan,console:o.console,mongodb:o.mongodb,mongodbCore:o.mongodbCore,mysql:o.mysql,redis:o.redis,pg:o.pg,pgPool:o.pgPool,winston:o.winston,azuresdk:o.azuresdk};for(c in s)i.indexOf(c)===-1&&(s[c].enable(),r.info(n,"Subscribed to "+c+" events"));i.length>0&&r.info(n,"Some modules will not be patched",i)}else r.info(n,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var o,a,i,s,c;function u(d){if(e.IsInitialized){var l=kt();l.channel.addContextPreservation(d),l.channel.spanContextPropagator=t.AsyncScopeManager}}e.registerContextPreservation=u}),Di=A((e,t)=>{"use strict";t.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}}),wr=A((e,t)=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(d){for(var l,p=1,f=arguments.length;p<f;p++){l=arguments[p];for(var g in l)Object.prototype.hasOwnProperty.call(l,g)&&(d[g]=l[g])}return d},r.apply(this,arguments)},n=require("http"),o=require("https"),a=require("url"),i=require("constants"),s=Kt(),c=Di(),u=function(){function d(){}return d.getCookie=function(l,p){var f="";if(l&&l.length&&typeof p=="string")for(var g=l+"=",m=p.split(";"),_=0;_<m.length;_++){var p=m[_];if(p=d.trim(p),p&&p.indexOf(g)===0){f=p.substring(g.length,m[_].length);break}}return f},d.trim=function(l){return typeof l=="string"?l.replace(/^\s+|\s+$/g,""):""},d.int32ArrayToBase64=function(l){var p=function(E,T){return String.fromCharCode(E>>T&255)},f=function(E){return p(E,24)+p(E,16)+p(E,8)+p(E,0)},g=l.map(f).join(""),m=Buffer.from?Buffer.from(g,"binary"):new Buffer(g,"binary"),_=m.toString("base64");return _.substr(0,_.indexOf("="))},d.random32=function(){return 4294967296*Math.random()|0},d.randomu32=function(){return d.random32()+2147483648},d.w3cTraceId=function(){for(var l=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],p="",f,g=0;g<4;g++)f=d.random32(),p+=l[f&15]+l[f>>4&15]+l[f>>8&15]+l[f>>12&15]+l[f>>16&15]+l[f>>20&15]+l[f>>24&15]+l[f>>28&15];var m=l[8+Math.random()*4|0];return p.substr(0,8)+p.substr(9,4)+"4"+p.substr(13,3)+m+p.substr(16,3)+p.substr(19,12)},d.w3cSpanId=function(){return d.w3cTraceId().substring(16)},d.isValidW3CId=function(l){return l.length===32&&l!=="00000000000000000000000000000000"},d.isArray=function(l){return Object.prototype.toString.call(l)==="[object Array]"},d.isError=function(l){return l instanceof Error},d.isPrimitive=function(l){var p=typeof l;return p==="string"||p==="number"||p==="boolean"},d.isDate=function(l){return Object.prototype.toString.call(l)==="[object Date]"},d.msToTimeSpan=function(l){(isNaN(l)||l<0)&&(l=0);var p=(l/1e3%60).toFixed(7).replace(/0{0,4}$/,""),f=""+Math.floor(l/(1e3*60))%60,g=""+Math.floor(l/(1e3*60*60))%24,m=Math.floor(l/(1e3*60*60*24));p=p.indexOf(".")<2?"0"+p:p,f=f.length<2?"0"+f:f,g=g.length<2?"0"+g:g;var _=m>0?m+".":"";return _+g+":"+f+":"+p},d.extractError=function(l){var p=l;return{message:l.message,code:p.code||p.id||""}},d.extractObject=function(l){return l instanceof Error?d.extractError(l):typeof l.toJSON=="function"?l.toJSON():l},d.validateStringMap=function(l){if(typeof l!="object"){s.info("Invalid properties dropped from payload");return}var p={};for(var f in l){var g="",m=l[f],_=typeof m;if(d.isPrimitive(m))g=m.toString();else if(m===null||_==="undefined")g="";else if(_==="function"){s.info("key: "+f+" was function; will not serialize");continue}else{var E=d.isArray(m)?m:d.extractObject(m);try{d.isPrimitive(E)?g=E:g=JSON.stringify(E)}catch(T){g=m.constructor.name.toString()+" (Error: "+T.message+")",s.info("key: "+f+", could not be serialized")}}p[f]=g.substring(0,d.MAX_PROPERTY_LENGTH)}return p},d.canIncludeCorrelationHeader=function(l,p){var f=l&&l.config&&l.config.correlationHeaderExcludedDomains;if(!f||f.length==0||!p)return!0;for(var g=0;g<f.length;g++){var m=new RegExp(f[g].replace(/\./g,".").replace(/\*/g,".*"));if(m.test(a.parse(p).hostname))return!1}return!0},d.getCorrelationContextTarget=function(l,p){var f=l.headers&&l.headers[c.requestContextHeader];if(f)for(var g=f.split(","),m=0;m<g.length;++m){var _=g[m].split("=");if(_.length==2&&_[0]==p)return _[1]}},d.makeRequest=function(l,p,f,g){p&&p.indexOf("//")===0&&(p="https:"+p);var m=a.parse(p),_=r(r({},f),{host:m.hostname,port:m.port,path:m.pathname}),E=void 0;if(m.protocol==="https:"&&(E=l.proxyHttpsUrl||void 0),m.protocol==="http:"&&(E=l.proxyHttpUrl||void 0),E){E.indexOf("//")===0&&(E="http:"+E);var T=a.parse(E);T.protocol==="https:"?(s.info("Proxies that use HTTPS are not supported"),E=void 0):_=r(r({},_),{host:T.hostname,port:T.port||"80",path:p,headers:r(r({},_.headers),{Host:m.hostname})})}var w=m.protocol==="https:"&&!E;return w&&l.httpsAgent!==void 0?_.agent=l.httpsAgent:!w&&l.httpAgent!==void 0?_.agent=l.httpAgent:w&&(_.agent=d.tlsRestrictedAgent),w?o.request(_,g):n.request(_,g)},d.safeIncludeCorrelationHeader=function(l,p,f){var g;if(typeof f=="string")g=f;else if(f instanceof Array)g=f.join(",");else if(f&&typeof f.toString=="function")try{g=f.toString()}catch(m){s.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",m,f)}g?d.addCorrelationIdHeaderFromString(l,p,g):p.setHeader(c.requestContextHeader,c.requestContextSourceKey+"="+l.config.correlationId)},d.dumpObj=function(l){var p=Object.prototype.toString.call(l),f="";return p==="[object Error]"?f="{ stack: '"+l.stack+"', message: '"+l.message+"', name: '"+l.name+"'":f=JSON.stringify(l),p+f},d.addCorrelationIdHeaderFromString=function(l,p,f){var g=f.split(","),m=c.requestContextSourceKey+"=",_=g.some(function(E){return E.substring(0,m.length)===m});_||p.setHeader(c.requestContextHeader,f+","+c.requestContextSourceKey+"="+l.config.correlationId)},d.MAX_PROPERTY_LENGTH=8192,d.tlsRestrictedAgent=new o.Agent({keepAlive:!0,maxSockets:25,secureOptions:i.SSL_OP_NO_SSLv2|i.SSL_OP_NO_SSLv3|i.SSL_OP_NO_TLSv1|i.SSL_OP_NO_TLSv1_1}),d}();t.exports=u}),Yn=A((e,t)=>{"use strict";var r=wr(),n=Kt(),o=function(){function a(){}return a.queryCorrelationId=function(i,s){var c=i.profileQueryEndpoint+"/api/profiles/"+i.instrumentationKey+"/appId";if(a.completedLookups.hasOwnProperty(c)){s(a.completedLookups[c]);return}else if(a.pendingLookups[c]){a.pendingLookups[c].push(s);return}a.pendingLookups[c]=[s];var u=function(){if(a.pendingLookups[c]){var d={method:"GET",disableAppInsightsAutoCollection:!0};n.info(a.TAG,d);var l=r.makeRequest(i,c,d,function(p){if(p.statusCode===200){var f="";p.setEncoding("utf-8"),p.on("data",function(g){f+=g}),p.on("end",function(){n.info(a.TAG,f);var g=a.correlationIdPrefix+f;a.completedLookups[c]=g,a.pendingLookups[c]&&a.pendingLookups[c].forEach(function(m){return m(g)}),delete a.pendingLookups[c]})}else p.statusCode>=400&&p.statusCode<500?(a.completedLookups[c]=void 0,delete a.pendingLookups[c]):setTimeout(u,i.correlationIdRetryIntervalMs)});l&&(l.on("error",function(p){n.warn(a.TAG,p)}),l.end())}};setTimeout(u,0)},a.cancelCorrelationIdQuery=function(i,s){var c=i.profileQueryEndpoint+"/api/profiles/"+i.instrumentationKey+"/appId",u=a.pendingLookups[c];u&&(a.pendingLookups[c]=u.filter(function(d){return d!=s}),a.pendingLookups[c].length==0&&delete a.pendingLookups[c])},a.generateRequestId=function(i){if(i){i=i[0]=="|"?i:"|"+i,i[i.length-1]!=="."&&(i+=".");var s=(a.currentRootId++).toString(16);return a.appendSuffix(i,s,"_")}else return a.generateRootId()},a.getRootId=function(i){var s=i.indexOf(".");s<0&&(s=i.length);var c=i[0]==="|"?1:0;return i.substring(c,s)},a.generateRootId=function(){return"|"+r.w3cTraceId()+"."},a.appendSuffix=function(i,s,c){if(i.length+s.length<a.requestIdMaxLength)return i+s+c;var u=a.requestIdMaxLength-9;if(i.length>u)for(;u>1;--u){var d=i[u-1];if(d==="."||d==="_")break}if(u<=1)return a.generateRootId();for(s=r.randomu32().toString(16);s.length<8;)s="0"+s;return i.substring(0,u)+s+"#"},a.TAG="CorrelationIdManager",a.correlationIdPrefix="cid-v1:",a.w3cEnabled=!0,a.pendingLookups={},a.completedLookups={},a.requestIdMaxLength=1024,a.currentRootId=r.randomu32(),a}();t.exports=o}),Eo=A((e,t)=>{"use strict";var r=wr(),n=Yn(),o=function(){function a(i,s){if(this.traceFlag=a.DEFAULT_TRACE_FLAG,this.version=a.DEFAULT_VERSION,i&&typeof i=="string")if(i.split(",").length>1)this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16);else{var c=i.trim().split("-"),u=c.length;u>=4?(this.version=c[0],this.traceId=c[1],this.spanId=c[2],this.traceFlag=c[3]):(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=a.DEFAULT_VERSION,this.traceId=r.w3cTraceId()),this.version==="00"&&u!==4&&(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=a.DEFAULT_VERSION,this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=a.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=a.DEFAULT_TRACE_FLAG,this.traceId=r.w3cTraceId()),a.isValidTraceId(this.traceId)||(this.traceId=r.w3cTraceId()),a.isValidSpanId(this.spanId)||(this.spanId=r.w3cTraceId().substr(0,16),this.traceId=r.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(s){this.parentId=s.slice();var d=n.getRootId(s);a.isValidTraceId(d)||(this.legacyRootId=d,d=r.w3cTraceId()),s.indexOf("|")!==-1&&(s=s.substring(1+s.substring(0,s.length-1).lastIndexOf("."),s.length-1)),this.traceId=d,this.spanId=s}else this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)}return a.isValidTraceId=function(i){return i.match(/^[0-9a-f]{32}$/)&&i!=="00000000000000000000000000000000"},a.isValidSpanId=function(i){return i.match(/^[0-9a-f]{16}$/)&&i!=="0000000000000000"},a.formatOpenTelemetryTraceFlags=function(i){var s="0"+i.toString(16);return s.substring(s.length-2)},a.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},a.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},a.prototype.updateSpanId=function(){this.spanId=r.w3cTraceId().substr(0,16)},a.DEFAULT_TRACE_FLAG="01",a.DEFAULT_VERSION="00",a}();t.exports=o}),_d=A((e,t)=>{"use strict";var r=function(){function n(o){this.fieldmap=[],o&&(this.fieldmap=this.parseHeader(o))}return n.prototype.toString=function(){var o=this.fieldmap;return!o||o.length==0?null:o.join(", ")},n.validateKeyChars=function(o){var a=o.split("@");if(a.length==2){var i=a[0].trim(),s=a[1].trim(),c=Boolean(i.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),u=Boolean(s.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return c&&u}else if(a.length==1)return Boolean(o.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/));return!1},n.prototype.parseHeader=function(o){var a=[],i={},s=o.split(",");if(s.length>32)return null;for(var c=0,u=s;c<u.length;c++){var d=u[c],l=d.trim();if(l.length!==0){var p=l.split("=");if(p.length!==2||!n.validateKeyChars(p[0])||i[p[0]])return null;i[p[0]]=!0,a.push(l)}}return a},n.strict=!0,n}();t.exports=r}),on=A((e,t)=>{"use strict";var r=function(){function n(){}return n}();t.exports=r}),_y=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var a=function(i,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(c[d]=u[d])},a(i,s)};return function(i,s){a(i,s);function c(){this.constructor=i}i.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}}(),n=on(),o=function(a){r(i,a);function i(){var s=a.call(this)||this;return s.ver=2,s.properties={},s.measurements={},s}return i}(n);t.exports=o}),yd=A((e,t)=>{"use strict";var r=function(){function n(){}return n}();t.exports=r}),yy=A((e,t)=>{"use strict";var r=function(){function n(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return n}();t.exports=r}),Ey=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var a=function(i,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(c[d]=u[d])},a(i,s)};return function(i,s){a(i,s);function c(){this.constructor=i}i.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}}(),n=yd(),o=function(a){r(i,a);function i(){return a.call(this)||this}return i}(n);t.exports=o}),Ed=A((e,t)=>{"use strict";var r;(function(n){n[n.Measurement=0]="Measurement",n[n.Aggregation=1]="Aggregation"})(r||(r={})),t.exports=r}),by=A((e,t)=>{"use strict";var r=Ed(),n=function(){function o(){this.kind=r.Measurement}return o}();t.exports=n}),Cy=A((e,t)=>{"use strict";var r=function(){function n(){this.ver=1,this.sampleRate=100,this.tags={}}return n}();t.exports=r}),bd=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var a=function(i,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(c[d]=u[d])},a(i,s)};return function(i,s){a(i,s);function c(){this.constructor=i}i.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}}(),n=on(),o=function(a){r(i,a);function i(){var s=a.call(this)||this;return s.ver=2,s.properties={},s.measurements={},s}return i}(n);t.exports=o}),Ty=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var a=function(i,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(c[d]=u[d])},a(i,s)};return function(i,s){a(i,s);function c(){this.constructor=i}i.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}}(),n=on(),o=function(a){r(i,a);function i(){var s=a.call(this)||this;return s.ver=2,s.exceptions=[],s.properties={},s.measurements={},s}return i}(n);t.exports=o}),Sy=A((e,t)=>{"use strict";var r=function(){function n(){this.hasFullStack=!0,this.parsedStack=[]}return n}();t.exports=r}),Ry=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var a=function(i,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(c[d]=u[d])},a(i,s)};return function(i,s){a(i,s);function c(){this.constructor=i}i.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}}(),n=on(),o=function(a){r(i,a);function i(){var s=a.call(this)||this;return s.ver=2,s.properties={},s}return i}(n);t.exports=o}),wy=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var a=function(i,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(c[d]=u[d])},a(i,s)};return function(i,s){a(i,s);function c(){this.constructor=i}i.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}}(),n=on(),o=function(a){r(i,a);function i(){var s=a.call(this)||this;return s.ver=2,s.metrics=[],s.properties={},s}return i}(n);t.exports=o}),Py=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var a=function(i,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(c[d]=u[d])},a(i,s)};return function(i,s){a(i,s);function c(){this.constructor=i}i.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}}(),n=bd(),o=function(a){r(i,a);function i(){var s=a.call(this)||this;return s.ver=2,s.properties={},s.measurements={},s}return i}(n);t.exports=o}),Oy=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var a=function(i,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(c[d]=u[d])},a(i,s)};return function(i,s){a(i,s);function c(){this.constructor=i}i.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}}(),n=on(),o=function(a){r(i,a);function i(){var s=a.call(this)||this;return s.ver=2,s.success=!0,s.properties={},s.measurements={},s}return i}(n);t.exports=o}),Iy=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var a=function(i,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(c[d]=u[d])},a(i,s)};return function(i,s){a(i,s);function c(){this.constructor=i}i.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}}(),n=on(),o=function(a){r(i,a);function i(){var s=a.call(this)||this;return s.ver=2,s.properties={},s.measurements={},s}return i}(n);t.exports=o}),Dy=A((e,t)=>{"use strict";var r;(function(n){n[n.Verbose=0]="Verbose",n[n.Information=1]="Information",n[n.Warning=2]="Warning",n[n.Error=3]="Error",n[n.Critical=4]="Critical"})(r||(r={})),t.exports=r}),Ay=A((e,t)=>{"use strict";var r=function(){function n(){}return n}();t.exports=r}),Cd=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AvailabilityData=_y(),e.Base=yd(),e.ContextTagKeys=yy(),e.Data=Ey(),e.DataPoint=by(),e.DataPointType=Ed(),e.Domain=on(),e.Envelope=Cy(),e.EventData=bd(),e.ExceptionData=Ty(),e.ExceptionDetails=Sy(),e.MessageData=Ry(),e.MetricData=wy(),e.PageViewData=Py(),e.RemoteDependencyData=Oy(),e.RequestData=Iy(),e.SeverityLevel=Dy(),e.StackFrame=Ay()}),xy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.domainSupportsProperties=e.RemoteDependencyDataConstants=void 0;var t=Cd(),r=function(){function o(){}return o.TYPE_HTTP="Http",o.TYPE_AI="Http (tracked component)",o}();e.RemoteDependencyDataConstants=r;function n(o){return"properties"in o||o instanceof t.EventData||o instanceof t.ExceptionData||o instanceof t.MessageData||o instanceof t.MetricData||o instanceof t.PageViewData||o instanceof t.RemoteDependencyData||o instanceof t.RequestData}e.domainSupportsProperties=n}),Ny=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),ky=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),My=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),qy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Ly=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),jy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Fy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Hy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),$y=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Uy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),By=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Vy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Gy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryType=e.TelemetryTypeString=e.baseTypeToTelemetryType=e.telemetryTypeToBaseType=void 0;function t(o){switch(o){case n.Event:return"EventData";case n.Exception:return"ExceptionData";case n.Trace:return"MessageData";case n.Metric:return"MetricData";case n.Request:return"RequestData";case n.Dependency:return"RemoteDependencyData";case n.Availability:return"AvailabilityData";case n.PageView:return"PageViewData"}}e.telemetryTypeToBaseType=t;function r(o){switch(o){case"EventData":return n.Event;case"ExceptionData":return n.Exception;case"MessageData":return n.Trace;case"MetricData":return n.Metric;case"RequestData":return n.Request;case"RemoteDependencyData":return n.Dependency;case"AvailabilityData":return n.Availability;case"PageViewData":return n.PageView}}e.baseTypeToTelemetryType=r,e.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var n;(function(o){o[o.Event=0]="Event",o[o.Exception=1]="Exception",o[o.Trace=2]="Trace",o[o.Metric=3]="Metric",o[o.Request=4]="Request",o[o.Dependency=5]="Dependency",o[o.Availability=6]="Availability",o[o.PageView=7]="PageView"})(n=e.TelemetryType||(e.TelemetryType={}))}),Wy=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(Ny(),e),r(ky(),e),r(My(),e),r(qy(),e),r(Ly(),e),r(jy(),e),r(Fy(),e),r(Hy(),e),r($y(),e),r(Uy(),e),r(By(),e),r(Vy(),e),r(Gy(),e)}),Ky=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),zy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Xy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Yy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Qy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Jy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Zy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),eE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),tE=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(Ky(),e),r(zy(),e),r(Xy(),e),r(Yy(),e),r(Qy(),e),r(Jy(),e),r(Zy(),e),r(eE(),e)}),fr=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(xy(),e),r(Cd(),e),r(Wy(),e),r(tE(),e)}),Td=A((e,t)=>{"use strict";var r=function(){function n(){}return n.prototype.getUrl=function(){return this.url},n.prototype.RequestParser=function(){this.startTime=+new Date},n.prototype._setStatus=function(o,a){var i=+new Date;this.duration=i-this.startTime,this.statusCode=o;var s=this.properties||{};if(a){if(typeof a=="string")s.error=a;else if(a instanceof Error)s.error=a.message;else if(typeof a=="object")for(var c in a)s[c]=a[c]&&a[c].toString&&a[c].toString()}this.properties=s},n.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},n}();t.exports=r}),Sd=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var p=function(f,g){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,_){m.__proto__=_}||function(m,_){for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(m[E]=_[E])},p(f,g)};return function(f,g){p(f,g);function m(){this.constructor=f}f.prototype=g===null?Object.create(g):(m.prototype=g.prototype,new m)}}(),n=require("url"),o=fr(),a=wr(),i=Di(),s=Td(),c=Yn(),u=_d(),d=Eo(),l=function(p){r(f,p);function f(g,m){var _=p.call(this)||this;return g&&(_.method=g.method,_.url=_._getAbsoluteUrl(g),_.startTime=+new Date,_.socketRemoteAddress=g.socket&&g.socket.remoteAddress,_.parseHeaders(g,m),g.connection&&(_.connectionRemoteAddress=g.connection.remoteAddress,_.legacySocketRemoteAddress=g.connection.socket&&g.connection.socket.remoteAddress)),_}return f.prototype.onError=function(g,m){this._setStatus(void 0,g),m&&(this.duration=m)},f.prototype.onResponse=function(g,m){this._setStatus(g.statusCode,void 0),m&&(this.duration=m)},f.prototype.getRequestTelemetry=function(g){var m={id:this.requestId,name:this.method+" "+n.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(g&&g.time?m.time=g.time:this.startTime&&(m.time=new Date(this.startTime)),g){for(var _ in g)m[_]||(m[_]=g[_]);if(g.properties)for(var _ in g.properties)m.properties[_]=g.properties[_]}return m},f.prototype.getRequestTags=function(g){var m={};for(var _ in g)m[_]=g[_];return m[f.keys.locationIp]=g[f.keys.locationIp]||this._getIp(),m[f.keys.sessionId]=g[f.keys.sessionId]||this._getId("ai_session"),m[f.keys.userId]=g[f.keys.userId]||this._getId("ai_user"),m[f.keys.userAuthUserId]=g[f.keys.userAuthUserId]||this._getId("ai_authUser"),m[f.keys.operationName]=this.getOperationName(g),m[f.keys.operationParentId]=this.getOperationParentId(g),m[f.keys.operationId]=this.getOperationId(g),m},f.prototype.getOperationId=function(g){return g[f.keys.operationId]||this.operationId},f.prototype.getOperationParentId=function(g){return g[f.keys.operationParentId]||this.parentId||this.getOperationId(g)},f.prototype.getOperationName=function(g){return g[f.keys.operationName]||this.method+" "+n.parse(this.url).pathname},f.prototype.getRequestId=function(){return this.requestId},f.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},f.prototype.getTraceparent=function(){return this.traceparent},f.prototype.getTracestate=function(){return this.tracestate},f.prototype.getLegacyRootId=function(){return this.legacyRootId},f.prototype._getAbsoluteUrl=function(g){if(!g.headers)return g.url;var m=g.connection?g.connection.encrypted:null,_=n.parse(g.url),E=_.pathname,T=_.search,w=m||g.headers["x-forwarded-proto"]=="https"?"https":"http",R=n.format({protocol:w,host:g.headers.host,pathname:E,search:T});return R},f.prototype._getIp=function(){var g=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,m=function(E){var T=g.exec(E);if(T)return T[0]},_=m(this.rawHeaders["x-forwarded-for"])||m(this.rawHeaders["x-client-ip"])||m(this.rawHeaders["x-real-ip"])||m(this.connectionRemoteAddress)||m(this.socketRemoteAddress)||m(this.legacySocketRemoteAddress);return!_&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(_="127.0.0.1"),_},f.prototype._getId=function(g){var m=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",_=f.parseId(a.getCookie(g,m));return _},f.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},f.prototype.parseHeaders=function(g,m){if(this.rawHeaders=g.headers||g.rawHeaders,this.userAgent=g.headers&&g.headers["user-agent"],this.sourceCorrelationId=a.getCorrelationContextTarget(g,i.requestContextSourceKey),g.headers){var _=g.headers[i.traceStateHeader]?g.headers[i.traceStateHeader].toString():null,E=g.headers[i.traceparentHeader]?g.headers[i.traceparentHeader].toString():null,T=g.headers[i.requestIdHeader]?g.headers[i.requestIdHeader].toString():null,w=g.headers[i.parentIdHeader]?g.headers[i.parentIdHeader].toString():null,R=g.headers[i.rootIdHeader]?g.headers[i.rootIdHeader].toString():null;this.correlationContextHeader=g.headers[i.correlationContextHeader]?g.headers[i.correlationContextHeader].toString():null,c.w3cEnabled&&(E||_)?(this.traceparent=new d(E?E.toString():null),this.tracestate=E&&_&&new u(_?_.toString():null),this.setBackCompatFromThisTraceContext()):T?c.w3cEnabled?(this.traceparent=new d(null,T),this.setBackCompatFromThisTraceContext()):(this.parentId=T,this.requestId=c.generateRequestId(this.parentId),this.operationId=c.getRootId(this.requestId)):c.w3cEnabled?(this.traceparent=new d,this.traceparent.parentId=w,this.traceparent.legacyRootId=R||w,this.setBackCompatFromThisTraceContext()):(this.parentId=w,this.requestId=c.generateRequestId(R||this.parentId),this.correlationContextHeader=null,this.operationId=c.getRootId(this.requestId)),m&&(this.requestId=m,this.operationId=c.getRootId(this.requestId))}},f.parseId=function(g){var m=g.split("|");return m.length>0?m[0]:""},f.keys=new o.ContextTagKeys,f}(s);t.exports=l}),rE=A((e,t)=>{e=t.exports=re;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var h=Array.prototype.slice.call(arguments,0);h.unshift("SEMVER"),console.log.apply(console,h)}:r=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,a=16,i=e.re=[],s=e.src=[],c=0,u=c++;s[u]="0|[1-9]\\d*";var d=c++;s[d]="[0-9]+";var l=c++;s[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=c++;s[p]="("+s[u]+")\\.("+s[u]+")\\.("+s[u]+")";var f=c++;s[f]="("+s[d]+")\\.("+s[d]+")\\.("+s[d]+")";var g=c++;s[g]="(?:"+s[u]+"|"+s[l]+")";var m=c++;s[m]="(?:"+s[d]+"|"+s[l]+")";var _=c++;s[_]="(?:-("+s[g]+"(?:\\."+s[g]+")*))";var E=c++;s[E]="(?:-?("+s[m]+"(?:\\."+s[m]+")*))";var T=c++;s[T]="[0-9A-Za-z-]+";var w=c++;s[w]="(?:\\+("+s[T]+"(?:\\."+s[T]+")*))";var R=c++,I="v?"+s[p]+s[_]+"?"+s[w]+"?";s[R]="^"+I+"$";var H="[v=\\s]*"+s[f]+s[E]+"?"+s[w]+"?",z=c++;s[z]="^"+H+"$";var K=c++;s[K]="((?:<|>)?=?)";var J=c++;s[J]=s[d]+"|x|X|\\*";var te=c++;s[te]=s[u]+"|x|X|\\*";var U=c++;s[U]="[v=\\s]*("+s[te]+")(?:\\.("+s[te]+")(?:\\.("+s[te]+")(?:"+s[_]+")?"+s[w]+"?)?)?";var V=c++;s[V]="[v=\\s]*("+s[J]+")(?:\\.("+s[J]+")(?:\\.("+s[J]+")(?:"+s[E]+")?"+s[w]+"?)?)?";var Q=c++;s[Q]="^"+s[K]+"\\s*"+s[U]+"$";var ne=c++;s[ne]="^"+s[K]+"\\s*"+s[V]+"$";var ve=c++;s[ve]="(?:^|[^\\d])(\\d{1,"+a+"})(?:\\.(\\d{1,"+a+"}))?(?:\\.(\\d{1,"+a+"}))?(?:$|[^\\d])";var de=c++;s[de]="(?:~>?)";var X=c++;s[X]="(\\s*)"+s[de]+"\\s+",i[X]=new RegExp(s[X],"g");var ce="$1~",ie=c++;s[ie]="^"+s[de]+s[U]+"$";var pe=c++;s[pe]="^"+s[de]+s[V]+"$";var he=c++;s[he]="(?:\\^)";var be=c++;s[be]="(\\s*)"+s[he]+"\\s+",i[be]=new RegExp(s[be],"g");var _e="$1^",Ue=c++;s[Ue]="^"+s[he]+s[U]+"$";var Qe=c++;s[Qe]="^"+s[he]+s[V]+"$";var Ke=c++;s[Ke]="^"+s[K]+"\\s*("+H+")$|^$";var je=c++;s[je]="^"+s[K]+"\\s*("+I+")$|^$";var xe=c++;s[xe]="(\\s*)"+s[K]+"\\s*("+H+"|"+s[U]+")",i[xe]=new RegExp(s[xe],"g");var it="$1$2$3",lt=c++;s[lt]="^\\s*("+s[U]+")\\s+-\\s+("+s[U]+")\\s*$";var Oe=c++;s[Oe]="^\\s*("+s[V]+")\\s+-\\s+("+s[V]+")\\s*$";var me=c++;for(s[me]="(<|>)?=?\\s*\\*",Ae=0;Ae<c;Ae++)r(Ae,s[Ae]),i[Ae]||(i[Ae]=new RegExp(s[Ae]));var Ae;e.parse=ke;function ke(h,v){if((!v||typeof v!="object")&&(v={loose:!!v,includePrerelease:!1}),h instanceof re)return h;if(typeof h!="string"||h.length>n)return null;var C=v.loose?i[z]:i[R];if(!C.test(h))return null;try{return new re(h,v)}catch{return null}}e.valid=ir;function ir(h,v){var C=ke(h,v);return C?C.version:null}e.clean=ct;function ct(h,v){var C=ke(h.trim().replace(/^[=v]+/,""),v);return C?C.version:null}e.SemVer=re;function re(h,v){if((!v||typeof v!="object")&&(v={loose:!!v,includePrerelease:!1}),h instanceof re){if(h.loose===v.loose)return h;h=h.version}else if(typeof h!="string")throw new TypeError("Invalid Version: "+h);if(h.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof re))return new re(h,v);r("SemVer",h,v),this.options=v,this.loose=!!v.loose;var C=h.trim().match(v.loose?i[z]:i[R]);if(!C)throw new TypeError("Invalid Version: "+h);if(this.raw=h,this.major=+C[1],this.minor=+C[2],this.patch=+C[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");C[4]?this.prerelease=C[4].split(".").map(function(D){if(/^[0-9]+$/.test(D)){var k=+D;if(k>=0&&k<o)return k}return D}):this.prerelease=[],this.build=C[5]?C[5].split("."):[],this.format()}re.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},re.prototype.toString=function(){return this.version},re.prototype.compare=function(h){return r("SemVer.compare",this.version,this.options,h),h instanceof re||(h=new re(h,this.options)),this.compareMain(h)||this.comparePre(h)},re.prototype.compareMain=function(h){return h instanceof re||(h=new re(h,this.options)),tt(this.major,h.major)||tt(this.minor,h.minor)||tt(this.patch,h.patch)},re.prototype.comparePre=function(h){if(h instanceof re||(h=new re(h,this.options)),this.prerelease.length&&!h.prerelease.length)return-1;if(!this.prerelease.length&&h.prerelease.length)return 1;if(!this.prerelease.length&&!h.prerelease.length)return 0;var v=0;do{var C=this.prerelease[v],D=h.prerelease[v];if(r("prerelease compare",v,C,D),C===void 0&&D===void 0)return 0;if(D===void 0)return 1;if(C===void 0)return-1;if(C!==D)return tt(C,D)}while(++v)},re.prototype.inc=function(h,v){switch(h){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",v);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",v);break;case"prepatch":this.prerelease.length=0,this.inc("patch",v),this.inc("pre",v);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",v),this.inc("pre",v);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var C=this.prerelease.length;--C>=0;)typeof this.prerelease[C]=="number"&&(this.prerelease[C]++,C=-2);C===-1&&this.prerelease.push(0)}v&&(this.prerelease[0]===v?isNaN(this.prerelease[1])&&(this.prerelease=[v,0]):this.prerelease=[v,0]);break;default:throw new Error("invalid increment argument: "+h)}return this.format(),this.raw=this.version,this},e.inc=er;function er(h,v,C,D){typeof C=="string"&&(D=C,C=void 0);try{return new re(h,C).inc(v,D).version}catch{return null}}e.diff=or;function or(h,v){if(L(h,v))return null;var C=ke(h),D=ke(v),k="";if(C.prerelease.length||D.prerelease.length){k="pre";var $="prerelease"}for(var W in C)if((W==="major"||W==="minor"||W==="patch")&&C[W]!==D[W])return k+W;return $}e.compareIdentifiers=tt;var gt=/^[0-9]+$/;function tt(h,v){var C=gt.test(h),D=gt.test(v);return C&&D&&(h=+h,v=+v),h===v?0:C&&!D?-1:D&&!C?1:h<v?-1:1}e.rcompareIdentifiers=xt;function xt(h,v){return tt(v,h)}e.major=dt;function dt(h,v){return new re(h,v).major}e.minor=Ht;function Ht(h,v){return new re(h,v).minor}e.patch=Pt;function Pt(h,v){return new re(h,v).patch}e.compare=M;function M(h,v,C){return new re(h,C).compare(new re(v,C))}e.compareLoose=N;function N(h,v){return M(h,v,!0)}e.rcompare=P;function P(h,v,C){return M(v,h,C)}e.sort=q;function q(h,v){return h.sort(function(C,D){return e.compare(C,D,v)})}e.rsort=F;function F(h,v){return h.sort(function(C,D){return e.rcompare(C,D,v)})}e.gt=y;function y(h,v,C){return M(h,v,C)>0}e.lt=b;function b(h,v,C){return M(h,v,C)<0}e.eq=L;function L(h,v,C){return M(h,v,C)===0}e.neq=G;function G(h,v,C){return M(h,v,C)!==0}e.gte=ue;function ue(h,v,C){return M(h,v,C)>=0}e.lte=fe;function fe(h,v,C){return M(h,v,C)<=0}e.cmp=Re;function Re(h,v,C,D){switch(v){case"===":return typeof h=="object"&&(h=h.version),typeof C=="object"&&(C=C.version),h===C;case"!==":return typeof h=="object"&&(h=h.version),typeof C=="object"&&(C=C.version),h!==C;case"":case"=":case"==":return L(h,C,D);case"!=":return G(h,C,D);case">":return y(h,C,D);case">=":return ue(h,C,D);case"<":return b(h,C,D);case"<=":return fe(h,C,D);default:throw new TypeError("Invalid operator: "+v)}}e.Comparator=ye;function ye(h,v){if((!v||typeof v!="object")&&(v={loose:!!v,includePrerelease:!1}),h instanceof ye){if(h.loose===!!v.loose)return h;h=h.value}if(!(this instanceof ye))return new ye(h,v);r("comparator",h,v),this.options=v,this.loose=!!v.loose,this.parse(h),this.semver===Fe?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var Fe={};ye.prototype.parse=function(h){var v=this.options.loose?i[Ke]:i[je],C=h.match(v);if(!C)throw new TypeError("Invalid comparator: "+h);this.operator=C[1],this.operator==="="&&(this.operator=""),C[2]?this.semver=new re(C[2],this.options.loose):this.semver=Fe},ye.prototype.toString=function(){return this.value},ye.prototype.test=function(h){return r("Comparator.test",h,this.options.loose),this.semver===Fe?!0:(typeof h=="string"&&(h=new re(h,this.options)),Re(h,this.operator,this.semver,this.options))},ye.prototype.intersects=function(h,v){if(!(h instanceof ye))throw new TypeError("a Comparator is required");(!v||typeof v!="object")&&(v={loose:!!v,includePrerelease:!1});var C;if(this.operator==="")return C=new le(h.value,v),yt(this.value,C,v);if(h.operator==="")return C=new le(this.value,v),yt(h.semver,C,v);var D=(this.operator===">="||this.operator===">")&&(h.operator===">="||h.operator===">"),k=(this.operator==="<="||this.operator==="<")&&(h.operator==="<="||h.operator==="<"),$=this.semver.version===h.semver.version,W=(this.operator===">="||this.operator==="<=")&&(h.operator===">="||h.operator==="<="),se=Re(this.semver,"<",h.semver,v)&&(this.operator===">="||this.operator===">")&&(h.operator==="<="||h.operator==="<"),oe=Re(this.semver,">",h.semver,v)&&(this.operator==="<="||this.operator==="<")&&(h.operator===">="||h.operator===">");return D||k||$&&W||se||oe},e.Range=le;function le(h,v){if((!v||typeof v!="object")&&(v={loose:!!v,includePrerelease:!1}),h instanceof le)return h.loose===!!v.loose&&h.includePrerelease===!!v.includePrerelease?h:new le(h.raw,v);if(h instanceof ye)return new le(h.value,v);if(!(this instanceof le))return new le(h,v);if(this.options=v,this.loose=!!v.loose,this.includePrerelease=!!v.includePrerelease,this.raw=h,this.set=h.split(/\s*\|\|\s*/).map(function(C){return this.parseRange(C.trim())},this).filter(function(C){return C.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+h);this.format()}le.prototype.format=function(){return this.range=this.set.map(function(h){return h.join(" ").trim()}).join("||").trim(),this.range},le.prototype.toString=function(){return this.range},le.prototype.parseRange=function(h){var v=this.options.loose;h=h.trim();var C=v?i[Oe]:i[lt];h=h.replace(C,Be),r("hyphen replace",h),h=h.replace(i[xe],it),r("comparator trim",h,i[xe]),h=h.replace(i[X],ce),h=h.replace(i[be],_e),h=h.split(/\s+/).join(" ");var D=v?i[Ke]:i[je],k=h.split(" ").map(function($){return Nt($,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(k=k.filter(function($){return!!$.match(D)})),k=k.map(function($){return new ye($,this.options)},this),k},le.prototype.intersects=function(h,v){if(!(h instanceof le))throw new TypeError("a Range is required");return this.set.some(function(C){return C.every(function(D){return h.set.some(function(k){return k.every(function($){return D.intersects($,v)})})})})},e.toComparators=Me;function Me(h,v){return new le(h,v).set.map(function(C){return C.map(function(D){return D.value}).join(" ").trim().split(" ")})}function Nt(h,v){return r("comp",h,v),h=Gr(h,v),r("caret",h),h=$t(h,v),r("tildes",h),h=S(h,v),r("xrange",h),h=ge(h,v),r("stars",h),h}function De(h){return!h||h.toLowerCase()==="x"||h==="*"}function $t(h,v){return h.trim().split(/\s+/).map(function(C){return Vr(C,v)}).join(" ")}function Vr(h,v){var C=v.loose?i[pe]:i[ie];return h.replace(C,function(D,k,$,W,se){r("tilde",h,D,k,$,W,se);var oe;return De(k)?oe="":De($)?oe=">="+k+".0.0 <"+(+k+1)+".0.0":De(W)?oe=">="+k+"."+$+".0 <"+k+"."+(+$+1)+".0":se?(r("replaceTilde pr",se),oe=">="+k+"."+$+"."+W+"-"+se+" <"+k+"."+(+$+1)+".0"):oe=">="+k+"."+$+"."+W+" <"+k+"."+(+$+1)+".0",r("tilde return",oe),oe})}function Gr(h,v){return h.trim().split(/\s+/).map(function(C){return Wr(C,v)}).join(" ")}function Wr(h,v){r("caret",h,v);var C=v.loose?i[Qe]:i[Ue];return h.replace(C,function(D,k,$,W,se){r("caret",h,D,k,$,W,se);var oe;return De(k)?oe="":De($)?oe=">="+k+".0.0 <"+(+k+1)+".0.0":De(W)?k==="0"?oe=">="+k+"."+$+".0 <"+k+"."+(+$+1)+".0":oe=">="+k+"."+$+".0 <"+(+k+1)+".0.0":se?(r("replaceCaret pr",se),k==="0"?$==="0"?oe=">="+k+"."+$+"."+W+"-"+se+" <"+k+"."+$+"."+(+W+1):oe=">="+k+"."+$+"."+W+"-"+se+" <"+k+"."+(+$+1)+".0":oe=">="+k+"."+$+"."+W+"-"+se+" <"+(+k+1)+".0.0"):(r("no pr"),k==="0"?$==="0"?oe=">="+k+"."+$+"."+W+" <"+k+"."+$+"."+(+W+1):oe=">="+k+"."+$+"."+W+" <"+k+"."+(+$+1)+".0":oe=">="+k+"."+$+"."+W+" <"+(+k+1)+".0.0"),r("caret return",oe),oe})}function S(h,v){return r("replaceXRanges",h,v),h.split(/\s+/).map(function(C){return Z(C,v)}).join(" ")}function Z(h,v){h=h.trim();var C=v.loose?i[ne]:i[Q];return h.replace(C,function(D,k,$,W,se,oe){r("xRange",h,D,k,$,W,se,oe);var Ze=De($),Xe=Ze||De(W),Ve=Xe||De(se),Le=Ve;return k==="="&&Le&&(k=""),Ze?k===">"||k==="<"?D="<0.0.0":D="*":k&&Le?(Xe&&(W=0),se=0,k===">"?(k=">=",Xe?($=+$+1,W=0,se=0):(W=+W+1,se=0)):k==="<="&&(k="<",Xe?$=+$+1:W=+W+1),D=k+$+"."+W+"."+se):Xe?D=">="+$+".0.0 <"+(+$+1)+".0.0":Ve&&(D=">="+$+"."+W+".0 <"+$+"."+(+W+1)+".0"),r("xRange return",D),D})}function ge(h,v){return r("replaceStars",h,v),h.trim().replace(i[me],"")}function Be(h,v,C,D,k,$,W,se,oe,Ze,Xe,Ve,Le){return De(C)?v="":De(D)?v=">="+C+".0.0":De(k)?v=">="+C+"."+D+".0":v=">="+v,De(oe)?se="":De(Ze)?se="<"+(+oe+1)+".0.0":De(Xe)?se="<"+oe+"."+(+Ze+1)+".0":Ve?se="<="+oe+"."+Ze+"."+Xe+"-"+Ve:se="<="+se,(v+" "+se).trim()}le.prototype.test=function(h){if(!h)return!1;typeof h=="string"&&(h=new re(h,this.options));for(var v=0;v<this.set.length;v++)if(Ye(this.set[v],h,this.options))return!0;return!1};function Ye(h,v,C){for(var D=0;D<h.length;D++)if(!h[D].test(v))return!1;if(v.prerelease.length&&!C.includePrerelease){for(D=0;D<h.length;D++)if(r(h[D].semver),h[D].semver!==Fe&&h[D].semver.prerelease.length>0){var k=h[D].semver;if(k.major===v.major&&k.minor===v.minor&&k.patch===v.patch)return!0}return!1}return!0}e.satisfies=yt;function yt(h,v,C){try{v=new le(v,C)}catch{return!1}return v.test(h)}e.maxSatisfying=pr;function pr(h,v,C){var D=null,k=null;try{var $=new le(v,C)}catch{return null}return h.forEach(function(W){$.test(W)&&(!D||k.compare(W)===-1)&&(D=W,k=new re(D,C))}),D}e.minSatisfying=Cn;function Cn(h,v,C){var D=null,k=null;try{var $=new le(v,C)}catch{return null}return h.forEach(function(W){$.test(W)&&(!D||k.compare(W)===1)&&(D=W,k=new re(D,C))}),D}e.minVersion=Tr;function Tr(h,v){h=new le(h,v);var C=new re("0.0.0");if(h.test(C)||(C=new re("0.0.0-0"),h.test(C)))return C;C=null;for(var D=0;D<h.set.length;++D){var k=h.set[D];k.forEach(function($){var W=new re($.semver.version);switch($.operator){case">":W.prerelease.length===0?W.patch++:W.prerelease.push(0),W.raw=W.format();case"":case">=":(!C||y(C,W))&&(C=W);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+$.operator)}})}return C&&h.test(C)?C:null}e.validRange=Tn;function Tn(h,v){try{return new le(h,v).range||"*"}catch{return null}}e.ltr=Sn;function Sn(h,v,C){return mr(h,v,"<",C)}e.gtr=Rn;function Rn(h,v,C){return mr(h,v,">",C)}e.outside=mr;function mr(h,v,C,D){h=new re(h,D),v=new le(v,D);var k,$,W,se,oe;switch(C){case">":k=y,$=fe,W=b,se=">",oe=">=";break;case"<":k=b,$=ue,W=y,se="<",oe="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(yt(h,v,D))return!1;for(var Ze=0;Ze<v.set.length;++Ze){var Xe=v.set[Ze],Ve=null,Le=null;if(Xe.forEach(function(pt){pt.semver===Fe&&(pt=new ye(">=0.0.0")),Ve=Ve||pt,Le=Le||pt,k(pt.semver,Ve.semver,D)?Ve=pt:W(pt.semver,Le.semver,D)&&(Le=pt)}),Ve.operator===se||Ve.operator===oe||(!Le.operator||Le.operator===se)&&$(h,Le.semver)||Le.operator===oe&&W(h,Le.semver))return!1}return!0}e.prerelease=wn;function wn(h,v){var C=ke(h,v);return C&&C.prerelease.length?C.prerelease:null}e.intersects=Sr;function Sr(h,v,C){return h=new le(h,C),v=new le(v,C),h.intersects(v)}e.coerce=Pn;function Pn(h){if(h instanceof re)return h;if(typeof h!="string")return null;var v=h.match(i[ve]);return v==null?null:ke(v[1]+"."+(v[2]||"0")+"."+(v[3]||"0"))}}),ia=A((e,t)=>{"use strict";function r(d){return typeof d=="function"}var n=console.error.bind(console);function o(d,l,p){var f=!!d[l]&&d.propertyIsEnumerable(l);Object.defineProperty(d,l,{configurable:!0,enumerable:f,writable:!0,value:p})}function a(d){d&&d.logger&&(r(d.logger)?n=d.logger:n("new logger isn't a function, not replacing"))}function i(d,l,p){if(!d||!d[l]){n("no original function "+l+" to wrap");return}if(!p){n("no wrapper function"),n(new Error().stack);return}if(!r(d[l])||!r(p)){n("original object and wrapper must be functions");return}var f=d[l],g=p(f,l);return o(g,"__original",f),o(g,"__unwrap",function(){d[l]===g&&o(d,l,f)}),o(g,"__wrapped",!0),o(d,l,g),g}function s(d,l,p){if(d)Array.isArray(d)||(d=[d]);else{n("must provide one or more modules to patch"),n(new Error().stack);return}if(!(l&&Array.isArray(l))){n("must provide one or more functions to wrap on modules");return}d.forEach(function(f){l.forEach(function(g){i(f,g,p)})})}function c(d,l){if(!d||!d[l]){n("no function to unwrap."),n(new Error().stack);return}if(!d[l].__unwrap)n("no original to unwrap to -- has "+l+" already been unwrapped?");else return d[l].__unwrap()}function u(d,l){if(d)Array.isArray(d)||(d=[d]);else{n("must provide one or more modules to patch"),n(new Error().stack);return}if(!(l&&Array.isArray(l))){n("must provide one or more functions to unwrap on modules");return}d.forEach(function(p){l.forEach(function(f){c(p,f)})})}a.wrap=i,a.massWrap=s,a.unwrap=c,a.massUnwrap=u,t.exports=a}),oa=A((e,t)=>{"use strict";var r=ia(),n=r.wrap,o=r.unwrap,a="wrap@before";function i(l,p,f){var g=!!l[p]&&l.propertyIsEnumerable(p);Object.defineProperty(l,p,{configurable:!0,enumerable:g,writable:!0,value:f})}function s(l,p){for(var f=p.length,g=0;g<f;g++){var m=p[g],_=l[a];if(typeof _=="function")_(m);else if(Array.isArray(_))for(var E=_.length,T=0;T<E;T++)_[T](m)}}function c(l,p){var f;return f=l._events&&l._events[p],Array.isArray(f)||(f?f=[f]:f=[]),f}function u(l,p,f){var g=c(l,p),m=g.filter(function(_){return f.indexOf(_)===-1});m.length>0&&s(l,m)}function d(l,p){if(l){var f=l;if(typeof l=="function")f=p(l);else if(Array.isArray(l)){f=[];for(var g=0;g<l.length;g++)f[g]=p(l[g])}return f}}t.exports=function(l,p,f){if(!l||!l.on||!l.addListener||!l.removeListener||!l.emit)throw new Error("can only wrap real EEs");if(!p)throw new Error("must have function to run on listener addition");if(!f)throw new Error("must have function to wrap listeners when emitting");function g(_){return function(E,T){var w=c(this,E).slice();try{var R=_.call(this,E,T);return u(this,E,w),R}finally{this.on.__wrapped||n(this,"on",g),this.addListener.__wrapped||n(this,"addListener",g)}}}function m(_){return function(E){if(!this._events||!this._events[E])return _.apply(this,arguments);var T=this._events[E];function w(R){return function(){this._events[E]=T;try{return R.apply(this,arguments)}finally{T=this._events[E],this._events[E]=d(T,f)}}}n(this,"removeListener",w);try{return this._events[E]=d(T,f),_.apply(this,arguments)}finally{o(this,"removeListener"),this._events[E]=T}}}l[a]?typeof l[a]=="function"?i(l,a,[l[a],p]):Array.isArray(l[a])&&l[a].push(p):i(l,a,p),l.__wrapped||(n(l,"addListener",g),n(l,"on",g),n(l,"emit",m),i(l,"__unwrap",function(){o(l,"addListener"),o(l,"on"),o(l,"emit"),delete l[a],delete l.__wrapped}),i(l,"__wrapped",!0))}}),nE=A((e,t)=>{"use strict";var r=require("util"),n=require("assert"),o=oa(),a=require("async_hooks"),i="cls@contexts",s="error@context",c=process.env.DEBUG_CLS_HOOKED,u=-1;t.exports={getNamespace:l,createNamespace:p,destroyNamespace:f,reset:g,ERROR_SYMBOL:s};function d(_){this.name=_,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}d.prototype.set=function(_,E){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[_]=E,c){let T=" ".repeat(this._indent<0?0:this._indent);m(T+"CONTEXT-SET KEY:"+_+"="+E+" in ns:"+this.name+" currentUid:"+u+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return E},d.prototype.get=function(_){if(!this.active){if(c){let E=a.currentId(),T=a.triggerAsyncId(),w=" ".repeat(this._indent<0?0:this._indent);m(`${w}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${_}=undefined currentUid:${u} asyncHooksCurrentId:${E} triggerId:${T} len:${this._set.length}`)}return}if(c){let E=a.executionAsyncId(),T=a.triggerAsyncId(),w=" ".repeat(this._indent<0?0:this._indent);m(w+"CONTEXT-GETTING KEY:"+_+"="+this.active[_]+" ("+this.name+") currentUid:"+u+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),m(`${w}CONTEXT-GETTING KEY: (${this.name}) ${_}=${this.active[_]} currentUid:${u} asyncHooksCurrentId:${E} triggerId:${T} len:${this._set.length} active:${r.inspect(this.active)}`)}return this.active[_]},d.prototype.createContext=function(){let _=Object.create(this.active?this.active:Object.prototype);if(_._ns_name=this.name,_.id=u,c){let E=a.executionAsyncId(),T=a.triggerAsyncId(),w=" ".repeat(this._indent<0?0:this._indent);m(`${w}CONTEXT-CREATED Context: (${this.name}) currentUid:${u} asyncHooksCurrentId:${E} triggerId:${T} len:${this._set.length} context:${r.inspect(_,{showHidden:!0,depth:2,colors:!0})}`)}return _},d.prototype.run=function(_){let E=this.createContext();this.enter(E);try{if(c){let T=a.triggerAsyncId(),w=a.executionAsyncId(),R=" ".repeat(this._indent<0?0:this._indent);m(`${R}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${u} triggerId:${T} asyncHooksCurrentId:${w} len:${this._set.length} context:${r.inspect(E)}`)}return _(E),E}catch(T){throw T&&(T[s]=E),T}finally{if(c){let T=a.triggerAsyncId(),w=a.executionAsyncId(),R=" ".repeat(this._indent<0?0:this._indent);m(`${R}CONTEXT-RUN END: (${this.name}) currentUid:${u} triggerId:${T} asyncHooksCurrentId:${w} len:${this._set.length} ${r.inspect(E)}`)}this.exit(E)}},d.prototype.runAndReturn=function(_){let E;return this.run(function(T){E=_(T)}),E},d.prototype.runPromise=function(_){let E=this.createContext();this.enter(E);let T=_(E);if(!T||!T.then||!T.catch)throw new Error("fn must return a promise.");return c&&m("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+u+" len:"+this._set.length+" "+r.inspect(E)),T.then(w=>(c&&m("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+u+" len:"+this._set.length+" "+r.inspect(E)),this.exit(E),w)).catch(w=>{throw w[s]=E,c&&m("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+u+" len:"+this._set.length+" "+r.inspect(E)),this.exit(E),w})},d.prototype.bind=function(_,E){E||(this.active?E=this.active:E=this.createContext());let T=this;return function(){T.enter(E);try{return _.apply(this,arguments)}catch(w){throw w&&(w[s]=E),w}finally{T.exit(E)}}},d.prototype.enter=function(_){if(n.ok(_,"context must be provided for entering"),c){let E=a.executionAsyncId(),T=a.triggerAsyncId(),w=" ".repeat(this._indent<0?0:this._indent);m(`${w}CONTEXT-ENTER: (${this.name}) currentUid:${u} triggerId:${T} asyncHooksCurrentId:${E} len:${this._set.length} ${r.inspect(_)}`)}this._set.push(this.active),this.active=_},d.prototype.exit=function(_){if(n.ok(_,"context must be provided for exiting"),c){let T=a.executionAsyncId(),w=a.triggerAsyncId(),R=" ".repeat(this._indent<0?0:this._indent);m(`${R}CONTEXT-EXIT: (${this.name}) currentUid:${u} triggerId:${w} asyncHooksCurrentId:${T} len:${this._set.length} ${r.inspect(_)}`)}if(this.active===_){n.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let E=this._set.lastIndexOf(_);E<0?(c&&m("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(_)),n.ok(E>=0,`context not currently entered; can't exit. 
`+r.inspect(this)+`
`+r.inspect(_))):(n.ok(E,"can't remove top context"),this._set.splice(E,1))},d.prototype.bindEmitter=function(_){n.ok(_.on&&_.addListener&&_.emit,"can only bind real EEs");let E=this,T="context@"+this.name;function w(I){!I||(I[i]||(I[i]=Object.create(null)),I[i][T]={namespace:E,context:E.active})}function R(I){if(!(I&&I[i]))return I;let H=I,z=I[i];return Object.keys(z).forEach(function(K){let J=z[K];H=J.namespace.bind(H,J.context)}),H}o(_,w,R)},d.prototype.fromException=function(_){return _[s]};function l(_){return process.namespaces[_]}function p(_){n.ok(_,"namespace must be given a name."),c&&m(`NS-CREATING NAMESPACE (${_})`);let E=new d(_);return E.id=u,a.createHook({init(T,w,R,I){if(u=a.executionAsyncId(),E.active){if(E._contexts.set(T,E.active),c){let H=" ".repeat(E._indent<0?0:E._indent);m(`${H}INIT [${w}] (${_}) asyncId:${T} currentUid:${u} triggerId:${R} active:${r.inspect(E.active,{showHidden:!0,depth:2,colors:!0})} resource:${I}`)}}else if(u===0){let H=a.triggerAsyncId(),z=E._contexts.get(H);if(z){if(E._contexts.set(T,z),c){let K=" ".repeat(E._indent<0?0:E._indent);m(`${K}INIT USING CONTEXT FROM TRIGGERID [${w}] (${_}) asyncId:${T} currentUid:${u} triggerId:${H} active:${r.inspect(E.active,{showHidden:!0,depth:2,colors:!0})} resource:${I}`)}}else if(c){let K=" ".repeat(E._indent<0?0:E._indent);m(`${K}INIT MISSING CONTEXT [${w}] (${_}) asyncId:${T} currentUid:${u} triggerId:${H} active:${r.inspect(E.active,{showHidden:!0,depth:2,colors:!0})} resource:${I}`)}}if(c&&w==="PROMISE"){m(r.inspect(I,{showHidden:!0}));let H=I.parentId,z=" ".repeat(E._indent<0?0:E._indent);m(`${z}INIT RESOURCE-PROMISE [${w}] (${_}) parentId:${H} asyncId:${T} currentUid:${u} triggerId:${R} active:${r.inspect(E.active,{showHidden:!0,depth:2,colors:!0})} resource:${I}`)}},before(T){u=a.executionAsyncId();let w;if(w=E._contexts.get(T)||E._contexts.get(u),w){if(c){let R=a.triggerAsyncId(),I=" ".repeat(E._indent<0?0:E._indent);m(`${I}BEFORE (${_}) asyncId:${T} currentUid:${u} triggerId:${R} active:${r.inspect(E.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(w)}`),E._indent+=2}E.enter(w)}else if(c){let R=a.triggerAsyncId(),I=" ".repeat(E._indent<0?0:E._indent);m(`${I}BEFORE MISSING CONTEXT (${_}) asyncId:${T} currentUid:${u} triggerId:${R} active:${r.inspect(E.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${r.inspect(E._contexts,{showHidden:!0,depth:2,colors:!0})}`),E._indent+=2}},after(T){u=a.executionAsyncId();let w;if(w=E._contexts.get(T)||E._contexts.get(u),w){if(c){let R=a.triggerAsyncId();E._indent-=2;let I=" ".repeat(E._indent<0?0:E._indent);m(`${I}AFTER (${_}) asyncId:${T} currentUid:${u} triggerId:${R} active:${r.inspect(E.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(w)}`)}E.exit(w)}else if(c){let R=a.triggerAsyncId();E._indent-=2;let I=" ".repeat(E._indent<0?0:E._indent);m(`${I}AFTER MISSING CONTEXT (${_}) asyncId:${T} currentUid:${u} triggerId:${R} active:${r.inspect(E.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(w)}`)}},destroy(T){if(u=a.executionAsyncId(),c){let w=a.triggerAsyncId(),R=" ".repeat(E._indent<0?0:E._indent);m(`${R}DESTROY (${_}) currentUid:${u} asyncId:${T} triggerId:${w} active:${r.inspect(E.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(E._contexts.get(u))}`)}E._contexts.delete(T)}}).enable(),process.namespaces[_]=E,E}function f(_){let E=l(_);n.ok(E,`can't delete nonexistent namespace! "`+_+'"'),n.ok(E.id,"don't assign to process.namespaces directly! "+r.inspect(E)),process.namespaces[_]=null}function g(){process.namespaces&&Object.keys(process.namespaces).forEach(function(_){f(_)}),process.namespaces=Object.create(null)}process.namespaces={};function m(..._){c&&process._rawDebug(`${r.format(..._)}`)}}),iE=A((e,t)=>{"use strict";function r(){}t.exports=function(){let n=this._hooks,o=this._state,a=process.nextTick;process.nextTick=function(){if(!o.enabled)return a.apply(process,arguments);let i=new Array(arguments.length);for(let d=0;d<arguments.length;d++)i[d]=arguments[d];let s=i[0];if(typeof s!="function")throw new TypeError("callback is not a function");let c=new r,u=--o.counter;return n.init.call(c,u,0,null,null),i[0]=function(){n.pre.call(c,u);let d=!0;try{s.apply(this,arguments),d=!1}finally{d&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){n.post.call(c,u,!0),n.destroy.call(null,u)})}n.post.call(c,u,!1),n.destroy.call(null,u)},a.apply(process,i)}}}),oE=A((e,t)=>{"use strict";function r(){}t.exports=function(){let n=this._hooks,o=this._state,a=global.Promise,i=a.prototype.then;a.prototype.then=d;function s(l,p,f,g){return typeof l!="function"?g?c(f):u(f):function(){n.pre.call(p,f);try{return l.apply(this,arguments)}finally{n.post.call(p,f,!1),n.destroy.call(null,f)}}}function c(l){return function(p){return n.destroy.call(null,l),p}}function u(l){return function(p){throw n.destroy.call(null,l),p}}function d(l,p){if(!o.enabled)return i.call(this,l,p);let f=new r,g=--o.counter;return n.init.call(f,g,0,null,null),i.call(this,s(l,f,g,!0),s(p,f,g,!1))}}}),sE=A((e,t)=>{"use strict";var r=require("timers");function n(){}function o(){}function a(){}var i=new Map,s=new Map,c=new Map,u=null,d=!1;t.exports=function(){l(this._hooks,this._state,"setTimeout","clearTimeout",n,i,!0),l(this._hooks,this._state,"setInterval","clearInterval",o,s,!1),l(this._hooks,this._state,"setImmediate","clearImmediate",a,c,!0),global.setTimeout=r.setTimeout,global.setInterval=r.setInterval,global.setImmediate=r.setImmediate,global.clearTimeout=r.clearTimeout,global.clearInterval=r.clearInterval,global.clearImmediate=r.clearImmediate};function l(p,f,g,m,_,E,T){let w=r[g],R=r[m];r[g]=function(){if(!f.enabled)return w.apply(r,arguments);let I=new Array(arguments.length);for(let te=0;te<arguments.length;te++)I[te]=arguments[te];let H=I[0];if(typeof H!="function")throw new TypeError('"callback" argument must be a function');let z=new _,K=--f.counter,J;return p.init.call(z,K,0,null,null),I[0]=function(){u=J,p.pre.call(z,K);let te=!0;try{H.apply(this,arguments),te=!1}finally{te&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){p.post.call(z,K,!0),E.delete(J),p.destroy.call(null,K)})}p.post.call(z,K,!1),u=null,(T||d)&&(d=!1,E.delete(J),p.destroy.call(null,K))},J=w.apply(r,I),E.set(J,K),J},r[m]=function(I){if(u===I&&I!==null)d=!0;else if(E.has(I)){let H=E.get(I);E.delete(I),p.destroy.call(null,H)}R.apply(r,arguments)}}}),Rd=A((e,t)=>{t.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}}),aE=A((e,t)=>{"use strict";var r=process.binding("async_wrap"),n=r.Providers.TIMERWRAP,o={nextTick:iE(),promise:oE(),timers:sE()},a=new Set;function i(){this.enabled=!1,this.counter=0}function s(){let d=this.initFns=[],l=this.preFns=[],p=this.postFns=[],f=this.destroyFns=[];this.init=function(g,m,_,E){if(m===n){a.add(g);return}for(let T of d)T(g,this,m,_,E)},this.pre=function(g){if(!a.has(g))for(let m of l)m(g,this)},this.post=function(g,m){if(!a.has(g))for(let _ of p)_(g,this,m)},this.destroy=function(g){if(a.has(g)){a.delete(g);return}for(let m of f)m(g)}}s.prototype.add=function(d){d.init&&this.initFns.push(d.init),d.pre&&this.preFns.push(d.pre),d.post&&this.postFns.push(d.post),d.destroy&&this.destroyFns.push(d.destroy)};function c(d,l){let p=d.indexOf(l);p!==-1&&d.splice(p,1)}s.prototype.remove=function(d){d.init&&c(this.initFns,d.init),d.pre&&c(this.preFns,d.pre),d.post&&c(this.postFns,d.post),d.destroy&&c(this.destroyFns,d.destroy)};function u(){this._state=new i,this._hooks=new s,this.version=Rd().version,this.providers=r.Providers;for(let d of Object.keys(o))o[d].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),r.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}t.exports=u,u.prototype.addHooks=function(d){this._hooks.add(d)},u.prototype.removeHooks=function(d){this._hooks.remove(d)},u.prototype.enable=function(){this._state.enabled=!0,r.enable()},u.prototype.disable=function(){this._state.enabled=!1,r.disable()}}),wd=A((e,t)=>{t.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}}),cE=A((e,t)=>{function r(n){try{return Error.prototype.toString.call(n)}catch(o){try{return"<error: "+o+">"}catch{return"<error>"}}}t.exports=function(n,o){var a=[];a.push(r(n));for(var i=0;i<o.length;i++){var s=o[i],c;try{c=s.toString()}catch(u){try{c="<error: "+u+">"}catch{c="<error>"}}a.push("    at "+c)}return a.join(`
`)}}),uE=A((e,t)=>{var r=cE();function n(){this.extend=new i,this.filter=new i,this.format=new s,this.version=wd().version}var o=!1;n.prototype.callSite=function l(p){p||(p={}),o=!0;var f={};Error.captureStackTrace(f,l);var g=f.stack;return o=!1,g=g.slice(p.slice||0),p.extend&&(g=this.extend._modify(f,g)),p.filter&&(g=this.filter._modify(f,g)),g};var a=new n;function i(){this._modifiers=[]}i.prototype._modify=function(l,p){for(var f=0,g=this._modifiers.length;f<g;f++)p=this._modifiers[f](l,p);return p},i.prototype.attach=function(l){this._modifiers.push(l)},i.prototype.deattach=function(l){var p=this._modifiers.indexOf(l);return p===-1?!1:(this._modifiers.splice(p,1),!0)};function s(){this._formater=r,this._previous=void 0}s.prototype.replace=function(l){l?this._formater=l:this.restore()},s.prototype.restore=function(){this._formater=r,this._previous=void 0},s.prototype._backup=function(){this._previous=this._formater},s.prototype._roolback=function(){this._previous===r?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&a.format.replace(Error.prepareStackTrace);var c=!1;function u(l,p){if(o)return p;if(c)return r(l,p);var f=p.concat();f=a.extend._modify(l,f),f=a.filter._modify(l,f),f=f.slice(0,Error.stackTraceLimit),Object.isExtensible(l)&&Object.getOwnPropertyDescriptor(l,"callSite")===void 0&&(l.callSite={original:p,mutated:f}),c=!0;var g=a.format._formater(l,f);return c=!1,g}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return u},set:function(l){l===u?a.format._roolback():(a.format._backup(),a.format.replace(l))}});function d(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:d,set:function(l){Object.defineProperty(this,"callSite",{value:l,writable:!0,configurable:!0})},configurable:!0}),t.exports=a}),Pd=A((e,t)=>{if(global._stackChain)if(global._stackChain.version===wd().version)t.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else t.exports=global._stackChain=uE()}),lE=A((e,t)=>{"use strict";var r=aE();if(global._asyncHook)if(global._asyncHook.version===Rd().version)t.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else Pd().filter.attach(function(n,o){return o.filter(function(a){let i=a.getFileName();return!(i&&i.slice(0,__dirname.length)===__dirname)})}),t.exports=global._asyncHook=new r}),dE=A((e,t)=>{"use strict";var r=require("util"),n=require("assert"),o=oa(),a=lE(),i="cls@contexts",s="error@context",c=[];for(let R in a.providers)c[a.providers[R]]=R;var u=process.env.DEBUG_CLS_HOOKED,d=-1;t.exports={getNamespace:p,createNamespace:f,destroyNamespace:g,reset:m,ERROR_SYMBOL:s};function l(R){this.name=R,this.active=null,this._set=[],this.id=null,this._contexts=new Map}l.prototype.set=function(R,I){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return u&&_("    SETTING KEY:"+R+"="+I+" in ns:"+this.name+" uid:"+d+" active:"+r.inspect(this.active,!0)),this.active[R]=I,I},l.prototype.get=function(R){if(!this.active){u&&_("    GETTING KEY:"+R+"=undefined "+this.name+" uid:"+d+" active:"+r.inspect(this.active,!0));return}return u&&_("    GETTING KEY:"+R+"="+this.active[R]+" "+this.name+" uid:"+d+" active:"+r.inspect(this.active,!0)),this.active[R]},l.prototype.createContext=function(){u&&_("   CREATING Context: "+this.name+" uid:"+d+" len:"+this._set.length+"  active:"+r.inspect(this.active,!0,2,!0));let R=Object.create(this.active?this.active:Object.prototype);return R._ns_name=this.name,R.id=d,u&&_("   CREATED Context: "+this.name+" uid:"+d+" len:"+this._set.length+"  context:"+r.inspect(R,!0,2,!0)),R},l.prototype.run=function(R){let I=this.createContext();this.enter(I);try{return u&&_(" BEFORE RUN: "+this.name+" uid:"+d+" len:"+this._set.length+" "+r.inspect(I)),R(I),I}catch(H){throw H&&(H[s]=I),H}finally{u&&_(" AFTER RUN: "+this.name+" uid:"+d+" len:"+this._set.length+" "+r.inspect(I)),this.exit(I)}},l.prototype.runAndReturn=function(R){var I;return this.run(function(H){I=R(H)}),I},l.prototype.runPromise=function(R){let I=this.createContext();this.enter(I);let H=R(I);if(!H||!H.then||!H.catch)throw new Error("fn must return a promise.");return u&&_(" BEFORE runPromise: "+this.name+" uid:"+d+" len:"+this._set.length+" "+r.inspect(I)),H.then(z=>(u&&_(" AFTER runPromise: "+this.name+" uid:"+d+" len:"+this._set.length+" "+r.inspect(I)),this.exit(I),z)).catch(z=>{throw z[s]=I,u&&_(" AFTER runPromise: "+this.name+" uid:"+d+" len:"+this._set.length+" "+r.inspect(I)),this.exit(I),z})},l.prototype.bind=function(R,I){I||(this.active?I=this.active:I=this.createContext());let H=this;return function(){H.enter(I);try{return R.apply(this,arguments)}catch(z){throw z&&(z[s]=I),z}finally{H.exit(I)}}},l.prototype.enter=function(R){n.ok(R,"context must be provided for entering"),u&&_("  ENTER "+this.name+" uid:"+d+" len:"+this._set.length+" context: "+r.inspect(R)),this._set.push(this.active),this.active=R},l.prototype.exit=function(R){if(n.ok(R,"context must be provided for exiting"),u&&_("  EXIT "+this.name+" uid:"+d+" len:"+this._set.length+" context: "+r.inspect(R)),this.active===R){n.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let I=this._set.lastIndexOf(R);I<0?(u&&_("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(R)),n.ok(I>=0,`context not currently entered; can't exit. 
`+r.inspect(this)+`
`+r.inspect(R))):(n.ok(I,"can't remove top context"),this._set.splice(I,1))},l.prototype.bindEmitter=function(R){n.ok(R.on&&R.addListener&&R.emit,"can only bind real EEs");let I=this,H="context@"+this.name;function z(J){!J||(J[i]||(J[i]=Object.create(null)),J[i][H]={namespace:I,context:I.active})}function K(J){if(!(J&&J[i]))return J;let te=J,U=J[i];return Object.keys(U).forEach(function(V){let Q=U[V];te=Q.namespace.bind(te,Q.context)}),te}o(R,z,K)},l.prototype.fromException=function(R){return R[s]};function p(R){return process.namespaces[R]}function f(R){n.ok(R,"namespace must be given a name."),u&&_("CREATING NAMESPACE "+R);let I=new l(R);return I.id=d,a.addHooks({init(H,z,K,J,te){d=H,J?(I._contexts.set(H,I._contexts.get(J)),u&&_("PARENTID: "+R+" uid:"+H+" parent:"+J+" provider:"+K)):I._contexts.set(d,I.active),u&&_("INIT "+R+" uid:"+H+" parent:"+J+" provider:"+c[K]+" active:"+r.inspect(I.active,!0))},pre(H,z){d=H;let K=I._contexts.get(H);K?(u&&_(" PRE "+R+" uid:"+H+" handle:"+E(z)+" context:"+r.inspect(K)),I.enter(K)):u&&_(" PRE MISSING CONTEXT "+R+" uid:"+H+" handle:"+E(z))},post(H,z){d=H;let K=I._contexts.get(H);K?(u&&_(" POST "+R+" uid:"+H+" handle:"+E(z)+" context:"+r.inspect(K)),I.exit(K)):u&&_(" POST MISSING CONTEXT "+R+" uid:"+H+" handle:"+E(z))},destroy(H){d=H,u&&_("DESTROY "+R+" uid:"+H+" context:"+r.inspect(I._contexts.get(d))+" active:"+r.inspect(I.active,!0)),I._contexts.delete(H)}}),process.namespaces[R]=I,I}function g(R){let I=p(R);n.ok(I,`can't delete nonexistent namespace! "`+R+'"'),n.ok(I.id,"don't assign to process.namespaces directly! "+r.inspect(I)),process.namespaces[R]=null}function m(){process.namespaces&&Object.keys(process.namespaces).forEach(function(R){g(R)}),process.namespaces=Object.create(null)}process.namespaces={},a._state&&!a._state.enabled&&a.enable();function _(R){process.env.DEBUG&&process._rawDebug(R)}function E(R){if(!R)return R;if(typeof R=="function")return R.name?R.name:(R.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(R.constructor&&R.constructor.name)return R.constructor.name}if(u){T=Pd();for(w in T.filter._modifiers)T.filter.deattach(w)}var T,w}),pE=A((e,t)=>{"use strict";var r=rE();process&&r.gte(process.versions.node,"8.0.0")?t.exports=nE():t.exports=dE()}),fE=A((e,t)=>{e=t.exports=re;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var h=Array.prototype.slice.call(arguments,0);h.unshift("SEMVER"),console.log.apply(console,h)}:r=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,a=16,i=e.re=[],s=e.src=[],c=0,u=c++;s[u]="0|[1-9]\\d*";var d=c++;s[d]="[0-9]+";var l=c++;s[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=c++;s[p]="("+s[u]+")\\.("+s[u]+")\\.("+s[u]+")";var f=c++;s[f]="("+s[d]+")\\.("+s[d]+")\\.("+s[d]+")";var g=c++;s[g]="(?:"+s[u]+"|"+s[l]+")";var m=c++;s[m]="(?:"+s[d]+"|"+s[l]+")";var _=c++;s[_]="(?:-("+s[g]+"(?:\\."+s[g]+")*))";var E=c++;s[E]="(?:-?("+s[m]+"(?:\\."+s[m]+")*))";var T=c++;s[T]="[0-9A-Za-z-]+";var w=c++;s[w]="(?:\\+("+s[T]+"(?:\\."+s[T]+")*))";var R=c++,I="v?"+s[p]+s[_]+"?"+s[w]+"?";s[R]="^"+I+"$";var H="[v=\\s]*"+s[f]+s[E]+"?"+s[w]+"?",z=c++;s[z]="^"+H+"$";var K=c++;s[K]="((?:<|>)?=?)";var J=c++;s[J]=s[d]+"|x|X|\\*";var te=c++;s[te]=s[u]+"|x|X|\\*";var U=c++;s[U]="[v=\\s]*("+s[te]+")(?:\\.("+s[te]+")(?:\\.("+s[te]+")(?:"+s[_]+")?"+s[w]+"?)?)?";var V=c++;s[V]="[v=\\s]*("+s[J]+")(?:\\.("+s[J]+")(?:\\.("+s[J]+")(?:"+s[E]+")?"+s[w]+"?)?)?";var Q=c++;s[Q]="^"+s[K]+"\\s*"+s[U]+"$";var ne=c++;s[ne]="^"+s[K]+"\\s*"+s[V]+"$";var ve=c++;s[ve]="(?:^|[^\\d])(\\d{1,"+a+"})(?:\\.(\\d{1,"+a+"}))?(?:\\.(\\d{1,"+a+"}))?(?:$|[^\\d])";var de=c++;s[de]="(?:~>?)";var X=c++;s[X]="(\\s*)"+s[de]+"\\s+",i[X]=new RegExp(s[X],"g");var ce="$1~",ie=c++;s[ie]="^"+s[de]+s[U]+"$";var pe=c++;s[pe]="^"+s[de]+s[V]+"$";var he=c++;s[he]="(?:\\^)";var be=c++;s[be]="(\\s*)"+s[he]+"\\s+",i[be]=new RegExp(s[be],"g");var _e="$1^",Ue=c++;s[Ue]="^"+s[he]+s[U]+"$";var Qe=c++;s[Qe]="^"+s[he]+s[V]+"$";var Ke=c++;s[Ke]="^"+s[K]+"\\s*("+H+")$|^$";var je=c++;s[je]="^"+s[K]+"\\s*("+I+")$|^$";var xe=c++;s[xe]="(\\s*)"+s[K]+"\\s*("+H+"|"+s[U]+")",i[xe]=new RegExp(s[xe],"g");var it="$1$2$3",lt=c++;s[lt]="^\\s*("+s[U]+")\\s+-\\s+("+s[U]+")\\s*$";var Oe=c++;s[Oe]="^\\s*("+s[V]+")\\s+-\\s+("+s[V]+")\\s*$";var me=c++;for(s[me]="(<|>)?=?\\s*\\*",Ae=0;Ae<c;Ae++)r(Ae,s[Ae]),i[Ae]||(i[Ae]=new RegExp(s[Ae]));var Ae;e.parse=ke;function ke(h,v){if((!v||typeof v!="object")&&(v={loose:!!v,includePrerelease:!1}),h instanceof re)return h;if(typeof h!="string"||h.length>n)return null;var C=v.loose?i[z]:i[R];if(!C.test(h))return null;try{return new re(h,v)}catch{return null}}e.valid=ir;function ir(h,v){var C=ke(h,v);return C?C.version:null}e.clean=ct;function ct(h,v){var C=ke(h.trim().replace(/^[=v]+/,""),v);return C?C.version:null}e.SemVer=re;function re(h,v){if((!v||typeof v!="object")&&(v={loose:!!v,includePrerelease:!1}),h instanceof re){if(h.loose===v.loose)return h;h=h.version}else if(typeof h!="string")throw new TypeError("Invalid Version: "+h);if(h.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof re))return new re(h,v);r("SemVer",h,v),this.options=v,this.loose=!!v.loose;var C=h.trim().match(v.loose?i[z]:i[R]);if(!C)throw new TypeError("Invalid Version: "+h);if(this.raw=h,this.major=+C[1],this.minor=+C[2],this.patch=+C[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");C[4]?this.prerelease=C[4].split(".").map(function(D){if(/^[0-9]+$/.test(D)){var k=+D;if(k>=0&&k<o)return k}return D}):this.prerelease=[],this.build=C[5]?C[5].split("."):[],this.format()}re.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},re.prototype.toString=function(){return this.version},re.prototype.compare=function(h){return r("SemVer.compare",this.version,this.options,h),h instanceof re||(h=new re(h,this.options)),this.compareMain(h)||this.comparePre(h)},re.prototype.compareMain=function(h){return h instanceof re||(h=new re(h,this.options)),tt(this.major,h.major)||tt(this.minor,h.minor)||tt(this.patch,h.patch)},re.prototype.comparePre=function(h){if(h instanceof re||(h=new re(h,this.options)),this.prerelease.length&&!h.prerelease.length)return-1;if(!this.prerelease.length&&h.prerelease.length)return 1;if(!this.prerelease.length&&!h.prerelease.length)return 0;var v=0;do{var C=this.prerelease[v],D=h.prerelease[v];if(r("prerelease compare",v,C,D),C===void 0&&D===void 0)return 0;if(D===void 0)return 1;if(C===void 0)return-1;if(C!==D)return tt(C,D)}while(++v)},re.prototype.inc=function(h,v){switch(h){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",v);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",v);break;case"prepatch":this.prerelease.length=0,this.inc("patch",v),this.inc("pre",v);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",v),this.inc("pre",v);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var C=this.prerelease.length;--C>=0;)typeof this.prerelease[C]=="number"&&(this.prerelease[C]++,C=-2);C===-1&&this.prerelease.push(0)}v&&(this.prerelease[0]===v?isNaN(this.prerelease[1])&&(this.prerelease=[v,0]):this.prerelease=[v,0]);break;default:throw new Error("invalid increment argument: "+h)}return this.format(),this.raw=this.version,this},e.inc=er;function er(h,v,C,D){typeof C=="string"&&(D=C,C=void 0);try{return new re(h,C).inc(v,D).version}catch{return null}}e.diff=or;function or(h,v){if(L(h,v))return null;var C=ke(h),D=ke(v),k="";if(C.prerelease.length||D.prerelease.length){k="pre";var $="prerelease"}for(var W in C)if((W==="major"||W==="minor"||W==="patch")&&C[W]!==D[W])return k+W;return $}e.compareIdentifiers=tt;var gt=/^[0-9]+$/;function tt(h,v){var C=gt.test(h),D=gt.test(v);return C&&D&&(h=+h,v=+v),h===v?0:C&&!D?-1:D&&!C?1:h<v?-1:1}e.rcompareIdentifiers=xt;function xt(h,v){return tt(v,h)}e.major=dt;function dt(h,v){return new re(h,v).major}e.minor=Ht;function Ht(h,v){return new re(h,v).minor}e.patch=Pt;function Pt(h,v){return new re(h,v).patch}e.compare=M;function M(h,v,C){return new re(h,C).compare(new re(v,C))}e.compareLoose=N;function N(h,v){return M(h,v,!0)}e.rcompare=P;function P(h,v,C){return M(v,h,C)}e.sort=q;function q(h,v){return h.sort(function(C,D){return e.compare(C,D,v)})}e.rsort=F;function F(h,v){return h.sort(function(C,D){return e.rcompare(C,D,v)})}e.gt=y;function y(h,v,C){return M(h,v,C)>0}e.lt=b;function b(h,v,C){return M(h,v,C)<0}e.eq=L;function L(h,v,C){return M(h,v,C)===0}e.neq=G;function G(h,v,C){return M(h,v,C)!==0}e.gte=ue;function ue(h,v,C){return M(h,v,C)>=0}e.lte=fe;function fe(h,v,C){return M(h,v,C)<=0}e.cmp=Re;function Re(h,v,C,D){switch(v){case"===":return typeof h=="object"&&(h=h.version),typeof C=="object"&&(C=C.version),h===C;case"!==":return typeof h=="object"&&(h=h.version),typeof C=="object"&&(C=C.version),h!==C;case"":case"=":case"==":return L(h,C,D);case"!=":return G(h,C,D);case">":return y(h,C,D);case">=":return ue(h,C,D);case"<":return b(h,C,D);case"<=":return fe(h,C,D);default:throw new TypeError("Invalid operator: "+v)}}e.Comparator=ye;function ye(h,v){if((!v||typeof v!="object")&&(v={loose:!!v,includePrerelease:!1}),h instanceof ye){if(h.loose===!!v.loose)return h;h=h.value}if(!(this instanceof ye))return new ye(h,v);r("comparator",h,v),this.options=v,this.loose=!!v.loose,this.parse(h),this.semver===Fe?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var Fe={};ye.prototype.parse=function(h){var v=this.options.loose?i[Ke]:i[je],C=h.match(v);if(!C)throw new TypeError("Invalid comparator: "+h);this.operator=C[1],this.operator==="="&&(this.operator=""),C[2]?this.semver=new re(C[2],this.options.loose):this.semver=Fe},ye.prototype.toString=function(){return this.value},ye.prototype.test=function(h){return r("Comparator.test",h,this.options.loose),this.semver===Fe?!0:(typeof h=="string"&&(h=new re(h,this.options)),Re(h,this.operator,this.semver,this.options))},ye.prototype.intersects=function(h,v){if(!(h instanceof ye))throw new TypeError("a Comparator is required");(!v||typeof v!="object")&&(v={loose:!!v,includePrerelease:!1});var C;if(this.operator==="")return C=new le(h.value,v),yt(this.value,C,v);if(h.operator==="")return C=new le(this.value,v),yt(h.semver,C,v);var D=(this.operator===">="||this.operator===">")&&(h.operator===">="||h.operator===">"),k=(this.operator==="<="||this.operator==="<")&&(h.operator==="<="||h.operator==="<"),$=this.semver.version===h.semver.version,W=(this.operator===">="||this.operator==="<=")&&(h.operator===">="||h.operator==="<="),se=Re(this.semver,"<",h.semver,v)&&(this.operator===">="||this.operator===">")&&(h.operator==="<="||h.operator==="<"),oe=Re(this.semver,">",h.semver,v)&&(this.operator==="<="||this.operator==="<")&&(h.operator===">="||h.operator===">");return D||k||$&&W||se||oe},e.Range=le;function le(h,v){if((!v||typeof v!="object")&&(v={loose:!!v,includePrerelease:!1}),h instanceof le)return h.loose===!!v.loose&&h.includePrerelease===!!v.includePrerelease?h:new le(h.raw,v);if(h instanceof ye)return new le(h.value,v);if(!(this instanceof le))return new le(h,v);if(this.options=v,this.loose=!!v.loose,this.includePrerelease=!!v.includePrerelease,this.raw=h,this.set=h.split(/\s*\|\|\s*/).map(function(C){return this.parseRange(C.trim())},this).filter(function(C){return C.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+h);this.format()}le.prototype.format=function(){return this.range=this.set.map(function(h){return h.join(" ").trim()}).join("||").trim(),this.range},le.prototype.toString=function(){return this.range},le.prototype.parseRange=function(h){var v=this.options.loose;h=h.trim();var C=v?i[Oe]:i[lt];h=h.replace(C,Be),r("hyphen replace",h),h=h.replace(i[xe],it),r("comparator trim",h,i[xe]),h=h.replace(i[X],ce),h=h.replace(i[be],_e),h=h.split(/\s+/).join(" ");var D=v?i[Ke]:i[je],k=h.split(" ").map(function($){return Nt($,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(k=k.filter(function($){return!!$.match(D)})),k=k.map(function($){return new ye($,this.options)},this),k},le.prototype.intersects=function(h,v){if(!(h instanceof le))throw new TypeError("a Range is required");return this.set.some(function(C){return C.every(function(D){return h.set.some(function(k){return k.every(function($){return D.intersects($,v)})})})})},e.toComparators=Me;function Me(h,v){return new le(h,v).set.map(function(C){return C.map(function(D){return D.value}).join(" ").trim().split(" ")})}function Nt(h,v){return r("comp",h,v),h=Gr(h,v),r("caret",h),h=$t(h,v),r("tildes",h),h=S(h,v),r("xrange",h),h=ge(h,v),r("stars",h),h}function De(h){return!h||h.toLowerCase()==="x"||h==="*"}function $t(h,v){return h.trim().split(/\s+/).map(function(C){return Vr(C,v)}).join(" ")}function Vr(h,v){var C=v.loose?i[pe]:i[ie];return h.replace(C,function(D,k,$,W,se){r("tilde",h,D,k,$,W,se);var oe;return De(k)?oe="":De($)?oe=">="+k+".0.0 <"+(+k+1)+".0.0":De(W)?oe=">="+k+"."+$+".0 <"+k+"."+(+$+1)+".0":se?(r("replaceTilde pr",se),oe=">="+k+"."+$+"."+W+"-"+se+" <"+k+"."+(+$+1)+".0"):oe=">="+k+"."+$+"."+W+" <"+k+"."+(+$+1)+".0",r("tilde return",oe),oe})}function Gr(h,v){return h.trim().split(/\s+/).map(function(C){return Wr(C,v)}).join(" ")}function Wr(h,v){r("caret",h,v);var C=v.loose?i[Qe]:i[Ue];return h.replace(C,function(D,k,$,W,se){r("caret",h,D,k,$,W,se);var oe;return De(k)?oe="":De($)?oe=">="+k+".0.0 <"+(+k+1)+".0.0":De(W)?k==="0"?oe=">="+k+"."+$+".0 <"+k+"."+(+$+1)+".0":oe=">="+k+"."+$+".0 <"+(+k+1)+".0.0":se?(r("replaceCaret pr",se),k==="0"?$==="0"?oe=">="+k+"."+$+"."+W+"-"+se+" <"+k+"."+$+"."+(+W+1):oe=">="+k+"."+$+"."+W+"-"+se+" <"+k+"."+(+$+1)+".0":oe=">="+k+"."+$+"."+W+"-"+se+" <"+(+k+1)+".0.0"):(r("no pr"),k==="0"?$==="0"?oe=">="+k+"."+$+"."+W+" <"+k+"."+$+"."+(+W+1):oe=">="+k+"."+$+"."+W+" <"+k+"."+(+$+1)+".0":oe=">="+k+"."+$+"."+W+" <"+(+k+1)+".0.0"),r("caret return",oe),oe})}function S(h,v){return r("replaceXRanges",h,v),h.split(/\s+/).map(function(C){return Z(C,v)}).join(" ")}function Z(h,v){h=h.trim();var C=v.loose?i[ne]:i[Q];return h.replace(C,function(D,k,$,W,se,oe){r("xRange",h,D,k,$,W,se,oe);var Ze=De($),Xe=Ze||De(W),Ve=Xe||De(se),Le=Ve;return k==="="&&Le&&(k=""),Ze?k===">"||k==="<"?D="<0.0.0":D="*":k&&Le?(Xe&&(W=0),se=0,k===">"?(k=">=",Xe?($=+$+1,W=0,se=0):(W=+W+1,se=0)):k==="<="&&(k="<",Xe?$=+$+1:W=+W+1),D=k+$+"."+W+"."+se):Xe?D=">="+$+".0.0 <"+(+$+1)+".0.0":Ve&&(D=">="+$+"."+W+".0 <"+$+"."+(+W+1)+".0"),r("xRange return",D),D})}function ge(h,v){return r("replaceStars",h,v),h.trim().replace(i[me],"")}function Be(h,v,C,D,k,$,W,se,oe,Ze,Xe,Ve,Le){return De(C)?v="":De(D)?v=">="+C+".0.0":De(k)?v=">="+C+"."+D+".0":v=">="+v,De(oe)?se="":De(Ze)?se="<"+(+oe+1)+".0.0":De(Xe)?se="<"+oe+"."+(+Ze+1)+".0":Ve?se="<="+oe+"."+Ze+"."+Xe+"-"+Ve:se="<="+se,(v+" "+se).trim()}le.prototype.test=function(h){if(!h)return!1;typeof h=="string"&&(h=new re(h,this.options));for(var v=0;v<this.set.length;v++)if(Ye(this.set[v],h,this.options))return!0;return!1};function Ye(h,v,C){for(var D=0;D<h.length;D++)if(!h[D].test(v))return!1;if(v.prerelease.length&&!C.includePrerelease){for(D=0;D<h.length;D++)if(r(h[D].semver),h[D].semver!==Fe&&h[D].semver.prerelease.length>0){var k=h[D].semver;if(k.major===v.major&&k.minor===v.minor&&k.patch===v.patch)return!0}return!1}return!0}e.satisfies=yt;function yt(h,v,C){try{v=new le(v,C)}catch{return!1}return v.test(h)}e.maxSatisfying=pr;function pr(h,v,C){var D=null,k=null;try{var $=new le(v,C)}catch{return null}return h.forEach(function(W){$.test(W)&&(!D||k.compare(W)===-1)&&(D=W,k=new re(D,C))}),D}e.minSatisfying=Cn;function Cn(h,v,C){var D=null,k=null;try{var $=new le(v,C)}catch{return null}return h.forEach(function(W){$.test(W)&&(!D||k.compare(W)===1)&&(D=W,k=new re(D,C))}),D}e.minVersion=Tr;function Tr(h,v){h=new le(h,v);var C=new re("0.0.0");if(h.test(C)||(C=new re("0.0.0-0"),h.test(C)))return C;C=null;for(var D=0;D<h.set.length;++D){var k=h.set[D];k.forEach(function($){var W=new re($.semver.version);switch($.operator){case">":W.prerelease.length===0?W.patch++:W.prerelease.push(0),W.raw=W.format();case"":case">=":(!C||y(C,W))&&(C=W);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+$.operator)}})}return C&&h.test(C)?C:null}e.validRange=Tn;function Tn(h,v){try{return new le(h,v).range||"*"}catch{return null}}e.ltr=Sn;function Sn(h,v,C){return mr(h,v,"<",C)}e.gtr=Rn;function Rn(h,v,C){return mr(h,v,">",C)}e.outside=mr;function mr(h,v,C,D){h=new re(h,D),v=new le(v,D);var k,$,W,se,oe;switch(C){case">":k=y,$=fe,W=b,se=">",oe=">=";break;case"<":k=b,$=ue,W=y,se="<",oe="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(yt(h,v,D))return!1;for(var Ze=0;Ze<v.set.length;++Ze){var Xe=v.set[Ze],Ve=null,Le=null;if(Xe.forEach(function(pt){pt.semver===Fe&&(pt=new ye(">=0.0.0")),Ve=Ve||pt,Le=Le||pt,k(pt.semver,Ve.semver,D)?Ve=pt:W(pt.semver,Le.semver,D)&&(Le=pt)}),Ve.operator===se||Ve.operator===oe||(!Le.operator||Le.operator===se)&&$(h,Le.semver)||Le.operator===oe&&W(h,Le.semver))return!1}return!0}e.prerelease=wn;function wn(h,v){var C=ke(h,v);return C&&C.prerelease.length?C.prerelease:null}e.intersects=Sr;function Sr(h,v,C){return h=new le(h,C),v=new le(v,C),h.intersects(v)}e.coerce=Pn;function Pn(h){if(h instanceof re)return h;if(typeof h!="string")return null;var v=h.match(i[ve]);return v==null?null:ke(v[1]+"."+(v[2]||"0")+"."+(v[3]||"0"))}}),hE=A((e,t)=>{var r=ia().wrap,n=1<<0,o=1<<1,a=1<<2,i=1<<3,s=[],c=0,u=!1,d=[],l,p;function f(z,K){var J=z.length,te=K.length,U=[];if(J===0&&te===0)return U;for(var V=0;V<J;V++)U[V]=z[V];if(te===0)return U;for(var Q=0;Q<te;Q++){var ne=!0;for(V=0;V<J;V++)if(z[V].uid===K[Q].uid){ne=!1;break}ne&&U.push(K[Q])}return U}process._fatalException?(g=!1,l=function(z){var K=s.length;if(g||K===0)return!1;var J=!1;g=!0;for(var te=0;te<K;++te){var U=s[te];if((U.flags&i)!==0){var V=m&&m[U.uid];J=U.error(V,z)||J}}return g=!1,d.length>0&&(s=d.pop()),m=void 0,J&&!u},p=function(z,K,J){var te=[];u=!0;for(var U=0;U<J;++U){var V=K[U];if(te[V.uid]=V.data,(V.flags&n)!==0){var Q=V.create(V.data);Q!==void 0&&(te[V.uid]=Q)}}return u=!1,function(){m=te,d.push(s),s=f(K,s),u=!0;for(var ne=0;ne<J;++ne)(K[ne].flags&o)>0&&K[ne].before(this,te[K[ne].uid]);u=!1;var ve=z.apply(this,arguments);for(u=!0,ne=0;ne<J;++ne)(K[ne].flags&a)>0&&K[ne].after(this,te[K[ne].uid]);return u=!1,s=d.pop(),m=void 0,ve}},r(process,"_fatalException",function(z){return function(K){return l(K)||z(K)}})):(_=!1,l=function(z){if(_)throw z;for(var K=!1,J=s.length,te=0;te<J;++te){var U=s[te];(U.flags&i)!==0&&(K=U.error(null,z)||K)}if(!K&&u)throw z},p=function(z,K,J){var te=[];u=!0;for(var U=0;U<J;++U){var V=K[U];if(te[V.uid]=V.data,(V.flags&n)!==0){var Q=V.create(V.data);Q!==void 0&&(te[V.uid]=Q)}}return u=!1,function(){var ne=!1,ve=!1;d.push(s),s=f(K,s),u=!0;for(var de=0;de<J;++de)(K[de].flags&o)>0&&K[de].before(this,te[K[de].uid]);u=!1;var X;try{X=z.apply(this,arguments)}catch(ce){ne=!0;for(var de=0;de<J;++de)if((s[de].flags&i)!=0)try{ve=s[de].error(te[K[de].uid],ce)||ve}catch(pe){throw _=!0,pe}if(!ve)throw process.removeListener("uncaughtException",l),process._originalNextTick(function(){process.addListener("uncaughtException",l)}),ce}finally{if(!ne||ve){for(u=!0,de=0;de<J;++de)(K[de].flags&a)>0&&K[de].after(this,te[K[de].uid]);u=!1}s=d.pop()}return X}},process.addListener("uncaughtException",l));var g,m,_;function E(z,K,J){u=!0;for(var te=0;te<J;++te){var U=K[te];U.create&&U.create(U.data)}return u=!1,function(){d.push(s),s=f(K,s);var V=z.apply(this,arguments);return s=d.pop(),V}}function T(z){var K=s.length;if(K===0)return z;for(var J=s.slice(),te=0;te<K;++te)if(J[te].flags>0)return p(z,J,K);return E(z,J,K)}function w(z,K){typeof z.create=="function"&&(this.create=z.create,this.flags|=n),typeof z.before=="function"&&(this.before=z.before,this.flags|=o),typeof z.after=="function"&&(this.after=z.after,this.flags|=a),typeof z.error=="function"&&(this.error=z.error,this.flags|=i),this.uid=++c,this.data=K===void 0?null:K}w.prototype.create=void 0,w.prototype.before=void 0,w.prototype.after=void 0,w.prototype.error=void 0,w.prototype.data=void 0,w.prototype.uid=0,w.prototype.flags=0;function R(z,K){if(typeof z!="object"||!z)throw new TypeError("callbacks argument must be an object");return z instanceof w?z:new w(z,K)}function I(z,K){var J;z instanceof w?J=z:J=R(z,K);for(var te=!1,U=0;U<s.length;U++)if(J===s[U]){te=!0;break}return te||s.push(J),J}function H(z){for(var K=0;K<s.length;K++)if(z===s[K]){s.splice(K,1);break}}process.createAsyncListener=R,process.addAsyncListener=I,process.removeAsyncListener=H,t.exports=T}),gE=A((e,t)=>{"use strict";t.exports=(r,n)=>class extends r{constructor(o){var a,i;super(c);var s=this;try{o.apply(a,i)}catch(u){i[1](u)}return s;function c(u,d){a=this,i=[l,p];function l(f){return n(s,!1),u(f)}function p(f){return n(s,!1),d(f)}}}}}),mE=A(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var e=ia(),t=fE(),r=e.wrap,n=e.massWrap,o=hE(),a=require("util"),i=t.gte(process.version,"6.0.0"),s=t.gte(process.version,"7.0.0"),c=t.gte(process.version,"8.0.0"),u=t.gte(process.version,"11.0.0"),d=require("net");s&&!d._normalizeArgs?d._normalizeArgs=function(X){if(X.length===0)return[{},null];var ce=X[0],ie={};typeof ce=="object"&&ce!==null?ie=ce:de(ce)?ie.path=ce:(ie.port=ce,X.length>1&&typeof X[1]=="string"&&(ie.host=X[1]));var pe=X[X.length-1];return typeof pe!="function"?[ie,null]:[ie,pe]}:!s&&!d._normalizeConnectArgs&&(d._normalizeConnectArgs=function(X){var ce={};function ie(he){return(he=Number(he))>=0?he:!1}typeof X[0]=="object"&&X[0]!==null?ce=X[0]:typeof X[0]=="string"&&ie(X[0])===!1?ce.path=X[0]:(ce.port=X[0],typeof X[1]=="string"&&(ce.host=X[1]));var pe=X[X.length-1];return typeof pe=="function"?[ce,pe]:[ce]}),"_setUpListenHandle"in d.Server.prototype?r(d.Server.prototype,"_setUpListenHandle",l):r(d.Server.prototype,"_listen2",l);function l(X){return function(){this.on("connection",function(ce){ce._handle&&(ce._handle.onread=o(ce._handle.onread))});try{return X.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=o(this._handle.onconnection))}}}function p(X){if(X&&X._handle){var ce=X._handle;ce._originalOnread||(ce._originalOnread=ce.onread),ce.onread=o(ce._originalOnread)}}r(d.Socket.prototype,"connect",function(X){return function(){var ce;c&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?ce=arguments[0]:ce=s?d._normalizeArgs(arguments):d._normalizeConnectArgs(arguments),ce[1]&&(ce[1]=o(ce[1]));var ie=X.apply(this,ce);return p(this),ie}});var f=require("http");r(f.Agent.prototype,"addRequest",function(X){return function(ce){var ie=ce.onSocket;return ce.onSocket=o(function(pe){return p(pe),ie.apply(this,arguments)}),X.apply(this,arguments)}});var g=require("child_process");function m(X){Array.isArray(X.stdio)&&X.stdio.forEach(function(ce){ce&&ce._handle&&(ce._handle.onread=o(ce._handle.onread),r(ce._handle,"close",ne))}),X._handle&&(X._handle.onexit=o(X._handle.onexit))}g.ChildProcess?r(g.ChildProcess.prototype,"spawn",function(X){return function(){var ce=X.apply(this,arguments);return m(this),ce}}):n(g,["execFile","fork","spawn"],function(X){return function(){var ce=X.apply(this,arguments);return m(ce),ce}}),process._fatalException||(process._originalNextTick=process.nextTick);var _=[];process._nextDomainTick&&_.push("_nextDomainTick"),process._tickDomainCallback&&_.push("_tickDomainCallback"),n(process,_,Q),r(process,"nextTick",ne);var E=["setTimeout","setInterval"];global.setImmediate&&E.push("setImmediate");var T=require("timers"),w=global.setTimeout===T.setTimeout;n(T,E,ne),w&&n(global,E,ne);var R=require("dns");n(R,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],Q),R.resolveNaptr&&r(R,"resolveNaptr",Q);var I=require("fs");n(I,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],Q),I.lchown&&r(I,"lchown",Q),I.lchmod&&r(I,"lchmod",Q),I.ftruncate&&r(I,"ftruncate",Q);var H;try{H=require("zlib")}catch{}H&&H.Deflate&&H.Deflate.prototype&&(z=Object.getPrototypeOf(H.Deflate.prototype),z._transform?r(z,"_transform",Q):z.write&&z.flush&&z.end&&n(z,["write","flush","end"],Q));var z,K;try{K=require("crypto")}catch{}K&&(J=["pbkdf2","randomBytes"],u||J.push("pseudoRandomBytes"),n(K,J,Q));var J,te=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";te&&(U=process.addAsyncListener({create:function(){te=!1}}),global.Promise.resolve(!0).then(function(){te=!1}),process.removeAsyncListener(U));var U;te&&V();function V(){var X=global.Promise;function ce(_e){if(!(this instanceof ce))return X(_e);if(typeof _e!="function")return new X(_e);var Ue,Qe,Ke=new X(je);Ke.__proto__=ce.prototype;try{_e.apply(Ue,Qe)}catch(xe){Qe[1](xe)}return Ke;function je(xe,it){Ue=this,Qe=[lt,Oe];function lt(me){return pe(Ke,!1),xe(me)}function Oe(me){return pe(Ke,!1),it(me)}}}if(a.inherits(ce,X),r(X.prototype,"then",be),X.prototype.chain&&r(X.prototype,"chain",be),i)global.Promise=gE()(X,pe);else{var ie=["all","race","reject","resolve","accept","defer"];ie.forEach(function(_e){typeof X[_e]=="function"&&(ce[_e]=X[_e])}),global.Promise=ce}function pe(_e,Ue){(!_e.__asl_wrapper||Ue)&&(_e.__asl_wrapper=o(he))}function he(_e,Ue,Qe,Ke){var je;try{return je=Ue.call(_e,Qe),{returnVal:je,error:!1}}catch(xe){return{errorVal:xe,error:!0}}finally{je instanceof X?Ke.__asl_wrapper=function(){var xe=je.__asl_wrapper||he;return xe.apply(this,arguments)}:pe(Ke,!0)}}function be(_e){return function(){var Ue=this,Qe=_e.apply(Ue,Array.prototype.map.call(arguments,Ke));return Qe.__asl_wrapper=function(je,xe,it,lt){return Ue.__asl_wrapper?(Ue.__asl_wrapper(je,function(){},null,Qe),Qe.__asl_wrapper(je,xe,it,lt)):he(je,xe,it,lt)},Qe;function Ke(je){return typeof je!="function"?je:o(function(xe){var it=(Ue.__asl_wrapper||he)(this,je,xe,Qe);if(it.error)throw it.errorVal;return it.returnVal})}}}}function Q(X){var ce=function(){var ie,pe=arguments.length-1;if(typeof arguments[pe]=="function"){ie=Array(arguments.length);for(var he=0;he<arguments.length-1;he++)ie[he]=arguments[he];ie[pe]=o(arguments[pe])}return X.apply(this,ie||arguments)};switch(X.length){case 1:return function(ie){return arguments.length!==1?ce.apply(this,arguments):(typeof ie=="function"&&(ie=o(ie)),X.call(this,ie))};case 2:return function(ie,pe){return arguments.length!==2?ce.apply(this,arguments):(typeof pe=="function"&&(pe=o(pe)),X.call(this,ie,pe))};case 3:return function(ie,pe,he){return arguments.length!==3?ce.apply(this,arguments):(typeof he=="function"&&(he=o(he)),X.call(this,ie,pe,he))};case 4:return function(ie,pe,he,be){return arguments.length!==4?ce.apply(this,arguments):(typeof be=="function"&&(be=o(be)),X.call(this,ie,pe,he,be))};case 5:return function(ie,pe,he,be,_e){return arguments.length!==5?ce.apply(this,arguments):(typeof _e=="function"&&(_e=o(_e)),X.call(this,ie,pe,he,be,_e))};case 6:return function(ie,pe,he,be,_e,Ue){return arguments.length!==6?ce.apply(this,arguments):(typeof Ue=="function"&&(Ue=o(Ue)),X.call(this,ie,pe,he,be,_e,Ue))};default:return ce}}function ne(X){var ce=function(){var ie;if(typeof arguments[0]=="function"){ie=Array(arguments.length),ie[0]=o(arguments[0]);for(var pe=1;pe<arguments.length;pe++)ie[pe]=arguments[pe]}return X.apply(this,ie||arguments)};switch(X.length){case 1:return function(ie){return arguments.length!==1?ce.apply(this,arguments):(typeof ie=="function"&&(ie=o(ie)),X.call(this,ie))};case 2:return function(ie,pe){return arguments.length!==2?ce.apply(this,arguments):(typeof ie=="function"&&(ie=o(ie)),X.call(this,ie,pe))};case 3:return function(ie,pe,he){return arguments.length!==3?ce.apply(this,arguments):(typeof ie=="function"&&(ie=o(ie)),X.call(this,ie,pe,he))};case 4:return function(ie,pe,he,be){return arguments.length!==4?ce.apply(this,arguments):(typeof ie=="function"&&(ie=o(ie)),X.call(this,ie,pe,he,be))};case 5:return function(ie,pe,he,be,_e){return arguments.length!==5?ce.apply(this,arguments):(typeof ie=="function"&&(ie=o(ie)),X.call(this,ie,pe,he,be,_e))};case 6:return function(ie,pe,he,be,_e,Ue){return arguments.length!==6?ce.apply(this,arguments):(typeof ie=="function"&&(ie=o(ie)),X.call(this,ie,pe,he,be,_e,Ue))};default:return ce}}function ve(X){return(X=Number(X))>=0?X:!1}function de(X){return typeof X=="string"&&ve(X)===!1}}),vE=A((e,t)=>{"use strict";var r=require("assert"),n=oa(),o="cls@contexts",a="error@context";process.addAsyncListener||mE();function i(l){this.name=l,this.active=null,this._set=[],this.id=null}i.prototype.set=function(l,p){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[l]=p,p},i.prototype.get=function(l){if(this.active)return this.active[l]},i.prototype.createContext=function(){return Object.create(this.active)},i.prototype.run=function(l){var p=this.createContext();this.enter(p);try{return l(p),p}catch(f){throw f&&(f[a]=p),f}finally{this.exit(p)}},i.prototype.runAndReturn=function(l){var p;return this.run(function(f){p=l(f)}),p},i.prototype.bind=function(l,p){p||(this.active?p=this.active:p=this.createContext());var f=this;return function(){f.enter(p);try{return l.apply(this,arguments)}catch(g){throw g&&(g[a]=p),g}finally{f.exit(p)}}},i.prototype.enter=function(l){r.ok(l,"context must be provided for entering"),this._set.push(this.active),this.active=l},i.prototype.exit=function(l){if(r.ok(l,"context must be provided for exiting"),this.active===l){r.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var p=this._set.lastIndexOf(l);r.ok(p>=0,"context not currently entered; can't exit"),r.ok(p,"can't remove top context"),this._set.splice(p,1)},i.prototype.bindEmitter=function(l){r.ok(l.on&&l.addListener&&l.emit,"can only bind real EEs");var p=this,f="context@"+this.name;function g(_){!_||(_[o]||(_[o]=Object.create(null)),_[o][f]={namespace:p,context:p.active})}function m(_){if(!(_&&_[o]))return _;var E=_,T=_[o];return Object.keys(T).forEach(function(w){var R=T[w];E=R.namespace.bind(E,R.context)}),E}n(l,g,m)},i.prototype.fromException=function(l){return l[a]};function s(l){return process.namespaces[l]}function c(l){r.ok(l,"namespace must be given a name!");var p=new i(l);return p.id=process.addAsyncListener({create:function(){return p.active},before:function(f,g){g&&p.enter(g)},after:function(f,g){g&&p.exit(g)},error:function(f){f&&p.exit(f)}}),process.namespaces[l]=p,p}function u(l){var p=s(l);r.ok(p,"can't delete nonexistent namespace!"),r.ok(p.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(p.id),process.namespaces[l]=null}function d(){process.namespaces&&Object.keys(process.namespaces).forEach(function(l){u(l)}),process.namespaces=Object.create(null)}process.namespaces||d(),t.exports={getNamespace:s,createNamespace:c,destroyNamespace:u,reset:d}}),Qn=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CorrelationContextManager=void 0;var t=Kt(),r=na(),n=Eo(),o=_d(),a=Sd(),i=function(){function c(){}return c.getCurrentContext=function(){if(!c.enabled)return null;var u=c.session.get(c.CONTEXT_NAME);return u===void 0?null:u},c.generateContextObject=function(u,d,l,p,f,g){return d=d||u,this.enabled?{operation:{name:l,id:u,parentId:d,traceparent:f,tracestate:g},customProperties:new s(p)}:null},c.spanToContextObject=function(u,d,l){var p=new n;return p.traceId=u.traceId,p.spanId=u.spanId,p.traceFlag=n.formatOpenTelemetryTraceFlags(u.traceFlags)||n.DEFAULT_TRACE_FLAG,p.parentId=d,c.generateContextObject(p.traceId,p.parentId,l,null,p)},c.runWithContext=function(u,d){var l;return c.enabled?c.session.bind(d,(l={},l[c.CONTEXT_NAME]=u,l))():d()},c.wrapEmitter=function(u){c.enabled&&c.session.bindEmitter(u)},c.wrapCallback=function(u,d){var l;return c.enabled?c.session.bind(u,d?(l={},l[c.CONTEXT_NAME]=d,l):void 0):u},c.enable=function(u){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}c.hasEverEnabled||(this.forceClsHooked=u,this.hasEverEnabled=!0,typeof this.cls>"u"&&(c.forceClsHooked===!0||c.forceClsHooked===void 0&&c.shouldUseClsHooked()?this.cls=pE():this.cls=vE()),c.session=this.cls.createNamespace("AI-CLS-Session"),r.registerContextPreservation(function(d){return c.session.bind(d)})),this.enabled=!0}},c.startOperation=function(u,d){var l=u&&u.traceContext||null,p=u&&u.traceId?u:null,f=u&&u.headers;if(p){var g=new n("00-"+p.traceId+"-"+p.spanId+"-01"),m=new o(p.traceState?p.traceState.serialize():null),_=c.generateContextObject(p.traceId,"|"+p.traceId+"."+p.spanId+".",typeof d=="string"?d:"",void 0,g,m);return _}if(l){var g=new n(l.traceparent),m=new o(l.tracestate),E=typeof d=="object"?new a(d):null,_=c.generateContextObject(g.traceId,g.parentId,typeof d=="string"?d:E.getOperationName({}),E&&E.getCorrelationContextHeader()||void 0,g,m);return _}if(f){var g=new n(f.traceparent?f.traceparent.toString():null),m=new o(f.tracestate?f.tracestate.toString():null),E=new a(u),_=c.generateContextObject(g.traceId,g.parentId,E.getOperationName({}),E.getCorrelationContextHeader(),g,m);return _}return t.warn("startOperation was called with invalid arguments",arguments),null},c.disable=function(){this.enabled=!1},c.reset=function(){c.hasEverEnabled&&(c.session=null,c.session=this.cls.createNamespace("AI-CLS-Session"))},c.isNodeVersionCompatible=function(){var u=process.versions.node.split(".");return parseInt(u[0])>3||parseInt(u[0])>2&&parseInt(u[1])>2},c.shouldUseClsHooked=function(){var u=process.versions.node.split(".");return parseInt(u[0])>8||parseInt(u[0])>=8&&parseInt(u[1])>=2},c.canUseClsHooked=function(){var u=process.versions.node.split("."),d=parseInt(u[0])>8||parseInt(u[0])>=8&&parseInt(u[1])>=0,l=parseInt(u[0])<8||parseInt(u[0])<=8&&parseInt(u[1])<2,p=parseInt(u[0])>4||parseInt(u[0])>=4&&parseInt(u[1])>=7;return!(d&&l)&&p},c.enabled=!1,c.hasEverEnabled=!1,c.forceClsHooked=void 0,c.CONTEXT_NAME="ApplicationInsights-Context",c}();e.CorrelationContextManager=i;var s=function(){function c(u){this.props=[],this.addHeaderData(u)}return c.prototype.addHeaderData=function(u){var d=u?u.split(", "):[];this.props=d.map(function(l){var p=l.split("=");return{key:p[0],value:p[1]}}).concat(this.props)},c.prototype.serializeToHeader=function(){return this.props.map(function(u){return u.key+"="+u.value}).join(", ")},c.prototype.getProperty=function(u){for(var d=0;d<this.props.length;++d){var l=this.props[d];if(l.key===u)return l.value}},c.prototype.setProperty=function(u,d){if(c.bannedCharacters.test(u)||c.bannedCharacters.test(d)){t.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+u+" and value: "+d);return}for(var l=0;l<this.props.length;++l){var p=this.props[l];if(p.key===u){p.value=d;return}}this.props.push({key:u,value:d})},c.bannedCharacters=/[,=]/,c}()}),_E=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=fr(),r=kt(),n=[],o=function(s){var c=s.data.message;n.forEach(function(u){c instanceof Error?u.trackException({exception:c}):(c.lastIndexOf(`
`)==c.length-1&&(c=c.substring(0,c.length-1)),u.trackTrace({message:c,severity:s.data.stderr?t.SeverityLevel.Warning:t.SeverityLevel.Information}))})};function a(s,c){s?(n.length===0&&r.channel.subscribe("console",o),n.push(c)):(n=n.filter(function(u){return u!=c}),n.length===0&&r.channel.unsubscribe("console",o))}e.enable=a;function i(){r.channel.unsubscribe("console",o),n=[]}e.dispose=i}),yE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=fr(),r=kt(),n=[],o={10:t.SeverityLevel.Verbose,20:t.SeverityLevel.Verbose,30:t.SeverityLevel.Information,40:t.SeverityLevel.Warning,50:t.SeverityLevel.Error,60:t.SeverityLevel.Critical},a=function(c){var u=c.data.result;n.forEach(function(d){var l=o[c.data.level];u instanceof Error?d.trackException({exception:u}):d.trackTrace({message:u,severity:l})})};function i(c,u){c?(n.length===0&&r.channel.subscribe("bunyan",a),n.push(u)):(n=n.filter(function(d){return d!=u}),n.length===0&&r.channel.unsubscribe("bunyan",a))}e.enable=i;function s(){r.channel.unsubscribe("bunyan",a),n=[]}e.dispose=s}),EE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=fr(),r=kt(),n=[],o={syslog:function(c){var u={emerg:t.SeverityLevel.Critical,alert:t.SeverityLevel.Critical,crit:t.SeverityLevel.Critical,error:t.SeverityLevel.Error,warning:t.SeverityLevel.Warning,notice:t.SeverityLevel.Information,info:t.SeverityLevel.Information,debug:t.SeverityLevel.Verbose};return u[c]===void 0?t.SeverityLevel.Information:u[c]},npm:function(c){var u={error:t.SeverityLevel.Error,warn:t.SeverityLevel.Warning,info:t.SeverityLevel.Information,verbose:t.SeverityLevel.Verbose,debug:t.SeverityLevel.Verbose,silly:t.SeverityLevel.Verbose};return u[c]===void 0?t.SeverityLevel.Information:u[c]},unknown:function(c){return t.SeverityLevel.Information}},a=function(c){var u=c.data.message;n.forEach(function(d){if(u instanceof Error)d.trackException({exception:u,properties:c.data.meta});else{var l=o[c.data.levelKind](c.data.level);d.trackTrace({message:u,severity:l,properties:c.data.meta})}})};function i(c,u){c?(n.length===0&&r.channel.subscribe("winston",a),n.push(u)):(n=n.filter(function(d){return d!=u}),n.length===0&&r.channel.unsubscribe("winston",a))}e.enable=i;function s(){r.channel.unsubscribe("winston",a),n=[]}e.dispose=s}),bE=A((e,t)=>{"use strict";var r=na(),n=function(){function o(a){if(o.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=a,o.INSTANCE=this}return o.prototype.enable=function(a,i){r.IsInitialized&&(_E().enable(a&&i,this._client),yE().enable(a,this._client),EE().enable(a,this._client))},o.prototype.isInitialized=function(){return this._isInitialized},o.prototype.dispose=function(){o.INSTANCE=null,this.enable(!1,!1)},o._methodNames=["debug","info","log","warn","error"],o}();t.exports=n}),CE=A((e,t)=>{"use strict";var r=function(){function n(o){if(n.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");n.INSTANCE=this,this._client=o;var a=process.versions.node.split(".");n._canUseUncaughtExceptionMonitor=parseInt(a[0])>13||parseInt(a[0])===13&&parseInt(a[1])>=7}return n.prototype.isInitialized=function(){return this._isInitialized},n.prototype.enable=function(o){var a=this;if(o){this._isInitialized=!0;var i=this;if(!this._exceptionListenerHandle){var s=function(c,u,d){d===void 0&&(d=new Error(n._FALLBACK_ERROR_MESSAGE)),a._client.trackException({exception:d}),a._client.flush({isAppCrashing:!0}),c&&u&&process.listeners(u).length===1&&(console.error(d),process.exit(1))};n._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=s.bind(this,!1,void 0),process.on(n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=s.bind(this,!0,n.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=s.bind(this,!1,void 0),process.on(n.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(n.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(n._canUseUncaughtExceptionMonitor?process.removeListener(n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(n.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(n.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},n.prototype.dispose=function(){n.INSTANCE=null,this.enable(!1),this._isInitialized=!1},n.INSTANCE=null,n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",n.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",n.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",n._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",n._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",n._canUseUncaughtExceptionMonitor=!1,n}();t.exports=r}),sn=A(e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.HeartBeatMetricName=e.DependencyTypeName=e.SpanAttribute=e.TelemetryTypeStringToQuickPulseDocumentType=e.TelemetryTypeStringToQuickPulseType=e.QuickPulseType=e.QuickPulseDocumentType=e.PerformanceToQuickPulseCounter=e.MetricId=e.PerformanceCounter=e.QuickPulseCounter=e.DEFAULT_LIVEMETRICS_HOST=e.DEFAULT_LIVEMETRICS_ENDPOINT=e.DEFAULT_BREEZE_ENDPOINT=void 0,e.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var r;(function(a){a.COMMITTED_BYTES="\\Memory\\Committed Bytes",a.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",a.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",a.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",a.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",a.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",a.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",a.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",a.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(r=e.QuickPulseCounter||(e.QuickPulseCounter={}));var n;(function(a){a.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",a.AVAILABLE_BYTES="\\Memory\\Available Bytes",a.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",a.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",a.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",a.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(n=e.PerformanceCounter||(e.PerformanceCounter={}));var o;(function(a){a.REQUESTS_DURATION="requests/duration",a.DEPENDENCIES_DURATION="dependencies/duration",a.EXCEPTIONS_COUNT="exceptions/count",a.TRACES_COUNT="traces/count"})(o=e.MetricId||(e.MetricId={})),e.PerformanceToQuickPulseCounter=(t={},t[n.PROCESSOR_TIME]=r.PROCESSOR_TIME,t[n.REQUEST_RATE]=r.REQUEST_RATE,t[n.REQUEST_DURATION]=r.REQUEST_DURATION,t[r.COMMITTED_BYTES]=r.COMMITTED_BYTES,t[r.REQUEST_FAILURE_RATE]=r.REQUEST_FAILURE_RATE,t[r.DEPENDENCY_RATE]=r.DEPENDENCY_RATE,t[r.DEPENDENCY_FAILURE_RATE]=r.DEPENDENCY_FAILURE_RATE,t[r.DEPENDENCY_DURATION]=r.DEPENDENCY_DURATION,t[r.EXCEPTION_RATE]=r.EXCEPTION_RATE,t),e.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"},e.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"},e.TelemetryTypeStringToQuickPulseType={EventData:e.QuickPulseType.Event,ExceptionData:e.QuickPulseType.Exception,MessageData:e.QuickPulseType.Trace,MetricData:e.QuickPulseType.Metric,RequestData:e.QuickPulseType.Request,RemoteDependencyData:e.QuickPulseType.Dependency,AvailabilityData:e.QuickPulseType.Availability,PageViewData:e.QuickPulseType.PageView},e.TelemetryTypeStringToQuickPulseDocumentType={EventData:e.QuickPulseDocumentType.Event,ExceptionData:e.QuickPulseDocumentType.Exception,MessageData:e.QuickPulseDocumentType.Trace,MetricData:e.QuickPulseDocumentType.Metric,RequestData:e.QuickPulseDocumentType.Request,RemoteDependencyData:e.QuickPulseDocumentType.Dependency,AvailabilityData:e.QuickPulseDocumentType.Availability,PageViewData:e.QuickPulseDocumentType.PageView},e.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"},e.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"},e.HeartBeatMetricName="HeartBeat"}),sa=A((e,t)=>{"use strict";var r=require("os"),n=sn(),o=function(){function a(i,s,c){s===void 0&&(s=6e4),c===void 0&&(c=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,a.INSTANCE||(a.INSTANCE=this),this._isInitialized=!1,this._client=i,this._collectionInterval=s,this._enableLiveMetricsCounters=c}return a.prototype.enable=function(i,s){var c=this;this._isEnabled=i,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),i?this._handle||(this._lastCpus=r.cpus(),this._lastRequests={totalRequestCount:a._totalRequestCount,totalFailedRequestCount:a._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:a._totalDependencyCount,totalFailedDependencyCount:a._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:a._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=s||this._collectionInterval,this._handle=setInterval(function(){return c.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},a.countRequest=function(i,s){var c;if(a.isEnabled()){if(typeof i=="string")c=+new Date("1970-01-01T"+i+"Z");else if(typeof i=="number")c=i;else return;a._intervalRequestExecutionTime+=c,s===!1&&a._totalFailedRequestCount++,a._totalRequestCount++}},a.countException=function(){a._totalExceptionCount++},a.countDependency=function(i,s){var c;if(a.isEnabled()){if(typeof i=="string")c=+new Date("1970-01-01T"+i+"Z");else if(typeof i=="number")c=i;else return;a._intervalDependencyExecutionTime+=c,s===!1&&a._totalFailedDependencyCount++,a._totalDependencyCount++}},a.prototype.isInitialized=function(){return this._isInitialized},a.isEnabled=function(){return a.INSTANCE&&a.INSTANCE._isEnabled},a.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},a.prototype._trackCpu=function(){var i=r.cpus();if(i&&i.length&&this._lastCpus&&i.length===this._lastCpus.length){for(var s=0,c=0,u=0,d=0,l=0,p=0;!!i&&p<i.length;p++){var f=i[p],g=this._lastCpus[p],m="% cpu("+p+") ",_=f.model,E=f.speed,T=f.times,w=g.times,R=T.user-w.user||0;s+=R;var I=T.sys-w.sys||0;c+=I;var H=T.nice-w.nice||0;u+=H;var z=T.idle-w.idle||0;d+=z;var K=T.irq-w.irq||0;l+=K}var J=void 0;if(typeof process.cpuUsage=="function"){var te=process.cpuUsage(),U=process.hrtime(),V=te.user-this._lastAppCpuUsage.user+(te.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime<"u"&&this._lastHrtime.length===2){var Q=(U[0]-this._lastHrtime[0])*1e6+(U[1]-this._lastHrtime[1])/1e3||0;J=100*V/(Q*i.length)}this._lastAppCpuUsage=te,this._lastHrtime=U}var ne=s+c+u+d+l||1;this._client.trackMetric({name:n.PerformanceCounter.PROCESSOR_TIME,value:(ne-d)/ne*100}),this._client.trackMetric({name:n.PerformanceCounter.PROCESS_TIME,value:J||s/ne*100})}this._lastCpus=i},a.prototype._trackMemory=function(){var i=r.freemem(),s=process.memoryUsage().rss,c=r.totalmem()-i;this._client.trackMetric({name:n.PerformanceCounter.PRIVATE_BYTES,value:s}),this._client.trackMetric({name:n.PerformanceCounter.AVAILABLE_BYTES,value:i}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:n.QuickPulseCounter.COMMITTED_BYTES,value:c})},a.prototype._trackNetwork=function(){var i=this._lastRequests,s={totalRequestCount:a._totalRequestCount,totalFailedRequestCount:a._totalFailedRequestCount,time:+new Date},c=s.totalRequestCount-i.totalRequestCount||0,u=s.totalFailedRequestCount-i.totalFailedRequestCount||0,d=s.time-i.time,l=d/1e3,p=(a._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/c||0;if(this._lastIntervalRequestExecutionTime=a._intervalRequestExecutionTime,d>0){var f=c/l,g=u/l;this._client.trackMetric({name:n.PerformanceCounter.REQUEST_RATE,value:f}),(!this._enableLiveMetricsCounters||c>0)&&this._client.trackMetric({name:n.PerformanceCounter.REQUEST_DURATION,value:p}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:n.QuickPulseCounter.REQUEST_FAILURE_RATE,value:g})}this._lastRequests=s},a.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var i=this._lastDependencies,s={totalDependencyCount:a._totalDependencyCount,totalFailedDependencyCount:a._totalFailedDependencyCount,time:+new Date},c=s.totalDependencyCount-i.totalDependencyCount||0,u=s.totalFailedDependencyCount-i.totalFailedDependencyCount||0,d=s.time-i.time,l=d/1e3,p=(a._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/c||0;if(this._lastIntervalDependencyExecutionTime=a._intervalDependencyExecutionTime,d>0){var f=c/l,g=u/l;this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_RATE,value:f}),this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:g}),(!this._enableLiveMetricsCounters||c>0)&&this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_DURATION,value:p})}this._lastDependencies=s}},a.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var i=this._lastExceptions,s={totalExceptionCount:a._totalExceptionCount,time:+new Date},c=s.totalExceptionCount-i.totalExceptionCount||0,u=s.time-i.time,d=u/1e3;if(u>0){var l=c/d;this._client.trackMetric({name:n.QuickPulseCounter.EXCEPTION_RATE,value:l})}this._lastExceptions=s}},a.prototype.dispose=function(){a.INSTANCE=null,this.enable(!1),this._isInitialized=!1},a._totalRequestCount=0,a._totalFailedRequestCount=0,a._totalDependencyCount=0,a._totalFailedDependencyCount=0,a._totalExceptionCount=0,a._intervalDependencyExecutionTime=0,a._intervalRequestExecutionTime=0,a}();t.exports=o}),TE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AggregatedMetricCounter=void 0;var t=function(){function r(n){this.dimensions=n,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return r}();e.AggregatedMetricCounter=t}),SE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PreaggregatedMetricPropertyNames=void 0,e.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}}),Od=A((e,t)=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(s){for(var c,u=1,d=arguments.length;u<d;u++){c=arguments[u];for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(s[l]=c[l])}return s},r.apply(this,arguments)},n=sn(),o=TE(),a=SE(),i=function(){function s(c,u){u===void 0&&(u=6e4),s.INSTANCE||(s.INSTANCE=this),this._isInitialized=!1,s._dependencyCountersCollection=[],s._requestCountersCollection=[],s._exceptionCountersCollection=[],s._traceCountersCollection=[],this._client=c,this._collectionInterval=u}return s.prototype.enable=function(c,u){var d=this;this._isEnabled=c,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),c?this._handle||(this._collectionInterval=u||this._collectionInterval,this._handle=setInterval(function(){return d.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},s.countException=function(c){if(s.isEnabled()){var u=s._getAggregatedCounter(c,this._exceptionCountersCollection);u.totalCount++}},s.countTrace=function(c){if(s.isEnabled()){var u=s._getAggregatedCounter(c,this._traceCountersCollection);u.totalCount++}},s.countRequest=function(c,u){if(s.isEnabled()){var d,l=s._getAggregatedCounter(u,this._requestCountersCollection);if(typeof c=="string")d=+new Date("1970-01-01T"+c+"Z");else if(typeof c=="number")d=c;else return;l.intervalExecutionTime+=d,l.totalCount++}},s.countDependency=function(c,u){if(s.isEnabled()){var d=s._getAggregatedCounter(u,this._dependencyCountersCollection),l;if(typeof c=="string")l=+new Date("1970-01-01T"+c+"Z");else if(typeof c=="number")l=c;else return;d.intervalExecutionTime+=l,d.totalCount++}},s.prototype.isInitialized=function(){return this._isInitialized},s.isEnabled=function(){return s.INSTANCE&&s.INSTANCE._isEnabled},s.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},s._getAggregatedCounter=function(c,u){for(var d=!1,l=0;l<u.length;l++){if(c===u[l].dimensions)return u[l];if(Object.keys(c).length===Object.keys(u[l].dimensions).length){for(var p in c)if(c[p]!=u[l].dimensions[p]){d=!0;break}if(!d)return u[l];d=!1}}var f=new o.AggregatedMetricCounter(c);return u.push(f),f},s.prototype._trackRequestMetrics=function(){for(var c=0;c<s._requestCountersCollection.length;c++){var u=s._requestCountersCollection[c];u.time=+new Date;var d=u.totalCount-u.lastTotalCount||0,l=u.time-u.lastTime,p=(u.intervalExecutionTime-u.lastIntervalExecutionTime)/d||0;u.lastIntervalExecutionTime=u.intervalExecutionTime,l>0&&d>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:u.dimensions,value:p,count:d,aggregationInterval:l,metricType:n.MetricId.REQUESTS_DURATION}),u.lastTotalCount=u.totalCount,u.lastTime=u.time}},s.prototype._trackDependencyMetrics=function(){for(var c=0;c<s._dependencyCountersCollection.length;c++){var u=s._dependencyCountersCollection[c];u.time=+new Date;var d=u.totalCount-u.lastTotalCount||0,l=u.time-u.lastTime,p=(u.intervalExecutionTime-u.lastIntervalExecutionTime)/d||0;u.lastIntervalExecutionTime=u.intervalExecutionTime,l>0&&d>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:u.dimensions,value:p,count:d,aggregationInterval:l,metricType:n.MetricId.DEPENDENCIES_DURATION}),u.lastTotalCount=u.totalCount,u.lastTime=u.time}},s.prototype._trackExceptionMetrics=function(){for(var c=0;c<s._exceptionCountersCollection.length;c++){var u=s._exceptionCountersCollection[c],d=u.totalCount-u.lastTotalCount||0,l=u.time-u.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:u.dimensions,value:d,count:d,aggregationInterval:l,metricType:n.MetricId.EXCEPTIONS_COUNT}),u.lastTotalCount=u.totalCount,u.lastTime=u.time}},s.prototype._trackTraceMetrics=function(){for(var c=0;c<s._traceCountersCollection.length;c++){var u=s._traceCountersCollection[c],d=u.totalCount-u.lastTotalCount||0,l=u.time-u.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:u.dimensions,value:d,count:d,aggregationInterval:l,metricType:n.MetricId.TRACES_COUNT}),u.lastTotalCount=u.totalCount,u.lastTime=u.time}},s.prototype._trackPreAggregatedMetric=function(c){var u={};for(var d in c.dimensions)u[a.PreaggregatedMetricPropertyNames[d]]=c.dimensions[d];u=r(r({},u),{"_MS.MetricId":c.metricType,"_MS.AggregationIntervalMs":String(c.aggregationInterval),"_MS.IsAutocollected":"True"});var l={name:c.name,value:c.value,count:c.count,properties:u,kind:"Aggregation"};this._client.trackMetric(l)},s.prototype.dispose=function(){s.INSTANCE=null,this.enable(!1),this._isInitialized=!1},s}();t.exports=i}),bo=A((e,t)=>{"use strict";var r=require("os"),n=require("fs"),o=require("path"),a=fr(),i=Kt(),s=function(){function c(u){this.keys=new a.ContextTagKeys,this.tags={},this._loadApplicationContext(u),this._loadDeviceContext(),this._loadInternalContext()}return c.prototype._loadApplicationContext=function(u){if(u=u||o.resolve(__dirname,"../../../../package.json"),!c.appVersion[u]){c.appVersion[u]="unknown";try{var d=JSON.parse(n.readFileSync(u,"utf8"));d&&typeof d.version=="string"&&(c.appVersion[u]=d.version)}catch(l){i.info("unable to read app version: ",l)}}this.tags[this.keys.applicationVersion]=c.appVersion[u]},c.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=r&&r.hostname(),this.tags[this.keys.deviceOSVersion]=r&&r.type()+" "+r.release(),this.tags[this.keys.cloudRole]=c.DefaultRoleName,this.tags["ai.device.osArchitecture"]=r&&r.arch(),this.tags["ai.device.osPlatform"]=r&&r.platform()},c.prototype._loadInternalContext=function(){var u=o.resolve(__dirname,"../../package.json");if(!c.sdkVersion){c.sdkVersion="unknown";try{var d=JSON.parse(n.readFileSync(u,"utf8"));d&&typeof d.version=="string"&&(c.sdkVersion=d.version)}catch(l){i.info("unable to read app version: ",l)}}this.tags[this.keys.internalSdkVersion]="node:"+c.sdkVersion},c.DefaultRoleName="Web",c.appVersion={},c.sdkVersion=null,c}();t.exports=s}),RE=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var d=function(l,p){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var m in g)Object.prototype.hasOwnProperty.call(g,m)&&(f[m]=g[m])},d(l,p)};return function(l,p){d(l,p);function f(){this.constructor=l}l.prototype=p===null?Object.create(p):(f.prototype=p.prototype,new f)}}(),n=require("url"),o=fr(),a=wr(),i=Di(),s=Td(),c=Yn(),u=function(d){r(l,d);function l(p,f){var g=d.call(this)||this;return f&&f.method&&p&&(g.method=f.method,g.url=l._getUrlFromRequestOptions(p,f),g.startTime=+new Date),g}return l.prototype.onError=function(p){this._setStatus(void 0,p)},l.prototype.onResponse=function(p){this._setStatus(p.statusCode,void 0),this.correlationId=a.getCorrelationContextTarget(p,i.requestContextTargetKey)},l.prototype.getDependencyTelemetry=function(p,f){var g=n.parse(this.url);g.search=void 0,g.hash=void 0;var m=this.method.toUpperCase()+" "+g.pathname,_=o.RemoteDependencyDataConstants.TYPE_HTTP,E=g.hostname;g.port&&(E+=":"+g.port),this.correlationId?(_=o.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==c.correlationIdPrefix&&(E+=" | "+this.correlationId)):_=o.RemoteDependencyDataConstants.TYPE_HTTP;var T={id:f,name:m,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:_,target:E};if(p&&p.time?T.time=p.time:this.startTime&&(T.time=new Date(this.startTime)),p){for(var w in p)T[w]||(T[w]=p[w]);if(p.properties)for(var w in p.properties)T.properties[w]=p.properties[w]}return T},l._getUrlFromRequestOptions=function(p,f){if(typeof p=="string")if(p.indexOf("http://")===0||p.indexOf("https://")===0)p=n.parse(p);else{var g=n.parse(p);g.host==="443"?p=n.parse("https://"+p):p=n.parse("http://"+p)}else{if(p&&typeof n.URL=="function"&&p instanceof n.URL)return n.format(p);var m=p;p={},m&&Object.keys(m).forEach(function(T){p[T]=m[T]})}if(p.path){var _=n.parse(p.path);p.pathname=_.pathname,p.search=_.search}if(p.host&&p.port){var E=n.parse("http://"+p.host);!E.port&&p.port&&(p.hostname=p.host,delete p.host)}return p.protocol=p.protocol||f.agent&&f.agent.protocol||f.protocol||void 0,p.hostname=p.hostname||"localhost",n.format(p)},l}(s);t.exports=u}),wE=A(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(i){for(var s,c=1,u=arguments.length;c<u;c++){s=arguments[c];for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&(i[d]=s[d])}return i},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.spanToTelemetryContract=void 0;var r=Ct(),n=sn();function o(i){var s=t({},i);return Object.keys(n.SpanAttribute).forEach(function(c){delete s[c]}),s}function a(i){var s="|"+i.spanContext().traceId+"."+i.spanContext().spanId+".",c=Math.round(i._duration[0]*1e3+i._duration[1]/1e6),u=i.attributes["peer.address"]?i.attributes["peer.address"].toString():"",d=i.attributes.component?i.attributes.component.toString():"",l=d.toUpperCase()===n.DependencyTypeName.Http||!!i.attributes[n.SpanAttribute.HttpUrl],p=d.toLowerCase()===n.DependencyTypeName.Grpc;if(l){var f=i.attributes[n.SpanAttribute.HttpMethod]||"GET",g=new URL(i.attributes[n.SpanAttribute.HttpUrl].toString()),m=i.attributes[n.SpanAttribute.HttpHost]||g.host,_=i.attributes[n.SpanAttribute.HttpPort]||g.port||null,E=g.pathname||"/",T=f+" "+E,w=n.DependencyTypeName.Http,R=_?(m+":"+_).toString():m.toString(),I=g.toString(),H=i.attributes[n.SpanAttribute.HttpStatusCode]||i.status.code||0,z=H<400;return{id:s,name:T,dependencyTypeName:w,target:R,data:I,success:z,duration:c,url:I,resultCode:String(H),properties:o(i.attributes)}}else if(p){var f=i.attributes[n.SpanAttribute.GrpcMethod]||"rpc",K=i.attributes[n.SpanAttribute.GrpcService],J=K?f+" "+K:i.name;return{id:s,duration:c,name:J,target:K.toString(),data:K.toString()||J,url:K.toString()||J,dependencyTypeName:n.DependencyTypeName.Grpc,resultCode:String(i.status.code||0),success:i.status.code===0,properties:o(i.attributes)}}else{var te=i.name,U=i.links&&i.links.map(function(V){return{operation_Id:V.context.traceId,id:V.context.spanId}});return{id:s,duration:c,name:te,target:u,data:u||te,url:u||te,dependencyTypeName:i.kind===r.SpanKind.INTERNAL?n.DependencyTypeName.InProc:d||i.name,resultCode:String(i.status.code||0),success:i.status.code===0,properties:t(t({},o(i.attributes)),{"_MS.links":U||void 0})}}}e.spanToTelemetryContract=a}),PE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=Ct(),r=kt(),n=Eo(),o=wE(),a=Gl(),i=[],s=function(u){var d=u.data,l=o.spanToTelemetryContract(d),p=d.spanContext(),f=new n;f.traceId=p.traceId,f.spanId=p.spanId,f.traceFlag=n.formatOpenTelemetryTraceFlags(p.traceFlags),f.parentId=d.parentSpanId?"|"+p.traceId+"."+d.parentSpanId+".":null,a.AsyncScopeManager.with(d,function(){i.forEach(function(g){d.kind===t.SpanKind.SERVER?g.trackRequest(l):(d.kind===t.SpanKind.CLIENT||d.kind===t.SpanKind.INTERNAL)&&g.trackDependency(l)})})};e.subscriber=s;function c(u,d){u?(i.length===0&&r.channel.subscribe("azure-coretracing",e.subscriber),i.push(d)):(i=i.filter(function(l){return l!=d}),i.length===0&&r.channel.unsubscribe("azure-coretracing",e.subscriber))}e.enable=c}),OE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=kt(),r=[],n=function(a){a.data.event.commandName!=="ismaster"&&r.forEach(function(i){var s=a.data.startedData&&a.data.startedData.databaseName||"Unknown database";i.trackDependency({target:s,data:a.data.event.commandName,name:a.data.event.commandName,duration:a.data.event.duration,success:a.data.succeeded,resultCode:a.data.succeeded?"0":"1",time:a.data.startedData.time,dependencyTypeName:"mongodb"})})};e.subscriber=n;function o(a,i){a?(r.length===0&&t.channel.subscribe("mongodb",e.subscriber),r.push(i)):(r=r.filter(function(s){return s!=i}),r.length===0&&t.channel.unsubscribe("mongodb",e.subscriber))}e.enable=o}),IE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=kt(),r=[],n=function(a){r.forEach(function(i){var s=a.data.query||{},c=s.sql||"Unknown query",u=!a.data.err,d=s._connection||{},l=d.config||{},p=l.socketPath?l.socketPath:(l.host||"localhost")+":"+l.port;i.trackDependency({target:p,data:c,name:c,duration:a.data.duration,success:u,resultCode:u?"0":"1",time:a.data.time,dependencyTypeName:"mysql"})})};e.subscriber=n;function o(a,i){a?(r.length===0&&t.channel.subscribe("mysql",e.subscriber),r.push(i)):(r=r.filter(function(s){return s!=i}),r.length===0&&t.channel.unsubscribe("mysql",e.subscriber))}e.enable=o}),DE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=kt(),r=[],n=function(a){r.forEach(function(i){a.data.commandObj.command!=="info"&&i.trackDependency({target:a.data.address,name:a.data.commandObj.command,data:a.data.commandObj.command,duration:a.data.duration,success:!a.data.err,resultCode:a.data.err?"1":"0",time:a.data.time,dependencyTypeName:"redis"})})};e.subscriber=n;function o(a,i){a?(r.length===0&&t.channel.subscribe("redis",e.subscriber),r.push(i)):(r=r.filter(function(s){return s!=i}),r.length===0&&t.channel.unsubscribe("redis",e.subscriber))}e.enable=o}),AE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=kt(),r=[],n=function(a){r.forEach(function(i){var s=a.data.query,c=s.preparable&&s.preparable.text||s.plan||s.text||"unknown query",u=!a.data.error,d=a.data.database.host+":"+a.data.database.port;i.trackDependency({target:d,data:c,name:c,duration:a.data.duration,success:u,resultCode:u?"0":"1",time:a.data.time,dependencyTypeName:"postgres"})})};e.subscriber=n;function o(a,i){a?(r.length===0&&t.channel.subscribe("postgres",e.subscriber),r.push(i)):(r=r.filter(function(s){return s!=i}),r.length===0&&t.channel.unsubscribe("postgres",e.subscriber))}e.enable=o}),Ai=A((e,t)=>{"use strict";var r=e&&e.__spreadArrays||function(){for(var g=0,m=0,_=arguments.length;m<_;m++)g+=arguments[m].length;for(var E=Array(g),T=0,m=0;m<_;m++)for(var w=arguments[m],R=0,I=w.length;R<I;R++,T++)E[T]=w[R];return E},n=require("http"),o=require("https"),a=Kt(),i=wr(),s=Di(),c=RE(),u=Qn(),d=Yn(),l=Eo(),p=na(),f=function(){function g(m){if(g.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");g.INSTANCE=this,this._client=m}return g.prototype.enable=function(m){this._isEnabled=m,this._isEnabled&&!this._isInitialized&&this._initialize(),p.IsInitialized&&(PE().enable(!0,this._client),OE().enable(m,this._client),IE().enable(m,this._client),DE().enable(m,this._client),AE().enable(m,this._client))},g.prototype.isInitialized=function(){return this._isInitialized},g.prototype._initialize=function(){var m=this;this._isInitialized=!0;var _=n.request,E=o.request,T=function(w,R){var I=!R[g.disableCollectionRequestOption]&&!w[g.alreadyAutoCollectedFlag];R.headers&&R.headers["user-agent"]&&R.headers["user-agent"].toString().indexOf("azsdk-js")!==-1&&(I=!1),w[g.alreadyAutoCollectedFlag]=!0,w&&R&&I&&(u.CorrelationContextManager.wrapEmitter(w),g.trackRequest(m._client,{options:R,request:w}))};n.request=function(w){for(var R=[],I=1;I<arguments.length;I++)R[I-1]=arguments[I];var H=_.call.apply(_,r([n,w],R));return T(H,w),H},o.request=function(w){for(var R=[],I=1;I<arguments.length;I++)R[I-1]=arguments[I];var H=E.call.apply(E,r([o,w],R));return T(H,w),H},n.get=function(w){for(var R,I=[],H=1;H<arguments.length;H++)I[H-1]=arguments[H];var z=(R=n.request).call.apply(R,r([n,w],I));return z.end(),z},o.get=function(w){for(var R,I=[],H=1;H<arguments.length;H++)I[H-1]=arguments[H];var z=(R=o.request).call.apply(R,r([o,w],I));return z.end(),z}},g.trackRequest=function(m,_){if(!_.options||!_.request||!m){a.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!_.options,!_.request,!m);return}var E=new c(_.options,_.request),T=u.CorrelationContextManager.getCurrentContext(),w,R;if(T&&T.operation&&T.operation.traceparent&&l.isValidTraceId(T.operation.traceparent.traceId))T.operation.traceparent.updateSpanId(),w=T.operation.traceparent.getBackCompatRequestId();else if(d.w3cEnabled){var I=new l;R=I.toString(),w=I.getBackCompatRequestId()}else w=T&&T.operation&&T.operation.parentId+g.requestNumber+++".";if(i.canIncludeCorrelationHeader(m,E.getUrl())&&_.request.getHeader&&_.request.setHeader&&m.config&&m.config.correlationId){var H=_.request.getHeader(s.requestContextHeader);try{i.safeIncludeCorrelationHeader(m,_.request,H)}catch(J){a.warn("Request-Context header could not be set. Correlation of requests may be lost",J)}if(T&&T.operation)try{if(_.request.setHeader(s.requestIdHeader,w),m.config.ignoreLegacyHeaders||(_.request.setHeader(s.parentIdHeader,T.operation.id),_.request.setHeader(s.rootIdHeader,w)),R||T.operation.traceparent)_.request.setHeader(s.traceparentHeader,R||T.operation.traceparent.toString());else if(d.w3cEnabled){var I=new l().toString();_.request.setHeader(s.traceparentHeader,I)}if(T.operation.tracestate){var z=T.operation.tracestate.toString();z&&_.request.setHeader(s.traceStateHeader,z)}var K=T.customProperties.serializeToHeader();K&&_.request.setHeader(s.correlationContextHeader,K)}catch(J){a.warn("Correlation headers could not be set. Correlation of requests may be lost.",J)}}_.request.on&&(_.request.on("response",function(J){E.onResponse(J);var te=E.getDependencyTelemetry(_,w);te.contextObjects=te.contextObjects||{},te.contextObjects["http.RequestOptions"]=_.options,te.contextObjects["http.ClientRequest"]=_.request,te.contextObjects["http.ClientResponse"]=J,m.trackDependency(te)}),_.request.on("error",function(J){E.onError(J);var te=E.getDependencyTelemetry(_,w);te.contextObjects=te.contextObjects||{},te.contextObjects["http.RequestOptions"]=_.options,te.contextObjects["http.ClientRequest"]=_.request,te.contextObjects.Error=J,m.trackDependency(te)}),_.request.on("abort",function(){E.onError(new Error);var J=E.getDependencyTelemetry(_,w);J.contextObjects=J.contextObjects||{},J.contextObjects["http.RequestOptions"]=_.options,J.contextObjects["http.ClientRequest"]=_.request,m.trackDependency(J)}))},g.prototype.dispose=function(){g.INSTANCE=null,this.enable(!1),this._isInitialized=!1},g.disableCollectionRequestOption="disableAppInsightsAutoCollection",g.requestNumber=1,g.alreadyAutoCollectedFlag="_appInsightsAutoCollected",g}();t.exports=f}),xE=A((e,t)=>{"use strict";var r=require("os"),n=sn(),o=wr(),a=bo(),i=Ai(),s="http://169.254.169.254/metadata/instance/compute",c="api-version=2017-12-01",u="format=json",d="ENETUNREACH",l=function(){function p(f){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",p.INSTANCE||(p.INSTANCE=this),this._isInitialized=!1,this._client=f}return p.prototype.enable=function(f,g){var m=this;this._isEnabled=f,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),f?this._handle||(this._handle=setInterval(function(){return m.trackHeartBeat(g,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},p.prototype.isInitialized=function(){return this._isInitialized},p.isEnabled=function(){return p.INSTANCE&&p.INSTANCE._isEnabled},p.prototype.trackHeartBeat=function(f,g){var m=this,_=!1,E={},T=a.sdkVersion;E.sdk=T,E.osType=r.type(),process.env.WEBSITE_SITE_NAME?(E.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",E.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",E.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?E.azfunction_appId=process.env.WEBSITE_HOSTNAME:f&&(this._isVM===void 0?(_=!0,this._getAzureComputeMetadata(f,function(){m._isVM&&Object.keys(m._vmData).length>0&&(E.azInst_vmId=m._vmData.vmId||"",E.azInst_subscriptionId=m._vmData.subscriptionId||"",E.azInst_osType=m._vmData.osType||"",m._azInst_vmId=m._vmData.vmId||"",m._azInst_subscriptionId=m._vmData.subscriptionId||"",m._azInst_osType=m._vmData.osType||""),m._client.trackMetric({name:n.HeartBeatMetricName,value:0,properties:E}),g()})):this._isVM&&(E.azInst_vmId=this._azInst_vmId,E.azInst_subscriptionId=this._azInst_subscriptionId,E.azInst_osType=this._azInst_osType)),_||(this._client.trackMetric({name:n.HeartBeatMetricName,value:0,properties:E}),g())},p.prototype.dispose=function(){p.INSTANCE=null,this.enable(!1),this._isInitialized=!1},p.prototype._getAzureComputeMetadata=function(f,g){var m,_=this,E=s+"?"+c+"&"+u,T=(m={method:"GET"},m[i.disableCollectionRequestOption]=!0,m.headers={Metadata:"True"},m),w=o.makeRequest(f,E,T,function(R){if(R.statusCode===200){_._isVM=!0;var I="";R.on("data",function(H){I+=H}),R.on("end",function(){_._vmData=_._isJSON(I)?JSON.parse(I):{},g()})}else g()});w&&(w.on("error",function(R){R&&R.message&&R.message.indexOf(d)>-1&&(_._isVM=!1),g()}),w.end())},p.prototype._isJSON=function(f){try{return JSON.parse(f)&&!!f}catch{return!1}},p}();t.exports=l}),Id=A((e,t)=>{"use strict";var r=require("http"),n=require("https"),o=Kt(),a=wr(),i=Di(),s=Sd(),c=Qn(),u=sa(),d=function(){function l(p){if(l.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");l.INSTANCE=this,this._client=p}return l.prototype.enable=function(p){this._isEnabled=p,(this._isAutoCorrelating||this._isEnabled||u.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},l.prototype.useAutoCorrelation=function(p,f){p&&!this._isAutoCorrelating?c.CorrelationContextManager.enable(f):!p&&this._isAutoCorrelating&&c.CorrelationContextManager.disable(),this._isAutoCorrelating=p},l.prototype.isInitialized=function(){return this._isInitialized},l.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},l.prototype._generateCorrelationContext=function(p){if(this._isAutoCorrelating)return c.CorrelationContextManager.generateContextObject(p.getOperationId(this._client.context.tags),p.getRequestId(),p.getOperationName(this._client.context.tags),p.getCorrelationContextHeader(),p.getTraceparent(),p.getTracestate())},l.prototype._initialize=function(){var p=this;this._isInitialized=!0;var f=function(E){if(E){if(typeof E!="function")throw new Error("onRequest handler must be a function");return function(T,w){c.CorrelationContextManager.wrapEmitter(T),c.CorrelationContextManager.wrapEmitter(w);var R=T&&!T[l.alreadyAutoCollectedFlag];if(T&&R){var I=new s(T),H=p._generateCorrelationContext(I);c.CorrelationContextManager.runWithContext(H,function(){p._isEnabled&&(T[l.alreadyAutoCollectedFlag]=!0,l.trackRequest(p._client,{request:T,response:w},I)),typeof E=="function"&&E(T,w)})}else typeof E=="function"&&E(T,w)}}},g=function(E){var T=E.addListener.bind(E);E.addListener=function(w,R){switch(w){case"request":case"checkContinue":return T(w,f(R));default:return T(w,R)}},E.on=E.addListener},m=r.createServer;r.createServer=function(E,T){if(T&&typeof T=="function"){var w=m(E,f(T));return g(w),w}else{var w=m(f(E));return g(w),w}};var _=n.createServer;n.createServer=function(E,T){var w=_(E,f(T));return g(w),w}},l.trackRequestSync=function(p,f){if(!f.request||!f.response||!p){o.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!f.request,!f.response,!p);return}l.addResponseCorrelationIdHeader(p,f.response);var g=c.CorrelationContextManager.getCurrentContext(),m=new s(f.request,g&&g.operation.parentId);g&&(g.operation.id=m.getOperationId(p.context.tags)||g.operation.id,g.operation.name=m.getOperationName(p.context.tags)||g.operation.name,g.operation.parentId=m.getRequestId()||g.operation.parentId,g.customProperties.addHeaderData(m.getCorrelationContextHeader())),l.endRequest(p,m,f,f.duration,f.error)},l.trackRequest=function(p,f,g){if(!f.request||!f.response||!p){o.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!f.request,!f.response,!p);return}var m=c.CorrelationContextManager.getCurrentContext(),_=g||new s(f.request,m&&m.operation.parentId);a.canIncludeCorrelationHeader(p,_.getUrl())&&l.addResponseCorrelationIdHeader(p,f.response),m&&!g&&(m.operation.id=_.getOperationId(p.context.tags)||m.operation.id,m.operation.name=_.getOperationName(p.context.tags)||m.operation.name,m.operation.parentId=_.getOperationParentId(p.context.tags)||m.operation.parentId,m.customProperties.addHeaderData(_.getCorrelationContextHeader())),f.response.once&&f.response.once("finish",function(){l.endRequest(p,_,f,null,null)}),f.request.on&&f.request.on("error",function(E){l.endRequest(p,_,f,null,E)}),f.request.on&&f.request.on("aborted",function(){var E="The request has been aborted and the network socket has closed.";l.endRequest(p,_,f,null,E)})},l.addResponseCorrelationIdHeader=function(p,f){if(p.config&&p.config.correlationId&&f.getHeader&&f.setHeader&&!f.headersSent){var g=f.getHeader(i.requestContextHeader);a.safeIncludeCorrelationHeader(p,f,g)}},l.endRequest=function(p,f,g,m,_){_?f.onError(_,m):f.onResponse(g.response,m);var E=f.getRequestTelemetry(g);if(E.tagOverrides=f.getRequestTags(p.context.tags),g.tagOverrides)for(var T in g.tagOverrides)E.tagOverrides[T]=g.tagOverrides[T];var w=f.getLegacyRootId();w&&(E.properties.ai_legacyRootId=w),E.contextObjects=E.contextObjects||{},E.contextObjects["http.ServerRequest"]=g.request,E.contextObjects["http.ServerResponse"]=g.response,p.trackRequest(E)},l.prototype.dispose=function(){l.INSTANCE=null,this.enable(!1),this._isInitialized=!1,c.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},l.alreadyAutoCollectedFlag="_appInsightsAutoCollected",l}();t.exports=d}),NE=A((e,t)=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(d){for(var l,p=1,f=arguments.length;p<f;p++){l=arguments[p];for(var g in l)Object.prototype.hasOwnProperty.call(l,g)&&(d[g]=l[g])}return d},r.apply(this,arguments)},n=require("os"),o=fr(),a=sn(),i=wr(),s=Kt(),c=i.w3cTraceId(),u=function(){function d(){}return d.createQuickPulseEnvelope=function(l,p,f,g){var m=n&&typeof n.hostname=="function"&&n.hostname()||"Unknown",_=g.tags&&g.keys&&g.keys.cloudRoleInstance&&g.tags[g.keys.cloudRoleInstance]||m,E=g.tags&&g.keys&&g.keys.cloudRole&&g.tags[g.keys.cloudRole]||null,T={Documents:p.length>0?p:null,InstrumentationKey:f.instrumentationKey||"",Metrics:l.length>0?l:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:g.tags[g.keys.internalSdkVersion],StreamId:c,MachineName:m,Instance:_,RoleName:E};return T},d.createQuickPulseMetric=function(l){var p;return p={Name:l.name,Value:l.value,Weight:l.count||1},p},d.telemetryEnvelopeToQuickPulseDocument=function(l){switch(l.data.baseType){case o.TelemetryTypeString.Event:return d.createQuickPulseEventDocument(l);case o.TelemetryTypeString.Exception:return d.createQuickPulseExceptionDocument(l);case o.TelemetryTypeString.Trace:return d.createQuickPulseTraceDocument(l);case o.TelemetryTypeString.Dependency:return d.createQuickPulseDependencyDocument(l);case o.TelemetryTypeString.Request:return d.createQuickPulseRequestDocument(l)}return null},d.createQuickPulseEventDocument=function(l){var p=d.createQuickPulseDocument(l),f=l.data.baseData.name,g=r(r({},p),{Name:f});return g},d.createQuickPulseTraceDocument=function(l){var p=d.createQuickPulseDocument(l),f=l.data.baseData.severityLevel||0,g=r(r({},p),{Message:l.data.baseData.message,SeverityLevel:o.SeverityLevel[f]});return g},d.createQuickPulseExceptionDocument=function(l){var p=d.createQuickPulseDocument(l),f=l.data.baseData.exceptions,g="",m="",_="";f&&f.length>0&&(f[0].parsedStack&&f[0].parsedStack.length>0?f[0].parsedStack.forEach(function(T){g+=T.assembly+`
`}):f[0].stack&&f[0].stack.length>0&&(g=f[0].stack),m=f[0].message,_=f[0].typeName);var E=r(r({},p),{Exception:g,ExceptionMessage:m,ExceptionType:_});return E},d.createQuickPulseRequestDocument=function(l){var p=d.createQuickPulseDocument(l),f=l.data.baseData,g=r(r({},p),{Name:f.name,Success:f.success,Duration:f.duration,ResponseCode:f.responseCode,OperationName:f.name});return g},d.createQuickPulseDependencyDocument=function(l){var p=d.createQuickPulseDocument(l),f=l.data.baseData,g=r(r({},p),{Name:f.name,Target:f.target,Success:f.success,Duration:f.duration,ResultCode:f.resultCode,CommandName:f.data,OperationName:p.OperationId,DependencyTypeName:f.type});return g},d.createQuickPulseDocument=function(l){var p,f,g,m;l.data.baseType?(f=a.TelemetryTypeStringToQuickPulseType[l.data.baseType],p=a.TelemetryTypeStringToQuickPulseDocumentType[l.data.baseType]):s.warn("Document type invalid; not sending live metric document",l.data.baseType),g=l.tags[d.keys.operationId],m=d.aggregateProperties(l);var _={DocumentType:p,__type:f,OperationId:g,Version:"1.0",Properties:m};return _},d.aggregateProperties=function(l){var p=[],f=l.data.baseData.measurements||{};for(var g in f)if(f.hasOwnProperty(g)){var m=f[g],_={key:g,value:m};p.push(_)}var E=l.data.baseData.properties||{};for(var g in E)if(E.hasOwnProperty(g)){var m=E[g],_={key:g,value:m};p.push(_)}return p},d.keys=new o.ContextTagKeys,d}();t.exports=u}),kE=A((e,t)=>{"use strict";var r=function(){return(Date.now()+621355968e5)*1e4};t.exports={getTransmissionTime:r}}),ME=A((e,t)=>{"use strict";var r=e&&e.__awaiter||function(l,p,f,g){function m(_){return _ instanceof f?_:new f(function(E){E(_)})}return new(f||(f=Promise))(function(_,E){function T(I){try{R(g.next(I))}catch(H){E(H)}}function w(I){try{R(g.throw(I))}catch(H){E(H)}}function R(I){I.done?_(I.value):m(I.value).then(T,w)}R((g=g.apply(l,p||[])).next())})},n=e&&e.__generator||function(l,p){var f={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},g,m,_,E;return E={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function T(R){return function(I){return w([R,I])}}function w(R){if(g)throw new TypeError("Generator is already executing.");for(;f;)try{if(g=1,m&&(_=R[0]&2?m.return:R[0]?m.throw||((_=m.return)&&_.call(m),0):m.next)&&!(_=_.call(m,R[1])).done)return _;switch(m=0,_&&(R=[R[0]&2,_.value]),R[0]){case 0:case 1:_=R;break;case 4:return f.label++,{value:R[1],done:!1};case 5:f.label++,m=R[1],R=[0];continue;case 7:R=f.ops.pop(),f.trys.pop();continue;default:if(_=f.trys,!(_=_.length>0&&_[_.length-1])&&(R[0]===6||R[0]===2)){f=0;continue}if(R[0]===3&&(!_||R[1]>_[0]&&R[1]<_[3])){f.label=R[1];break}if(R[0]===6&&f.label<_[1]){f.label=_[1],_=R;break}if(_&&f.label<_[2]){f.label=_[2],f.ops.push(R);break}_[2]&&f.ops.pop(),f.trys.pop();continue}R=p.call(l,f)}catch(I){R=[6,I],m=0}finally{g=_=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}},o=require("https"),a=Ai(),i=Kt(),s=kE(),c=wr(),u={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},d=function(){function l(p){this._config=p,this._consecutiveErrors=0}return l.prototype.ping=function(p,f,g){var m=[{name:u.streamId,value:p.StreamId},{name:u.machineName,value:p.MachineName},{name:u.roleName,value:p.RoleName},{name:u.instanceName,value:p.Instance},{name:u.invariantVersion,value:p.InvariantVersion.toString()}];this._submitData(p,f,g,"ping",m)},l.prototype.post=function(p,f,g){return r(this,void 0,void 0,function(){return n(this,function(m){switch(m.label){case 0:return[4,this._submitData([p],f,g,"post")];case 1:return m.sent(),[2]}})})},l.prototype._submitData=function(p,f,g,m,_){return r(this,void 0,void 0,function(){var E,T,w,R,I,H=this;return n(this,function(z){return E=JSON.stringify(p),T=(R={},R[a.disableCollectionRequestOption]=!0,R.host=f&&f.length>0?f:this._config.quickPulseHost,R.method=u.method,R.path="/QuickPulseService.svc/"+m+"?ikey="+this._config.instrumentationKey,R.headers=(I={Expect:"100-continue"},I[u.time]=s.getTransmissionTime(),I["Content-Type"]="application/json",I["Content-Length"]=Buffer.byteLength(E),I),R),_&&_.length>0&&_.forEach(function(K){return T.headers[K.name]=K.value}),this._config.httpsAgent?T.agent=this._config.httpsAgent:T.agent=c.tlsRestrictedAgent,w=o.request(T,function(K){if(K.statusCode==200){var J=K.headers[u.subscribed]==="true",te=K.headers[u.endpointRedirect]?K.headers[u.endpointRedirect].toString():null,U=K.headers[u.pollingIntervalHint]?parseInt(K.headers[u.pollingIntervalHint].toString()):null;H._consecutiveErrors=0,g(J,K,te,U)}else H._onError("StatusCode:"+K.statusCode+" StatusMessage:"+K.statusMessage),g()}),w.on("error",function(K){H._onError(K),g()}),w.write(E),w.end(),[2]})})},l.prototype._onError=function(p){this._consecutiveErrors++;var f="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%l.MAX_QPS_FAILURES_BEFORE_WARN===0?(f="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",i.warn(l.TAG,f,p)):i.info(l.TAG,f,p)},l.TAG="QuickPulseSender",l.MAX_QPS_FAILURES_BEFORE_WARN=25,l}();t.exports=d}),qE=A((e,t)=>{"use strict";var r=e&&e.__awaiter||function(d,l,p,f){function g(m){return m instanceof p?m:new p(function(_){_(m)})}return new(p||(p=Promise))(function(m,_){function E(R){try{w(f.next(R))}catch(I){_(I)}}function T(R){try{w(f.throw(R))}catch(I){_(I)}}function w(R){R.done?m(R.value):g(R.value).then(E,T)}w((f=f.apply(d,l||[])).next())})},n=e&&e.__generator||function(d,l){var p={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},f,g,m,_;return _={next:E(0),throw:E(1),return:E(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function E(w){return function(R){return T([w,R])}}function T(w){if(f)throw new TypeError("Generator is already executing.");for(;p;)try{if(f=1,g&&(m=w[0]&2?g.return:w[0]?g.throw||((m=g.return)&&m.call(g),0):g.next)&&!(m=m.call(g,w[1])).done)return m;switch(g=0,m&&(w=[w[0]&2,m.value]),w[0]){case 0:case 1:m=w;break;case 4:return p.label++,{value:w[1],done:!1};case 5:p.label++,g=w[1],w=[0];continue;case 7:w=p.ops.pop(),p.trys.pop();continue;default:if(m=p.trys,!(m=m.length>0&&m[m.length-1])&&(w[0]===6||w[0]===2)){p=0;continue}if(w[0]===3&&(!m||w[1]>m[0]&&w[1]<m[3])){p.label=w[1];break}if(w[0]===6&&p.label<m[1]){p.label=m[1],m=w;break}if(m&&p.label<m[2]){p.label=m[2],p.ops.push(w);break}m[2]&&p.ops.pop(),p.trys.pop();continue}w=l.call(d,p)}catch(R){w=[6,R],g=0}finally{f=m=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},o=Kt(),a=NE(),i=ME(),s=sn(),c=bo(),u=function(){function d(l,p){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=l,this.context=p||new c,this._sender=new i(this.config),this._isEnabled=!1}return d.prototype.addCollector=function(l){this._collectors.push(l)},d.prototype.trackMetric=function(l){this._addMetric(l)},d.prototype.addDocument=function(l){var p=a.telemetryEnvelopeToQuickPulseDocument(l);p&&this._documents.push(p)},d.prototype.enable=function(l){l&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!l&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},d.prototype.enableCollectors=function(l){this._collectors.forEach(function(p){p.enable(l)})},d.prototype._addMetric=function(l){var p=l.value,f=l.count||1,g=s.PerformanceToQuickPulseCounter[l.name];g&&(this._metrics[g]?(this._metrics[g].Value=(this._metrics[g].Value*this._metrics[g].Weight+p*f)/(this._metrics[g].Weight+f),this._metrics[g].Weight+=f):(this._metrics[g]=a.createQuickPulseMetric(l),this._metrics[g].Name=g,this._metrics[g].Weight=1))},d.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},d.prototype._goQuickPulse=function(){return r(this,void 0,void 0,function(){var l,p,f,g,m=this;return n(this,function(_){switch(_.label){case 0:return l=Object.keys(this._metrics).map(function(E){return m._metrics[E]}),p=a.createQuickPulseEnvelope(l,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(p)]:[3,2];case 1:return _.sent(),[3,3];case 2:this._ping(p),_.label=3;case 3:return f=this._pollingIntervalHint>0?this._pollingIntervalHint:d.PING_INTERVAL,g=this._isCollectingData?d.POST_INTERVAL:f,this._isCollectingData&&Date.now()-this._lastSuccessTime>=d.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,g=d.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=d.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(g=d.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),g),this._handle.unref(),[2]}})})},d.prototype._ping=function(l){this._sender.ping(l,this._redirectedHost,this._quickPulseDone.bind(this))},d.prototype._post=function(l){return r(this,void 0,void 0,function(){return n(this,function(p){switch(p.label){case 0:return[4,this._sender.post(l,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return p.sent(),[2]}})})},d.prototype._quickPulseDone=function(l,p,f,g){l!=null?(this._isCollectingData!==l&&(o.info("Live Metrics sending data",l),this.enableCollectors(l)),this._isCollectingData=l,f&&f.length>0&&(this._redirectedHost=f,o.info("Redirecting endpoint to: ",f)),g&&g>0&&(this._pollingIntervalHint=g),p&&p.statusCode<300&&p.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},d.MAX_POST_WAIT_TIME=2e4,d.MAX_PING_WAIT_TIME=6e4,d.FALLBACK_INTERVAL=6e4,d.PING_INTERVAL=5e3,d.POST_INTERVAL=1e3,d}();t.exports=u}),LE=A((e,t)=>{"use strict";var r=sn(),n=function(){function o(){}return o.parse=function(a){if(!a)return{};var i=a.split(o._FIELDS_SEPARATOR),s=i.reduce(function(u,d){var l=d.split(o._FIELD_KEY_VALUE_SEPARATOR);if(l.length===2){var p=l[0].toLowerCase(),f=l[1];u[p]=f}return u},{});if(Object.keys(s).length>0){if(s.endpointsuffix){var c=s.location?s.location+".":"";s.ingestionendpoint=s.ingestionendpoint||"https://"+c+"dc."+s.endpointsuffix,s.liveendpoint=s.liveendpoint||"https://"+c+"live."+s.endpointsuffix}s.ingestionendpoint=s.ingestionendpoint||r.DEFAULT_BREEZE_ENDPOINT,s.liveendpoint=s.liveendpoint||r.DEFAULT_LIVEMETRICS_ENDPOINT}return s},o._FIELDS_SEPARATOR=";",o._FIELD_KEY_VALUE_SEPARATOR="=",o}();t.exports=n}),Dd=A((e,t)=>{"use strict";var r=Yn(),n=LE(),o=Kt(),a=sn(),i=require("url"),s=function(){function c(u){var d=this;this.endpointBase=a.DEFAULT_BREEZE_ENDPOINT;var l=process.env[c.ENV_connectionString],p=n.parse(u),f=n.parse(l),g=!p.instrumentationkey&&Object.keys(p).length>0?null:u;this.instrumentationKey=p.instrumentationkey||g||f.instrumentationkey||c._getInstrumentationKey(),c._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(p.ingestionendpoint||f.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(m){return d.correlationId=m},this.proxyHttpUrl=process.env[c.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[c.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=p.ingestionendpoint||f.ingestionendpoint||process.env[c.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=p.liveendpoint||f.liveendpoint||process.env[c.ENV_quickPulseHost]||a.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=i.parse(this._quickPulseHost).host)}return Object.defineProperty(c.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(u){r.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=u,this.correlationId=r.correlationIdPrefix,r.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(u){this._quickPulseHost=u},enumerable:!1,configurable:!0}),c._getInstrumentationKey=function(){var u=process.env[c.ENV_iKey]||process.env[c.ENV_azurePrefix+c.ENV_iKey]||process.env[c.legacy_ENV_iKey]||process.env[c.ENV_azurePrefix+c.legacy_ENV_iKey];if(!u||u=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return u},c._validateInstrumentationKey=function(u){var d="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",l=new RegExp(d);return l.test(u)},c.ENV_azurePrefix="APPSETTING_",c.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",c.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",c.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",c.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",c.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",c.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",c.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",c.ENV_http_proxy="http_proxy",c.ENV_https_proxy="https_proxy",c}();t.exports=s}),jE=A(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(i){for(var s,c=1,u=arguments.length;c<u;c++){s=arguments[c];for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&(i[d]=s[d])}return i},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AutoCollectNativePerformance=void 0;var r=Dd(),n=bo(),o=Kt(),a=function(){function i(s){this._disabledMetrics={},i.INSTANCE&&i.INSTANCE.dispose(),i.INSTANCE=this,this._client=s}return i.isNodeVersionCompatible=function(){var s=process.versions.node.split(".");return parseInt(s[0])>=6},i.prototype.enable=function(s,c,u){var d=this;if(c===void 0&&(c={}),u===void 0&&(u=6e4),!!i.isNodeVersionCompatible()){if(i._metricsAvailable==null&&s&&!this._isInitialized)try{var l=require("applicationinsights-native-metrics");i._emitter=new l,i._metricsAvailable=!0,o.info("Native metrics module successfully loaded!")}catch{i._metricsAvailable=!1;return}this._isEnabled=s,this._disabledMetrics=c,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&i._emitter?(i._emitter.enable(!0,u),this._handle||(this._handle=setInterval(function(){return d._trackNativeMetrics()},u),this._handle.unref())):i._emitter&&(i._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},i.prototype.dispose=function(){this.enable(!1)},i.parseEnabled=function(s){var c=process.env[r.ENV_nativeMetricsDisableAll],u=process.env[r.ENV_nativeMetricsDisablers];if(c)return{isEnabled:!1,disabledMetrics:{}};if(u){var d=u.split(","),l={};if(d.length>0)for(var p=0,f=d;p<f.length;p++){var g=f[p];l[g]=!0}return typeof s=="object"?{isEnabled:!0,disabledMetrics:t(t({},s),l)}:{isEnabled:s,disabledMetrics:l}}return typeof s=="boolean"?{isEnabled:s,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:s}},i.prototype._trackNativeMetrics=function(){var s=!0;typeof this._isEnabled!="object"&&(s=this._isEnabled),s&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},i.prototype._trackGarbageCollection=function(){var s;if(!this._disabledMetrics.gc){var c=i._emitter.getGCData();for(var u in c){var d=c[u].metrics,l=u+" Garbage Collection Duration",p=Math.sqrt(d.sumSquares/d.count-Math.pow(d.total/d.count,2))||0;this._client.trackMetric({name:l,value:d.total,count:d.count,max:d.max,min:d.min,stdDev:p,tagOverrides:(s={},s[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,s)})}}},i.prototype._trackEventLoop=function(){var s;if(!this._disabledMetrics.loop){var c=i._emitter.getLoopData(),u=c.loopUsage;if(u.count!=0){var d="Event Loop CPU Time",l=Math.sqrt(u.sumSquares/u.count-Math.pow(u.total/u.count,2))||0;this._client.trackMetric({name:d,value:u.total,count:u.count,min:u.min,max:u.max,stdDev:l,tagOverrides:(s={},s[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,s)})}}},i.prototype._trackHeapUsage=function(){var s,c,u;if(!this._disabledMetrics.heap){var d=process.memoryUsage(),l=d.heapUsed,p=d.heapTotal,f=d.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:l,count:1,tagOverrides:(s={},s[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,s)}),this._client.trackMetric({name:"Memory Total (Heap)",value:p,count:1,tagOverrides:(c={},c[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,c)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:f-p,count:1,tagOverrides:(u={},u[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,u)})}},i}();e.AutoCollectNativePerformance=a}),FE=A((e,t)=>{"use strict";var r=Kt(),n=function(){function o(a,i,s,c){this._buffer=[],this._lastSend=0,this._isDisabled=a,this._getBatchSize=i,this._getBatchIntervalMs=s,this._sender=c}return o.prototype.setUseDiskRetryCaching=function(a,i,s){this._sender.setDiskRetryMode(a,i,s)},o.prototype.send=function(a){var i=this;if(!this._isDisabled()){if(!a){r.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(a),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){i._timeoutHandle=null,i.triggerSend(!1)},this._getBatchIntervalMs()))}},o.prototype.triggerSend=function(a,i){var s=this._buffer.length<1;s||(a?(this._sender.saveOnCrash(this._buffer),typeof i=="function"&&i("data saved on crash")):this._sender.send(this._buffer,i)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,s&&typeof i=="function"&&i("no data to send")},o}();t.exports=n}),HE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.azureRoleEnvironmentTelemetryProcessor=void 0;function t(r,n){process.env.WEBSITE_SITE_NAME&&(r.tags[n.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}e.azureRoleEnvironmentTelemetryProcessor=t}),$E=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSamplingHashCode=e.samplingTelemetryProcessor=void 0;var t=fr();function r(o,a){var i=o.sampleRate,s=!1;return i==null||i>=100||o.data&&t.TelemetryType.Metric===t.baseTypeToTelemetryType(o.data.baseType)?!0:(a.correlationContext&&a.correlationContext.operation?s=n(a.correlationContext.operation.id)<i:s=Math.random()*100<i,s)}e.samplingTelemetryProcessor=r;function n(o){var a=-2147483648,i=2147483647,s=5381;if(!o)return 0;for(;o.length<8;)o=o+o;for(var c=0;c<o.length;c++)s=((s<<5)+s|0)+o.charCodeAt(c)|0;return s=s<=a?i:Math.abs(s),s/i*100}e.getSamplingHashCode=n}),UE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.performanceMetricsTelemetryProcessor=void 0;var t=sa(),r=fr();function n(o,a){switch(a&&a.addDocument(o),o.data.baseType){case r.TelemetryTypeString.Exception:t.countException();break;case r.TelemetryTypeString.Request:var i=o.data.baseData;t.countRequest(i.duration,i.success);break;case r.TelemetryTypeString.Dependency:var s=o.data.baseData;t.countDependency(s.duration,s.success);break}return!0}e.performanceMetricsTelemetryProcessor=n}),BE=A(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(i){for(var s,c=1,u=arguments.length;c<u;c++){s=arguments[c];for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&(i[d]=s[d])}return i},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.preAggregatedMetricsTelemetryProcessor=void 0;var r=fr(),n=Od(),o=fr();function a(i,s){if(n.isEnabled())switch(i.data.baseType){case o.TelemetryTypeString.Exception:var c=i.data.baseData;c.properties=t(t({},c.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var u={cloudRoleInstance:i.tags[s.keys.cloudRoleInstance],cloudRoleName:i.tags[s.keys.cloudRole]};n.countException(u);break;case o.TelemetryTypeString.Trace:var d=i.data.baseData;d.properties=t(t({},d.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var l={cloudRoleInstance:i.tags[s.keys.cloudRoleInstance],cloudRoleName:i.tags[s.keys.cloudRole],traceSeverityLevel:r.SeverityLevel[d.severity]};n.countTrace(l);break;case o.TelemetryTypeString.Request:var p=i.data.baseData;p.properties=t(t({},p.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var f={cloudRoleInstance:i.tags[s.keys.cloudRoleInstance],cloudRoleName:i.tags[s.keys.cloudRole],operationSynthetic:i.tags[s.keys.operationSyntheticSource],requestSuccess:p.success,requestResultCode:p.responseCode};n.countRequest(p.duration,f);break;case o.TelemetryTypeString.Dependency:var g=i.data.baseData;g.properties=t(t({},g.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var m={cloudRoleInstance:i.tags[s.keys.cloudRoleInstance],cloudRoleName:i.tags[s.keys.cloudRole],operationSynthetic:i.tags[s.keys.operationSyntheticSource],dependencySuccess:g.success,dependencyType:g.type,dependencyTarget:g.target,dependencyResultCode:g.resultCode};n.countDependency(g.duration,m);break}return!0}e.preAggregatedMetricsTelemetryProcessor=a}),VE=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(HE(),e),r($E(),e),r(UE(),e),r(BE(),e)}),GE=A((e,t)=>{"use strict";var r=e&&e.__awaiter||function(f,g,m,_){function E(T){return T instanceof m?T:new m(function(w){w(T)})}return new(m||(m=Promise))(function(T,w){function R(z){try{H(_.next(z))}catch(K){w(K)}}function I(z){try{H(_.throw(z))}catch(K){w(K)}}function H(z){z.done?T(z.value):E(z.value).then(R,I)}H((_=_.apply(f,g||[])).next())})},n=e&&e.__generator||function(f,g){var m={label:0,sent:function(){if(T[0]&1)throw T[1];return T[1]},trys:[],ops:[]},_,E,T,w;return w={next:R(0),throw:R(1),return:R(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function R(H){return function(z){return I([H,z])}}function I(H){if(_)throw new TypeError("Generator is already executing.");for(;m;)try{if(_=1,E&&(T=H[0]&2?E.return:H[0]?E.throw||((T=E.return)&&T.call(E),0):E.next)&&!(T=T.call(E,H[1])).done)return T;switch(E=0,T&&(H=[H[0]&2,T.value]),H[0]){case 0:case 1:T=H;break;case 4:return m.label++,{value:H[1],done:!1};case 5:m.label++,E=H[1],H=[0];continue;case 7:H=m.ops.pop(),m.trys.pop();continue;default:if(T=m.trys,!(T=T.length>0&&T[T.length-1])&&(H[0]===6||H[0]===2)){m=0;continue}if(H[0]===3&&(!T||H[1]>T[0]&&H[1]<T[3])){m.label=H[1];break}if(H[0]===6&&m.label<T[1]){m.label=T[1],T=H;break}if(T&&m.label<T[2]){m.label=T[2],m.ops.push(H);break}T[2]&&m.ops.pop(),m.trys.pop();continue}H=g.call(f,m)}catch(z){H=[6,z],E=0}finally{_=T=0}if(H[0]&5)throw H[1];return{value:H[0]?H[1]:void 0,done:!0}}},o=require("fs"),a=require("os"),i=require("path"),s=require("zlib"),c=require("child_process"),u=Kt(),d=Ai(),l=wr(),p=function(){function f(g,m,_){if(this._redirectedHost=null,this._config=g,this._onSuccess=m,this._onError=_,this._enableDiskRetryMode=!1,this._resendInterval=f.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=f.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=i.join(a.tmpdir(),f.TEMPDIR_PREFIX+this._config.instrumentationKey),!f.OS_PROVIDES_FILE_PROTECTION)if(f.USE_ICACLS){try{f.OS_PROVIDES_FILE_PROTECTION=o.existsSync(f.ICACLS_PATH)}catch{}f.OS_PROVIDES_FILE_PROTECTION||u.warn(f.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else f.OS_PROVIDES_FILE_PROTECTION=!0}return f.prototype.setDiskRetryMode=function(g,m,_){var E=this;this._enableDiskRetryMode=f.OS_PROVIDES_FILE_PROTECTION&&g,typeof m=="number"&&m>=0&&(this._resendInterval=Math.floor(m)),typeof _=="number"&&_>=0&&(this._maxBytesOnDisk=Math.floor(_)),g&&!f.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,u.warn(f.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){E._fileCleanupTask()},f.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},f.prototype.send=function(g,m){return r(this,void 0,void 0,function(){var _,E,T,w,R=this;return n(this,function(I){return g&&(_=this._redirectedHost||this._config.endpointUrl,E={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},T="",g.forEach(function(H){var z=R._stringify(H);typeof z=="string"&&(T+=z+`
`)}),T.length>0&&(T=T.substring(0,T.length-1)),w=Buffer.from?Buffer.from(T):new Buffer(T),s.gzip(w,function(H,z){var K=z;H?(u.warn(H),K=w,E.headers["Content-Length"]=w.length.toString()):(E.headers["Content-Encoding"]="gzip",E.headers["Content-Length"]=z.length.toString()),u.info(f.TAG,E),E[d.disableCollectionRequestOption]=!0;var J=function(U){U.setEncoding("utf-8");var V="";U.on("data",function(Q){V+=Q}),U.on("end",function(){if(R._numConsecutiveFailures=0,R._enableDiskRetryMode){if(U.statusCode===200)R._resendTimer||(R._resendTimer=setTimeout(function(){R._resendTimer=null,R._sendFirstFileOnDisk()},R._resendInterval),R._resendTimer.unref());else if(R._isRetriable(U.statusCode))try{var Q=JSON.parse(V),ne=[];Q.errors.forEach(function(de){R._isRetriable(de.statusCode)&&ne.push(g[de.index])}),ne.length>0&&R._storeToDisk(ne)}catch{R._storeToDisk(g)}}if(U.statusCode===307||U.statusCode===308)if(R._numConsecutiveRedirects++,R._numConsecutiveRedirects<10){var ve=U.headers.location?U.headers.location.toString():null;ve&&(R._redirectedHost=ve,R.send(g,m))}else typeof m=="function"&&m("Error sending telemetry because of circular redirects.");else R._numConsecutiveRedirects=0,typeof m=="function"&&m(V),u.info(f.TAG,V),typeof R._onSuccess=="function"&&R._onSuccess(V)})},te=l.makeRequest(R._config,_,E,J);te.on("error",function(U){if(R._numConsecutiveFailures++,!R._enableDiskRetryMode||R._numConsecutiveFailures>0&&R._numConsecutiveFailures%f.MAX_CONNECTION_FAILURES_BEFORE_WARN===0){var V="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";R._enableDiskRetryMode&&(V="Ingestion endpoint could not be reached "+R._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),u.warn(f.TAG,V,l.dumpObj(U))}else{var V="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";u.info(f.TAG,V,l.dumpObj(U))}R._onErrorHelper(U),typeof m=="function"&&(U&&m(l.dumpObj(U)),m("Error sending telemetry")),R._enableDiskRetryMode&&R._storeToDisk(g)}),te.write(K),te.end()})),[2]})})},f.prototype.saveOnCrash=function(g){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(g))},f.prototype._isRetriable=function(g){return g===206||g===408||g===429||g===439||g===500||g===503},f.prototype._runICACLS=function(g,m){var _=c.spawn(f.ICACLS_PATH,g,{windowsHide:!0});_.on("error",function(E){return m(E)}),_.on("close",function(E,T){return m(E===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+E+")"))})},f.prototype._runICACLSSync=function(g){if(c.spawnSync){var m=c.spawnSync(f.ICACLS_PATH,g,{windowsHide:!0});if(m.error)throw m.error;if(m.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+m.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},f.prototype._getACLIdentity=function(g){if(f.ACL_IDENTITY)return g(null,f.ACL_IDENTITY);var m=c.spawn(f.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),_="";m.stdout.on("data",function(E){return _+=E}),m.on("error",function(E){return g(E,null)}),m.on("close",function(E,T){return f.ACL_IDENTITY=_&&_.trim(),g(E===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+E+")"),f.ACL_IDENTITY)})},f.prototype._getACLIdentitySync=function(){if(f.ACL_IDENTITY)return f.ACL_IDENTITY;if(c.spawnSync){var g=c.spawnSync(f.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(g.error)throw g.error;if(g.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+g.status+")");return f.ACL_IDENTITY=g.stdout&&g.stdout.toString().trim(),f.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},f.prototype._getACLArguments=function(g,m){return[g,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",m+":(OI)(CI)F","/inheritance:r"]},f.prototype._applyACLRules=function(g,m){var _=this;if(!f.USE_ICACLS)return m(null);if(f.ACLED_DIRECTORIES[g]===void 0)f.ACLED_DIRECTORIES[g]=!1,this._getACLIdentity(function(E,T){if(E)return f.ACLED_DIRECTORIES[g]=!1,m(E);_._runICACLS(_._getACLArguments(g,T),function(w){return f.ACLED_DIRECTORIES[g]=!w,m(w)})});else return m(f.ACLED_DIRECTORIES[g]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},f.prototype._applyACLRulesSync=function(g){if(f.USE_ICACLS){if(f.ACLED_DIRECTORIES[g]===void 0){this._runICACLSSync(this._getACLArguments(g,this._getACLIdentitySync())),f.ACLED_DIRECTORIES[g]=!0;return}else if(!f.ACLED_DIRECTORIES[g])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},f.prototype._confirmDirExists=function(g,m){var _=this;o.lstat(g,function(E,T){E&&E.code==="ENOENT"?o.mkdir(g,function(w){w&&w.code!=="EEXIST"?m(w):_._applyACLRules(g,m)}):!E&&T.isDirectory()?_._applyACLRules(g,m):m(E||new Error("Path existed but was not a directory"))})},f.prototype._getShallowDirectorySize=function(g,m){o.readdir(g,function(_,E){if(_)return m(_,-1);var T=null,w=0,R=0;if(E.length===0){m(null,0);return}for(var I=0;I<E.length;I++)o.stat(i.join(g,E[I]),function(H,z){R++,H?T=H:z.isFile()&&(w+=z.size),R===E.length&&(T?m(T,-1):m(T,w))})})},f.prototype._getShallowDirectorySizeSync=function(g){for(var m=o.readdirSync(g),_=0,E=0;E<m.length;E++)_+=o.statSync(i.join(g,m[E])).size;return _},f.prototype._storeToDisk=function(g){var m=this;u.info(f.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,function(_){if(_){u.warn(f.TAG,"Error while checking/creating directory: "+(_&&_.message)),m._onErrorHelper(_);return}m._getShallowDirectorySize(m._tempDir,function(E,T){if(E||T<0){u.warn(f.TAG,"Error while checking directory size: "+(E&&E.message)),m._onErrorHelper(E);return}else if(T>m._maxBytesOnDisk){u.warn(f.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+T);return}var w=new Date().getTime()+".ai.json",R=i.join(m._tempDir,w);u.info(f.TAG,"saving data to disk at: "+R),o.writeFile(R,m._stringify(g),{mode:384},function(I){return m._onErrorHelper(I)})})})},f.prototype._storeToDiskSync=function(g){try{u.info(f.TAG,"Checking existence of data storage directory: "+this._tempDir),o.existsSync(this._tempDir)||o.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var m=this._getShallowDirectorySizeSync(this._tempDir);if(m>this._maxBytesOnDisk){u.info(f.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+m);return}var _=new Date().getTime()+".ai.json",E=i.join(this._tempDir,_);u.info(f.TAG,"saving data before crash to disk at: "+E),o.writeFileSync(E,g,{mode:384})}catch(T){u.warn(f.TAG,"Error while saving data to disk: "+(T&&T.message)),this._onErrorHelper(T)}},f.prototype._sendFirstFileOnDisk=function(){var g=this;o.exists(this._tempDir,function(m){m&&o.readdir(g._tempDir,function(_,E){if(_)g._onErrorHelper(_);else if(E=E.filter(function(R){return i.basename(R).indexOf(".ai.json")>-1}),E.length>0){var T=E[0],w=i.join(g._tempDir,T);o.readFile(w,function(R,I){R?g._onErrorHelper(R):o.unlink(w,function(H){if(H)g._onErrorHelper(H);else try{var z=JSON.parse(I.toString());g.send(z)}catch(K){u.warn("Failed to read persisted file",K)}})})}})})},f.prototype._onErrorHelper=function(g){typeof this._onError=="function"&&this._onError(g)},f.prototype._stringify=function(g){try{return JSON.stringify(g)}catch(m){u.warn("Failed to serialize payload",m,g)}},f.prototype._fileCleanupTask=function(){var g=this;o.exists(this._tempDir,function(m){m&&o.readdir(g._tempDir,function(_,E){_?g._onErrorHelper(_):(E=E.filter(function(T){return i.basename(T).indexOf(".ai.json")>-1}),E.length>0&&E.forEach(function(T){var w=new Date(parseInt(T.split(".ai.json")[0])),R=new Date(+new Date-f.FILE_RETEMPTION_PERIOD)>w;if(R){var I=i.join(g._tempDir,T);o.unlink(I,function(H){H&&g._onErrorHelper(H)})}}))})})},f.TAG="Sender",f.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",f.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",f.ACLED_DIRECTORIES={},f.ACL_IDENTITY=null,f.WAIT_BETWEEN_RESEND=60*1e3,f.MAX_BYTES_ON_DISK=50*1024*1024,f.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,f.CLEANUP_TIMEOUT=60*60*1e3,f.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,f.TEMPDIR_PREFIX="appInsights-node",f.OS_PROVIDES_FILE_PROTECTION=!1,f.USE_ICACLS=a.type()==="Windows_NT",f}();t.exports=p}),WE=A((e,t)=>{"use strict";var r=fr(),n=wr(),o=Qn(),a=function(){function s(){}return s.createEnvelope=function(c,u,d,l,p){var f=null;switch(u){case r.TelemetryType.Trace:f=s.createTraceData(c);break;case r.TelemetryType.Dependency:f=s.createDependencyData(c);break;case r.TelemetryType.Event:f=s.createEventData(c);break;case r.TelemetryType.Exception:f=s.createExceptionData(c);break;case r.TelemetryType.Request:f=s.createRequestData(c);break;case r.TelemetryType.Metric:f=s.createMetricData(c);break;case r.TelemetryType.Availability:f=s.createAvailabilityData(c);break;case r.TelemetryType.PageView:f=s.createPageViewData(c);break}if(d&&r.domainSupportsProperties(f.baseData)){if(f&&f.baseData)if(!f.baseData.properties)f.baseData.properties=d;else for(var g in d)f.baseData.properties[g]||(f.baseData.properties[g]=d[g]);f.baseData.properties=n.validateStringMap(f.baseData.properties)}var m=p&&p.instrumentationKey||"",_=new r.Envelope;return _.data=f,_.iKey=m,_.name="Microsoft.ApplicationInsights."+m.replace(/-/g,"")+"."+f.baseType.substr(0,f.baseType.length-4),_.tags=this.getTags(l,c.tagOverrides),_.time=new Date().toISOString(),_.ver=1,_.sampleRate=p?p.samplingPercentage:100,u===r.TelemetryType.Metric&&(_.sampleRate=100),_},s.createTraceData=function(c){var u=new r.MessageData;u.message=c.message,u.properties=c.properties,isNaN(c.severity)?u.severityLevel=r.SeverityLevel.Information:u.severityLevel=c.severity;var d=new r.Data;return d.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Trace),d.baseData=u,d},s.createDependencyData=function(c){var u=new r.RemoteDependencyData;typeof c.name=="string"&&(u.name=c.name.length>1024?c.name.slice(0,1021)+"...":c.name),u.data=c.data,u.target=c.target,u.duration=n.msToTimeSpan(c.duration),u.success=c.success,u.type=c.dependencyTypeName,u.properties=c.properties,u.resultCode=c.resultCode?c.resultCode+"":"",c.id?u.id=c.id:u.id=n.w3cTraceId();var d=new r.Data;return d.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Dependency),d.baseData=u,d},s.createEventData=function(c){var u=new r.EventData;u.name=c.name,u.properties=c.properties,u.measurements=c.measurements;var d=new r.Data;return d.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Event),d.baseData=u,d},s.createExceptionData=function(c){var u=new r.ExceptionData;u.properties=c.properties,isNaN(c.severity)?u.severityLevel=r.SeverityLevel.Error:u.severityLevel=c.severity,u.measurements=c.measurements,u.exceptions=[];var d=c.exception.stack,l=new r.ExceptionDetails;l.message=c.exception.message,l.typeName=c.exception.name,l.parsedStack=this.parseStack(d),l.hasFullStack=n.isArray(l.parsedStack)&&l.parsedStack.length>0,u.exceptions.push(l);var p=new r.Data;return p.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Exception),p.baseData=u,p},s.createRequestData=function(c){var u=new r.RequestData;c.id?u.id=c.id:u.id=n.w3cTraceId(),u.name=c.name,u.url=c.url,u.source=c.source,u.duration=n.msToTimeSpan(c.duration),u.responseCode=c.resultCode?c.resultCode+"":"",u.success=c.success,u.properties=c.properties;var d=new r.Data;return d.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Request),d.baseData=u,d},s.createMetricData=function(c){var u=new r.MetricData;u.metrics=[];var d=new r.DataPoint;d.count=isNaN(c.count)?1:c.count,d.kind=r.DataPointType.Aggregation,d.max=isNaN(c.max)?c.value:c.max,d.min=isNaN(c.min)?c.value:c.min,d.name=c.name,d.stdDev=isNaN(c.stdDev)?0:c.stdDev,d.value=c.value,u.metrics.push(d),u.properties=c.properties;var l=new r.Data;return l.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Metric),l.baseData=u,l},s.createAvailabilityData=function(c){var u=new r.AvailabilityData;c.id?u.id=c.id:u.id=n.w3cTraceId(),u.name=c.name,u.duration=n.msToTimeSpan(c.duration),u.success=c.success,u.runLocation=c.runLocation,u.message=c.message,u.measurements=c.measurements,u.properties=c.properties;var d=new r.Data;return d.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Availability),d.baseData=u,d},s.createPageViewData=function(c){var u=new r.PageViewData;u.name=c.name,u.duration=n.msToTimeSpan(c.duration),u.url=c.url,u.measurements=c.measurements,u.properties=c.properties;var d=new r.Data;return d.baseType=r.telemetryTypeToBaseType(r.TelemetryType.PageView),d.baseData=u,d},s.getTags=function(c,u){var d=o.CorrelationContextManager.getCurrentContext(),l={};if(c&&c.tags)for(var p in c.tags)l[p]=c.tags[p];if(u)for(var p in u)l[p]=u[p];return d&&(l[c.keys.operationId]=l[c.keys.operationId]||d.operation.id,l[c.keys.operationName]=l[c.keys.operationName]||d.operation.name,l[c.keys.operationParentId]=l[c.keys.operationParentId]||d.operation.parentId),l},s.parseStack=function(c){var u=void 0;if(typeof c=="string"){var d=c.split(`
`);u=[];for(var l=0,p=0,f=0;f<=d.length;f++){var g=d[f];if(i.regex.test(g)){var m=new i(d[f],l++);p+=m.sizeInBytes,u.push(m)}}var _=32*1024;if(p>_)for(var E=0,T=u.length-1,w=0,R=E,I=T;E<T;){var H=u[E].sizeInBytes,z=u[T].sizeInBytes;if(w+=H+z,w>_){var K=I-R+1;u.splice(R,K);break}R=E,I=T,E++,T--}}return u},s}(),i=function(){function s(c,u){this.sizeInBytes=0,this.level=u,this.method="<no_method>",this.assembly=n.trim(c);var d=c.match(s.regex);d&&d.length>=5&&(this.method=n.trim(d[2])||this.method,this.fileName=n.trim(d[4])||"<no_filename>",this.line=parseInt(d[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=s.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return s.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,s.baseSize=58,s}();t.exports=a}),KE=A((e,t)=>{"use strict";var r=require("url"),n=Dd(),o=bo(),a=fr(),i=FE(),s=VE(),c=Qn(),u=GE(),d=wr(),l=Kt(),p=WE(),f=function(){function g(m){this._telemetryProcessors=[],this._enableAzureProperties=!1;var _=new n(m);this.config=_,this.context=new o,this.commonProperties={};var E=new u(this.config);this.channel=new i(function(){return _.disableAppInsights},function(){return _.maxBatchSize},function(){return _.maxBatchIntervalMs},E)}return g.prototype.trackAvailability=function(m){this.track(m,a.TelemetryType.Availability)},g.prototype.trackPageView=function(m){this.track(m,a.TelemetryType.PageView)},g.prototype.trackTrace=function(m){this.track(m,a.TelemetryType.Trace)},g.prototype.trackMetric=function(m){this.track(m,a.TelemetryType.Metric)},g.prototype.trackException=function(m){m&&m.exception&&!d.isError(m.exception)&&(m.exception=new Error(m.exception.toString())),this.track(m,a.TelemetryType.Exception)},g.prototype.trackEvent=function(m){this.track(m,a.TelemetryType.Event)},g.prototype.trackRequest=function(m){this.track(m,a.TelemetryType.Request)},g.prototype.trackDependency=function(m){m&&!m.target&&m.data&&(m.target=r.parse(m.data).host),this.track(m,a.TelemetryType.Dependency)},g.prototype.flush=function(m){this.channel.triggerSend(m?!!m.isAppCrashing:!1,m?m.callback:void 0)},g.prototype.track=function(m,_){if(m&&a.telemetryTypeToBaseType(_)){var E=p.createEnvelope(m,_,this.commonProperties,this.context,this.config);m.time&&(E.time=m.time.toISOString()),this._enableAzureProperties&&s.azureRoleEnvironmentTelemetryProcessor(E,this.context);var T=this.runTelemetryProcessors(E,m.contextObjects);T=T&&s.samplingTelemetryProcessor(E,{correlationContext:c.CorrelationContextManager.getCurrentContext()}),s.preAggregatedMetricsTelemetryProcessor(E,this.context),T&&(s.performanceMetricsTelemetryProcessor(E,this.quickPulseClient),this.channel.send(E))}else l.warn("track() requires telemetry object and telemetryType to be specified.")},g.prototype.setAutoPopulateAzureProperties=function(m){this._enableAzureProperties=m},g.prototype.addTelemetryProcessor=function(m){this._telemetryProcessors.push(m)},g.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},g.prototype.runTelemetryProcessors=function(m,_){var E=!0,T=this._telemetryProcessors.length;if(T===0)return E;_=_||{},_.correlationContext=c.CorrelationContextManager.getCurrentContext();for(var w=0;w<T;++w)try{var R=this._telemetryProcessors[w];if(R&&R.apply(null,[m,_])===!1){E=!1;break}}catch(I){E=!0,l.warn("One of telemetry processors failed, telemetry item will be sent.",I,m)}return E&&(m&&m.tags&&(m.tags=d.validateStringMap(m.tags)),m&&m.data&&m.data.baseData&&m.data.baseData.properties&&(m.data.baseData.properties=d.validateStringMap(m.data.baseData.properties))),E},g}();t.exports=f}),zE=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var c=function(u,d){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,p){l.__proto__=p}||function(l,p){for(var f in p)Object.prototype.hasOwnProperty.call(p,f)&&(l[f]=p[f])},c(u,d)};return function(u,d){c(u,d);function l(){this.constructor=u}u.prototype=d===null?Object.create(d):(l.prototype=d.prototype,new l)}}(),n=KE(),o=Id(),a=Ai(),i=Kt(),s=function(c){r(u,c);function u(){return c!==null&&c.apply(this,arguments)||this}return u.prototype.trackNodeHttpRequestSync=function(d){d&&d.request&&d.response&&d.duration?o.trackRequestSync(this,d):i.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},u.prototype.trackNodeHttpRequest=function(d){(d.duration||d.error)&&i.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),d&&d.request&&d.response?o.trackRequest(this,d):i.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},u.prototype.trackNodeHttpDependency=function(d){d&&d.request?a.trackRequest(this,d):i.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},u}(n);t.exports=s}),XE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),YE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.Configuration=e.wrapWithCorrelationContext=e.startOperation=e.getCorrelationContext=e.start=e.setup=e.liveMetricsClient=e.defaultClient=e.DistributedTracingModes=void 0;var t=Qn(),r=bE(),n=CE(),o=sa(),a=Od(),i=xE(),s=Ai(),c=Id(),u=Yn(),d=Kt(),l=qE(),p=jE();e.TelemetryClient=zE(),e.Contracts=fr(),e.azureFunctionsTypes=XE();var f;(function(Oe){Oe[Oe.AI=0]="AI",Oe[Oe.AI_AND_W3C=1]="AI_AND_W3C"})(f=e.DistributedTracingModes||(e.DistributedTracingModes={}));var g=!0,m=!1,_=!0,E=!0,T=!0,w=!1,R=!0,I=!0,H=!0,z=!0,K,J=!1,te=!0,U,V=void 0,Q=void 0,ne,ve,de,X,ce,ie,pe,he,be=!1,_e;function Ue(Oe){return e.defaultClient?d.info("The default client is already setup"):(e.defaultClient=new e.TelemetryClient(Oe),ne=new r(e.defaultClient),ve=new n(e.defaultClient),de=new o(e.defaultClient),X=new a(e.defaultClient),ce=new i(e.defaultClient),pe=new c(e.defaultClient),he=new s(e.defaultClient),ie||(ie=new p.AutoCollectNativePerformance(e.defaultClient))),e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(H,V,Q),it}e.setup=Ue;function Qe(){return e.defaultClient?(be=!0,ne.enable(g,m),ve.enable(_),de.enable(E),X.enable(T),ce.enable(w,e.defaultClient.config),ie.enable(te,U),pe.useAutoCorrelation(z,K),pe.enable(R),he.enable(I),e.liveMetricsClient&&J&&e.liveMetricsClient.enable(J)):d.warn("Start cannot be called before setup"),it}e.start=Qe;function Ke(){return z?t.CorrelationContextManager.getCurrentContext():null}e.getCorrelationContext=Ke;function je(Oe,me){return t.CorrelationContextManager.startOperation(Oe,me)}e.startOperation=je;function xe(Oe,me){return t.CorrelationContextManager.wrapCallback(Oe,me)}e.wrapWithCorrelationContext=xe;var it=function(){function Oe(){}return Oe.setDistributedTracingMode=function(me){return u.w3cEnabled=me===f.AI_AND_W3C,Oe},Oe.setAutoCollectConsole=function(me,Ae){return Ae===void 0&&(Ae=!1),g=me,m=Ae,be&&ne.enable(me,Ae),Oe},Oe.setAutoCollectExceptions=function(me){return _=me,be&&ve.enable(me),Oe},Oe.setAutoCollectPerformance=function(me,Ae){Ae===void 0&&(Ae=!0),E=me;var ke=p.AutoCollectNativePerformance.parseEnabled(Ae);return te=ke.isEnabled,U=ke.disabledMetrics,be&&(de.enable(me),ie.enable(ke.isEnabled,ke.disabledMetrics)),Oe},Oe.setAutoCollectPreAggregatedMetrics=function(me){return T=me,be&&X.enable(me),Oe},Oe.setAutoCollectHeartbeat=function(me){return w=me,be&&ce.enable(me,e.defaultClient.config),Oe},Oe.setAutoCollectRequests=function(me){return R=me,be&&pe.enable(me),Oe},Oe.setAutoCollectDependencies=function(me){return I=me,be&&he.enable(me),Oe},Oe.setAutoDependencyCorrelation=function(me,Ae){return z=me,K=Ae,be&&pe.useAutoCorrelation(me,Ae),Oe},Oe.setUseDiskRetryCaching=function(me,Ae,ke){return H=me,V=Ae,Q=ke,e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(me,Ae,ke),Oe},Oe.setInternalLogging=function(me,Ae){return me===void 0&&(me=!1),Ae===void 0&&(Ae=!0),d.enableDebug=me,d.disableWarnings=!Ae,Oe},Oe.setSendLiveMetrics=function(me){return me===void 0&&(me=!1),e.defaultClient?(!e.liveMetricsClient&&me?(e.liveMetricsClient=new l(e.defaultClient.config,null),_e=new o(e.liveMetricsClient,1e3,!0),e.liveMetricsClient.addCollector(_e),e.defaultClient.quickPulseClient=e.liveMetricsClient):e.liveMetricsClient&&e.liveMetricsClient.enable(me),J=me,Oe):(d.warn("Live metrics client cannot be setup without the default client"),Oe)},Oe.start=Qe,Oe}();e.Configuration=it;function lt(){u.w3cEnabled=!0,e.defaultClient=null,be=!1,ne&&ne.dispose(),ve&&ve.dispose(),de&&de.dispose(),X&&X.dispose(),ce&&ce.dispose(),ie&&ie.dispose(),pe&&pe.dispose(),he&&he.dispose(),e.liveMetricsClient&&(e.liveMetricsClient.enable(!1),J=!1,e.liveMetricsClient=void 0)}e.dispose=lt}),Ad={};Ov(Ad,{default:()=>eb});xd.exports=Iv(Ad);var Xs=wi(require("os")),Xn=wi(require("vscode")),Ot=wi(require("vscode")),_o=wi(require("vscode"));function Si(){let e="telemetry",t="enableTelemetry";try{let r=_o.env.telemetryConfiguration;return r.isUsageEnabled&&r.isErrorsEnabled&&r.isCrashEnabled?"on":r.isErrorsEnabled&&r.isCrashEnabled?"error":"off"}catch{return _o.env.isTelemetryEnabled!==void 0?_o.env.isTelemetryEnabled?"on":"off":_o.workspace.getConfiguration(e).get(t)?"on":"off"}}var QE=class{constructor(e,t,r,n,o){this.extensionId=e,this.extensionVersion=t,this.telemetryAppender=r,this.osShim=n,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!o,this.updateUserOptStatus(),Ot.env.onDidChangeTelemetryEnabled!==void 0?(this.disposables.push(Ot.env.onDidChangeTelemetryEnabled(()=>this.updateUserOptStatus())),this.disposables.push(Ot.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))):this.disposables.push(Ot.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))}updateUserOptStatus(){let e=Si();this.userOptIn=e==="on",this.errorOptIn=e==="error"||this.userOptIn,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(e){if(!e)return"none";let t="other";return["ssh-remote","dev-container","attached-container","wsl","codespaces"].forEach(r=>{e.indexOf(`${r}`)===0&&(t=r)}),t}get extension(){return this._extension===void 0&&(this._extension=Ot.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(e,t){if(e===null||typeof e!="object"||typeof t!="function")return e;let r={};for(let n in e)r[n]=t(n,e[n]);return r}shouldSendErrorTelemetry(){return this.errorOptIn===!1?!1:this.firstParty?!(Ot.env.remoteName&&this.cleanRemoteName(Ot.env.remoteName)==="other"):!0}getCommonProperties(){let e=Object.create(null);if(e["common.os"]=this.osShim.platform,e["common.nodeArch"]=this.osShim.architecture,e["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),e["common.extname"]=this.extensionId,e["common.extversion"]=this.extensionVersion,Ot&&Ot.env){switch(e["common.vscodemachineid"]=Ot.env.machineId,e["common.vscodesessionid"]=Ot.env.sessionId,e["common.vscodeversion"]=Ot.version,e["common.isnewappinstall"]=Ot.env.isNewAppInstall?Ot.env.isNewAppInstall.toString():"false",e["common.product"]=Ot.env.appHost,Ot.env.uiKind){case Ot.UIKind.Web:e["common.uikind"]="web";break;case Ot.UIKind.Desktop:e["common.uikind"]="desktop";break;default:e["common.uikind"]="unknown"}e["common.remotename"]=this.cleanRemoteName(Ot.env.remoteName)}return e}anonymizeFilePaths(e,t){let r;if(e==null)return"";let n=[];Ot.env.appRoot!==""&&n.push(new RegExp(Ot.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&n.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let o=e;if(t){let a=[];for(let u of n)for(;(r=u.exec(e))&&r;)a.push([r.index,u.lastIndex]);let i=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,s=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,c=0;for(o="";(r=s.exec(e))&&r;)r[0]&&!i.test(r[0])&&a.every(([u,d])=>r.index<u||r.index>=d)&&(o+=e.substring(c,r.index)+"<REDACTED: user-file-path>",c=s.lastIndex);c<e.length&&(o+=e.substr(c))}for(let a of n)o=o.replace(a,"");return o}removePropertiesWithPossibleUserInfo(e){if(typeof e!="object")return;let t=Object.create(null);for(let r of Object.keys(e)){let n=e[r];if(!n)continue;let o=/@[a-zA-Z0-9-.]+/,a=/(key|token|sig|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/,i=/xox[pbaors]-[a-zA-Z0-9]+-[a-zA-Z0-9-]+?/;a.test(n.toLowerCase())?t[r]="<REDACTED: secret>":o.test(n)?t[r]="<REDACTED: email>":i.test(n)?t[r]="<REDACTED: token>":t[r]=n}return t}get telemetryLevel(){switch(Si()){case"on":return"all";case"error":return"error";case"off":return"off"}}sendTelemetryEvent(e,t,r){if(this.userOptIn&&e!==""){t=nn(nn({},t),this.getCommonProperties());let n=this.cloneAndChange(t,(o,a)=>this.anonymizeFilePaths(a,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${e}`,{properties:this.removePropertiesWithPossibleUserInfo(n),measurements:r})}}sendRawTelemetryEvent(e,t,r){this.userOptIn&&e!==""&&(t=nn(nn({},t),this.getCommonProperties()),this.telemetryAppender.logEvent(`${this.extensionId}/${e}`,{properties:t,measurements:r}))}sendTelemetryErrorEvent(e,t,r,n){if(this.errorOptIn&&e!==""){t=nn(nn({},t),this.getCommonProperties());let o=this.cloneAndChange(t,(a,i)=>this.shouldSendErrorTelemetry()?this.anonymizeFilePaths(i,this.firstParty):n===void 0||n.indexOf(a)!==-1?"REDACTED":this.anonymizeFilePaths(i,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${e}`,{properties:this.removePropertiesWithPossibleUserInfo(o),measurements:r})}}sendTelemetryException(e,t,r){if(this.shouldSendErrorTelemetry()&&this.errorOptIn&&e){t=nn(nn({},t),this.getCommonProperties());let n=this.cloneAndChange(t,(o,a)=>this.anonymizeFilePaths(a,this.firstParty));e.stack&&(e.stack=this.anonymizeFilePaths(e.stack,this.firstParty)),this.telemetryAppender.logException(e,{properties:this.removePropertiesWithPossibleUserInfo(n),measurements:r})}}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map(e=>e.dispose()))}},JE=class{constructor(e,t){this._isInstantiated=!1,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=t,this._key=e,Si()!=="off"&&this.instantiateAppender()}logEvent(e,t){if(!this._telemetryClient){!this._isInstantiated&&Si()==="on"&&this._eventQueue.push({eventName:e,data:t});return}this._telemetryClient.logEvent(e,t)}logException(e,t){if(!this._telemetryClient){!this._isInstantiated&&Si()!=="off"&&this._exceptionQueue.push({exception:e,data:t});return}this._telemetryClient.logException(e,t)}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:t})=>this.logEvent(e,t)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:t})=>this.logException(e,t)),this._exceptionQueue=[]}instantiateAppender(){this._isInstantiated||this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._isInstantiated=!0,this._flushQueues()}).catch(e=>{console.error(e)})}},ZE=async e=>{let t;try{process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";let r=await Promise.resolve().then(()=>wi(YE()));r.defaultClient?(t=new r.TelemetryClient(e),t.channel.setUseDiskRetryCaching(!0)):(r.setup(e).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setAutoCollectHeartbeat(!1).setUseDiskRetryCaching(!0).start(),t=r.defaultClient),Xn&&Xn.env&&(t.context.tags[t.context.keys.userId]=Xn.env.machineId,t.context.tags[t.context.keys.sessionId]=Xn.env.sessionId,t.context.tags[t.context.keys.cloudRole]=Xn.env.appName,t.context.tags[t.context.keys.cloudRoleInstance]=Xn.env.appName),e&&e.indexOf("AIF-")===0&&(t.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1")}catch(r){return Promise.reject(`Failed to initialize app insights!
`+r.message)}return{logEvent:(r,n)=>{try{t?.trackEvent({name:r,properties:n?.properties,measurements:n?.measurements})}catch(o){throw new Error(`Failed to log event to app insights!
`+o.message)}},logException:(r,n)=>{try{t?.trackException({exception:r,properties:n?.properties,measurements:n?.measurements})}catch(o){throw new Error(`Failed to log exception to app insights!
`+o.message)}},flush:async()=>{try{t?.flush()}catch(r){throw new Error(`Failed to flush app insights!
`+r.message)}}}},eb=class extends QE{constructor(e,t,r,n){let o=new JE(r,ZE);r&&r.indexOf("AIF-")===0&&(n=!0),super(e,t,o,{release:Xs.release(),platform:Xs.platform(),architecture:Xs.arch()},n)}}});var xi=ee((nO,kd)=>{var tb="2.0.0",rb=Number.MAX_SAFE_INTEGER||9007199254740991,nb=16;kd.exports={SEMVER_SPEC_VERSION:tb,MAX_LENGTH:256,MAX_SAFE_INTEGER:rb,MAX_SAFE_COMPONENT_LENGTH:nb}});var Ni=ee((iO,Md)=>{var ib=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};Md.exports=ib});var In=ee((an,qd)=>{var{MAX_SAFE_COMPONENT_LENGTH:aa}=xi(),ob=Ni();an=qd.exports={};var sb=an.re=[],Te=an.src=[],Se=an.t={},ab=0,Ge=(e,t,r)=>{let n=ab++;ob(n,t),Se[e]=n,Te[n]=t,sb[n]=new RegExp(t,r?"g":void 0)};Ge("NUMERICIDENTIFIER","0|[1-9]\\d*");Ge("NUMERICIDENTIFIERLOOSE","[0-9]+");Ge("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");Ge("MAINVERSION",`(${Te[Se.NUMERICIDENTIFIER]})\\.(${Te[Se.NUMERICIDENTIFIER]})\\.(${Te[Se.NUMERICIDENTIFIER]})`);Ge("MAINVERSIONLOOSE",`(${Te[Se.NUMERICIDENTIFIERLOOSE]})\\.(${Te[Se.NUMERICIDENTIFIERLOOSE]})\\.(${Te[Se.NUMERICIDENTIFIERLOOSE]})`);Ge("PRERELEASEIDENTIFIER",`(?:${Te[Se.NUMERICIDENTIFIER]}|${Te[Se.NONNUMERICIDENTIFIER]})`);Ge("PRERELEASEIDENTIFIERLOOSE",`(?:${Te[Se.NUMERICIDENTIFIERLOOSE]}|${Te[Se.NONNUMERICIDENTIFIER]})`);Ge("PRERELEASE",`(?:-(${Te[Se.PRERELEASEIDENTIFIER]}(?:\\.${Te[Se.PRERELEASEIDENTIFIER]})*))`);Ge("PRERELEASELOOSE",`(?:-?(${Te[Se.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Te[Se.PRERELEASEIDENTIFIERLOOSE]})*))`);Ge("BUILDIDENTIFIER","[0-9A-Za-z-]+");Ge("BUILD",`(?:\\+(${Te[Se.BUILDIDENTIFIER]}(?:\\.${Te[Se.BUILDIDENTIFIER]})*))`);Ge("FULLPLAIN",`v?${Te[Se.MAINVERSION]}${Te[Se.PRERELEASE]}?${Te[Se.BUILD]}?`);Ge("FULL",`^${Te[Se.FULLPLAIN]}$`);Ge("LOOSEPLAIN",`[v=\\s]*${Te[Se.MAINVERSIONLOOSE]}${Te[Se.PRERELEASELOOSE]}?${Te[Se.BUILD]}?`);Ge("LOOSE",`^${Te[Se.LOOSEPLAIN]}$`);Ge("GTLT","((?:<|>)?=?)");Ge("XRANGEIDENTIFIERLOOSE",`${Te[Se.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Ge("XRANGEIDENTIFIER",`${Te[Se.NUMERICIDENTIFIER]}|x|X|\\*`);Ge("XRANGEPLAIN",`[v=\\s]*(${Te[Se.XRANGEIDENTIFIER]})(?:\\.(${Te[Se.XRANGEIDENTIFIER]})(?:\\.(${Te[Se.XRANGEIDENTIFIER]})(?:${Te[Se.PRERELEASE]})?${Te[Se.BUILD]}?)?)?`);Ge("XRANGEPLAINLOOSE",`[v=\\s]*(${Te[Se.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Te[Se.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Te[Se.XRANGEIDENTIFIERLOOSE]})(?:${Te[Se.PRERELEASELOOSE]})?${Te[Se.BUILD]}?)?)?`);Ge("XRANGE",`^${Te[Se.GTLT]}\\s*${Te[Se.XRANGEPLAIN]}$`);Ge("XRANGELOOSE",`^${Te[Se.GTLT]}\\s*${Te[Se.XRANGEPLAINLOOSE]}$`);Ge("COERCE",`(^|[^\\d])(\\d{1,${aa}})(?:\\.(\\d{1,${aa}}))?(?:\\.(\\d{1,${aa}}))?(?:$|[^\\d])`);Ge("COERCERTL",Te[Se.COERCE],!0);Ge("LONETILDE","(?:~>?)");Ge("TILDETRIM",`(\\s*)${Te[Se.LONETILDE]}\\s+`,!0);an.tildeTrimReplace="$1~";Ge("TILDE",`^${Te[Se.LONETILDE]}${Te[Se.XRANGEPLAIN]}$`);Ge("TILDELOOSE",`^${Te[Se.LONETILDE]}${Te[Se.XRANGEPLAINLOOSE]}$`);Ge("LONECARET","(?:\\^)");Ge("CARETTRIM",`(\\s*)${Te[Se.LONECARET]}\\s+`,!0);an.caretTrimReplace="$1^";Ge("CARET",`^${Te[Se.LONECARET]}${Te[Se.XRANGEPLAIN]}$`);Ge("CARETLOOSE",`^${Te[Se.LONECARET]}${Te[Se.XRANGEPLAINLOOSE]}$`);Ge("COMPARATORLOOSE",`^${Te[Se.GTLT]}\\s*(${Te[Se.LOOSEPLAIN]})$|^$`);Ge("COMPARATOR",`^${Te[Se.GTLT]}\\s*(${Te[Se.FULLPLAIN]})$|^$`);Ge("COMPARATORTRIM",`(\\s*)${Te[Se.GTLT]}\\s*(${Te[Se.LOOSEPLAIN]}|${Te[Se.XRANGEPLAIN]})`,!0);an.comparatorTrimReplace="$1$2$3";Ge("HYPHENRANGE",`^\\s*(${Te[Se.XRANGEPLAIN]})\\s+-\\s+(${Te[Se.XRANGEPLAIN]})\\s*$`);Ge("HYPHENRANGELOOSE",`^\\s*(${Te[Se.XRANGEPLAINLOOSE]})\\s+-\\s+(${Te[Se.XRANGEPLAINLOOSE]})\\s*$`);Ge("STAR","(<|>)?=?\\s*\\*");Ge("GTE0","^\\s*>=\\s*0.0.0\\s*$");Ge("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")});var ki=ee((oO,Ld)=>{var cb=["includePrerelease","loose","rtl"],ub=e=>e?typeof e!="object"?{loose:!0}:cb.filter(t=>e[t]).reduce((t,r)=>(t[r]=!0,t),{}):{};Ld.exports=ub});var Co=ee((sO,Hd)=>{var jd=/^[0-9]+$/,Fd=(e,t)=>{let r=jd.test(e),n=jd.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},lb=(e,t)=>Fd(t,e);Hd.exports={compareIdentifiers:Fd,rcompareIdentifiers:lb}});var tr=ee((aO,Vd)=>{var To=Ni(),{MAX_LENGTH:$d,MAX_SAFE_INTEGER:So}=xi(),{re:Ud,t:Bd}=In(),db=ki(),{compareIdentifiers:Mi}=Co(),_r=class{constructor(t,r){if(r=db(r),t instanceof _r){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid Version: ${t}`);if(t.length>$d)throw new TypeError(`version is longer than ${$d} characters`);To("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=t.trim().match(r.loose?Ud[Bd.LOOSE]:Ud[Bd.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>So||this.major<0)throw new TypeError("Invalid major version");if(this.minor>So||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>So||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){let a=+o;if(a>=0&&a<So)return a}return o}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(To("SemVer.compare",this.version,this.options,t),!(t instanceof _r)){if(typeof t=="string"&&t===this.version)return 0;t=new _r(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof _r||(t=new _r(t,this.options)),Mi(this.major,t.major)||Mi(this.minor,t.minor)||Mi(this.patch,t.patch)}comparePre(t){if(t instanceof _r||(t=new _r(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],o=t.prerelease[r];if(To("prerelease compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return Mi(n,o)}while(++r)}compareBuild(t){t instanceof _r||(t=new _r(t,this.options));let r=0;do{let n=this.build[r],o=t.build[r];if(To("prerelease compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return Mi(n,o)}while(++r)}inc(t,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r),this.inc("pre",r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r),this.inc("pre",r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}r&&(this.prerelease[0]===r?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${t}`)}return this.format(),this.raw=this.version,this}};Vd.exports=_r});var Dn=ee((cO,zd)=>{var{MAX_LENGTH:pb}=xi(),{re:Gd,t:Wd}=In(),Kd=tr(),fb=ki(),hb=(e,t)=>{if(t=fb(t),e instanceof Kd)return e;if(typeof e!="string"||e.length>pb||!(t.loose?Gd[Wd.LOOSE]:Gd[Wd.FULL]).test(e))return null;try{return new Kd(e,t)}catch{return null}};zd.exports=hb});var Yd=ee((uO,Xd)=>{var gb=Dn(),mb=(e,t)=>{let r=gb(e,t);return r?r.version:null};Xd.exports=mb});var Jd=ee((lO,Qd)=>{var vb=Dn(),_b=(e,t)=>{let r=vb(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};Qd.exports=_b});var ep=ee((dO,Zd)=>{var yb=tr(),Eb=(e,t,r,n)=>{typeof r=="string"&&(n=r,r=void 0);try{return new yb(e,r).inc(t,n).version}catch{return null}};Zd.exports=Eb});var Pr=ee((pO,rp)=>{var tp=tr(),bb=(e,t,r)=>new tp(e,r).compare(new tp(t,r));rp.exports=bb});var Ro=ee((fO,np)=>{var Cb=Pr(),Tb=(e,t,r)=>Cb(e,t,r)===0;np.exports=Tb});var sp=ee((hO,op)=>{var ip=Dn(),Sb=Ro(),Rb=(e,t)=>{if(Sb(e,t))return null;{let r=ip(e),n=ip(t),o=r.prerelease.length||n.prerelease.length,a=o?"pre":"",i=o?"prerelease":"";for(let s in r)if((s==="major"||s==="minor"||s==="patch")&&r[s]!==n[s])return a+s;return i}};op.exports=Rb});var cp=ee((gO,ap)=>{var wb=tr(),Pb=(e,t)=>new wb(e,t).major;ap.exports=Pb});var lp=ee((mO,up)=>{var Ob=tr(),Ib=(e,t)=>new Ob(e,t).minor;up.exports=Ib});var pp=ee((vO,dp)=>{var Db=tr(),Ab=(e,t)=>new Db(e,t).patch;dp.exports=Ab});var hp=ee((_O,fp)=>{var xb=Dn(),Nb=(e,t)=>{let r=xb(e,t);return r&&r.prerelease.length?r.prerelease:null};fp.exports=Nb});var mp=ee((yO,gp)=>{var kb=Pr(),Mb=(e,t,r)=>kb(t,e,r);gp.exports=Mb});var _p=ee((EO,vp)=>{var qb=Pr(),Lb=(e,t)=>qb(e,t,!0);vp.exports=Lb});var wo=ee((bO,Ep)=>{var yp=tr(),jb=(e,t,r)=>{let n=new yp(e,r),o=new yp(t,r);return n.compare(o)||n.compareBuild(o)};Ep.exports=jb});var Cp=ee((CO,bp)=>{var Fb=wo(),Hb=(e,t)=>e.sort((r,n)=>Fb(r,n,t));bp.exports=Hb});var Sp=ee((TO,Tp)=>{var $b=wo(),Ub=(e,t)=>e.sort((r,n)=>$b(n,r,t));Tp.exports=Ub});var qi=ee((SO,Rp)=>{var Bb=Pr(),Vb=(e,t,r)=>Bb(e,t,r)>0;Rp.exports=Vb});var Po=ee((RO,wp)=>{var Gb=Pr(),Wb=(e,t,r)=>Gb(e,t,r)<0;wp.exports=Wb});var ca=ee((wO,Pp)=>{var Kb=Pr(),zb=(e,t,r)=>Kb(e,t,r)!==0;Pp.exports=zb});var Oo=ee((PO,Op)=>{var Xb=Pr(),Yb=(e,t,r)=>Xb(e,t,r)>=0;Op.exports=Yb});var Io=ee((OO,Ip)=>{var Qb=Pr(),Jb=(e,t,r)=>Qb(e,t,r)<=0;Ip.exports=Jb});var ua=ee((IO,Dp)=>{var Zb=Ro(),eC=ca(),tC=qi(),rC=Oo(),nC=Po(),iC=Io(),oC=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return Zb(e,r,n);case"!=":return eC(e,r,n);case">":return tC(e,r,n);case">=":return rC(e,r,n);case"<":return nC(e,r,n);case"<=":return iC(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};Dp.exports=oC});var xp=ee((DO,Ap)=>{var sC=tr(),aC=Dn(),{re:Do,t:Ao}=In(),cC=(e,t)=>{if(e instanceof sC)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(Do[Ao.COERCE]);else{let n;for(;(n=Do[Ao.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),Do[Ao.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;Do[Ao.COERCERTL].lastIndex=-1}return r===null?null:aC(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)};Ap.exports=cC});var kp=ee((AO,Np)=>{"use strict";Np.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}});var qp=ee((xO,Mp)=>{"use strict";Mp.exports=rt;rt.Node=An;rt.create=rt;function rt(e){var t=this;if(t instanceof rt||(t=new rt),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(o){t.push(o)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}rt.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t};rt.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};rt.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};rt.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)lC(this,arguments[e]);return this.length};rt.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)dC(this,arguments[e]);return this.length};rt.prototype.pop=function(){if(!!this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};rt.prototype.shift=function(){if(!!this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};rt.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;r!==null;n++)e.call(t,r.value,n,this),r=r.next};rt.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;r!==null;n--)e.call(t,r.value,n,this),r=r.prev};rt.prototype.get=function(e){for(var t=0,r=this.head;r!==null&&t<e;t++)r=r.next;if(t===e&&r!==null)return r.value};rt.prototype.getReverse=function(e){for(var t=0,r=this.tail;r!==null&&t<e;t++)r=r.prev;if(t===e&&r!==null)return r.value};rt.prototype.map=function(e,t){t=t||this;for(var r=new rt,n=this.head;n!==null;)r.push(e.call(t,n.value,this)),n=n.next;return r};rt.prototype.mapReverse=function(e,t){t=t||this;for(var r=new rt,n=this.tail;n!==null;)r.push(e.call(t,n.value,this)),n=n.prev;return r};rt.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=0;n!==null;o++)r=e(r,n.value,o),n=n.next;return r};rt.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=this.length-1;n!==null;o--)r=e(r,n.value,o),n=n.prev;return r};rt.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;r!==null;t++)e[t]=r.value,r=r.next;return e};rt.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;r!==null;t++)e[t]=r.value,r=r.prev;return e};rt.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new rt;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,o=this.head;o!==null&&n<e;n++)o=o.next;for(;o!==null&&n<t;n++,o=o.next)r.push(o.value);return r};rt.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new rt;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,o=this.tail;o!==null&&n>t;n--)o=o.prev;for(;o!==null&&n>e;n--,o=o.prev)r.push(o.value);return r};rt.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,o=this.head;o!==null&&n<e;n++)o=o.next;for(var a=[],n=0;o&&n<t;n++)a.push(o.value),o=this.removeNode(o);o===null&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev);for(var n=0;n<r.length;n++)o=uC(this,o,r[n]);return a};rt.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};function uC(e,t,r){var n=t===e.head?new An(r,null,t,e):new An(r,t,t.next,e);return n.next===null&&(e.tail=n),n.prev===null&&(e.head=n),e.length++,n}function lC(e,t){e.tail=new An(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function dC(e,t){e.head=new An(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function An(e,t,r,n){if(!(this instanceof An))return new An(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{kp()(rt)}catch{}});var $p=ee((NO,Hp)=>{"use strict";var pC=qp(),xn=Symbol("max"),zr=Symbol("length"),Jn=Symbol("lengthCalculator"),ji=Symbol("allowStale"),Nn=Symbol("maxAge"),Kr=Symbol("dispose"),Lp=Symbol("noDisposeOnSet"),Ut=Symbol("lruList"),xr=Symbol("cache"),Fp=Symbol("updateAgeOnGet"),la=()=>1,pa=class{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");let r=this[xn]=t.max||1/0,n=t.length||la;if(this[Jn]=typeof n!="function"?la:n,this[ji]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Nn]=t.maxAge||0,this[Kr]=t.dispose,this[Lp]=t.noDisposeOnSet||!1,this[Fp]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[xn]=t||1/0,Li(this)}get max(){return this[xn]}set allowStale(t){this[ji]=!!t}get allowStale(){return this[ji]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Nn]=t,Li(this)}get maxAge(){return this[Nn]}set lengthCalculator(t){typeof t!="function"&&(t=la),t!==this[Jn]&&(this[Jn]=t,this[zr]=0,this[Ut].forEach(r=>{r.length=this[Jn](r.value,r.key),this[zr]+=r.length})),Li(this)}get lengthCalculator(){return this[Jn]}get length(){return this[zr]}get itemCount(){return this[Ut].length}rforEach(t,r){r=r||this;for(let n=this[Ut].tail;n!==null;){let o=n.prev;jp(this,t,n,r),n=o}}forEach(t,r){r=r||this;for(let n=this[Ut].head;n!==null;){let o=n.next;jp(this,t,n,r),n=o}}keys(){return this[Ut].toArray().map(t=>t.key)}values(){return this[Ut].toArray().map(t=>t.value)}reset(){this[Kr]&&this[Ut]&&this[Ut].length&&this[Ut].forEach(t=>this[Kr](t.key,t.value)),this[xr]=new Map,this[Ut]=new pC,this[zr]=0}dump(){return this[Ut].map(t=>xo(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Ut]}set(t,r,n){if(n=n||this[Nn],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let o=n?Date.now():0,a=this[Jn](r,t);if(this[xr].has(t)){if(a>this[xn])return Zn(this,this[xr].get(t)),!1;let c=this[xr].get(t).value;return this[Kr]&&(this[Lp]||this[Kr](t,c.value)),c.now=o,c.maxAge=n,c.value=r,this[zr]+=a-c.length,c.length=a,this.get(t),Li(this),!0}let i=new fa(t,r,a,o,n);return i.length>this[xn]?(this[Kr]&&this[Kr](t,r),!1):(this[zr]+=i.length,this[Ut].unshift(i),this[xr].set(t,this[Ut].head),Li(this),!0)}has(t){if(!this[xr].has(t))return!1;let r=this[xr].get(t).value;return!xo(this,r)}get(t){return da(this,t,!0)}peek(t){return da(this,t,!1)}pop(){let t=this[Ut].tail;return t?(Zn(this,t),t.value):null}del(t){Zn(this,this[xr].get(t))}load(t){this.reset();let r=Date.now();for(let n=t.length-1;n>=0;n--){let o=t[n],a=o.e||0;if(a===0)this.set(o.k,o.v);else{let i=a-r;i>0&&this.set(o.k,o.v,i)}}}prune(){this[xr].forEach((t,r)=>da(this,r,!1))}},da=(e,t,r)=>{let n=e[xr].get(t);if(n){let o=n.value;if(xo(e,o)){if(Zn(e,n),!e[ji])return}else r&&(e[Fp]&&(n.value.now=Date.now()),e[Ut].unshiftNode(n));return o.value}},xo=(e,t)=>{if(!t||!t.maxAge&&!e[Nn])return!1;let r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[Nn]&&r>e[Nn]},Li=e=>{if(e[zr]>e[xn])for(let t=e[Ut].tail;e[zr]>e[xn]&&t!==null;){let r=t.prev;Zn(e,t),t=r}},Zn=(e,t)=>{if(t){let r=t.value;e[Kr]&&e[Kr](r.key,r.value),e[zr]-=r.length,e[xr].delete(r.key),e[Ut].removeNode(t)}},fa=class{constructor(t,r,n,o,a){this.key=t,this.value=r,this.length=n,this.now=o,this.maxAge=a||0}},jp=(e,t,r,n)=>{let o=r.value;xo(e,o)&&(Zn(e,r),e[ji]||(o=void 0)),o&&t.call(n,o.value,o.key,e)};Hp.exports=pa});var Or=ee((kO,Gp)=>{var kn=class{constructor(t,r){if(r=hC(r),t instanceof kn)return t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease?t:new kn(t.raw,r);if(t instanceof ha)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${t}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(o=>!Bp(o[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let o of this.set)if(o.length===1&&yC(o[0])){this.set=[o];break}}}this.format()}format(){return this.range=this.set.map(t=>t.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(t){t=t.trim();let n=`parseRange:${Object.keys(this.options).join(",")}:${t}`,o=Up.get(n);if(o)return o;let a=this.options.loose,i=a?rr[zt.HYPHENRANGELOOSE]:rr[zt.HYPHENRANGE];t=t.replace(i,IC(this.options.includePrerelease)),It("hyphen replace",t),t=t.replace(rr[zt.COMPARATORTRIM],mC),It("comparator trim",t,rr[zt.COMPARATORTRIM]),t=t.replace(rr[zt.TILDETRIM],vC),t=t.replace(rr[zt.CARETTRIM],_C),t=t.split(/\s+/).join(" ");let s=a?rr[zt.COMPARATORLOOSE]:rr[zt.COMPARATOR],c=t.split(" ").map(p=>EC(p,this.options)).join(" ").split(/\s+/).map(p=>OC(p,this.options)).filter(this.options.loose?p=>!!p.match(s):()=>!0).map(p=>new ha(p,this.options)),u=c.length,d=new Map;for(let p of c){if(Bp(p))return[p];d.set(p.value,p)}d.size>1&&d.has("")&&d.delete("");let l=[...d.values()];return Up.set(n,l),l}intersects(t,r){if(!(t instanceof kn))throw new TypeError("a Range is required");return this.set.some(n=>Vp(n,r)&&t.set.some(o=>Vp(o,r)&&n.every(a=>o.every(i=>a.intersects(i,r)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new gC(t,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(DC(this.set[r],t,this.options))return!0;return!1}};Gp.exports=kn;var fC=$p(),Up=new fC({max:1e3}),hC=ki(),ha=Fi(),It=Ni(),gC=tr(),{re:rr,t:zt,comparatorTrimReplace:mC,tildeTrimReplace:vC,caretTrimReplace:_C}=In(),Bp=e=>e.value==="<0.0.0-0",yC=e=>e.value==="",Vp=(e,t)=>{let r=!0,n=e.slice(),o=n.pop();for(;r&&n.length;)r=n.every(a=>o.intersects(a,t)),o=n.pop();return r},EC=(e,t)=>(It("comp",e,t),e=TC(e,t),It("caret",e),e=bC(e,t),It("tildes",e),e=RC(e,t),It("xrange",e),e=PC(e,t),It("stars",e),e),sr=e=>!e||e.toLowerCase()==="x"||e==="*",bC=(e,t)=>e.trim().split(/\s+/).map(r=>CC(r,t)).join(" "),CC=(e,t)=>{let r=t.loose?rr[zt.TILDELOOSE]:rr[zt.TILDE];return e.replace(r,(n,o,a,i,s)=>{It("tilde",e,n,o,a,i,s);let c;return sr(o)?c="":sr(a)?c=`>=${o}.0.0 <${+o+1}.0.0-0`:sr(i)?c=`>=${o}.${a}.0 <${o}.${+a+1}.0-0`:s?(It("replaceTilde pr",s),c=`>=${o}.${a}.${i}-${s} <${o}.${+a+1}.0-0`):c=`>=${o}.${a}.${i} <${o}.${+a+1}.0-0`,It("tilde return",c),c})},TC=(e,t)=>e.trim().split(/\s+/).map(r=>SC(r,t)).join(" "),SC=(e,t)=>{It("caret",e,t);let r=t.loose?rr[zt.CARETLOOSE]:rr[zt.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(o,a,i,s,c)=>{It("caret",e,o,a,i,s,c);let u;return sr(a)?u="":sr(i)?u=`>=${a}.0.0${n} <${+a+1}.0.0-0`:sr(s)?a==="0"?u=`>=${a}.${i}.0${n} <${a}.${+i+1}.0-0`:u=`>=${a}.${i}.0${n} <${+a+1}.0.0-0`:c?(It("replaceCaret pr",c),a==="0"?i==="0"?u=`>=${a}.${i}.${s}-${c} <${a}.${i}.${+s+1}-0`:u=`>=${a}.${i}.${s}-${c} <${a}.${+i+1}.0-0`:u=`>=${a}.${i}.${s}-${c} <${+a+1}.0.0-0`):(It("no pr"),a==="0"?i==="0"?u=`>=${a}.${i}.${s}${n} <${a}.${i}.${+s+1}-0`:u=`>=${a}.${i}.${s}${n} <${a}.${+i+1}.0-0`:u=`>=${a}.${i}.${s} <${+a+1}.0.0-0`),It("caret return",u),u})},RC=(e,t)=>(It("replaceXRanges",e,t),e.split(/\s+/).map(r=>wC(r,t)).join(" ")),wC=(e,t)=>{e=e.trim();let r=t.loose?rr[zt.XRANGELOOSE]:rr[zt.XRANGE];return e.replace(r,(n,o,a,i,s,c)=>{It("xRange",e,n,o,a,i,s,c);let u=sr(a),d=u||sr(i),l=d||sr(s),p=l;return o==="="&&p&&(o=""),c=t.includePrerelease?"-0":"",u?o===">"||o==="<"?n="<0.0.0-0":n="*":o&&p?(d&&(i=0),s=0,o===">"?(o=">=",d?(a=+a+1,i=0,s=0):(i=+i+1,s=0)):o==="<="&&(o="<",d?a=+a+1:i=+i+1),o==="<"&&(c="-0"),n=`${o+a}.${i}.${s}${c}`):d?n=`>=${a}.0.0${c} <${+a+1}.0.0-0`:l&&(n=`>=${a}.${i}.0${c} <${a}.${+i+1}.0-0`),It("xRange return",n),n})},PC=(e,t)=>(It("replaceStars",e,t),e.trim().replace(rr[zt.STAR],"")),OC=(e,t)=>(It("replaceGTE0",e,t),e.trim().replace(rr[t.includePrerelease?zt.GTE0PRE:zt.GTE0],"")),IC=e=>(t,r,n,o,a,i,s,c,u,d,l,p,f)=>(sr(n)?r="":sr(o)?r=`>=${n}.0.0${e?"-0":""}`:sr(a)?r=`>=${n}.${o}.0${e?"-0":""}`:i?r=`>=${r}`:r=`>=${r}${e?"-0":""}`,sr(u)?c="":sr(d)?c=`<${+u+1}.0.0-0`:sr(l)?c=`<${u}.${+d+1}.0-0`:p?c=`<=${u}.${d}.${l}-${p}`:e?c=`<${u}.${d}.${+l+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),DC=(e,t,r)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let n=0;n<e.length;n++)if(It(e[n].semver),e[n].semver!==ha.ANY&&e[n].semver.prerelease.length>0){let o=e[n].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}});var Fi=ee((MO,Yp)=>{var Hi=Symbol("SemVer ANY"),ei=class{static get ANY(){return Hi}constructor(t,r){if(r=AC(r),t instanceof ei){if(t.loose===!!r.loose)return t;t=t.value}ma("comparator",t,r),this.options=r,this.loose=!!r.loose,this.parse(t),this.semver===Hi?this.value="":this.value=this.operator+this.semver.version,ma("comp",this)}parse(t){let r=this.options.loose?Wp[Kp.COMPARATORLOOSE]:Wp[Kp.COMPARATOR],n=t.match(r);if(!n)throw new TypeError(`Invalid comparator: ${t}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new zp(n[2],this.options.loose):this.semver=Hi}toString(){return this.value}test(t){if(ma("Comparator.test",t,this.options.loose),this.semver===Hi||t===Hi)return!0;if(typeof t=="string")try{t=new zp(t,this.options)}catch{return!1}return ga(t,this.operator,this.semver,this.options)}intersects(t,r){if(!(t instanceof ei))throw new TypeError("a Comparator is required");if((!r||typeof r!="object")&&(r={loose:!!r,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new Xp(t.value,r).test(this.value);if(t.operator==="")return t.value===""?!0:new Xp(this.value,r).test(t.semver);let n=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),o=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),a=this.semver.version===t.semver.version,i=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),s=ga(this.semver,"<",t.semver,r)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),c=ga(this.semver,">",t.semver,r)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return n||o||a&&i||s||c}};Yp.exports=ei;var AC=ki(),{re:Wp,t:Kp}=In(),ga=ua(),ma=Ni(),zp=tr(),Xp=Or()});var $i=ee((qO,Qp)=>{var xC=Or(),NC=(e,t,r)=>{try{t=new xC(t,r)}catch{return!1}return t.test(e)};Qp.exports=NC});var Zp=ee((LO,Jp)=>{var kC=Or(),MC=(e,t)=>new kC(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));Jp.exports=MC});var tf=ee((jO,ef)=>{var qC=tr(),LC=Or(),jC=(e,t,r)=>{let n=null,o=null,a=null;try{a=new LC(t,r)}catch{return null}return e.forEach(i=>{a.test(i)&&(!n||o.compare(i)===-1)&&(n=i,o=new qC(n,r))}),n};ef.exports=jC});var nf=ee((FO,rf)=>{var FC=tr(),HC=Or(),$C=(e,t,r)=>{let n=null,o=null,a=null;try{a=new HC(t,r)}catch{return null}return e.forEach(i=>{a.test(i)&&(!n||o.compare(i)===1)&&(n=i,o=new FC(n,r))}),n};rf.exports=$C});var af=ee((HO,sf)=>{var va=tr(),UC=Or(),of=qi(),BC=(e,t)=>{e=new UC(e,t);let r=new va("0.0.0");if(e.test(r)||(r=new va("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){let o=e.set[n],a=null;o.forEach(i=>{let s=new va(i.semver.version);switch(i.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!a||of(s,a))&&(a=s);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${i.operator}`)}}),a&&(!r||of(r,a))&&(r=a)}return r&&e.test(r)?r:null};sf.exports=BC});var uf=ee(($O,cf)=>{var VC=Or(),GC=(e,t)=>{try{return new VC(e,t).range||"*"}catch{return null}};cf.exports=GC});var No=ee((UO,ff)=>{var WC=tr(),pf=Fi(),{ANY:KC}=pf,zC=Or(),XC=$i(),lf=qi(),df=Po(),YC=Io(),QC=Oo(),JC=(e,t,r,n)=>{e=new WC(e,n),t=new zC(t,n);let o,a,i,s,c;switch(r){case">":o=lf,a=YC,i=df,s=">",c=">=";break;case"<":o=df,a=QC,i=lf,s="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(XC(e,t,n))return!1;for(let u=0;u<t.set.length;++u){let d=t.set[u],l=null,p=null;if(d.forEach(f=>{f.semver===KC&&(f=new pf(">=0.0.0")),l=l||f,p=p||f,o(f.semver,l.semver,n)?l=f:i(f.semver,p.semver,n)&&(p=f)}),l.operator===s||l.operator===c||(!p.operator||p.operator===s)&&a(e,p.semver))return!1;if(p.operator===c&&i(e,p.semver))return!1}return!0};ff.exports=JC});var gf=ee((BO,hf)=>{var ZC=No(),eT=(e,t,r)=>ZC(e,t,">",r);hf.exports=eT});var vf=ee((VO,mf)=>{var tT=No(),rT=(e,t,r)=>tT(e,t,"<",r);mf.exports=rT});var Ef=ee((GO,yf)=>{var _f=Or(),nT=(e,t,r)=>(e=new _f(e,r),t=new _f(t,r),e.intersects(t));yf.exports=nT});var Cf=ee((WO,bf)=>{var iT=$i(),oT=Pr();bf.exports=(e,t,r)=>{let n=[],o=null,a=null,i=e.sort((d,l)=>oT(d,l,r));for(let d of i)iT(d,t,r)?(a=d,o||(o=d)):(a&&n.push([o,a]),a=null,o=null);o&&n.push([o,null]);let s=[];for(let[d,l]of n)d===l?s.push(d):!l&&d===i[0]?s.push("*"):l?d===i[0]?s.push(`<=${l}`):s.push(`${d} - ${l}`):s.push(`>=${d}`);let c=s.join(" || "),u=typeof t.raw=="string"?t.raw:String(t);return c.length<u.length?c:t}});var Pf=ee((KO,wf)=>{var Tf=Or(),ko=Fi(),{ANY:_a}=ko,Ui=$i(),ya=Pr(),sT=(e,t,r={})=>{if(e===t)return!0;e=new Tf(e,r),t=new Tf(t,r);let n=!1;e:for(let o of e.set){for(let a of t.set){let i=aT(o,a,r);if(n=n||i!==null,i)continue e}if(n)return!1}return!0},aT=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===_a){if(t.length===1&&t[0].semver===_a)return!0;r.includePrerelease?e=[new ko(">=0.0.0-0")]:e=[new ko(">=0.0.0")]}if(t.length===1&&t[0].semver===_a){if(r.includePrerelease)return!0;t=[new ko(">=0.0.0")]}let n=new Set,o,a;for(let f of e)f.operator===">"||f.operator===">="?o=Sf(o,f,r):f.operator==="<"||f.operator==="<="?a=Rf(a,f,r):n.add(f.semver);if(n.size>1)return null;let i;if(o&&a){if(i=ya(o.semver,a.semver,r),i>0)return null;if(i===0&&(o.operator!==">="||a.operator!=="<="))return null}for(let f of n){if(o&&!Ui(f,String(o),r)||a&&!Ui(f,String(a),r))return null;for(let g of t)if(!Ui(f,String(g),r))return!1;return!0}let s,c,u,d,l=a&&!r.includePrerelease&&a.semver.prerelease.length?a.semver:!1,p=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1;l&&l.prerelease.length===1&&a.operator==="<"&&l.prerelease[0]===0&&(l=!1);for(let f of t){if(d=d||f.operator===">"||f.operator===">=",u=u||f.operator==="<"||f.operator==="<=",o){if(p&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===p.major&&f.semver.minor===p.minor&&f.semver.patch===p.patch&&(p=!1),f.operator===">"||f.operator===">="){if(s=Sf(o,f,r),s===f&&s!==o)return!1}else if(o.operator===">="&&!Ui(o.semver,String(f),r))return!1}if(a){if(l&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===l.major&&f.semver.minor===l.minor&&f.semver.patch===l.patch&&(l=!1),f.operator==="<"||f.operator==="<="){if(c=Rf(a,f,r),c===f&&c!==a)return!1}else if(a.operator==="<="&&!Ui(a.semver,String(f),r))return!1}if(!f.operator&&(a||o)&&i!==0)return!1}return!(o&&u&&!a&&i!==0||a&&d&&!o&&i!==0||p||l)},Sf=(e,t,r)=>{if(!e)return t;let n=ya(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},Rf=(e,t,r)=>{if(!e)return t;let n=ya(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};wf.exports=sT});var If=ee((zO,Of)=>{var Ea=In();Of.exports={re:Ea.re,src:Ea.src,tokens:Ea.t,SEMVER_SPEC_VERSION:xi().SEMVER_SPEC_VERSION,SemVer:tr(),compareIdentifiers:Co().compareIdentifiers,rcompareIdentifiers:Co().rcompareIdentifiers,parse:Dn(),valid:Yd(),clean:Jd(),inc:ep(),diff:sp(),major:cp(),minor:lp(),patch:pp(),prerelease:hp(),compare:Pr(),rcompare:mp(),compareLoose:_p(),compareBuild:wo(),sort:Cp(),rsort:Sp(),gt:qi(),lt:Po(),eq:Ro(),neq:ca(),gte:Oo(),lte:Io(),cmp:ua(),coerce:xp(),Comparator:Fi(),Range:Or(),satisfies:$i(),toComparators:Zp(),maxSatisfying:tf(),minSatisfying:nf(),minVersion:af(),validRange:uf(),outside:No(),gtr:gf(),ltr:vf(),intersects:Ef(),simplifyRange:Cf(),subset:Pf()}});var cn=ee(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.asPromise=wt.thenable=wt.typedArray=wt.stringArray=wt.array=wt.func=wt.error=wt.number=wt.string=wt.boolean=void 0;function cT(e){return e===!0||e===!1}wt.boolean=cT;function Df(e){return typeof e=="string"||e instanceof String}wt.string=Df;function uT(e){return typeof e=="number"||e instanceof Number}wt.number=uT;function lT(e){return e instanceof Error}wt.error=lT;function Af(e){return typeof e=="function"}wt.func=Af;function xf(e){return Array.isArray(e)}wt.array=xf;function dT(e){return xf(e)&&e.every(t=>Df(t))}wt.stringArray=dT;function pT(e,t){return Array.isArray(e)&&e.every(t)}wt.typedArray=pT;function Nf(e){return e&&Af(e.then)}wt.thenable=Nf;function fT(e){return e instanceof Promise?e:Nf(e)?new Promise((t,r)=>{e.then(n=>t(n),n=>r(n))}):Promise.resolve(e)}wt.asPromise=fT});var Xr=ee(Ta=>{"use strict";Object.defineProperty(Ta,"__esModule",{value:!0});var ba;function Ca(){if(ba===void 0)throw new Error("No runtime abstraction layer installed");return ba}(function(e){function t(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");ba=r}e.install=t})(Ca||(Ca={}));Ta.default=Ca});var Sa=ee(Bi=>{"use strict";Object.defineProperty(Bi,"__esModule",{value:!0});Bi.Disposable=void 0;var hT;(function(e){function t(r){return{dispose:r}}e.create=t})(hT=Bi.Disposable||(Bi.Disposable={}))});var kf=ee(Mo=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});Mo.AbstractMessageBuffer=void 0;var gT=13,mT=10,vT=`\r
`,Ra=class{constructor(t="utf-8"){this._encoding=t,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(t){let r=typeof t=="string"?this.fromString(t,this._encoding):t;this._chunks.push(r),this._totalLength+=r.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let t=0,r=0,n=0,o=0;e:for(;r<this._chunks.length;){let c=this._chunks[r];n=0;t:for(;n<c.length;){switch(c[n]){case gT:switch(t){case 0:t=1;break;case 2:t=3;break;default:t=0}break;case mT:switch(t){case 1:t=2;break;case 3:t=4,n++;break e;default:t=0}break;default:t=0}n++}o+=c.byteLength,r++}if(t!==4)return;let a=this._read(o+n),i=new Map,s=this.toString(a,"ascii").split(vT);if(s.length<2)return i;for(let c=0;c<s.length-2;c++){let u=s[c],d=u.indexOf(":");if(d===-1)throw new Error("Message header must separate key and value using :");let l=u.substr(0,d),p=u.substr(d+1).trim();i.set(l,p)}return i}tryReadBody(t){if(!(this._totalLength<t))return this._read(t)}get numberOfBytes(){return this._totalLength}_read(t){if(t===0)return this.emptyBuffer();if(t>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===t){let a=this._chunks[0];return this._chunks.shift(),this._totalLength-=t,this.asNative(a)}if(this._chunks[0].byteLength>t){let a=this._chunks[0],i=this.asNative(a,t);return this._chunks[0]=a.slice(t),this._totalLength-=t,i}let r=this.allocNative(t),n=0,o=0;for(;t>0;){let a=this._chunks[o];if(a.byteLength>t){let i=a.slice(0,t);r.set(i,n),n+=t,this._chunks[o]=a.slice(t),this._totalLength-=t,t-=t}else r.set(a,n),n+=a.byteLength,this._chunks.shift(),this._totalLength-=a.byteLength,t-=a.byteLength}return r}};Mo.AbstractMessageBuffer=Ra});var Lf=ee(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});var _T=Xr(),Mf=require("util"),Mn=Sa(),yT=kf(),ti=class extends yT.AbstractMessageBuffer{constructor(t="utf-8"){super(t)}emptyBuffer(){return ti.emptyBuffer}fromString(t,r){return Buffer.from(t,r)}toString(t,r){return t instanceof Buffer?t.toString(r):new Mf.TextDecoder(r).decode(t)}asNative(t,r){return r===void 0?t instanceof Buffer?t:Buffer.from(t):t instanceof Buffer?t.slice(0,r):Buffer.from(t,0,r)}allocNative(t){return Buffer.allocUnsafe(t)}};ti.emptyBuffer=Buffer.allocUnsafe(0);var wa=class{constructor(t){this.stream=t}onClose(t){return this.stream.on("close",t),Mn.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),Mn.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),Mn.Disposable.create(()=>this.stream.off("end",t))}onData(t){return this.stream.on("data",t),Mn.Disposable.create(()=>this.stream.off("data",t))}},Pa=class{constructor(t){this.stream=t}onClose(t){return this.stream.on("close",t),Mn.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),Mn.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),Mn.Disposable.create(()=>this.stream.off("end",t))}write(t,r){return new Promise((n,o)=>{let a=i=>{i==null?n():o(i)};typeof t=="string"?this.stream.write(t,r,a):this.stream.write(t,a)})}end(){this.stream.end()}},qf=Object.freeze({messageBuffer:Object.freeze({create:e=>new ti(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(e,void 0,0),t.charset))}catch(r){return Promise.reject(r)}}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{try{return e instanceof Buffer?Promise.resolve(JSON.parse(e.toString(t.charset))):Promise.resolve(JSON.parse(new Mf.TextDecoder(t.charset).decode(e)))}catch(r){return Promise.reject(r)}}})}),stream:Object.freeze({asReadableStream:e=>new wa(e),asWritableStream:e=>new Pa(e)}),console,timer:Object.freeze({setTimeout(e,t,...r){return setTimeout(e,t,...r)},clearTimeout(e){clearTimeout(e)},setImmediate(e,...t){return setImmediate(e,...t)},clearImmediate(e){clearImmediate(e)}})});function Oa(){return qf}(function(e){function t(){_T.default.install(qf)}e.install=t})(Oa||(Oa={}));Ia.default=Oa});var ri=ee(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.stringArray=nr.array=nr.func=nr.error=nr.number=nr.string=nr.boolean=void 0;function ET(e){return e===!0||e===!1}nr.boolean=ET;function jf(e){return typeof e=="string"||e instanceof String}nr.string=jf;function bT(e){return typeof e=="number"||e instanceof Number}nr.number=bT;function CT(e){return e instanceof Error}nr.error=CT;function TT(e){return typeof e=="function"}nr.func=TT;function Ff(e){return Array.isArray(e)}nr.array=Ff;function ST(e){return Ff(e)&&e.every(t=>jf(t))}nr.stringArray=ST});var Ja=ee(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.isResponseMessage=we.isNotificationMessage=we.isRequestMessage=we.NotificationType9=we.NotificationType8=we.NotificationType7=we.NotificationType6=we.NotificationType5=we.NotificationType4=we.NotificationType3=we.NotificationType2=we.NotificationType1=we.NotificationType0=we.NotificationType=we.RequestType9=we.RequestType8=we.RequestType7=we.RequestType6=we.RequestType5=we.RequestType4=we.RequestType3=we.RequestType2=we.RequestType1=we.RequestType=we.RequestType0=we.AbstractMessageSignature=we.ParameterStructures=we.ResponseError=we.ErrorCodes=void 0;var qn=ri(),Hf;(function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=e.jsonrpcReservedErrorRangeStart,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=e.jsonrpcReservedErrorRangeEnd})(Hf=we.ErrorCodes||(we.ErrorCodes={}));var Vi=class extends Error{constructor(t,r,n){super(r),this.code=qn.number(t)?t:Hf.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,Vi.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}};we.ResponseError=Vi;var Bt=class{constructor(t){this.kind=t}static is(t){return t===Bt.auto||t===Bt.byName||t===Bt.byPosition}toString(){return this.kind}};we.ParameterStructures=Bt;Bt.auto=new Bt("auto");Bt.byPosition=new Bt("byPosition");Bt.byName=new Bt("byName");var vt=class{constructor(t,r){this.method=t,this.numberOfParams=r}get parameterStructures(){return Bt.auto}};we.AbstractMessageSignature=vt;var Da=class extends vt{constructor(t){super(t,0)}};we.RequestType0=Da;var Aa=class extends vt{constructor(t,r=Bt.auto){super(t,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};we.RequestType=Aa;var xa=class extends vt{constructor(t,r=Bt.auto){super(t,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};we.RequestType1=xa;var Na=class extends vt{constructor(t){super(t,2)}};we.RequestType2=Na;var ka=class extends vt{constructor(t){super(t,3)}};we.RequestType3=ka;var Ma=class extends vt{constructor(t){super(t,4)}};we.RequestType4=Ma;var qa=class extends vt{constructor(t){super(t,5)}};we.RequestType5=qa;var La=class extends vt{constructor(t){super(t,6)}};we.RequestType6=La;var ja=class extends vt{constructor(t){super(t,7)}};we.RequestType7=ja;var Fa=class extends vt{constructor(t){super(t,8)}};we.RequestType8=Fa;var Ha=class extends vt{constructor(t){super(t,9)}};we.RequestType9=Ha;var $a=class extends vt{constructor(t,r=Bt.auto){super(t,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};we.NotificationType=$a;var Ua=class extends vt{constructor(t){super(t,0)}};we.NotificationType0=Ua;var Ba=class extends vt{constructor(t,r=Bt.auto){super(t,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};we.NotificationType1=Ba;var Va=class extends vt{constructor(t){super(t,2)}};we.NotificationType2=Va;var Ga=class extends vt{constructor(t){super(t,3)}};we.NotificationType3=Ga;var Wa=class extends vt{constructor(t){super(t,4)}};we.NotificationType4=Wa;var Ka=class extends vt{constructor(t){super(t,5)}};we.NotificationType5=Ka;var za=class extends vt{constructor(t){super(t,6)}};we.NotificationType6=za;var Xa=class extends vt{constructor(t){super(t,7)}};we.NotificationType7=Xa;var Ya=class extends vt{constructor(t){super(t,8)}};we.NotificationType8=Ya;var Qa=class extends vt{constructor(t){super(t,9)}};we.NotificationType9=Qa;function RT(e){let t=e;return t&&qn.string(t.method)&&(qn.string(t.id)||qn.number(t.id))}we.isRequestMessage=RT;function wT(e){let t=e;return t&&qn.string(t.method)&&e.id===void 0}we.isNotificationMessage=wT;function PT(e){let t=e;return t&&(t.result!==void 0||!!t.error)&&(qn.string(t.id)||qn.number(t.id)||t.id===null)}we.isResponseMessage=PT});var ii=ee(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});Ln.Emitter=Ln.Event=void 0;var OT=Xr(),IT;(function(e){let t={dispose(){}};e.None=function(){return t}})(IT=Ln.Event||(Ln.Event={}));var Za=class{add(t,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(t),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:()=>this.remove(t,r)})}remove(t,r=null){if(!this._callbacks)return;let n=!1;for(let o=0,a=this._callbacks.length;o<a;o++)if(this._callbacks[o]===t)if(this._contexts[o]===r){this._callbacks.splice(o,1),this._contexts.splice(o,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...t){if(!this._callbacks)return[];let r=[],n=this._callbacks.slice(0),o=this._contexts.slice(0);for(let a=0,i=n.length;a<i;a++)try{r.push(n[a].apply(o[a],t))}catch(s){OT.default().console.error(s)}return r}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},ni=class{constructor(t){this._options=t}get event(){return this._event||(this._event=(t,r,n)=>{this._callbacks||(this._callbacks=new Za),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(t,r);let o={dispose:()=>{!this._callbacks||(this._callbacks.remove(t,r),o.dispose=ni._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(o),o}),this._event}fire(t){this._callbacks&&this._callbacks.invoke.call(this._callbacks,t)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};Ln.Emitter=ni;ni._noop=function(){}});var nc=ee(jn=>{"use strict";Object.defineProperty(jn,"__esModule",{value:!0});jn.CancellationTokenSource=jn.CancellationToken=void 0;var $f=Xr(),DT=ri(),ec=ii(),tc;(function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ec.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:ec.Event.None});function t(r){let n=r;return n&&(n===e.None||n===e.Cancelled||DT.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}e.is=t})(tc=jn.CancellationToken||(jn.CancellationToken={}));var AT=Object.freeze(function(e,t){let r=$f.default().timer.setTimeout(e.bind(t),0);return{dispose(){$f.default().timer.clearTimeout(r)}}}),qo=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?AT:(this._emitter||(this._emitter=new ec.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},rc=class{get token(){return this._token||(this._token=new qo),this._token}cancel(){this._token?this._token.cancel():this._token=tc.Cancelled}dispose(){this._token?this._token instanceof qo&&this._token.dispose():this._token=tc.None}};jn.CancellationTokenSource=rc});var Uf=ee(Yr=>{"use strict";Object.defineProperty(Yr,"__esModule",{value:!0});Yr.ReadableStreamMessageReader=Yr.AbstractMessageReader=Yr.MessageReader=void 0;var Lo=Xr(),oi=ri(),ic=ii(),xT;(function(e){function t(r){let n=r;return n&&oi.func(n.listen)&&oi.func(n.dispose)&&oi.func(n.onError)&&oi.func(n.onClose)&&oi.func(n.onPartialMessage)}e.is=t})(xT=Yr.MessageReader||(Yr.MessageReader={}));var jo=class{constructor(){this.errorEmitter=new ic.Emitter,this.closeEmitter=new ic.Emitter,this.partialMessageEmitter=new ic.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(t){this.errorEmitter.fire(this.asError(t))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(t){this.partialMessageEmitter.fire(t)}asError(t){return t instanceof Error?t:new Error(`Reader received error. Reason: ${oi.string(t.message)?t.message:"unknown"}`)}};Yr.AbstractMessageReader=jo;var oc;(function(e){function t(r){var n;let o,a,i,s=new Map,c,u=new Map;if(r===void 0||typeof r=="string")o=r??"utf-8";else{if(o=(n=r.charset)!==null&&n!==void 0?n:"utf-8",r.contentDecoder!==void 0&&(i=r.contentDecoder,s.set(i.name,i)),r.contentDecoders!==void 0)for(let d of r.contentDecoders)s.set(d.name,d);if(r.contentTypeDecoder!==void 0&&(c=r.contentTypeDecoder,u.set(c.name,c)),r.contentTypeDecoders!==void 0)for(let d of r.contentTypeDecoders)u.set(d.name,d)}return c===void 0&&(c=Lo.default().applicationJson.decoder,u.set(c.name,c)),{charset:o,contentDecoder:i,contentDecoders:s,contentTypeDecoder:c,contentTypeDecoders:u}}e.fromOptions=t})(oc||(oc={}));var sc=class extends jo{constructor(t,r){super(),this.readable=t,this.options=oc.fromOptions(r),this.buffer=Lo.default().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(t){this._partialMessageTimeout=t}get partialMessageTimeout(){return this._partialMessageTimeout}listen(t){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=t;let r=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),r}onData(t){for(this.buffer.append(t);;){if(this.nextMessageLength===-1){let o=this.buffer.tryReadHeaders();if(!o)return;let a=o.get("Content-Length");if(!a)throw new Error("Header must provide a Content-Length property.");let i=parseInt(a);if(isNaN(i))throw new Error("Content-Length value must be a number.");this.nextMessageLength=i}let r=this.buffer.tryReadBody(this.nextMessageLength);if(r===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let n;this.options.contentDecoder!==void 0?n=this.options.contentDecoder.decode(r):n=Promise.resolve(r),n.then(o=>{this.options.contentTypeDecoder.decode(o,this.options).then(a=>{this.callback(a)},a=>{this.fireError(a)})},o=>{this.fireError(o)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(Lo.default().timer.clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=Lo.default().timer.setTimeout((t,r)=>{this.partialMessageTimer=void 0,t===this.messageToken&&(this.firePartialMessage({messageToken:t,waitingTime:r}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Yr.ReadableStreamMessageReader=sc});var Bf=ee(Fo=>{"use strict";Object.defineProperty(Fo,"__esModule",{value:!0});Fo.Semaphore=void 0;var NT=Xr(),ac=class{constructor(t=1){if(t<=0)throw new Error("Capacity must be greater than 0");this._capacity=t,this._active=0,this._waiting=[]}lock(t){return new Promise((r,n)=>{this._waiting.push({thunk:t,resolve:r,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||NT.default().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let t=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=t.thunk();r instanceof Promise?r.then(n=>{this._active--,t.resolve(n),this.runNext()},n=>{this._active--,t.reject(n),this.runNext()}):(this._active--,t.resolve(r),this.runNext())}catch(r){this._active--,t.reject(r),this.runNext()}}};Fo.Semaphore=ac});var Kf=ee(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});Qr.WriteableStreamMessageWriter=Qr.AbstractMessageWriter=Qr.MessageWriter=void 0;var Vf=Xr(),Gi=ri(),kT=Bf(),Gf=ii(),MT="Content-Length: ",Wf=`\r
`,qT;(function(e){function t(r){let n=r;return n&&Gi.func(n.dispose)&&Gi.func(n.onClose)&&Gi.func(n.onError)&&Gi.func(n.write)}e.is=t})(qT=Qr.MessageWriter||(Qr.MessageWriter={}));var Ho=class{constructor(){this.errorEmitter=new Gf.Emitter,this.closeEmitter=new Gf.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(t,r,n){this.errorEmitter.fire([this.asError(t),r,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(t){return t instanceof Error?t:new Error(`Writer received error. Reason: ${Gi.string(t.message)?t.message:"unknown"}`)}};Qr.AbstractMessageWriter=Ho;var cc;(function(e){function t(r){var n,o;return r===void 0||typeof r=="string"?{charset:r??"utf-8",contentTypeEncoder:Vf.default().applicationJson.encoder}:{charset:(n=r.charset)!==null&&n!==void 0?n:"utf-8",contentEncoder:r.contentEncoder,contentTypeEncoder:(o=r.contentTypeEncoder)!==null&&o!==void 0?o:Vf.default().applicationJson.encoder}}e.fromOptions=t})(cc||(cc={}));var uc=class extends Ho{constructor(t,r){super(),this.writable=t,this.options=cc.fromOptions(r),this.errorCount=0,this.writeSemaphore=new kT.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(t){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(t,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let o=[];return o.push(MT,n.byteLength.toString(),Wf),o.push(Wf),this.doWrite(t,o,n)},n=>{throw this.fireError(n),n}))}async doWrite(t,r,n){try{return await this.writable.write(r.join(""),"ascii"),this.writable.write(n)}catch(o){return this.handleError(o,t),Promise.reject(o)}}handleError(t,r){this.errorCount++,this.fireError(t,r,this.errorCount)}end(){this.writable.end()}};Qr.WriteableStreamMessageWriter=uc});var zf=ee(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.LRUCache=Jr.LinkedMap=Jr.Touch=void 0;var ar;(function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last})(ar=Jr.Touch||(Jr.Touch={}));var $o=class{constructor(){this[Symbol.toStringTag]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var t;return(t=this._head)===null||t===void 0?void 0:t.value}get last(){var t;return(t=this._tail)===null||t===void 0?void 0:t.value}has(t){return this._map.has(t)}get(t,r=ar.None){let n=this._map.get(t);if(!!n)return r!==ar.None&&this.touch(n,r),n.value}set(t,r,n=ar.None){let o=this._map.get(t);if(o)o.value=r,n!==ar.None&&this.touch(o,n);else{switch(o={key:t,value:r,next:void 0,previous:void 0},n){case ar.None:this.addItemLast(o);break;case ar.First:this.addItemFirst(o);break;case ar.Last:this.addItemLast(o);break;default:this.addItemLast(o);break}this._map.set(t,o),this._size++}return this}delete(t){return!!this.remove(t)}remove(t){let r=this._map.get(t);if(!!r)return this._map.delete(t),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let t=this._head;return this._map.delete(t.key),this.removeItem(t),this._size--,t.value}forEach(t,r){let n=this._state,o=this._head;for(;o;){if(r?t.bind(r)(o.value,o.key,this):t(o.value,o.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");o=o.next}}keys(){let t=this,r=this._state,n=this._head,o={[Symbol.iterator](){return o},next(){if(t._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let a={value:n.key,done:!1};return n=n.next,a}else return{value:void 0,done:!0}}};return o}values(){let t=this,r=this._state,n=this._head,o={[Symbol.iterator](){return o},next(){if(t._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let a={value:n.value,done:!1};return n=n.next,a}else return{value:void 0,done:!0}}};return o}entries(){let t=this,r=this._state,n=this._head,o={[Symbol.iterator](){return o},next(){if(t._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let a={value:[n.key,n.value],done:!1};return n=n.next,a}else return{value:void 0,done:!0}}};return o}[Symbol.iterator](){return this.entries()}trimOld(t){if(t>=this.size)return;if(t===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>t;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(t){if(!this._head&&!this._tail)this._tail=t;else if(this._head)t.next=this._head,this._head.previous=t;else throw new Error("Invalid list");this._head=t,this._state++}addItemLast(t){if(!this._head&&!this._tail)this._head=t;else if(this._tail)t.previous=this._tail,this._tail.next=t;else throw new Error("Invalid list");this._tail=t,this._state++}removeItem(t){if(t===this._head&&t===this._tail)this._head=void 0,this._tail=void 0;else if(t===this._head){if(!t.next)throw new Error("Invalid list");t.next.previous=void 0,this._head=t.next}else if(t===this._tail){if(!t.previous)throw new Error("Invalid list");t.previous.next=void 0,this._tail=t.previous}else{let r=t.next,n=t.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}t.next=void 0,t.previous=void 0,this._state++}touch(t,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==ar.First&&r!==ar.Last)){if(r===ar.First){if(t===this._head)return;let n=t.next,o=t.previous;t===this._tail?(o.next=void 0,this._tail=o):(n.previous=o,o.next=n),t.previous=void 0,t.next=this._head,this._head.previous=t,this._head=t,this._state++}else if(r===ar.Last){if(t===this._tail)return;let n=t.next,o=t.previous;t===this._head?(n.previous=void 0,this._head=n):(n.previous=o,o.next=n),t.next=void 0,t.previous=this._tail,this._tail.next=t,this._tail=t,this._state++}}}toJSON(){let t=[];return this.forEach((r,n)=>{t.push([n,r])}),t}fromJSON(t){this.clear();for(let[r,n]of t)this.set(r,n)}};Jr.LinkedMap=$o;var lc=class extends $o{constructor(t,r=1){super(),this._limit=t,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(t){this._limit=t,this.checkTrim()}get ratio(){return this._ratio}set ratio(t){this._ratio=Math.min(Math.max(0,t),1),this.checkTrim()}get(t,r=ar.AsNew){return super.get(t,r)}peek(t){return super.get(t,ar.None)}set(t,r){return super.set(t,r,ar.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Jr.LRUCache=lc});var Zf=ee(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.createMessageConnection=qe.ConnectionOptions=qe.CancellationStrategy=qe.CancellationSenderStrategy=qe.CancellationReceiverStrategy=qe.ConnectionStrategy=qe.ConnectionError=qe.ConnectionErrors=qe.LogTraceNotification=qe.SetTraceNotification=qe.TraceFormat=qe.Trace=qe.NullLogger=qe.ProgressType=void 0;var Xf=Xr(),Vt=ri(),Ne=Ja(),Yf=zf(),Wi=ii(),dc=nc(),Ki;(function(e){e.type=new Ne.NotificationType("$/cancelRequest")})(Ki||(Ki={}));var Bo;(function(e){e.type=new Ne.NotificationType("$/progress")})(Bo||(Bo={}));var pc=class{constructor(){}};qe.ProgressType=pc;var fc;(function(e){function t(r){return Vt.func(r)}e.is=t})(fc||(fc={}));qe.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var Mt;(function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Verbose=2]="Verbose"})(Mt=qe.Trace||(qe.Trace={}));(function(e){function t(n){if(!Vt.string(n))return e.Off;switch(n=n.toLowerCase(),n){case"off":return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose;default:return e.Off}}e.fromString=t;function r(n){switch(n){case e.Off:return"off";case e.Messages:return"messages";case e.Verbose:return"verbose";default:return"off"}}e.toString=r})(Mt=qe.Trace||(qe.Trace={}));var Nr;(function(e){e.Text="text",e.JSON="json"})(Nr=qe.TraceFormat||(qe.TraceFormat={}));(function(e){function t(r){return r=r.toLowerCase(),r==="json"?e.JSON:e.Text}e.fromString=t})(Nr=qe.TraceFormat||(qe.TraceFormat={}));var Qf;(function(e){e.type=new Ne.NotificationType("$/setTrace")})(Qf=qe.SetTraceNotification||(qe.SetTraceNotification={}));var hc;(function(e){e.type=new Ne.NotificationType("$/logTrace")})(hc=qe.LogTraceNotification||(qe.LogTraceNotification={}));var Uo;(function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"})(Uo=qe.ConnectionErrors||(qe.ConnectionErrors={}));var un=class extends Error{constructor(t,r){super(r),this.code=t,Object.setPrototypeOf(this,un.prototype)}};qe.ConnectionError=un;var Jf;(function(e){function t(r){let n=r;return n&&Vt.func(n.cancelUndispatched)}e.is=t})(Jf=qe.ConnectionStrategy||(qe.ConnectionStrategy={}));var gc;(function(e){e.Message=Object.freeze({createCancellationTokenSource(r){return new dc.CancellationTokenSource}});function t(r){let n=r;return n&&Vt.func(n.createCancellationTokenSource)}e.is=t})(gc=qe.CancellationReceiverStrategy||(qe.CancellationReceiverStrategy={}));var mc;(function(e){e.Message=Object.freeze({sendCancellation(r,n){r.sendNotification(Ki.type,{id:n})},cleanup(r){}});function t(r){let n=r;return n&&Vt.func(n.sendCancellation)&&Vt.func(n.cleanup)}e.is=t})(mc=qe.CancellationSenderStrategy||(qe.CancellationSenderStrategy={}));var vc;(function(e){e.Message=Object.freeze({receiver:gc.Message,sender:mc.Message});function t(r){let n=r;return n&&gc.is(n.receiver)&&mc.is(n.sender)}e.is=t})(vc=qe.CancellationStrategy||(qe.CancellationStrategy={}));var LT;(function(e){function t(r){let n=r;return n&&(vc.is(n.cancellationStrategy)||Jf.is(n.connectionStrategy))}e.is=t})(LT=qe.ConnectionOptions||(qe.ConnectionOptions={}));var kr;(function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"})(kr||(kr={}));function jT(e,t,r,n){let o=r!==void 0?r:qe.NullLogger,a=0,i=0,s=0,c="2.0",u,d=Object.create(null),l,p=Object.create(null),f=new Map,g,m=new Yf.LinkedMap,_=Object.create(null),E=Object.create(null),T=Mt.Off,w=Nr.Text,R,I=kr.New,H=new Wi.Emitter,z=new Wi.Emitter,K=new Wi.Emitter,J=new Wi.Emitter,te=new Wi.Emitter,U=n&&n.cancellationStrategy?n.cancellationStrategy:vc.Message;function V(M){if(M===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+M.toString()}function Q(M){return M===null?"res-unknown-"+(++s).toString():"res-"+M.toString()}function ne(){return"not-"+(++i).toString()}function ve(M,N){Ne.isRequestMessage(N)?M.set(V(N.id),N):Ne.isResponseMessage(N)?M.set(Q(N.id),N):M.set(ne(),N)}function de(M){}function X(){return I===kr.Listening}function ce(){return I===kr.Closed}function ie(){return I===kr.Disposed}function pe(){(I===kr.New||I===kr.Listening)&&(I=kr.Closed,z.fire(void 0))}function he(M){H.fire([M,void 0,void 0])}function be(M){H.fire(M)}e.onClose(pe),e.onError(he),t.onClose(pe),t.onError(be);function _e(){g||m.size===0||(g=Xf.default().timer.setImmediate(()=>{g=void 0,Ue()}))}function Ue(){if(m.size===0)return;let M=m.shift();try{Ne.isRequestMessage(M)?Ke(M):Ne.isNotificationMessage(M)?xe(M):Ne.isResponseMessage(M)?je(M):it(M)}finally{_e()}}let Qe=M=>{try{if(Ne.isNotificationMessage(M)&&M.method===Ki.type.method){let N=V(M.params.id),P=m.get(N);if(Ne.isRequestMessage(P)){let q=n?.connectionStrategy,F=q&&q.cancelUndispatched?q.cancelUndispatched(P,de):void 0;if(F&&(F.error!==void 0||F.result!==void 0)){m.delete(N),F.id=P.id,me(F,M.method,Date.now()),t.write(F);return}}}ve(m,M)}finally{_e()}};function Ke(M){if(ie())return;function N(G,ue,fe){let Re={jsonrpc:c,id:M.id};G instanceof Ne.ResponseError?Re.error=G.toJson():Re.result=G===void 0?null:G,me(Re,ue,fe),t.write(Re)}function P(G,ue,fe){let Re={jsonrpc:c,id:M.id,error:G.toJson()};me(Re,ue,fe),t.write(Re)}function q(G,ue,fe){G===void 0&&(G=null);let Re={jsonrpc:c,id:M.id,result:G};me(Re,ue,fe),t.write(Re)}Ae(M);let F=d[M.method],y,b;F&&(y=F.type,b=F.handler);let L=Date.now();if(b||u){let G=String(M.id),ue=U.receiver.createCancellationTokenSource(G);E[G]=ue;try{let fe;if(b)if(M.params===void 0){if(y!==void 0&&y.numberOfParams!==0){P(new Ne.ResponseError(Ne.ErrorCodes.InvalidParams,`Request ${M.method} defines ${y.numberOfParams} params but recevied none.`),M.method,L);return}fe=b(ue.token)}else if(Array.isArray(M.params)){if(y!==void 0&&y.parameterStructures===Ne.ParameterStructures.byName){P(new Ne.ResponseError(Ne.ErrorCodes.InvalidParams,`Request ${M.method} defines parameters by name but received parameters by position`),M.method,L);return}fe=b(...M.params,ue.token)}else{if(y!==void 0&&y.parameterStructures===Ne.ParameterStructures.byPosition){P(new Ne.ResponseError(Ne.ErrorCodes.InvalidParams,`Request ${M.method} defines parameters by position but received parameters by name`),M.method,L);return}fe=b(M.params,ue.token)}else u&&(fe=u(M.method,M.params,ue.token));let Re=fe;fe?Re.then?Re.then(ye=>{delete E[G],N(ye,M.method,L)},ye=>{delete E[G],ye instanceof Ne.ResponseError?P(ye,M.method,L):ye&&Vt.string(ye.message)?P(new Ne.ResponseError(Ne.ErrorCodes.InternalError,`Request ${M.method} failed with message: ${ye.message}`),M.method,L):P(new Ne.ResponseError(Ne.ErrorCodes.InternalError,`Request ${M.method} failed unexpectedly without providing any details.`),M.method,L)}):(delete E[G],N(fe,M.method,L)):(delete E[G],q(fe,M.method,L))}catch(fe){delete E[G],fe instanceof Ne.ResponseError?N(fe,M.method,L):fe&&Vt.string(fe.message)?P(new Ne.ResponseError(Ne.ErrorCodes.InternalError,`Request ${M.method} failed with message: ${fe.message}`),M.method,L):P(new Ne.ResponseError(Ne.ErrorCodes.InternalError,`Request ${M.method} failed unexpectedly without providing any details.`),M.method,L)}}else P(new Ne.ResponseError(Ne.ErrorCodes.MethodNotFound,`Unhandled method ${M.method}`),M.method,L)}function je(M){if(!ie())if(M.id===null)M.error?o.error(`Received response message without id: Error is: 
${JSON.stringify(M.error,void 0,4)}`):o.error("Received response message without id. No further error information provided.");else{let N=String(M.id),P=_[N];if(ir(M,P),P){delete _[N];try{if(M.error){let q=M.error;P.reject(new Ne.ResponseError(q.code,q.message,q.data))}else if(M.result!==void 0)P.resolve(M.result);else throw new Error("Should never happen.")}catch(q){q.message?o.error(`Response handler '${P.method}' failed with message: ${q.message}`):o.error(`Response handler '${P.method}' failed unexpectedly.`)}}}}function xe(M){if(ie())return;let N,P;if(M.method===Ki.type.method)P=q=>{let F=q.id,y=E[String(F)];y&&y.cancel()};else{let q=p[M.method];q&&(P=q.handler,N=q.type)}if(P||l)try{ke(M),P?M.params===void 0?(N!==void 0&&N.numberOfParams!==0&&N.parameterStructures!==Ne.ParameterStructures.byName&&o.error(`Notification ${M.method} defines ${N.numberOfParams} params but recevied none.`),P()):Array.isArray(M.params)?(N!==void 0&&(N.parameterStructures===Ne.ParameterStructures.byName&&o.error(`Notification ${M.method} defines parameters by name but received parameters by position`),N.numberOfParams!==M.params.length&&o.error(`Notification ${M.method} defines ${N.numberOfParams} params but received ${M.params.length} argumennts`)),P(...M.params)):(N!==void 0&&N.parameterStructures===Ne.ParameterStructures.byPosition&&o.error(`Notification ${M.method} defines parameters by position but received parameters by name`),P(M.params)):l&&l(M.method,M.params)}catch(q){q.message?o.error(`Notification handler '${M.method}' failed with message: ${q.message}`):o.error(`Notification handler '${M.method}' failed unexpectedly.`)}else K.fire(M)}function it(M){if(!M){o.error("Received empty message.");return}o.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(M,null,4)}`);let N=M;if(Vt.string(N.id)||Vt.number(N.id)){let P=String(N.id),q=_[P];q&&q.reject(new Error("The received response has neither a result nor an error property."))}}function lt(M){if(!(T===Mt.Off||!R))if(w===Nr.Text){let N;T===Mt.Verbose&&M.params&&(N=`Params: ${JSON.stringify(M.params,null,4)}

`),R.log(`Sending request '${M.method} - (${M.id})'.`,N)}else ct("send-request",M)}function Oe(M){if(!(T===Mt.Off||!R))if(w===Nr.Text){let N;T===Mt.Verbose&&(M.params?N=`Params: ${JSON.stringify(M.params,null,4)}

`:N=`No parameters provided.

`),R.log(`Sending notification '${M.method}'.`,N)}else ct("send-notification",M)}function me(M,N,P){if(!(T===Mt.Off||!R))if(w===Nr.Text){let q;T===Mt.Verbose&&(M.error&&M.error.data?q=`Error data: ${JSON.stringify(M.error.data,null,4)}

`:M.result?q=`Result: ${JSON.stringify(M.result,null,4)}

`:M.error===void 0&&(q=`No result returned.

`)),R.log(`Sending response '${N} - (${M.id})'. Processing request took ${Date.now()-P}ms`,q)}else ct("send-response",M)}function Ae(M){if(!(T===Mt.Off||!R))if(w===Nr.Text){let N;T===Mt.Verbose&&M.params&&(N=`Params: ${JSON.stringify(M.params,null,4)}

`),R.log(`Received request '${M.method} - (${M.id})'.`,N)}else ct("receive-request",M)}function ke(M){if(!(T===Mt.Off||!R||M.method===hc.type.method))if(w===Nr.Text){let N;T===Mt.Verbose&&(M.params?N=`Params: ${JSON.stringify(M.params,null,4)}

`:N=`No parameters provided.

`),R.log(`Received notification '${M.method}'.`,N)}else ct("receive-notification",M)}function ir(M,N){if(!(T===Mt.Off||!R))if(w===Nr.Text){let P;if(T===Mt.Verbose&&(M.error&&M.error.data?P=`Error data: ${JSON.stringify(M.error.data,null,4)}

`:M.result?P=`Result: ${JSON.stringify(M.result,null,4)}

`:M.error===void 0&&(P=`No result returned.

`)),N){let q=M.error?` Request failed: ${M.error.message} (${M.error.code}).`:"";R.log(`Received response '${N.method} - (${M.id})' in ${Date.now()-N.timerStart}ms.${q}`,P)}else R.log(`Received response ${M.id} without active response promise.`,P)}else ct("receive-response",M)}function ct(M,N){if(!R||T===Mt.Off)return;let P={isLSPMessage:!0,type:M,message:N,timestamp:Date.now()};R.log(P)}function re(){if(ce())throw new un(Uo.Closed,"Connection is closed.");if(ie())throw new un(Uo.Disposed,"Connection is disposed.")}function er(){if(X())throw new un(Uo.AlreadyListening,"Connection is already listening")}function or(){if(!X())throw new Error("Call listen() first.")}function gt(M){return M===void 0?null:M}function tt(M){if(M!==null)return M}function xt(M){return M!=null&&!Array.isArray(M)&&typeof M=="object"}function dt(M,N){switch(M){case Ne.ParameterStructures.auto:return xt(N)?tt(N):[gt(N)];case Ne.ParameterStructures.byName:if(!xt(N))throw new Error("Recevied parameters by name but param is not an object literal.");return tt(N);case Ne.ParameterStructures.byPosition:return[gt(N)];default:throw new Error(`Unknown parameter structure ${M.toString()}`)}}function Ht(M,N){let P,q=M.numberOfParams;switch(q){case 0:P=void 0;break;case 1:P=dt(M.parameterStructures,N[0]);break;default:P=[];for(let F=0;F<N.length&&F<q;F++)P.push(gt(N[F]));if(N.length<q)for(let F=N.length;F<q;F++)P.push(null);break}return P}let Pt={sendNotification:(M,...N)=>{re();let P,q;if(Vt.string(M)){P=M;let y=N[0],b=0,L=Ne.ParameterStructures.auto;Ne.ParameterStructures.is(y)&&(b=1,L=y);let G=N.length,ue=G-b;switch(ue){case 0:q=void 0;break;case 1:q=dt(L,N[b]);break;default:if(L===Ne.ParameterStructures.byName)throw new Error(`Recevied ${ue} parameters for 'by Name' notification parameter structure.`);q=N.slice(b,G).map(fe=>gt(fe));break}}else{let y=N;P=M.method,q=Ht(M,y)}let F={jsonrpc:c,method:P,params:q};Oe(F),t.write(F)},onNotification:(M,N)=>{re();let P;return Vt.func(M)?l=M:N&&(Vt.string(M)?(P=M,p[M]={type:void 0,handler:N}):(P=M.method,p[M.method]={type:M,handler:N})),{dispose:()=>{P!==void 0?delete p[P]:l=void 0}}},onProgress:(M,N,P)=>{if(f.has(N))throw new Error(`Progress handler for token ${N} already registered`);return f.set(N,P),{dispose:()=>{f.delete(N)}}},sendProgress:(M,N,P)=>{Pt.sendNotification(Bo.type,{token:N,value:P})},onUnhandledProgress:J.event,sendRequest:(M,...N)=>{re(),or();let P,q,F;if(Vt.string(M)){P=M;let G=N[0],ue=N[N.length-1],fe=0,Re=Ne.ParameterStructures.auto;Ne.ParameterStructures.is(G)&&(fe=1,Re=G);let ye=N.length;dc.CancellationToken.is(ue)&&(ye=ye-1,F=ue);let Fe=ye-fe;switch(Fe){case 0:q=void 0;break;case 1:q=dt(Re,N[fe]);break;default:if(Re===Ne.ParameterStructures.byName)throw new Error(`Recevied ${Fe} parameters for 'by Name' request parameter structure.`);q=N.slice(fe,ye).map(le=>gt(le));break}}else{let G=N;P=M.method,q=Ht(M,G);let ue=M.numberOfParams;F=dc.CancellationToken.is(G[ue])?G[ue]:void 0}let y=a++,b;return F&&(b=F.onCancellationRequested(()=>{U.sender.sendCancellation(Pt,y)})),new Promise((G,ue)=>{let fe={jsonrpc:c,id:y,method:P,params:q},Re=le=>{G(le),U.sender.cleanup(y),b?.dispose()},ye=le=>{ue(le),U.sender.cleanup(y),b?.dispose()},Fe={method:P,timerStart:Date.now(),resolve:Re,reject:ye};lt(fe);try{t.write(fe)}catch(le){Fe.reject(new Ne.ResponseError(Ne.ErrorCodes.MessageWriteError,le.message?le.message:"Unknown reason")),Fe=null}Fe&&(_[String(y)]=Fe)})},onRequest:(M,N)=>{re();let P=null;return fc.is(M)?(P=void 0,u=M):Vt.string(M)?(P=null,N!==void 0&&(P=M,d[M]={handler:N,type:void 0})):N!==void 0&&(P=M.method,d[M.method]={type:M,handler:N}),{dispose:()=>{P!==null&&(P!==void 0?delete d[P]:u=void 0)}}},trace:(M,N,P)=>{let q=!1,F=Nr.Text;P!==void 0&&(Vt.boolean(P)?q=P:(q=P.sendNotification||!1,F=P.traceFormat||Nr.Text)),T=M,w=F,T===Mt.Off?R=void 0:R=N,q&&!ce()&&!ie()&&Pt.sendNotification(Qf.type,{value:Mt.toString(M)})},onError:H.event,onClose:z.event,onUnhandledNotification:K.event,onDispose:te.event,end:()=>{t.end()},dispose:()=>{if(ie())return;I=kr.Disposed,te.fire(void 0);let M=new Error("Connection got disposed.");Object.keys(_).forEach(N=>{_[N].reject(M)}),_=Object.create(null),E=Object.create(null),m=new Yf.LinkedMap,Vt.func(t.dispose)&&t.dispose(),Vt.func(e.dispose)&&e.dispose()},listen:()=>{re(),er(),I=kr.Listening,e.listen(Qe)},inspect:()=>{Xf.default().console.log("inspect")}};return Pt.onNotification(hc.type,M=>{T===Mt.Off||!R||R.log(M.message,T===Mt.Verbose?M.verbose:void 0)}),Pt.onNotification(Bo.type,M=>{let N=f.get(M.token);N?N(M.value):J.fire(M)}),Pt}qe.createMessageConnection=jT});var Ec=ee(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.CancellationSenderStrategy=ae.CancellationReceiverStrategy=ae.ConnectionError=ae.ConnectionErrors=ae.LogTraceNotification=ae.SetTraceNotification=ae.TraceFormat=ae.Trace=ae.ProgressType=ae.createMessageConnection=ae.NullLogger=ae.ConnectionOptions=ae.ConnectionStrategy=ae.WriteableStreamMessageWriter=ae.AbstractMessageWriter=ae.MessageWriter=ae.ReadableStreamMessageReader=ae.AbstractMessageReader=ae.MessageReader=ae.CancellationToken=ae.CancellationTokenSource=ae.Emitter=ae.Event=ae.Disposable=ae.ParameterStructures=ae.NotificationType9=ae.NotificationType8=ae.NotificationType7=ae.NotificationType6=ae.NotificationType5=ae.NotificationType4=ae.NotificationType3=ae.NotificationType2=ae.NotificationType1=ae.NotificationType0=ae.NotificationType=ae.ErrorCodes=ae.ResponseError=ae.RequestType9=ae.RequestType8=ae.RequestType7=ae.RequestType6=ae.RequestType5=ae.RequestType4=ae.RequestType3=ae.RequestType2=ae.RequestType1=ae.RequestType0=ae.RequestType=ae.RAL=void 0;ae.CancellationStrategy=void 0;var _t=Ja();Object.defineProperty(ae,"RequestType",{enumerable:!0,get:function(){return _t.RequestType}});Object.defineProperty(ae,"RequestType0",{enumerable:!0,get:function(){return _t.RequestType0}});Object.defineProperty(ae,"RequestType1",{enumerable:!0,get:function(){return _t.RequestType1}});Object.defineProperty(ae,"RequestType2",{enumerable:!0,get:function(){return _t.RequestType2}});Object.defineProperty(ae,"RequestType3",{enumerable:!0,get:function(){return _t.RequestType3}});Object.defineProperty(ae,"RequestType4",{enumerable:!0,get:function(){return _t.RequestType4}});Object.defineProperty(ae,"RequestType5",{enumerable:!0,get:function(){return _t.RequestType5}});Object.defineProperty(ae,"RequestType6",{enumerable:!0,get:function(){return _t.RequestType6}});Object.defineProperty(ae,"RequestType7",{enumerable:!0,get:function(){return _t.RequestType7}});Object.defineProperty(ae,"RequestType8",{enumerable:!0,get:function(){return _t.RequestType8}});Object.defineProperty(ae,"RequestType9",{enumerable:!0,get:function(){return _t.RequestType9}});Object.defineProperty(ae,"ResponseError",{enumerable:!0,get:function(){return _t.ResponseError}});Object.defineProperty(ae,"ErrorCodes",{enumerable:!0,get:function(){return _t.ErrorCodes}});Object.defineProperty(ae,"NotificationType",{enumerable:!0,get:function(){return _t.NotificationType}});Object.defineProperty(ae,"NotificationType0",{enumerable:!0,get:function(){return _t.NotificationType0}});Object.defineProperty(ae,"NotificationType1",{enumerable:!0,get:function(){return _t.NotificationType1}});Object.defineProperty(ae,"NotificationType2",{enumerable:!0,get:function(){return _t.NotificationType2}});Object.defineProperty(ae,"NotificationType3",{enumerable:!0,get:function(){return _t.NotificationType3}});Object.defineProperty(ae,"NotificationType4",{enumerable:!0,get:function(){return _t.NotificationType4}});Object.defineProperty(ae,"NotificationType5",{enumerable:!0,get:function(){return _t.NotificationType5}});Object.defineProperty(ae,"NotificationType6",{enumerable:!0,get:function(){return _t.NotificationType6}});Object.defineProperty(ae,"NotificationType7",{enumerable:!0,get:function(){return _t.NotificationType7}});Object.defineProperty(ae,"NotificationType8",{enumerable:!0,get:function(){return _t.NotificationType8}});Object.defineProperty(ae,"NotificationType9",{enumerable:!0,get:function(){return _t.NotificationType9}});Object.defineProperty(ae,"ParameterStructures",{enumerable:!0,get:function(){return _t.ParameterStructures}});var FT=Sa();Object.defineProperty(ae,"Disposable",{enumerable:!0,get:function(){return FT.Disposable}});var eh=ii();Object.defineProperty(ae,"Event",{enumerable:!0,get:function(){return eh.Event}});Object.defineProperty(ae,"Emitter",{enumerable:!0,get:function(){return eh.Emitter}});var th=nc();Object.defineProperty(ae,"CancellationTokenSource",{enumerable:!0,get:function(){return th.CancellationTokenSource}});Object.defineProperty(ae,"CancellationToken",{enumerable:!0,get:function(){return th.CancellationToken}});var _c=Uf();Object.defineProperty(ae,"MessageReader",{enumerable:!0,get:function(){return _c.MessageReader}});Object.defineProperty(ae,"AbstractMessageReader",{enumerable:!0,get:function(){return _c.AbstractMessageReader}});Object.defineProperty(ae,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return _c.ReadableStreamMessageReader}});var yc=Kf();Object.defineProperty(ae,"MessageWriter",{enumerable:!0,get:function(){return yc.MessageWriter}});Object.defineProperty(ae,"AbstractMessageWriter",{enumerable:!0,get:function(){return yc.AbstractMessageWriter}});Object.defineProperty(ae,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return yc.WriteableStreamMessageWriter}});var hr=Zf();Object.defineProperty(ae,"ConnectionStrategy",{enumerable:!0,get:function(){return hr.ConnectionStrategy}});Object.defineProperty(ae,"ConnectionOptions",{enumerable:!0,get:function(){return hr.ConnectionOptions}});Object.defineProperty(ae,"NullLogger",{enumerable:!0,get:function(){return hr.NullLogger}});Object.defineProperty(ae,"createMessageConnection",{enumerable:!0,get:function(){return hr.createMessageConnection}});Object.defineProperty(ae,"ProgressType",{enumerable:!0,get:function(){return hr.ProgressType}});Object.defineProperty(ae,"Trace",{enumerable:!0,get:function(){return hr.Trace}});Object.defineProperty(ae,"TraceFormat",{enumerable:!0,get:function(){return hr.TraceFormat}});Object.defineProperty(ae,"SetTraceNotification",{enumerable:!0,get:function(){return hr.SetTraceNotification}});Object.defineProperty(ae,"LogTraceNotification",{enumerable:!0,get:function(){return hr.LogTraceNotification}});Object.defineProperty(ae,"ConnectionErrors",{enumerable:!0,get:function(){return hr.ConnectionErrors}});Object.defineProperty(ae,"ConnectionError",{enumerable:!0,get:function(){return hr.ConnectionError}});Object.defineProperty(ae,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return hr.CancellationReceiverStrategy}});Object.defineProperty(ae,"CancellationSenderStrategy",{enumerable:!0,get:function(){return hr.CancellationSenderStrategy}});Object.defineProperty(ae,"CancellationStrategy",{enumerable:!0,get:function(){return hr.CancellationStrategy}});var HT=Xr();ae.RAL=HT.default});var ai=ee(ot=>{"use strict";var $T=ot&&ot.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),UT=ot&&ot.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&$T(t,e,r)};Object.defineProperty(ot,"__esModule",{value:!0});ot.createMessageConnection=ot.createServerSocketTransport=ot.createClientSocketTransport=ot.createServerPipeTransport=ot.createClientPipeTransport=ot.generateRandomPipeName=ot.StreamMessageWriter=ot.StreamMessageReader=ot.SocketMessageWriter=ot.SocketMessageReader=ot.IPCMessageWriter=ot.IPCMessageReader=void 0;var si=Lf();si.default.install();var $r=Ec(),rh=require("path"),BT=require("os"),VT=require("crypto"),Wo=require("net");UT(Ec(),ot);var bc=class extends $r.AbstractMessageReader{constructor(t){super(),this.process=t;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose())}listen(t){return this.process.on("message",t),$r.Disposable.create(()=>this.process.off("message",t))}};ot.IPCMessageReader=bc;var Cc=class extends $r.AbstractMessageWriter{constructor(t){super(),this.process=t,this.errorCount=0;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose)}write(t){try{return typeof this.process.send=="function"&&this.process.send(t,void 0,void 0,r=>{r?(this.errorCount++,this.handleError(r,t)):this.errorCount=0}),Promise.resolve()}catch(r){return this.handleError(r,t),Promise.reject(r)}}handleError(t,r){this.errorCount++,this.fireError(t,r,this.errorCount)}end(){}};ot.IPCMessageWriter=Cc;var Fn=class extends $r.ReadableStreamMessageReader{constructor(t,r="utf-8"){super(si.default().stream.asReadableStream(t),r)}};ot.SocketMessageReader=Fn;var Hn=class extends $r.WriteableStreamMessageWriter{constructor(t,r){super(si.default().stream.asWritableStream(t),r),this.socket=t}dispose(){super.dispose(),this.socket.destroy()}};ot.SocketMessageWriter=Hn;var Vo=class extends $r.ReadableStreamMessageReader{constructor(t,r){super(si.default().stream.asReadableStream(t),r)}};ot.StreamMessageReader=Vo;var Go=class extends $r.WriteableStreamMessageWriter{constructor(t,r){super(si.default().stream.asWritableStream(t),r)}};ot.StreamMessageWriter=Go;var nh=process.env.XDG_RUNTIME_DIR,GT=new Map([["linux",107],["darwin",103]]);function WT(){let e=VT.randomBytes(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`;let t;nh?t=rh.join(nh,`vscode-ipc-${e}.sock`):t=rh.join(BT.tmpdir(),`vscode-${e}.sock`);let r=GT.get(process.platform);return r!==void 0&&t.length>=r&&si.default().console.warn(`WARNING: IPC handle "${t}" is longer than ${r} characters.`),t}ot.generateRandomPipeName=WT;function KT(e,t="utf-8"){let r,n=new Promise((o,a)=>{r=o});return new Promise((o,a)=>{let i=Wo.createServer(s=>{i.close(),r([new Fn(s,t),new Hn(s,t)])});i.on("error",a),i.listen(e,()=>{i.removeListener("error",a),o({onConnected:()=>n})})})}ot.createClientPipeTransport=KT;function zT(e,t="utf-8"){let r=Wo.createConnection(e);return[new Fn(r,t),new Hn(r,t)]}ot.createServerPipeTransport=zT;function XT(e,t="utf-8"){let r,n=new Promise((o,a)=>{r=o});return new Promise((o,a)=>{let i=Wo.createServer(s=>{i.close(),r([new Fn(s,t),new Hn(s,t)])});i.on("error",a),i.listen(e,"127.0.0.1",()=>{i.removeListener("error",a),o({onConnected:()=>n})})})}ot.createClientSocketTransport=XT;function YT(e,t="utf-8"){let r=Wo.createConnection(e,"127.0.0.1");return[new Fn(r,t),new Hn(r,t)]}ot.createServerSocketTransport=YT;function QT(e){let t=e;return t.read!==void 0&&t.addListener!==void 0}function JT(e){let t=e;return t.write!==void 0&&t.addListener!==void 0}function ZT(e,t,r,n){r||(r=$r.NullLogger);let o=QT(e)?new Vo(e):e,a=JT(t)?new Go(t):t;return $r.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),$r.createMessageConnection(o,a,r,n)}ot.createMessageConnection=ZT});var Tc=ee((dI,ih)=>{"use strict";ih.exports=ai()});var sh=ee((oh,Ko)=>{(function(e){if(typeof Ko=="object"&&typeof Ko.exports=="object"){var t=e(require,oh);t!==void 0&&(Ko.exports=t)}else typeof define=="function"&&define.amd&&define(["require","exports"],e)})(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextDocument=t.EOL=t.SelectionRange=t.DocumentLink=t.FormattingOptions=t.CodeLens=t.CodeAction=t.CodeActionContext=t.CodeActionKind=t.DocumentSymbol=t.SymbolInformation=t.SymbolTag=t.SymbolKind=t.DocumentHighlight=t.DocumentHighlightKind=t.SignatureInformation=t.ParameterInformation=t.Hover=t.MarkedString=t.CompletionList=t.CompletionItem=t.InsertTextMode=t.InsertReplaceEdit=t.CompletionItemTag=t.InsertTextFormat=t.CompletionItemKind=t.MarkupContent=t.MarkupKind=t.TextDocumentItem=t.OptionalVersionedTextDocumentIdentifier=t.VersionedTextDocumentIdentifier=t.TextDocumentIdentifier=t.WorkspaceChange=t.WorkspaceEdit=t.DeleteFile=t.RenameFile=t.CreateFile=t.TextDocumentEdit=t.AnnotatedTextEdit=t.ChangeAnnotationIdentifier=t.ChangeAnnotation=t.TextEdit=t.Command=t.Diagnostic=t.CodeDescription=t.DiagnosticTag=t.DiagnosticSeverity=t.DiagnosticRelatedInformation=t.FoldingRange=t.FoldingRangeKind=t.ColorPresentation=t.ColorInformation=t.Color=t.LocationLink=t.Location=t.Range=t.Position=t.uinteger=t.integer=void 0;var r;(function(P){P.MIN_VALUE=-2147483648,P.MAX_VALUE=2147483647})(r=t.integer||(t.integer={}));var n;(function(P){P.MIN_VALUE=0,P.MAX_VALUE=2147483647})(n=t.uinteger||(t.uinteger={}));var o;(function(P){function q(y,b){return y===Number.MAX_VALUE&&(y=n.MAX_VALUE),b===Number.MAX_VALUE&&(b=n.MAX_VALUE),{line:y,character:b}}P.create=q;function F(y){var b=y;return N.objectLiteral(b)&&N.uinteger(b.line)&&N.uinteger(b.character)}P.is=F})(o=t.Position||(t.Position={}));var a;(function(P){function q(y,b,L,G){if(N.uinteger(y)&&N.uinteger(b)&&N.uinteger(L)&&N.uinteger(G))return{start:o.create(y,b),end:o.create(L,G)};if(o.is(y)&&o.is(b))return{start:y,end:b};throw new Error("Range#create called with invalid arguments["+y+", "+b+", "+L+", "+G+"]")}P.create=q;function F(y){var b=y;return N.objectLiteral(b)&&o.is(b.start)&&o.is(b.end)}P.is=F})(a=t.Range||(t.Range={}));var i;(function(P){function q(y,b){return{uri:y,range:b}}P.create=q;function F(y){var b=y;return N.defined(b)&&a.is(b.range)&&(N.string(b.uri)||N.undefined(b.uri))}P.is=F})(i=t.Location||(t.Location={}));var s;(function(P){function q(y,b,L,G){return{targetUri:y,targetRange:b,targetSelectionRange:L,originSelectionRange:G}}P.create=q;function F(y){var b=y;return N.defined(b)&&a.is(b.targetRange)&&N.string(b.targetUri)&&(a.is(b.targetSelectionRange)||N.undefined(b.targetSelectionRange))&&(a.is(b.originSelectionRange)||N.undefined(b.originSelectionRange))}P.is=F})(s=t.LocationLink||(t.LocationLink={}));var c;(function(P){function q(y,b,L,G){return{red:y,green:b,blue:L,alpha:G}}P.create=q;function F(y){var b=y;return N.numberRange(b.red,0,1)&&N.numberRange(b.green,0,1)&&N.numberRange(b.blue,0,1)&&N.numberRange(b.alpha,0,1)}P.is=F})(c=t.Color||(t.Color={}));var u;(function(P){function q(y,b){return{range:y,color:b}}P.create=q;function F(y){var b=y;return a.is(b.range)&&c.is(b.color)}P.is=F})(u=t.ColorInformation||(t.ColorInformation={}));var d;(function(P){function q(y,b,L){return{label:y,textEdit:b,additionalTextEdits:L}}P.create=q;function F(y){var b=y;return N.string(b.label)&&(N.undefined(b.textEdit)||w.is(b))&&(N.undefined(b.additionalTextEdits)||N.typedArray(b.additionalTextEdits,w.is))}P.is=F})(d=t.ColorPresentation||(t.ColorPresentation={}));var l;(function(P){P.Comment="comment",P.Imports="imports",P.Region="region"})(l=t.FoldingRangeKind||(t.FoldingRangeKind={}));var p;(function(P){function q(y,b,L,G,ue){var fe={startLine:y,endLine:b};return N.defined(L)&&(fe.startCharacter=L),N.defined(G)&&(fe.endCharacter=G),N.defined(ue)&&(fe.kind=ue),fe}P.create=q;function F(y){var b=y;return N.uinteger(b.startLine)&&N.uinteger(b.startLine)&&(N.undefined(b.startCharacter)||N.uinteger(b.startCharacter))&&(N.undefined(b.endCharacter)||N.uinteger(b.endCharacter))&&(N.undefined(b.kind)||N.string(b.kind))}P.is=F})(p=t.FoldingRange||(t.FoldingRange={}));var f;(function(P){function q(y,b){return{location:y,message:b}}P.create=q;function F(y){var b=y;return N.defined(b)&&i.is(b.location)&&N.string(b.message)}P.is=F})(f=t.DiagnosticRelatedInformation||(t.DiagnosticRelatedInformation={}));var g;(function(P){P.Error=1,P.Warning=2,P.Information=3,P.Hint=4})(g=t.DiagnosticSeverity||(t.DiagnosticSeverity={}));var m;(function(P){P.Unnecessary=1,P.Deprecated=2})(m=t.DiagnosticTag||(t.DiagnosticTag={}));var _;(function(P){function q(F){var y=F;return y!=null&&N.string(y.href)}P.is=q})(_=t.CodeDescription||(t.CodeDescription={}));var E;(function(P){function q(y,b,L,G,ue,fe){var Re={range:y,message:b};return N.defined(L)&&(Re.severity=L),N.defined(G)&&(Re.code=G),N.defined(ue)&&(Re.source=ue),N.defined(fe)&&(Re.relatedInformation=fe),Re}P.create=q;function F(y){var b,L=y;return N.defined(L)&&a.is(L.range)&&N.string(L.message)&&(N.number(L.severity)||N.undefined(L.severity))&&(N.integer(L.code)||N.string(L.code)||N.undefined(L.code))&&(N.undefined(L.codeDescription)||N.string((b=L.codeDescription)===null||b===void 0?void 0:b.href))&&(N.string(L.source)||N.undefined(L.source))&&(N.undefined(L.relatedInformation)||N.typedArray(L.relatedInformation,f.is))}P.is=F})(E=t.Diagnostic||(t.Diagnostic={}));var T;(function(P){function q(y,b){for(var L=[],G=2;G<arguments.length;G++)L[G-2]=arguments[G];var ue={title:y,command:b};return N.defined(L)&&L.length>0&&(ue.arguments=L),ue}P.create=q;function F(y){var b=y;return N.defined(b)&&N.string(b.title)&&N.string(b.command)}P.is=F})(T=t.Command||(t.Command={}));var w;(function(P){function q(L,G){return{range:L,newText:G}}P.replace=q;function F(L,G){return{range:{start:L,end:L},newText:G}}P.insert=F;function y(L){return{range:L,newText:""}}P.del=y;function b(L){var G=L;return N.objectLiteral(G)&&N.string(G.newText)&&a.is(G.range)}P.is=b})(w=t.TextEdit||(t.TextEdit={}));var R;(function(P){function q(y,b,L){var G={label:y};return b!==void 0&&(G.needsConfirmation=b),L!==void 0&&(G.description=L),G}P.create=q;function F(y){var b=y;return b!==void 0&&N.objectLiteral(b)&&N.string(b.label)&&(N.boolean(b.needsConfirmation)||b.needsConfirmation===void 0)&&(N.string(b.description)||b.description===void 0)}P.is=F})(R=t.ChangeAnnotation||(t.ChangeAnnotation={}));var I;(function(P){function q(F){var y=F;return typeof y=="string"}P.is=q})(I=t.ChangeAnnotationIdentifier||(t.ChangeAnnotationIdentifier={}));var H;(function(P){function q(L,G,ue){return{range:L,newText:G,annotationId:ue}}P.replace=q;function F(L,G,ue){return{range:{start:L,end:L},newText:G,annotationId:ue}}P.insert=F;function y(L,G){return{range:L,newText:"",annotationId:G}}P.del=y;function b(L){var G=L;return w.is(G)&&(R.is(G.annotationId)||I.is(G.annotationId))}P.is=b})(H=t.AnnotatedTextEdit||(t.AnnotatedTextEdit={}));var z;(function(P){function q(y,b){return{textDocument:y,edits:b}}P.create=q;function F(y){var b=y;return N.defined(b)&&X.is(b.textDocument)&&Array.isArray(b.edits)}P.is=F})(z=t.TextDocumentEdit||(t.TextDocumentEdit={}));var K;(function(P){function q(y,b,L){var G={kind:"create",uri:y};return b!==void 0&&(b.overwrite!==void 0||b.ignoreIfExists!==void 0)&&(G.options=b),L!==void 0&&(G.annotationId=L),G}P.create=q;function F(y){var b=y;return b&&b.kind==="create"&&N.string(b.uri)&&(b.options===void 0||(b.options.overwrite===void 0||N.boolean(b.options.overwrite))&&(b.options.ignoreIfExists===void 0||N.boolean(b.options.ignoreIfExists)))&&(b.annotationId===void 0||I.is(b.annotationId))}P.is=F})(K=t.CreateFile||(t.CreateFile={}));var J;(function(P){function q(y,b,L,G){var ue={kind:"rename",oldUri:y,newUri:b};return L!==void 0&&(L.overwrite!==void 0||L.ignoreIfExists!==void 0)&&(ue.options=L),G!==void 0&&(ue.annotationId=G),ue}P.create=q;function F(y){var b=y;return b&&b.kind==="rename"&&N.string(b.oldUri)&&N.string(b.newUri)&&(b.options===void 0||(b.options.overwrite===void 0||N.boolean(b.options.overwrite))&&(b.options.ignoreIfExists===void 0||N.boolean(b.options.ignoreIfExists)))&&(b.annotationId===void 0||I.is(b.annotationId))}P.is=F})(J=t.RenameFile||(t.RenameFile={}));var te;(function(P){function q(y,b,L){var G={kind:"delete",uri:y};return b!==void 0&&(b.recursive!==void 0||b.ignoreIfNotExists!==void 0)&&(G.options=b),L!==void 0&&(G.annotationId=L),G}P.create=q;function F(y){var b=y;return b&&b.kind==="delete"&&N.string(b.uri)&&(b.options===void 0||(b.options.recursive===void 0||N.boolean(b.options.recursive))&&(b.options.ignoreIfNotExists===void 0||N.boolean(b.options.ignoreIfNotExists)))&&(b.annotationId===void 0||I.is(b.annotationId))}P.is=F})(te=t.DeleteFile||(t.DeleteFile={}));var U;(function(P){function q(F){var y=F;return y&&(y.changes!==void 0||y.documentChanges!==void 0)&&(y.documentChanges===void 0||y.documentChanges.every(function(b){return N.string(b.kind)?K.is(b)||J.is(b)||te.is(b):z.is(b)}))}P.is=q})(U=t.WorkspaceEdit||(t.WorkspaceEdit={}));var V=function(){function P(q,F){this.edits=q,this.changeAnnotations=F}return P.prototype.insert=function(q,F,y){var b,L;if(y===void 0?b=w.insert(q,F):I.is(y)?(L=y,b=H.insert(q,F,y)):(this.assertChangeAnnotations(this.changeAnnotations),L=this.changeAnnotations.manage(y),b=H.insert(q,F,L)),this.edits.push(b),L!==void 0)return L},P.prototype.replace=function(q,F,y){var b,L;if(y===void 0?b=w.replace(q,F):I.is(y)?(L=y,b=H.replace(q,F,y)):(this.assertChangeAnnotations(this.changeAnnotations),L=this.changeAnnotations.manage(y),b=H.replace(q,F,L)),this.edits.push(b),L!==void 0)return L},P.prototype.delete=function(q,F){var y,b;if(F===void 0?y=w.del(q):I.is(F)?(b=F,y=H.del(q,F)):(this.assertChangeAnnotations(this.changeAnnotations),b=this.changeAnnotations.manage(F),y=H.del(q,b)),this.edits.push(y),b!==void 0)return b},P.prototype.add=function(q){this.edits.push(q)},P.prototype.all=function(){return this.edits},P.prototype.clear=function(){this.edits.splice(0,this.edits.length)},P.prototype.assertChangeAnnotations=function(q){if(q===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},P}(),Q=function(){function P(q){this._annotations=q===void 0?Object.create(null):q,this._counter=0,this._size=0}return P.prototype.all=function(){return this._annotations},Object.defineProperty(P.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),P.prototype.manage=function(q,F){var y;if(I.is(q)?y=q:(y=this.nextId(),F=q),this._annotations[y]!==void 0)throw new Error("Id "+y+" is already in use.");if(F===void 0)throw new Error("No annotation provided for id "+y);return this._annotations[y]=F,this._size++,y},P.prototype.nextId=function(){return this._counter++,this._counter.toString()},P}(),ne=function(){function P(q){var F=this;this._textEditChanges=Object.create(null),q!==void 0?(this._workspaceEdit=q,q.documentChanges?(this._changeAnnotations=new Q(q.changeAnnotations),q.changeAnnotations=this._changeAnnotations.all(),q.documentChanges.forEach(function(y){if(z.is(y)){var b=new V(y.edits,F._changeAnnotations);F._textEditChanges[y.textDocument.uri]=b}})):q.changes&&Object.keys(q.changes).forEach(function(y){var b=new V(q.changes[y]);F._textEditChanges[y]=b})):this._workspaceEdit={}}return Object.defineProperty(P.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),P.prototype.getTextEditChange=function(q){if(X.is(q)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var F={uri:q.uri,version:q.version},y=this._textEditChanges[F.uri];if(!y){var b=[],L={textDocument:F,edits:b};this._workspaceEdit.documentChanges.push(L),y=new V(b,this._changeAnnotations),this._textEditChanges[F.uri]=y}return y}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var y=this._textEditChanges[q];if(!y){var b=[];this._workspaceEdit.changes[q]=b,y=new V(b),this._textEditChanges[q]=y}return y}},P.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Q,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},P.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},P.prototype.createFile=function(q,F,y){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var b;R.is(F)||I.is(F)?b=F:y=F;var L,G;if(b===void 0?L=K.create(q,y):(G=I.is(b)?b:this._changeAnnotations.manage(b),L=K.create(q,y,G)),this._workspaceEdit.documentChanges.push(L),G!==void 0)return G},P.prototype.renameFile=function(q,F,y,b){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var L;R.is(y)||I.is(y)?L=y:b=y;var G,ue;if(L===void 0?G=J.create(q,F,b):(ue=I.is(L)?L:this._changeAnnotations.manage(L),G=J.create(q,F,b,ue)),this._workspaceEdit.documentChanges.push(G),ue!==void 0)return ue},P.prototype.deleteFile=function(q,F,y){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var b;R.is(F)||I.is(F)?b=F:y=F;var L,G;if(b===void 0?L=te.create(q,y):(G=I.is(b)?b:this._changeAnnotations.manage(b),L=te.create(q,y,G)),this._workspaceEdit.documentChanges.push(L),G!==void 0)return G},P}();t.WorkspaceChange=ne;var ve;(function(P){function q(y){return{uri:y}}P.create=q;function F(y){var b=y;return N.defined(b)&&N.string(b.uri)}P.is=F})(ve=t.TextDocumentIdentifier||(t.TextDocumentIdentifier={}));var de;(function(P){function q(y,b){return{uri:y,version:b}}P.create=q;function F(y){var b=y;return N.defined(b)&&N.string(b.uri)&&N.integer(b.version)}P.is=F})(de=t.VersionedTextDocumentIdentifier||(t.VersionedTextDocumentIdentifier={}));var X;(function(P){function q(y,b){return{uri:y,version:b}}P.create=q;function F(y){var b=y;return N.defined(b)&&N.string(b.uri)&&(b.version===null||N.integer(b.version))}P.is=F})(X=t.OptionalVersionedTextDocumentIdentifier||(t.OptionalVersionedTextDocumentIdentifier={}));var ce;(function(P){function q(y,b,L,G){return{uri:y,languageId:b,version:L,text:G}}P.create=q;function F(y){var b=y;return N.defined(b)&&N.string(b.uri)&&N.string(b.languageId)&&N.integer(b.version)&&N.string(b.text)}P.is=F})(ce=t.TextDocumentItem||(t.TextDocumentItem={}));var ie;(function(P){P.PlainText="plaintext",P.Markdown="markdown"})(ie=t.MarkupKind||(t.MarkupKind={})),function(P){function q(F){var y=F;return y===P.PlainText||y===P.Markdown}P.is=q}(ie=t.MarkupKind||(t.MarkupKind={}));var pe;(function(P){function q(F){var y=F;return N.objectLiteral(F)&&ie.is(y.kind)&&N.string(y.value)}P.is=q})(pe=t.MarkupContent||(t.MarkupContent={}));var he;(function(P){P.Text=1,P.Method=2,P.Function=3,P.Constructor=4,P.Field=5,P.Variable=6,P.Class=7,P.Interface=8,P.Module=9,P.Property=10,P.Unit=11,P.Value=12,P.Enum=13,P.Keyword=14,P.Snippet=15,P.Color=16,P.File=17,P.Reference=18,P.Folder=19,P.EnumMember=20,P.Constant=21,P.Struct=22,P.Event=23,P.Operator=24,P.TypeParameter=25})(he=t.CompletionItemKind||(t.CompletionItemKind={}));var be;(function(P){P.PlainText=1,P.Snippet=2})(be=t.InsertTextFormat||(t.InsertTextFormat={}));var _e;(function(P){P.Deprecated=1})(_e=t.CompletionItemTag||(t.CompletionItemTag={}));var Ue;(function(P){function q(y,b,L){return{newText:y,insert:b,replace:L}}P.create=q;function F(y){var b=y;return b&&N.string(b.newText)&&a.is(b.insert)&&a.is(b.replace)}P.is=F})(Ue=t.InsertReplaceEdit||(t.InsertReplaceEdit={}));var Qe;(function(P){P.asIs=1,P.adjustIndentation=2})(Qe=t.InsertTextMode||(t.InsertTextMode={}));var Ke;(function(P){function q(F){return{label:F}}P.create=q})(Ke=t.CompletionItem||(t.CompletionItem={}));var je;(function(P){function q(F,y){return{items:F||[],isIncomplete:!!y}}P.create=q})(je=t.CompletionList||(t.CompletionList={}));var xe;(function(P){function q(y){return y.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}P.fromPlainText=q;function F(y){var b=y;return N.string(b)||N.objectLiteral(b)&&N.string(b.language)&&N.string(b.value)}P.is=F})(xe=t.MarkedString||(t.MarkedString={}));var it;(function(P){function q(F){var y=F;return!!y&&N.objectLiteral(y)&&(pe.is(y.contents)||xe.is(y.contents)||N.typedArray(y.contents,xe.is))&&(F.range===void 0||a.is(F.range))}P.is=q})(it=t.Hover||(t.Hover={}));var lt;(function(P){function q(F,y){return y?{label:F,documentation:y}:{label:F}}P.create=q})(lt=t.ParameterInformation||(t.ParameterInformation={}));var Oe;(function(P){function q(F,y){for(var b=[],L=2;L<arguments.length;L++)b[L-2]=arguments[L];var G={label:F};return N.defined(y)&&(G.documentation=y),N.defined(b)?G.parameters=b:G.parameters=[],G}P.create=q})(Oe=t.SignatureInformation||(t.SignatureInformation={}));var me;(function(P){P.Text=1,P.Read=2,P.Write=3})(me=t.DocumentHighlightKind||(t.DocumentHighlightKind={}));var Ae;(function(P){function q(F,y){var b={range:F};return N.number(y)&&(b.kind=y),b}P.create=q})(Ae=t.DocumentHighlight||(t.DocumentHighlight={}));var ke;(function(P){P.File=1,P.Module=2,P.Namespace=3,P.Package=4,P.Class=5,P.Method=6,P.Property=7,P.Field=8,P.Constructor=9,P.Enum=10,P.Interface=11,P.Function=12,P.Variable=13,P.Constant=14,P.String=15,P.Number=16,P.Boolean=17,P.Array=18,P.Object=19,P.Key=20,P.Null=21,P.EnumMember=22,P.Struct=23,P.Event=24,P.Operator=25,P.TypeParameter=26})(ke=t.SymbolKind||(t.SymbolKind={}));var ir;(function(P){P.Deprecated=1})(ir=t.SymbolTag||(t.SymbolTag={}));var ct;(function(P){function q(F,y,b,L,G){var ue={name:F,kind:y,location:{uri:L,range:b}};return G&&(ue.containerName=G),ue}P.create=q})(ct=t.SymbolInformation||(t.SymbolInformation={}));var re;(function(P){function q(y,b,L,G,ue,fe){var Re={name:y,detail:b,kind:L,range:G,selectionRange:ue};return fe!==void 0&&(Re.children=fe),Re}P.create=q;function F(y){var b=y;return b&&N.string(b.name)&&N.number(b.kind)&&a.is(b.range)&&a.is(b.selectionRange)&&(b.detail===void 0||N.string(b.detail))&&(b.deprecated===void 0||N.boolean(b.deprecated))&&(b.children===void 0||Array.isArray(b.children))&&(b.tags===void 0||Array.isArray(b.tags))}P.is=F})(re=t.DocumentSymbol||(t.DocumentSymbol={}));var er;(function(P){P.Empty="",P.QuickFix="quickfix",P.Refactor="refactor",P.RefactorExtract="refactor.extract",P.RefactorInline="refactor.inline",P.RefactorRewrite="refactor.rewrite",P.Source="source",P.SourceOrganizeImports="source.organizeImports",P.SourceFixAll="source.fixAll"})(er=t.CodeActionKind||(t.CodeActionKind={}));var or;(function(P){function q(y,b){var L={diagnostics:y};return b!=null&&(L.only=b),L}P.create=q;function F(y){var b=y;return N.defined(b)&&N.typedArray(b.diagnostics,E.is)&&(b.only===void 0||N.typedArray(b.only,N.string))}P.is=F})(or=t.CodeActionContext||(t.CodeActionContext={}));var gt;(function(P){function q(y,b,L){var G={title:y},ue=!0;return typeof b=="string"?(ue=!1,G.kind=b):T.is(b)?G.command=b:G.edit=b,ue&&L!==void 0&&(G.kind=L),G}P.create=q;function F(y){var b=y;return b&&N.string(b.title)&&(b.diagnostics===void 0||N.typedArray(b.diagnostics,E.is))&&(b.kind===void 0||N.string(b.kind))&&(b.edit!==void 0||b.command!==void 0)&&(b.command===void 0||T.is(b.command))&&(b.isPreferred===void 0||N.boolean(b.isPreferred))&&(b.edit===void 0||U.is(b.edit))}P.is=F})(gt=t.CodeAction||(t.CodeAction={}));var tt;(function(P){function q(y,b){var L={range:y};return N.defined(b)&&(L.data=b),L}P.create=q;function F(y){var b=y;return N.defined(b)&&a.is(b.range)&&(N.undefined(b.command)||T.is(b.command))}P.is=F})(tt=t.CodeLens||(t.CodeLens={}));var xt;(function(P){function q(y,b){return{tabSize:y,insertSpaces:b}}P.create=q;function F(y){var b=y;return N.defined(b)&&N.uinteger(b.tabSize)&&N.boolean(b.insertSpaces)}P.is=F})(xt=t.FormattingOptions||(t.FormattingOptions={}));var dt;(function(P){function q(y,b,L){return{range:y,target:b,data:L}}P.create=q;function F(y){var b=y;return N.defined(b)&&a.is(b.range)&&(N.undefined(b.target)||N.string(b.target))}P.is=F})(dt=t.DocumentLink||(t.DocumentLink={}));var Ht;(function(P){function q(y,b){return{range:y,parent:b}}P.create=q;function F(y){var b=y;return b!==void 0&&a.is(b.range)&&(b.parent===void 0||P.is(b.parent))}P.is=F})(Ht=t.SelectionRange||(t.SelectionRange={})),t.EOL=[`
`,`\r
`,"\r"];var Pt;(function(P){function q(L,G,ue,fe){return new M(L,G,ue,fe)}P.create=q;function F(L){var G=L;return!!(N.defined(G)&&N.string(G.uri)&&(N.undefined(G.languageId)||N.string(G.languageId))&&N.uinteger(G.lineCount)&&N.func(G.getText)&&N.func(G.positionAt)&&N.func(G.offsetAt))}P.is=F;function y(L,G){for(var ue=L.getText(),fe=b(G,function(Nt,De){var $t=Nt.range.start.line-De.range.start.line;return $t===0?Nt.range.start.character-De.range.start.character:$t}),Re=ue.length,ye=fe.length-1;ye>=0;ye--){var Fe=fe[ye],le=L.offsetAt(Fe.range.start),Me=L.offsetAt(Fe.range.end);if(Me<=Re)ue=ue.substring(0,le)+Fe.newText+ue.substring(Me,ue.length);else throw new Error("Overlapping edit");Re=le}return ue}P.applyEdits=y;function b(L,G){if(L.length<=1)return L;var ue=L.length/2|0,fe=L.slice(0,ue),Re=L.slice(ue);b(fe,G),b(Re,G);for(var ye=0,Fe=0,le=0;ye<fe.length&&Fe<Re.length;){var Me=G(fe[ye],Re[Fe]);Me<=0?L[le++]=fe[ye++]:L[le++]=Re[Fe++]}for(;ye<fe.length;)L[le++]=fe[ye++];for(;Fe<Re.length;)L[le++]=Re[Fe++];return L}})(Pt=t.TextDocument||(t.TextDocument={}));var M=function(){function P(q,F,y,b){this._uri=q,this._languageId=F,this._version=y,this._content=b,this._lineOffsets=void 0}return Object.defineProperty(P.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),P.prototype.getText=function(q){if(q){var F=this.offsetAt(q.start),y=this.offsetAt(q.end);return this._content.substring(F,y)}return this._content},P.prototype.update=function(q,F){this._content=q.text,this._version=F,this._lineOffsets=void 0},P.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var q=[],F=this._content,y=!0,b=0;b<F.length;b++){y&&(q.push(b),y=!1);var L=F.charAt(b);y=L==="\r"||L===`
`,L==="\r"&&b+1<F.length&&F.charAt(b+1)===`
`&&b++}y&&F.length>0&&q.push(F.length),this._lineOffsets=q}return this._lineOffsets},P.prototype.positionAt=function(q){q=Math.max(Math.min(q,this._content.length),0);var F=this.getLineOffsets(),y=0,b=F.length;if(b===0)return o.create(0,q);for(;y<b;){var L=Math.floor((y+b)/2);F[L]>q?b=L:y=L+1}var G=y-1;return o.create(G,q-F[G])},P.prototype.offsetAt=function(q){var F=this.getLineOffsets();if(q.line>=F.length)return this._content.length;if(q.line<0)return 0;var y=F[q.line],b=q.line+1<F.length?F[q.line+1]:this._content.length;return Math.max(Math.min(y+q.character,b),y)},Object.defineProperty(P.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),P}(),N;(function(P){var q=Object.prototype.toString;function F(Me){return typeof Me<"u"}P.defined=F;function y(Me){return typeof Me>"u"}P.undefined=y;function b(Me){return Me===!0||Me===!1}P.boolean=b;function L(Me){return q.call(Me)==="[object String]"}P.string=L;function G(Me){return q.call(Me)==="[object Number]"}P.number=G;function ue(Me,Nt,De){return q.call(Me)==="[object Number]"&&Nt<=Me&&Me<=De}P.numberRange=ue;function fe(Me){return q.call(Me)==="[object Number]"&&-2147483648<=Me&&Me<=2147483647}P.integer=fe;function Re(Me){return q.call(Me)==="[object Number]"&&0<=Me&&Me<=2147483647}P.uinteger=Re;function ye(Me){return q.call(Me)==="[object Function]"}P.func=ye;function Fe(Me){return Me!==null&&typeof Me=="object"}P.objectLiteral=Fe;function le(Me,Nt){return Array.isArray(Me)&&Me.every(Nt)}P.typedArray=le})(N||(N={}))})});var Gt=ee(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.ProtocolNotificationType=Ir.ProtocolNotificationType0=Ir.ProtocolRequestType=Ir.ProtocolRequestType0=Ir.RegistrationType=void 0;var ci=ai(),Sc=class{constructor(t){this.method=t}};Ir.RegistrationType=Sc;var Rc=class extends ci.RequestType0{constructor(t){super(t)}};Ir.ProtocolRequestType0=Rc;var wc=class extends ci.RequestType{constructor(t){super(t,ci.ParameterStructures.byName)}};Ir.ProtocolRequestType=wc;var Pc=class extends ci.NotificationType0{constructor(t){super(t)}};Ir.ProtocolNotificationType0=Pc;var Oc=class extends ci.NotificationType{constructor(t){super(t,ci.ParameterStructures.byName)}};Ir.ProtocolNotificationType=Oc});var uh=ee(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.objectLiteral=qt.typedArray=qt.stringArray=qt.array=qt.func=qt.error=qt.number=qt.string=qt.boolean=void 0;function eS(e){return e===!0||e===!1}qt.boolean=eS;function ah(e){return typeof e=="string"||e instanceof String}qt.string=ah;function tS(e){return typeof e=="number"||e instanceof Number}qt.number=tS;function rS(e){return e instanceof Error}qt.error=rS;function nS(e){return typeof e=="function"}qt.func=nS;function ch(e){return Array.isArray(e)}qt.array=ch;function iS(e){return ch(e)&&e.every(t=>ah(t))}qt.stringArray=iS;function oS(e,t){return Array.isArray(e)&&e.every(t)}qt.typedArray=oS;function sS(e){return e!==null&&typeof e=="object"}qt.objectLiteral=sS});var lh=ee(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});zi.ImplementationRequest=void 0;var aS=Gt(),cS;(function(e){e.method="textDocument/implementation",e.type=new aS.ProtocolRequestType(e.method)})(cS=zi.ImplementationRequest||(zi.ImplementationRequest={}))});var dh=ee(Xi=>{"use strict";Object.defineProperty(Xi,"__esModule",{value:!0});Xi.TypeDefinitionRequest=void 0;var uS=Gt(),lS;(function(e){e.method="textDocument/typeDefinition",e.type=new uS.ProtocolRequestType(e.method)})(lS=Xi.TypeDefinitionRequest||(Xi.TypeDefinitionRequest={}))});var fh=ee(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.DidChangeWorkspaceFoldersNotification=ln.WorkspaceFoldersRequest=void 0;var ph=Gt(),dS;(function(e){e.type=new ph.ProtocolRequestType0("workspace/workspaceFolders")})(dS=ln.WorkspaceFoldersRequest||(ln.WorkspaceFoldersRequest={}));var pS;(function(e){e.type=new ph.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")})(pS=ln.DidChangeWorkspaceFoldersNotification||(ln.DidChangeWorkspaceFoldersNotification={}))});var hh=ee(Yi=>{"use strict";Object.defineProperty(Yi,"__esModule",{value:!0});Yi.ConfigurationRequest=void 0;var fS=Gt(),hS;(function(e){e.type=new fS.ProtocolRequestType("workspace/configuration")})(hS=Yi.ConfigurationRequest||(Yi.ConfigurationRequest={}))});var mh=ee(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});dn.ColorPresentationRequest=dn.DocumentColorRequest=void 0;var gh=Gt(),gS;(function(e){e.method="textDocument/documentColor",e.type=new gh.ProtocolRequestType(e.method)})(gS=dn.DocumentColorRequest||(dn.DocumentColorRequest={}));var mS;(function(e){e.type=new gh.ProtocolRequestType("textDocument/colorPresentation")})(mS=dn.ColorPresentationRequest||(dn.ColorPresentationRequest={}))});var vh=ee(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});pn.FoldingRangeRequest=pn.FoldingRangeKind=void 0;var vS=Gt(),_S;(function(e){e.Comment="comment",e.Imports="imports",e.Region="region"})(_S=pn.FoldingRangeKind||(pn.FoldingRangeKind={}));var yS;(function(e){e.method="textDocument/foldingRange",e.type=new vS.ProtocolRequestType(e.method)})(yS=pn.FoldingRangeRequest||(pn.FoldingRangeRequest={}))});var _h=ee(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});Qi.DeclarationRequest=void 0;var ES=Gt(),bS;(function(e){e.method="textDocument/declaration",e.type=new ES.ProtocolRequestType(e.method)})(bS=Qi.DeclarationRequest||(Qi.DeclarationRequest={}))});var yh=ee(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});Ji.SelectionRangeRequest=void 0;var CS=Gt(),TS;(function(e){e.method="textDocument/selectionRange",e.type=new CS.ProtocolRequestType(e.method)})(TS=Ji.SelectionRangeRequest||(Ji.SelectionRangeRequest={}))});var bh=ee(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.WorkDoneProgressCancelNotification=Mr.WorkDoneProgressCreateRequest=Mr.WorkDoneProgress=void 0;var SS=ai(),Eh=Gt(),RS;(function(e){e.type=new SS.ProgressType;function t(r){return r===e.type}e.is=t})(RS=Mr.WorkDoneProgress||(Mr.WorkDoneProgress={}));var wS;(function(e){e.type=new Eh.ProtocolRequestType("window/workDoneProgress/create")})(wS=Mr.WorkDoneProgressCreateRequest||(Mr.WorkDoneProgressCreateRequest={}));var PS;(function(e){e.type=new Eh.ProtocolNotificationType("window/workDoneProgress/cancel")})(PS=Mr.WorkDoneProgressCancelNotification||(Mr.WorkDoneProgressCancelNotification={}))});var Ch=ee(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.CallHierarchyOutgoingCallsRequest=qr.CallHierarchyIncomingCallsRequest=qr.CallHierarchyPrepareRequest=void 0;var Ic=Gt(),OS;(function(e){e.method="textDocument/prepareCallHierarchy",e.type=new Ic.ProtocolRequestType(e.method)})(OS=qr.CallHierarchyPrepareRequest||(qr.CallHierarchyPrepareRequest={}));var IS;(function(e){e.method="callHierarchy/incomingCalls",e.type=new Ic.ProtocolRequestType(e.method)})(IS=qr.CallHierarchyIncomingCallsRequest||(qr.CallHierarchyIncomingCallsRequest={}));var DS;(function(e){e.method="callHierarchy/outgoingCalls",e.type=new Ic.ProtocolRequestType(e.method)})(DS=qr.CallHierarchyOutgoingCallsRequest||(qr.CallHierarchyOutgoingCallsRequest={}))});var Th=ee(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.SemanticTokensRefreshRequest=ut.SemanticTokensRangeRequest=ut.SemanticTokensDeltaRequest=ut.SemanticTokensRequest=ut.SemanticTokensRegistrationType=ut.TokenFormat=ut.SemanticTokens=ut.SemanticTokenModifiers=ut.SemanticTokenTypes=void 0;var Zi=Gt(),AS;(function(e){e.namespace="namespace",e.type="type",e.class="class",e.enum="enum",e.interface="interface",e.struct="struct",e.typeParameter="typeParameter",e.parameter="parameter",e.variable="variable",e.property="property",e.enumMember="enumMember",e.event="event",e.function="function",e.method="method",e.macro="macro",e.keyword="keyword",e.modifier="modifier",e.comment="comment",e.string="string",e.number="number",e.regexp="regexp",e.operator="operator"})(AS=ut.SemanticTokenTypes||(ut.SemanticTokenTypes={}));var xS;(function(e){e.declaration="declaration",e.definition="definition",e.readonly="readonly",e.static="static",e.deprecated="deprecated",e.abstract="abstract",e.async="async",e.modification="modification",e.documentation="documentation",e.defaultLibrary="defaultLibrary"})(xS=ut.SemanticTokenModifiers||(ut.SemanticTokenModifiers={}));var NS;(function(e){function t(r){let n=r;return n!==void 0&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}e.is=t})(NS=ut.SemanticTokens||(ut.SemanticTokens={}));var kS;(function(e){e.Relative="relative"})(kS=ut.TokenFormat||(ut.TokenFormat={}));var MS;(function(e){e.method="textDocument/semanticTokens",e.type=new Zi.RegistrationType(e.method)})(MS=ut.SemanticTokensRegistrationType||(ut.SemanticTokensRegistrationType={}));var qS;(function(e){e.method="textDocument/semanticTokens/full",e.type=new Zi.ProtocolRequestType(e.method)})(qS=ut.SemanticTokensRequest||(ut.SemanticTokensRequest={}));var LS;(function(e){e.method="textDocument/semanticTokens/full/delta",e.type=new Zi.ProtocolRequestType(e.method)})(LS=ut.SemanticTokensDeltaRequest||(ut.SemanticTokensDeltaRequest={}));var jS;(function(e){e.method="textDocument/semanticTokens/range",e.type=new Zi.ProtocolRequestType(e.method)})(jS=ut.SemanticTokensRangeRequest||(ut.SemanticTokensRangeRequest={}));var FS;(function(e){e.method="workspace/semanticTokens/refresh",e.type=new Zi.ProtocolRequestType0(e.method)})(FS=ut.SemanticTokensRefreshRequest||(ut.SemanticTokensRefreshRequest={}))});var Sh=ee(eo=>{"use strict";Object.defineProperty(eo,"__esModule",{value:!0});eo.ShowDocumentRequest=void 0;var HS=Gt(),$S;(function(e){e.method="window/showDocument",e.type=new HS.ProtocolRequestType(e.method)})($S=eo.ShowDocumentRequest||(eo.ShowDocumentRequest={}))});var Rh=ee(to=>{"use strict";Object.defineProperty(to,"__esModule",{value:!0});to.LinkedEditingRangeRequest=void 0;var US=Gt(),BS;(function(e){e.method="textDocument/linkedEditingRange",e.type=new US.ProtocolRequestType(e.method)})(BS=to.LinkedEditingRangeRequest||(to.LinkedEditingRangeRequest={}))});var wh=ee(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.WillDeleteFilesRequest=St.DidDeleteFilesNotification=St.DidRenameFilesNotification=St.WillRenameFilesRequest=St.DidCreateFilesNotification=St.WillCreateFilesRequest=St.FileOperationPatternKind=void 0;var ui=Gt(),VS;(function(e){e.file="file",e.folder="folder"})(VS=St.FileOperationPatternKind||(St.FileOperationPatternKind={}));var GS;(function(e){e.method="workspace/willCreateFiles",e.type=new ui.ProtocolRequestType(e.method)})(GS=St.WillCreateFilesRequest||(St.WillCreateFilesRequest={}));var WS;(function(e){e.method="workspace/didCreateFiles",e.type=new ui.ProtocolNotificationType(e.method)})(WS=St.DidCreateFilesNotification||(St.DidCreateFilesNotification={}));var KS;(function(e){e.method="workspace/willRenameFiles",e.type=new ui.ProtocolRequestType(e.method)})(KS=St.WillRenameFilesRequest||(St.WillRenameFilesRequest={}));var zS;(function(e){e.method="workspace/didRenameFiles",e.type=new ui.ProtocolNotificationType(e.method)})(zS=St.DidRenameFilesNotification||(St.DidRenameFilesNotification={}));var XS;(function(e){e.method="workspace/didDeleteFiles",e.type=new ui.ProtocolNotificationType(e.method)})(XS=St.DidDeleteFilesNotification||(St.DidDeleteFilesNotification={}));var YS;(function(e){e.method="workspace/willDeleteFiles",e.type=new ui.ProtocolRequestType(e.method)})(YS=St.WillDeleteFilesRequest||(St.WillDeleteFilesRequest={}))});var Ph=ee(Lr=>{"use strict";Object.defineProperty(Lr,"__esModule",{value:!0});Lr.MonikerRequest=Lr.MonikerKind=Lr.UniquenessLevel=void 0;var QS=Gt(),JS;(function(e){e.document="document",e.project="project",e.group="group",e.scheme="scheme",e.global="global"})(JS=Lr.UniquenessLevel||(Lr.UniquenessLevel={}));var ZS;(function(e){e.import="import",e.export="export",e.local="local"})(ZS=Lr.MonikerKind||(Lr.MonikerKind={}));var e0;(function(e){e.method="textDocument/moniker",e.type=new QS.ProtocolRequestType(e.method)})(e0=Lr.MonikerRequest||(Lr.MonikerRequest={}))});var xh=ee(x=>{"use strict";Object.defineProperty(x,"__esModule",{value:!0});x.DocumentLinkRequest=x.CodeLensRefreshRequest=x.CodeLensResolveRequest=x.CodeLensRequest=x.WorkspaceSymbolRequest=x.CodeActionResolveRequest=x.CodeActionRequest=x.DocumentSymbolRequest=x.DocumentHighlightRequest=x.ReferencesRequest=x.DefinitionRequest=x.SignatureHelpRequest=x.SignatureHelpTriggerKind=x.HoverRequest=x.CompletionResolveRequest=x.CompletionRequest=x.CompletionTriggerKind=x.PublishDiagnosticsNotification=x.WatchKind=x.FileChangeType=x.DidChangeWatchedFilesNotification=x.WillSaveTextDocumentWaitUntilRequest=x.WillSaveTextDocumentNotification=x.TextDocumentSaveReason=x.DidSaveTextDocumentNotification=x.DidCloseTextDocumentNotification=x.DidChangeTextDocumentNotification=x.TextDocumentContentChangeEvent=x.DidOpenTextDocumentNotification=x.TextDocumentSyncKind=x.TelemetryEventNotification=x.LogMessageNotification=x.ShowMessageRequest=x.ShowMessageNotification=x.MessageType=x.DidChangeConfigurationNotification=x.ExitNotification=x.ShutdownRequest=x.InitializedNotification=x.InitializeError=x.InitializeRequest=x.WorkDoneProgressOptions=x.TextDocumentRegistrationOptions=x.StaticRegistrationOptions=x.FailureHandlingKind=x.ResourceOperationKind=x.UnregistrationRequest=x.RegistrationRequest=x.DocumentSelector=x.DocumentFilter=void 0;x.MonikerRequest=x.MonikerKind=x.UniquenessLevel=x.WillDeleteFilesRequest=x.DidDeleteFilesNotification=x.WillRenameFilesRequest=x.DidRenameFilesNotification=x.WillCreateFilesRequest=x.DidCreateFilesNotification=x.FileOperationPatternKind=x.LinkedEditingRangeRequest=x.ShowDocumentRequest=x.SemanticTokensRegistrationType=x.SemanticTokensRefreshRequest=x.SemanticTokensRangeRequest=x.SemanticTokensDeltaRequest=x.SemanticTokensRequest=x.TokenFormat=x.SemanticTokens=x.SemanticTokenModifiers=x.SemanticTokenTypes=x.CallHierarchyPrepareRequest=x.CallHierarchyOutgoingCallsRequest=x.CallHierarchyIncomingCallsRequest=x.WorkDoneProgressCancelNotification=x.WorkDoneProgressCreateRequest=x.WorkDoneProgress=x.SelectionRangeRequest=x.DeclarationRequest=x.FoldingRangeRequest=x.ColorPresentationRequest=x.DocumentColorRequest=x.ConfigurationRequest=x.DidChangeWorkspaceFoldersNotification=x.WorkspaceFoldersRequest=x.TypeDefinitionRequest=x.ImplementationRequest=x.ApplyWorkspaceEditRequest=x.ExecuteCommandRequest=x.PrepareRenameRequest=x.RenameRequest=x.PrepareSupportDefaultBehavior=x.DocumentOnTypeFormattingRequest=x.DocumentRangeFormattingRequest=x.DocumentFormattingRequest=x.DocumentLinkResolveRequest=void 0;var fn=uh(),He=Gt(),t0=lh();Object.defineProperty(x,"ImplementationRequest",{enumerable:!0,get:function(){return t0.ImplementationRequest}});var r0=dh();Object.defineProperty(x,"TypeDefinitionRequest",{enumerable:!0,get:function(){return r0.TypeDefinitionRequest}});var Oh=fh();Object.defineProperty(x,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return Oh.WorkspaceFoldersRequest}});Object.defineProperty(x,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return Oh.DidChangeWorkspaceFoldersNotification}});var n0=hh();Object.defineProperty(x,"ConfigurationRequest",{enumerable:!0,get:function(){return n0.ConfigurationRequest}});var Ih=mh();Object.defineProperty(x,"DocumentColorRequest",{enumerable:!0,get:function(){return Ih.DocumentColorRequest}});Object.defineProperty(x,"ColorPresentationRequest",{enumerable:!0,get:function(){return Ih.ColorPresentationRequest}});var i0=vh();Object.defineProperty(x,"FoldingRangeRequest",{enumerable:!0,get:function(){return i0.FoldingRangeRequest}});var o0=_h();Object.defineProperty(x,"DeclarationRequest",{enumerable:!0,get:function(){return o0.DeclarationRequest}});var s0=yh();Object.defineProperty(x,"SelectionRangeRequest",{enumerable:!0,get:function(){return s0.SelectionRangeRequest}});var Dc=bh();Object.defineProperty(x,"WorkDoneProgress",{enumerable:!0,get:function(){return Dc.WorkDoneProgress}});Object.defineProperty(x,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Dc.WorkDoneProgressCreateRequest}});Object.defineProperty(x,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Dc.WorkDoneProgressCancelNotification}});var Ac=Ch();Object.defineProperty(x,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Ac.CallHierarchyIncomingCallsRequest}});Object.defineProperty(x,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Ac.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(x,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Ac.CallHierarchyPrepareRequest}});var Zr=Th();Object.defineProperty(x,"SemanticTokenTypes",{enumerable:!0,get:function(){return Zr.SemanticTokenTypes}});Object.defineProperty(x,"SemanticTokenModifiers",{enumerable:!0,get:function(){return Zr.SemanticTokenModifiers}});Object.defineProperty(x,"SemanticTokens",{enumerable:!0,get:function(){return Zr.SemanticTokens}});Object.defineProperty(x,"TokenFormat",{enumerable:!0,get:function(){return Zr.TokenFormat}});Object.defineProperty(x,"SemanticTokensRequest",{enumerable:!0,get:function(){return Zr.SemanticTokensRequest}});Object.defineProperty(x,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return Zr.SemanticTokensDeltaRequest}});Object.defineProperty(x,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return Zr.SemanticTokensRangeRequest}});Object.defineProperty(x,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return Zr.SemanticTokensRefreshRequest}});Object.defineProperty(x,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return Zr.SemanticTokensRegistrationType}});var a0=Sh();Object.defineProperty(x,"ShowDocumentRequest",{enumerable:!0,get:function(){return a0.ShowDocumentRequest}});var c0=Rh();Object.defineProperty(x,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return c0.LinkedEditingRangeRequest}});var $n=wh();Object.defineProperty(x,"FileOperationPatternKind",{enumerable:!0,get:function(){return $n.FileOperationPatternKind}});Object.defineProperty(x,"DidCreateFilesNotification",{enumerable:!0,get:function(){return $n.DidCreateFilesNotification}});Object.defineProperty(x,"WillCreateFilesRequest",{enumerable:!0,get:function(){return $n.WillCreateFilesRequest}});Object.defineProperty(x,"DidRenameFilesNotification",{enumerable:!0,get:function(){return $n.DidRenameFilesNotification}});Object.defineProperty(x,"WillRenameFilesRequest",{enumerable:!0,get:function(){return $n.WillRenameFilesRequest}});Object.defineProperty(x,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return $n.DidDeleteFilesNotification}});Object.defineProperty(x,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return $n.WillDeleteFilesRequest}});var xc=Ph();Object.defineProperty(x,"UniquenessLevel",{enumerable:!0,get:function(){return xc.UniquenessLevel}});Object.defineProperty(x,"MonikerKind",{enumerable:!0,get:function(){return xc.MonikerKind}});Object.defineProperty(x,"MonikerRequest",{enumerable:!0,get:function(){return xc.MonikerRequest}});var Dh;(function(e){function t(r){let n=r;return fn.string(n.language)||fn.string(n.scheme)||fn.string(n.pattern)}e.is=t})(Dh=x.DocumentFilter||(x.DocumentFilter={}));var Ah;(function(e){function t(r){if(!Array.isArray(r))return!1;for(let n of r)if(!fn.string(n)&&!Dh.is(n))return!1;return!0}e.is=t})(Ah=x.DocumentSelector||(x.DocumentSelector={}));var u0;(function(e){e.type=new He.ProtocolRequestType("client/registerCapability")})(u0=x.RegistrationRequest||(x.RegistrationRequest={}));var l0;(function(e){e.type=new He.ProtocolRequestType("client/unregisterCapability")})(l0=x.UnregistrationRequest||(x.UnregistrationRequest={}));var d0;(function(e){e.Create="create",e.Rename="rename",e.Delete="delete"})(d0=x.ResourceOperationKind||(x.ResourceOperationKind={}));var p0;(function(e){e.Abort="abort",e.Transactional="transactional",e.TextOnlyTransactional="textOnlyTransactional",e.Undo="undo"})(p0=x.FailureHandlingKind||(x.FailureHandlingKind={}));var f0;(function(e){function t(r){let n=r;return n&&fn.string(n.id)&&n.id.length>0}e.hasId=t})(f0=x.StaticRegistrationOptions||(x.StaticRegistrationOptions={}));var h0;(function(e){function t(r){let n=r;return n&&(n.documentSelector===null||Ah.is(n.documentSelector))}e.is=t})(h0=x.TextDocumentRegistrationOptions||(x.TextDocumentRegistrationOptions={}));var g0;(function(e){function t(n){let o=n;return fn.objectLiteral(o)&&(o.workDoneProgress===void 0||fn.boolean(o.workDoneProgress))}e.is=t;function r(n){let o=n;return o&&fn.boolean(o.workDoneProgress)}e.hasWorkDoneProgress=r})(g0=x.WorkDoneProgressOptions||(x.WorkDoneProgressOptions={}));var m0;(function(e){e.type=new He.ProtocolRequestType("initialize")})(m0=x.InitializeRequest||(x.InitializeRequest={}));var v0;(function(e){e.unknownProtocolVersion=1})(v0=x.InitializeError||(x.InitializeError={}));var _0;(function(e){e.type=new He.ProtocolNotificationType("initialized")})(_0=x.InitializedNotification||(x.InitializedNotification={}));var y0;(function(e){e.type=new He.ProtocolRequestType0("shutdown")})(y0=x.ShutdownRequest||(x.ShutdownRequest={}));var E0;(function(e){e.type=new He.ProtocolNotificationType0("exit")})(E0=x.ExitNotification||(x.ExitNotification={}));var b0;(function(e){e.type=new He.ProtocolNotificationType("workspace/didChangeConfiguration")})(b0=x.DidChangeConfigurationNotification||(x.DidChangeConfigurationNotification={}));var C0;(function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4})(C0=x.MessageType||(x.MessageType={}));var T0;(function(e){e.type=new He.ProtocolNotificationType("window/showMessage")})(T0=x.ShowMessageNotification||(x.ShowMessageNotification={}));var S0;(function(e){e.type=new He.ProtocolRequestType("window/showMessageRequest")})(S0=x.ShowMessageRequest||(x.ShowMessageRequest={}));var R0;(function(e){e.type=new He.ProtocolNotificationType("window/logMessage")})(R0=x.LogMessageNotification||(x.LogMessageNotification={}));var w0;(function(e){e.type=new He.ProtocolNotificationType("telemetry/event")})(w0=x.TelemetryEventNotification||(x.TelemetryEventNotification={}));var P0;(function(e){e.None=0,e.Full=1,e.Incremental=2})(P0=x.TextDocumentSyncKind||(x.TextDocumentSyncKind={}));var O0;(function(e){e.method="textDocument/didOpen",e.type=new He.ProtocolNotificationType(e.method)})(O0=x.DidOpenTextDocumentNotification||(x.DidOpenTextDocumentNotification={}));var I0;(function(e){function t(n){let o=n;return o!=null&&typeof o.text=="string"&&o.range!==void 0&&(o.rangeLength===void 0||typeof o.rangeLength=="number")}e.isIncremental=t;function r(n){let o=n;return o!=null&&typeof o.text=="string"&&o.range===void 0&&o.rangeLength===void 0}e.isFull=r})(I0=x.TextDocumentContentChangeEvent||(x.TextDocumentContentChangeEvent={}));var D0;(function(e){e.method="textDocument/didChange",e.type=new He.ProtocolNotificationType(e.method)})(D0=x.DidChangeTextDocumentNotification||(x.DidChangeTextDocumentNotification={}));var A0;(function(e){e.method="textDocument/didClose",e.type=new He.ProtocolNotificationType(e.method)})(A0=x.DidCloseTextDocumentNotification||(x.DidCloseTextDocumentNotification={}));var x0;(function(e){e.method="textDocument/didSave",e.type=new He.ProtocolNotificationType(e.method)})(x0=x.DidSaveTextDocumentNotification||(x.DidSaveTextDocumentNotification={}));var N0;(function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3})(N0=x.TextDocumentSaveReason||(x.TextDocumentSaveReason={}));var k0;(function(e){e.method="textDocument/willSave",e.type=new He.ProtocolNotificationType(e.method)})(k0=x.WillSaveTextDocumentNotification||(x.WillSaveTextDocumentNotification={}));var M0;(function(e){e.method="textDocument/willSaveWaitUntil",e.type=new He.ProtocolRequestType(e.method)})(M0=x.WillSaveTextDocumentWaitUntilRequest||(x.WillSaveTextDocumentWaitUntilRequest={}));var q0;(function(e){e.type=new He.ProtocolNotificationType("workspace/didChangeWatchedFiles")})(q0=x.DidChangeWatchedFilesNotification||(x.DidChangeWatchedFilesNotification={}));var L0;(function(e){e.Created=1,e.Changed=2,e.Deleted=3})(L0=x.FileChangeType||(x.FileChangeType={}));var j0;(function(e){e.Create=1,e.Change=2,e.Delete=4})(j0=x.WatchKind||(x.WatchKind={}));var F0;(function(e){e.type=new He.ProtocolNotificationType("textDocument/publishDiagnostics")})(F0=x.PublishDiagnosticsNotification||(x.PublishDiagnosticsNotification={}));var H0;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3})(H0=x.CompletionTriggerKind||(x.CompletionTriggerKind={}));var $0;(function(e){e.method="textDocument/completion",e.type=new He.ProtocolRequestType(e.method)})($0=x.CompletionRequest||(x.CompletionRequest={}));var U0;(function(e){e.method="completionItem/resolve",e.type=new He.ProtocolRequestType(e.method)})(U0=x.CompletionResolveRequest||(x.CompletionResolveRequest={}));var B0;(function(e){e.method="textDocument/hover",e.type=new He.ProtocolRequestType(e.method)})(B0=x.HoverRequest||(x.HoverRequest={}));var V0;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.ContentChange=3})(V0=x.SignatureHelpTriggerKind||(x.SignatureHelpTriggerKind={}));var G0;(function(e){e.method="textDocument/signatureHelp",e.type=new He.ProtocolRequestType(e.method)})(G0=x.SignatureHelpRequest||(x.SignatureHelpRequest={}));var W0;(function(e){e.method="textDocument/definition",e.type=new He.ProtocolRequestType(e.method)})(W0=x.DefinitionRequest||(x.DefinitionRequest={}));var K0;(function(e){e.method="textDocument/references",e.type=new He.ProtocolRequestType(e.method)})(K0=x.ReferencesRequest||(x.ReferencesRequest={}));var z0;(function(e){e.method="textDocument/documentHighlight",e.type=new He.ProtocolRequestType(e.method)})(z0=x.DocumentHighlightRequest||(x.DocumentHighlightRequest={}));var X0;(function(e){e.method="textDocument/documentSymbol",e.type=new He.ProtocolRequestType(e.method)})(X0=x.DocumentSymbolRequest||(x.DocumentSymbolRequest={}));var Y0;(function(e){e.method="textDocument/codeAction",e.type=new He.ProtocolRequestType(e.method)})(Y0=x.CodeActionRequest||(x.CodeActionRequest={}));var Q0;(function(e){e.method="codeAction/resolve",e.type=new He.ProtocolRequestType(e.method)})(Q0=x.CodeActionResolveRequest||(x.CodeActionResolveRequest={}));var J0;(function(e){e.method="workspace/symbol",e.type=new He.ProtocolRequestType(e.method)})(J0=x.WorkspaceSymbolRequest||(x.WorkspaceSymbolRequest={}));var Z0;(function(e){e.method="textDocument/codeLens",e.type=new He.ProtocolRequestType(e.method)})(Z0=x.CodeLensRequest||(x.CodeLensRequest={}));var eR;(function(e){e.method="codeLens/resolve",e.type=new He.ProtocolRequestType(e.method)})(eR=x.CodeLensResolveRequest||(x.CodeLensResolveRequest={}));var tR;(function(e){e.method="workspace/codeLens/refresh",e.type=new He.ProtocolRequestType0(e.method)})(tR=x.CodeLensRefreshRequest||(x.CodeLensRefreshRequest={}));var rR;(function(e){e.method="textDocument/documentLink",e.type=new He.ProtocolRequestType(e.method)})(rR=x.DocumentLinkRequest||(x.DocumentLinkRequest={}));var nR;(function(e){e.method="documentLink/resolve",e.type=new He.ProtocolRequestType(e.method)})(nR=x.DocumentLinkResolveRequest||(x.DocumentLinkResolveRequest={}));var iR;(function(e){e.method="textDocument/formatting",e.type=new He.ProtocolRequestType(e.method)})(iR=x.DocumentFormattingRequest||(x.DocumentFormattingRequest={}));var oR;(function(e){e.method="textDocument/rangeFormatting",e.type=new He.ProtocolRequestType(e.method)})(oR=x.DocumentRangeFormattingRequest||(x.DocumentRangeFormattingRequest={}));var sR;(function(e){e.method="textDocument/onTypeFormatting",e.type=new He.ProtocolRequestType(e.method)})(sR=x.DocumentOnTypeFormattingRequest||(x.DocumentOnTypeFormattingRequest={}));var aR;(function(e){e.Identifier=1})(aR=x.PrepareSupportDefaultBehavior||(x.PrepareSupportDefaultBehavior={}));var cR;(function(e){e.method="textDocument/rename",e.type=new He.ProtocolRequestType(e.method)})(cR=x.RenameRequest||(x.RenameRequest={}));var uR;(function(e){e.method="textDocument/prepareRename",e.type=new He.ProtocolRequestType(e.method)})(uR=x.PrepareRenameRequest||(x.PrepareRenameRequest={}));var lR;(function(e){e.type=new He.ProtocolRequestType("workspace/executeCommand")})(lR=x.ExecuteCommandRequest||(x.ExecuteCommandRequest={}));var dR;(function(e){e.type=new He.ProtocolRequestType("workspace/applyEdit")})(dR=x.ApplyWorkspaceEditRequest||(x.ApplyWorkspaceEditRequest={}))});var kh=ee(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});zo.createProtocolConnection=void 0;var Nh=ai();function pR(e,t,r,n){return Nh.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),Nh.createMessageConnection(e,t,r,n)}zo.createProtocolConnection=pR});var Mh=ee(cr=>{"use strict";var fR=cr&&cr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Xo=cr&&cr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&fR(t,e,r)};Object.defineProperty(cr,"__esModule",{value:!0});cr.LSPErrorCodes=cr.createProtocolConnection=void 0;Xo(ai(),cr);Xo(sh(),cr);Xo(Gt(),cr);Xo(xh(),cr);var hR=kh();Object.defineProperty(cr,"createProtocolConnection",{enumerable:!0,get:function(){return hR.createProtocolConnection}});var gR;(function(e){e.lspReservedErrorRangeStart=-32899,e.ContentModified=-32801,e.RequestCancelled=-32800,e.lspReservedErrorRangeEnd=-32800})(gR=cr.LSPErrorCodes||(cr.LSPErrorCodes={}))});var Rt=ee(Ur=>{"use strict";var mR=Ur&&Ur.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),qh=Ur&&Ur.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&mR(t,e,r)};Object.defineProperty(Ur,"__esModule",{value:!0});Ur.createProtocolConnection=void 0;var vR=Tc();qh(Tc(),Ur);qh(Mh(),Ur);function _R(e,t,r,n){return vR.createMessageConnection(e,t,r,n)}Ur.createProtocolConnection=_R});var Mc=ee(di=>{"use strict";Object.defineProperty(di,"__esModule",{value:!0});di.toJSONObject=di.ConfigurationFeature=void 0;var Nc=require("vscode"),yR=Rt(),kc=class{constructor(t){this._client=t}fillClientCapabilities(t){t.workspace=t.workspace||{},t.workspace.configuration=!0}initialize(){let t=this._client;t.onRequest(yR.ConfigurationRequest.type,(r,n)=>{let o=i=>{let s=[];for(let c of i.items){let u=c.scopeUri!==void 0&&c.scopeUri!==null?this._client.protocol2CodeConverter.asUri(c.scopeUri):void 0;s.push(this.getConfiguration(u,c.section!==null?c.section:void 0))}return s},a=t.clientOptions.middleware.workspace;return a&&a.configuration?a.configuration(r,n,o):o(r,n)})}getConfiguration(t,r){let n=null;if(r){let o=r.lastIndexOf(".");if(o===-1)n=li(Nc.workspace.getConfiguration(void 0,t).get(r));else{let a=Nc.workspace.getConfiguration(r.substr(0,o),t);a&&(n=li(a.get(r.substr(o+1))))}}else{let o=Nc.workspace.getConfiguration(void 0,t);n={};for(let a of Object.keys(o))o.has(a)&&(n[a]=li(o.get(a)))}return n===void 0&&(n=null),n}dispose(){}};di.ConfigurationFeature=kc;function li(e){if(e){if(Array.isArray(e))return e.map(li);if(typeof e=="object"){let t=Object.create(null);for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=li(e[r]));return t}}return e}di.toJSONObject=li});var jc=ee(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});var ER=require("vscode"),qc=class extends ER.CompletionItem{constructor(t){super(t)}};Lc.default=qc});var $c=ee(Hc=>{"use strict";Object.defineProperty(Hc,"__esModule",{value:!0});var bR=require("vscode"),Fc=class extends bR.CodeLens{constructor(t){super(t)}};Hc.default=Fc});var Vc=ee(Bc=>{"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});var CR=require("vscode"),Uc=class extends CR.DocumentLink{constructor(t,r){super(t,r)}};Bc.default=Uc});var Kc=ee(Wc=>{"use strict";Object.defineProperty(Wc,"__esModule",{value:!0});var TR=require("vscode"),Gc=class extends TR.CodeAction{constructor(t,r){super(t),this.data=r}};Wc.default=Gc});var Yc=ee(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0});Un.ProtocolDiagnostic=Un.DiagnosticCode=void 0;var SR=require("vscode"),zc=cn(),RR;(function(e){function t(r){let n=r;return n!=null&&(zc.number(n.value)||zc.string(n.value))&&zc.string(n.target)}e.is=t})(RR=Un.DiagnosticCode||(Un.DiagnosticCode={}));var Xc=class extends SR.Diagnostic{constructor(t,r,n,o){super(t,r,n),this.data=o,this.hasDiagnosticCode=!1}};Un.ProtocolDiagnostic=Xc});var Zc=ee(Jc=>{"use strict";Object.defineProperty(Jc,"__esModule",{value:!0});var wR=require("vscode"),Qc=class extends wR.CallHierarchyItem{constructor(t,r,n,o,a,i,s){super(t,r,n,o,a,i),s!==void 0&&(this.data=s)}};Jc.default=Qc});var jh=ee(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});Yo.createConverter=void 0;var Wt=require("vscode"),at=Rt(),ro=cn(),PR=jc(),OR=$c(),IR=Vc(),DR=Kc(),Lh=Yc(),AR=Zc(),xR=Rt(),eu;(function(e){function t(r){let n=r;return n&&!!n.inserting&&!!n.replacing}e.is=t})(eu||(eu={}));function NR(e){let r=e||(y=>y.toString());function n(y){return r(y)}function o(y){return{uri:r(y.uri)}}function a(y){return{uri:r(y.uri),version:y.version}}function i(y){return{textDocument:{uri:r(y.uri),languageId:y.languageId,version:y.version,text:y.getText()}}}function s(y){let b=y;return!!b.document&&!!b.contentChanges}function c(y){let b=y;return!!b.uri&&!!b.version}function u(y){if(c(y))return{textDocument:{uri:r(y.uri),version:y.version},contentChanges:[{text:y.getText()}]};if(s(y)){let b=y.document;return{textDocument:{uri:r(b.uri),version:b.version},contentChanges:y.contentChanges.map(G=>{let ue=G.range;return{range:{start:{line:ue.start.line,character:ue.start.character},end:{line:ue.end.line,character:ue.end.character}},rangeLength:G.rangeLength,text:G.text}})}}else throw Error("Unsupported text document change parameter")}function d(y){return{textDocument:o(y)}}function l(y,b=!1){let L={textDocument:o(y)};return b&&(L.text=y.getText()),L}function p(y){switch(y){case Wt.TextDocumentSaveReason.Manual:return at.TextDocumentSaveReason.Manual;case Wt.TextDocumentSaveReason.AfterDelay:return at.TextDocumentSaveReason.AfterDelay;case Wt.TextDocumentSaveReason.FocusOut:return at.TextDocumentSaveReason.FocusOut}return at.TextDocumentSaveReason.Manual}function f(y){return{textDocument:o(y.document),reason:p(y.reason)}}function g(y){return{files:y.files.map(b=>({uri:r(b)}))}}function m(y){return{files:y.files.map(b=>({oldUri:r(b.oldUri),newUri:r(b.newUri)}))}}function _(y){return{files:y.files.map(b=>({uri:r(b)}))}}function E(y){return{files:y.files.map(b=>({uri:r(b)}))}}function T(y){return{files:y.files.map(b=>({oldUri:r(b.oldUri),newUri:r(b.newUri)}))}}function w(y){return{files:y.files.map(b=>({uri:r(b)}))}}function R(y,b){return{textDocument:o(y),position:ne(b)}}function I(y){switch(y){case Wt.CompletionTriggerKind.TriggerCharacter:return at.CompletionTriggerKind.TriggerCharacter;case Wt.CompletionTriggerKind.TriggerForIncompleteCompletions:return at.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return at.CompletionTriggerKind.Invoked}}function H(y,b,L){return{textDocument:o(y),position:ne(b),context:{triggerKind:I(L.triggerKind),triggerCharacter:L.triggerCharacter}}}function z(y){switch(y){case Wt.SignatureHelpTriggerKind.Invoke:return at.SignatureHelpTriggerKind.Invoked;case Wt.SignatureHelpTriggerKind.TriggerCharacter:return at.SignatureHelpTriggerKind.TriggerCharacter;case Wt.SignatureHelpTriggerKind.ContentChange:return at.SignatureHelpTriggerKind.ContentChange}}function K(y){return{label:y.label}}function J(y){return y.map(K)}function te(y){return{label:y.label,parameters:J(y.parameters)}}function U(y){return y.map(te)}function V(y){return y===void 0?y:{signatures:U(y.signatures),activeSignature:y.activeSignature,activeParameter:y.activeParameter}}function Q(y,b,L){return{textDocument:o(y),position:ne(b),context:{isRetrigger:L.isRetrigger,triggerCharacter:L.triggerCharacter,triggerKind:z(L.triggerKind),activeSignatureHelp:V(L.activeSignatureHelp)}}}function ne(y){return{line:y.line,character:y.character}}function ve(y){return y==null?y:{line:y.line,character:y.character}}function de(y){let b=[];for(let L of y)b.push(ve(L));return b}function X(y){return y==null?y:{start:ve(y.start),end:ve(y.end)}}function ce(y){return y==null?y:at.Location.create(n(y.uri),X(y.range))}function ie(y){switch(y){case Wt.DiagnosticSeverity.Error:return at.DiagnosticSeverity.Error;case Wt.DiagnosticSeverity.Warning:return at.DiagnosticSeverity.Warning;case Wt.DiagnosticSeverity.Information:return at.DiagnosticSeverity.Information;case Wt.DiagnosticSeverity.Hint:return at.DiagnosticSeverity.Hint}}function pe(y){if(!y)return;let b=[];for(let L of y){let G=he(L);G!==void 0&&b.push(G)}return b.length>0?b:void 0}function he(y){switch(y){case Wt.DiagnosticTag.Unnecessary:return at.DiagnosticTag.Unnecessary;case Wt.DiagnosticTag.Deprecated:return at.DiagnosticTag.Deprecated;default:return}}function be(y){return{message:y.message,location:ce(y.location)}}function _e(y){return y.map(be)}function Ue(y){if(y!=null)return ro.number(y)||ro.string(y)?y:{value:y.value,target:n(y.target)}}function Qe(y){let b=at.Diagnostic.create(X(y.range),y.message),L=y instanceof Lh.ProtocolDiagnostic?y:void 0;L!==void 0&&L.data!==void 0&&(b.data=L.data);let G=Ue(y.code);return Lh.DiagnosticCode.is(G)?L!==void 0&&L.hasDiagnosticCode?b.code=G:(b.code=G.value,b.codeDescription={href:G.target}):b.code=G,ro.number(y.severity)&&(b.severity=ie(y.severity)),Array.isArray(y.tags)&&(b.tags=pe(y.tags)),y.relatedInformation&&(b.relatedInformation=_e(y.relatedInformation)),y.source&&(b.source=y.source),b}function Ke(y){return y==null?y:y.map(Qe)}function je(y,b){switch(y){case"$string":return b;case at.MarkupKind.PlainText:return{kind:y,value:b};case at.MarkupKind.Markdown:return{kind:y,value:b.value};default:return`Unsupported Markup content received. Kind is: ${y}`}}function xe(y){switch(y){case Wt.CompletionItemTag.Deprecated:return at.CompletionItemTag.Deprecated}}function it(y){if(y===void 0)return y;let b=[];for(let L of y){let G=xe(L);G!==void 0&&b.push(G)}return b}function lt(y,b){return b!==void 0?b:y+1}function Oe(y){let b={label:y.label},L=y instanceof PR.default?y:void 0;y.detail&&(b.detail=y.detail),y.documentation&&(!L||L.documentationFormat==="$string"?b.documentation=y.documentation:b.documentation=je(L.documentationFormat,y.documentation)),y.filterText&&(b.filterText=y.filterText),me(b,y),ro.number(y.kind)&&(b.kind=lt(y.kind,L&&L.originalItemKind)),y.sortText&&(b.sortText=y.sortText),y.additionalTextEdits&&(b.additionalTextEdits=ir(y.additionalTextEdits)),y.commitCharacters&&(b.commitCharacters=y.commitCharacters.slice()),y.command&&(b.command=dt(y.command)),(y.preselect===!0||y.preselect===!1)&&(b.preselect=y.preselect);let G=it(y.tags);if(L){if(L.data!==void 0&&(b.data=L.data),L.deprecated===!0||L.deprecated===!1){if(L.deprecated===!0&&G!==void 0&&G.length>0){let ue=G.indexOf(Wt.CompletionItemTag.Deprecated);ue!==-1&&G.splice(ue,1)}b.deprecated=L.deprecated}L.insertTextMode!==void 0&&(b.insertTextMode=L.insertTextMode)}return G!==void 0&&G.length>0&&(b.tags=G),b.insertTextMode===void 0&&y.keepWhitespace===!0&&(b.insertTextMode=xR.InsertTextMode.adjustIndentation),b}function me(y,b){let L=at.InsertTextFormat.PlainText,G,ue;b.textEdit?(G=b.textEdit.newText,ue=b.textEdit.range):b.insertText instanceof Wt.SnippetString?(L=at.InsertTextFormat.Snippet,G=b.insertText.value):G=b.insertText,b.range&&(ue=b.range),y.insertTextFormat=L,b.fromEdit&&G!==void 0&&ue!==void 0?y.textEdit=Ae(G,ue):y.insertText=G}function Ae(y,b){return eu.is(b)?at.InsertReplaceEdit.create(y,X(b.inserting),X(b.replacing)):{newText:y,range:X(b)}}function ke(y){return{range:X(y.range),newText:y.newText}}function ir(y){return y==null?y:y.map(ke)}function ct(y){return y<=Wt.SymbolKind.TypeParameter?y+1:at.SymbolKind.Property}function re(y){return y}function er(y){return y.map(re)}function or(y,b,L){return{textDocument:o(y),position:ne(b),context:{includeDeclaration:L.includeDeclaration}}}function gt(y){let b=at.CodeAction.create(y.title);if(y instanceof DR.default&&y.data!==void 0&&(b.data=y.data),y.kind!==void 0&&(b.kind=xt(y.kind)),y.diagnostics!==void 0&&(b.diagnostics=Ke(y.diagnostics)),y.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return y.command!==void 0&&(b.command=dt(y.command)),y.isPreferred!==void 0&&(b.isPreferred=y.isPreferred),y.disabled!==void 0&&(b.disabled={reason:y.disabled.reason}),b}function tt(y){if(y==null)return y;let b;return y.only&&ro.string(y.only.value)&&(b=[y.only.value]),at.CodeActionContext.create(Ke(y.diagnostics),b)}function xt(y){if(y!=null)return y.value}function dt(y){let b=at.Command.create(y.title,y.command);return y.arguments&&(b.arguments=y.arguments),b}function Ht(y){let b=at.CodeLens.create(X(y.range));return y.command&&(b.command=dt(y.command)),y instanceof OR.default&&y.data&&(b.data=y.data),b}function Pt(y,b){let L={tabSize:y.tabSize,insertSpaces:y.insertSpaces};return b.trimTrailingWhitespace&&(L.trimTrailingWhitespace=!0),b.trimFinalNewlines&&(L.trimFinalNewlines=!0),b.insertFinalNewline&&(L.insertFinalNewline=!0),L}function M(y){return{textDocument:o(y)}}function N(y){return{textDocument:o(y)}}function P(y){let b=at.DocumentLink.create(X(y.range));y.target&&(b.target=n(y.target)),y.tooltip!==void 0&&(b.tooltip=y.tooltip);let L=y instanceof IR.default?y:void 0;return L&&L.data&&(b.data=L.data),b}function q(y){return{textDocument:o(y)}}function F(y){let b={name:y.name,kind:ct(y.kind),uri:n(y.uri),range:X(y.range),selectionRange:X(y.selectionRange)};return y.detail!==void 0&&y.detail.length>0&&(b.detail=y.detail),y.tags!==void 0&&(b.tags=er(y.tags)),y instanceof AR.default&&y.data!==void 0&&(b.data=y.data),b}return{asUri:n,asTextDocumentIdentifier:o,asVersionedTextDocumentIdentifier:a,asOpenTextDocumentParams:i,asChangeTextDocumentParams:u,asCloseTextDocumentParams:d,asSaveTextDocumentParams:l,asWillSaveTextDocumentParams:f,asDidCreateFilesParams:g,asDidRenameFilesParams:m,asDidDeleteFilesParams:_,asWillCreateFilesParams:E,asWillRenameFilesParams:T,asWillDeleteFilesParams:w,asTextDocumentPositionParams:R,asCompletionParams:H,asSignatureHelpParams:Q,asWorkerPosition:ne,asRange:X,asPosition:ve,asPositions:de,asLocation:ce,asDiagnosticSeverity:ie,asDiagnosticTag:he,asDiagnostic:Qe,asDiagnostics:Ke,asCompletionItem:Oe,asTextEdit:ke,asSymbolKind:ct,asSymbolTag:re,asSymbolTags:er,asReferenceParams:or,asCodeAction:gt,asCodeActionContext:tt,asCommand:dt,asCodeLens:Ht,asFormattingOptions:Pt,asDocumentSymbolParams:M,asCodeLensParams:N,asDocumentLink:P,asDocumentLinkParams:q,asCallHierarchyItem:F}}Yo.createConverter=NR});var $h=ee(Jo=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});Jo.createConverter=void 0;var Pe=require("vscode"),ze=Rt(),jr=cn(),kR=jc(),MR=$c(),qR=Vc(),LR=Kc(),Fh=Yc(),jR=Zc(),Hh=Rt(),Qo;(function(e){function t(r){let n=r;return n&&jr.string(n.language)&&jr.string(n.value)}e.is=t})(Qo||(Qo={}));function FR(e,t){let n=e||(S=>Pe.Uri.parse(S));function o(S){return n(S)}function a(S){return S.map(i)}function i(S){let Z=new Fh.ProtocolDiagnostic(p(S.range),S.message,g(S.severity),S.data);return S.code!==void 0&&(ze.CodeDescription.is(S.codeDescription)?Z.code={value:S.code,target:o(S.codeDescription.href)}:Fh.DiagnosticCode.is(S.code)?(Z.hasDiagnosticCode=!0,Z.code={value:S.code.value,target:o(S.code.target)}):Z.code=S.code),S.source&&(Z.source=S.source),S.relatedInformation&&(Z.relatedInformation=s(S.relatedInformation)),Array.isArray(S.tags)&&(Z.tags=u(S.tags)),Z}function s(S){return S.map(c)}function c(S){return new Pe.DiagnosticRelatedInformation(X(S.location),S.message)}function u(S){if(!S)return;let Z=[];for(let ge of S){let Be=d(ge);Be!==void 0&&Z.push(Be)}return Z.length>0?Z:void 0}function d(S){switch(S){case ze.DiagnosticTag.Unnecessary:return Pe.DiagnosticTag.Unnecessary;case ze.DiagnosticTag.Deprecated:return Pe.DiagnosticTag.Deprecated;default:return}}function l(S){if(!!S)return new Pe.Position(S.line,S.character)}function p(S){if(!!S)return new Pe.Range(l(S.start),l(S.end))}function f(S){return S.map(Z=>p(Z))}function g(S){if(S==null)return Pe.DiagnosticSeverity.Error;switch(S){case ze.DiagnosticSeverity.Error:return Pe.DiagnosticSeverity.Error;case ze.DiagnosticSeverity.Warning:return Pe.DiagnosticSeverity.Warning;case ze.DiagnosticSeverity.Information:return Pe.DiagnosticSeverity.Information;case ze.DiagnosticSeverity.Hint:return Pe.DiagnosticSeverity.Hint}return Pe.DiagnosticSeverity.Error}function m(S){if(jr.string(S))return E(S);if(Qo.is(S))return E().appendCodeblock(S.value,S.language);if(Array.isArray(S)){let Z=[];for(let ge of S){let Be=E();Qo.is(ge)?Be.appendCodeblock(ge.value,ge.language):Be.appendMarkdown(ge),Z.push(Be)}return Z}else{let Z;switch(S.kind){case ze.MarkupKind.Markdown:return E(S.value);case ze.MarkupKind.PlainText:return Z=E(),Z.appendText(S.value),Z;default:return Z=E(),Z.appendText(`Unsupported Markup content received. Kind is: ${S.kind}`),Z}}}function _(S){if(jr.string(S))return S;switch(S.kind){case ze.MarkupKind.Markdown:return E(S.value);case ze.MarkupKind.PlainText:return S.value;default:return`Unsupported Markup content received. Kind is: ${S.kind}`}}function E(S){let Z=new Pe.MarkdownString(S);return t===!0&&(Z.isTrusted=t),Z}function T(S){if(!!S)return new Pe.Hover(m(S.contents),p(S.range))}function w(S){if(!S)return;if(Array.isArray(S))return S.map(z);let Z=S;return new Pe.CompletionList(Z.items.map(z),Z.isIncomplete)}function R(S){return ze.CompletionItemKind.Text<=S&&S<=ze.CompletionItemKind.TypeParameter?[S-1,void 0]:[Pe.CompletionItemKind.Text,S]}function I(S){switch(S){case ze.CompletionItemTag.Deprecated:return Pe.CompletionItemTag.Deprecated}}function H(S){if(S==null)return[];let Z=[];for(let ge of S){let Be=I(ge);Be!==void 0&&Z.push(Be)}return Z}function z(S){let Z=H(S.tags),ge=new kR.default(S.label);S.detail&&(ge.detail=S.detail),S.documentation&&(ge.documentation=_(S.documentation),ge.documentationFormat=jr.string(S.documentation)?"$string":S.documentation.kind),S.filterText&&(ge.filterText=S.filterText);let Be=K(S);if(Be&&(ge.insertText=Be.text,ge.range=Be.range,ge.fromEdit=Be.fromEdit),jr.number(S.kind)){let[Ye,yt]=R(S.kind);ge.kind=Ye,yt&&(ge.originalItemKind=yt)}return S.sortText&&(ge.sortText=S.sortText),S.additionalTextEdits&&(ge.additionalTextEdits=U(S.additionalTextEdits)),jr.stringArray(S.commitCharacters)&&(ge.commitCharacters=S.commitCharacters.slice()),S.command&&(ge.command=ke(S.command)),(S.deprecated===!0||S.deprecated===!1)&&(ge.deprecated=S.deprecated,S.deprecated===!0&&Z.push(Pe.CompletionItemTag.Deprecated)),(S.preselect===!0||S.preselect===!1)&&(ge.preselect=S.preselect),S.data!==void 0&&(ge.data=S.data),Z.length>0&&(ge.tags=Z),S.insertTextMode!==void 0&&(ge.insertTextMode=S.insertTextMode,S.insertTextMode===Hh.InsertTextMode.asIs&&(ge.keepWhitespace=!0)),ge}function K(S){return S.textEdit?S.insertTextFormat===ze.InsertTextFormat.Snippet?{text:new Pe.SnippetString(S.textEdit.newText),range:J(S.textEdit),fromEdit:!0}:{text:S.textEdit.newText,range:J(S.textEdit),fromEdit:!0}:S.insertText?S.insertTextFormat===ze.InsertTextFormat.Snippet?{text:new Pe.SnippetString(S.insertText),fromEdit:!1}:{text:S.insertText,fromEdit:!1}:void 0}function J(S){return ze.InsertReplaceEdit.is(S)?{inserting:p(S.insert),replacing:p(S.replace)}:p(S.range)}function te(S){if(!!S)return new Pe.TextEdit(p(S.range),S.newText)}function U(S){if(!!S)return S.map(te)}function V(S){if(!S)return;let Z=new Pe.SignatureHelp;return jr.number(S.activeSignature)?Z.activeSignature=S.activeSignature:Z.activeSignature=0,jr.number(S.activeParameter)?Z.activeParameter=S.activeParameter:Z.activeParameter=0,S.signatures&&(Z.signatures=Q(S.signatures)),Z}function Q(S){return S.map(ne)}function ne(S){let Z=new Pe.SignatureInformation(S.label);return S.documentation!==void 0&&(Z.documentation=_(S.documentation)),S.parameters!==void 0&&(Z.parameters=ve(S.parameters)),S.activeParameter!==void 0&&(Z.activeParameter=S.activeParameter),Z}function ve(S){return S.map(de)}function de(S){let Z=new Pe.ParameterInformation(S.label);return S.documentation&&(Z.documentation=_(S.documentation)),Z}function X(S){if(!!S)return new Pe.Location(n(S.uri),p(S.range))}function ce(S){if(!!S)return he(S)}function ie(S){if(!!S)return he(S)}function pe(S){if(!S)return;let Z={targetUri:n(S.targetUri),targetRange:p(S.targetRange),originSelectionRange:p(S.originSelectionRange),targetSelectionRange:p(S.targetSelectionRange)};if(!Z.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return Z}function he(S){if(!!S)return jr.array(S)?S.length===0?[]:ze.LocationLink.is(S[0])?S.map(ge=>pe(ge)):S.map(ge=>X(ge)):ze.LocationLink.is(S)?[pe(S)]:X(S)}function be(S){if(!!S)return S.map(Z=>X(Z))}function _e(S){if(!!S)return S.map(Ue)}function Ue(S){let Z=new Pe.DocumentHighlight(p(S.range));return jr.number(S.kind)&&(Z.kind=Qe(S.kind)),Z}function Qe(S){switch(S){case ze.DocumentHighlightKind.Text:return Pe.DocumentHighlightKind.Text;case ze.DocumentHighlightKind.Read:return Pe.DocumentHighlightKind.Read;case ze.DocumentHighlightKind.Write:return Pe.DocumentHighlightKind.Write}return Pe.DocumentHighlightKind.Text}function Ke(S,Z){if(!!S)return S.map(ge=>lt(ge,Z))}function je(S){return S<=ze.SymbolKind.TypeParameter?S-1:Pe.SymbolKind.Property}function xe(S){switch(S){case ze.SymbolTag.Deprecated:return Pe.SymbolTag.Deprecated;default:return}}function it(S){if(S==null)return;let Z=[];for(let ge of S){let Be=xe(ge);Be!==void 0&&Z.push(Be)}return Z.length===0?void 0:Z}function lt(S,Z){let ge=new Pe.SymbolInformation(S.name,je(S.kind),p(S.location.range),S.location.uri?n(S.location.uri):Z);return Ae(ge,S),S.containerName&&(ge.containerName=S.containerName),ge}function Oe(S){if(S!=null)return S.map(me)}function me(S){let Z=new Pe.DocumentSymbol(S.name,S.detail||"",je(S.kind),p(S.range),p(S.selectionRange));if(Ae(Z,S),S.children!==void 0&&S.children.length>0){let ge=[];for(let Be of S.children)ge.push(me(Be));Z.children=ge}return Z}function Ae(S,Z){S.tags=it(Z.tags),Z.deprecated&&(S.tags?S.tags.includes(Pe.SymbolTag.Deprecated)||(S.tags=S.tags.concat(Pe.SymbolTag.Deprecated)):S.tags=[Pe.SymbolTag.Deprecated])}function ke(S){let Z={title:S.title,command:S.command};return S.arguments&&(Z.arguments=S.arguments),Z}function ir(S){if(!!S)return S.map(ke)}let ct=new Map;ct.set(ze.CodeActionKind.Empty,Pe.CodeActionKind.Empty),ct.set(ze.CodeActionKind.QuickFix,Pe.CodeActionKind.QuickFix),ct.set(ze.CodeActionKind.Refactor,Pe.CodeActionKind.Refactor),ct.set(ze.CodeActionKind.RefactorExtract,Pe.CodeActionKind.RefactorExtract),ct.set(ze.CodeActionKind.RefactorInline,Pe.CodeActionKind.RefactorInline),ct.set(ze.CodeActionKind.RefactorRewrite,Pe.CodeActionKind.RefactorRewrite),ct.set(ze.CodeActionKind.Source,Pe.CodeActionKind.Source),ct.set(ze.CodeActionKind.SourceOrganizeImports,Pe.CodeActionKind.SourceOrganizeImports);function re(S){if(S==null)return;let Z=ct.get(S);if(Z)return Z;let ge=S.split(".");Z=Pe.CodeActionKind.Empty;for(let Be of ge)Z=Z.append(Be);return Z}function er(S){if(S!=null)return S.map(Z=>re(Z))}function or(S){if(S==null)return;let Z=new LR.default(S.title,S.data);return S.kind!==void 0&&(Z.kind=re(S.kind)),S.diagnostics!==void 0&&(Z.diagnostics=a(S.diagnostics)),S.edit!==void 0&&(Z.edit=xt(S.edit)),S.command!==void 0&&(Z.command=ke(S.command)),S.isPreferred!==void 0&&(Z.isPreferred=S.isPreferred),S.disabled!==void 0&&(Z.disabled={reason:S.disabled.reason}),Z}function gt(S){if(!S)return;let Z=new MR.default(p(S.range));return S.command&&(Z.command=ke(S.command)),S.data!==void 0&&S.data!==null&&(Z.data=S.data),Z}function tt(S){if(!!S)return S.map(Z=>gt(Z))}function xt(S){if(!S)return;let Z=new Map;if(S.changeAnnotations!==void 0)for(let Ye of Object.keys(S.changeAnnotations)){let yt=dt(S.changeAnnotations[Ye]);Z.set(Ye,yt)}let ge=Ye=>{if(Ye!==void 0)return Z.get(Ye)},Be=new Pe.WorkspaceEdit;if(S.documentChanges)for(let Ye of S.documentChanges)if(ze.CreateFile.is(Ye))Be.createFile(n(Ye.uri),Ye.options,ge(Ye.annotationId));else if(ze.RenameFile.is(Ye))Be.renameFile(n(Ye.oldUri),n(Ye.newUri),Ye.options,ge(Ye.annotationId));else if(ze.DeleteFile.is(Ye))Be.deleteFile(n(Ye.uri),Ye.options,ge(Ye.annotationId));else if(ze.TextDocumentEdit.is(Ye)){let yt=n(Ye.textDocument.uri);for(let pr of Ye.edits)Hh.AnnotatedTextEdit.is(pr)?Be.replace(yt,p(pr.range),pr.newText,ge(pr.annotationId)):Be.replace(yt,p(pr.range),pr.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(Ye,void 0,4)}`);else S.changes&&Object.keys(S.changes).forEach(Ye=>{Be.set(n(Ye),U(S.changes[Ye]))});return Be}function dt(S){if(S!==void 0)return{label:S.label,needsConfirmation:!!S.needsConfirmation,description:S.description}}function Ht(S){let Z=p(S.range),ge=S.target?o(S.target):void 0,Be=new qR.default(Z,ge);return S.tooltip!==void 0&&(Be.tooltip=S.tooltip),S.data!==void 0&&S.data!==null&&(Be.data=S.data),Be}function Pt(S){if(!!S)return S.map(Ht)}function M(S){return new Pe.Color(S.red,S.green,S.blue,S.alpha)}function N(S){return new Pe.ColorInformation(p(S.range),M(S.color))}function P(S){if(Array.isArray(S))return S.map(N)}function q(S){let Z=new Pe.ColorPresentation(S.label);return Z.additionalTextEdits=U(S.additionalTextEdits),S.textEdit&&(Z.textEdit=te(S.textEdit)),Z}function F(S){if(Array.isArray(S))return S.map(q)}function y(S){if(S)switch(S){case ze.FoldingRangeKind.Comment:return Pe.FoldingRangeKind.Comment;case ze.FoldingRangeKind.Imports:return Pe.FoldingRangeKind.Imports;case ze.FoldingRangeKind.Region:return Pe.FoldingRangeKind.Region}}function b(S){return new Pe.FoldingRange(S.startLine,S.endLine,y(S.kind))}function L(S){if(Array.isArray(S))return S.map(b)}function G(S){return new Pe.SelectionRange(p(S.range),S.parent?G(S.parent):void 0)}function ue(S){if(!Array.isArray(S))return[];let Z=[];for(let ge of S)Z.push(G(ge));return Z}function fe(S){if(S===null)return;let Z=new jR.default(je(S.kind),S.name,S.detail||"",o(S.uri),p(S.range),p(S.selectionRange),S.data);return S.tags!==void 0&&(Z.tags=it(S.tags)),Z}function Re(S){if(S!==null)return S.map(Z=>fe(Z))}function ye(S){return new Pe.CallHierarchyIncomingCall(fe(S.from),f(S.fromRanges))}function Fe(S){if(S!==null)return S.map(Z=>ye(Z))}function le(S){return new Pe.CallHierarchyOutgoingCall(fe(S.to),f(S.fromRanges))}function Me(S){if(S!==null)return S.map(Z=>le(Z))}function Nt(S){if(S!=null)return new Pe.SemanticTokens(new Uint32Array(S.data),S.resultId)}function De(S){return new Pe.SemanticTokensEdit(S.start,S.deleteCount,S.data!==void 0?new Uint32Array(S.data):void 0)}function $t(S){if(S!=null)return new Pe.SemanticTokensEdits(S.edits.map(De),S.resultId)}function Vr(S){return S}function Gr(S){if(S!=null)return new Pe.LinkedEditingRanges(f(S.ranges),Wr(S.wordPattern))}function Wr(S){if(S!=null)return new RegExp(S)}return{asUri:o,asDiagnostics:a,asDiagnostic:i,asRange:p,asRanges:f,asPosition:l,asDiagnosticSeverity:g,asDiagnosticTag:d,asHover:T,asCompletionResult:w,asCompletionItem:z,asTextEdit:te,asTextEdits:U,asSignatureHelp:V,asSignatureInformations:Q,asSignatureInformation:ne,asParameterInformations:ve,asParameterInformation:de,asDeclarationResult:ce,asDefinitionResult:ie,asLocation:X,asReferences:be,asDocumentHighlights:_e,asDocumentHighlight:Ue,asDocumentHighlightKind:Qe,asSymbolKind:je,asSymbolTag:xe,asSymbolTags:it,asSymbolInformations:Ke,asSymbolInformation:lt,asDocumentSymbols:Oe,asDocumentSymbol:me,asCommand:ke,asCommands:ir,asCodeAction:or,asCodeActionKind:re,asCodeActionKinds:er,asCodeLens:gt,asCodeLenses:tt,asWorkspaceEdit:xt,asDocumentLink:Ht,asDocumentLinks:Pt,asFoldingRangeKind:y,asFoldingRange:b,asFoldingRanges:L,asColor:M,asColorInformation:N,asColorInformations:P,asColorPresentation:q,asColorPresentations:F,asSelectionRange:G,asSelectionRanges:ue,asSemanticTokensLegend:Vr,asSemanticTokens:Nt,asSemanticTokensEdit:De,asSemanticTokensEdits:$t,asCallHierarchyItem:fe,asCallHierarchyItems:Re,asCallHierarchyIncomingCall:ye,asCallHierarchyIncomingCalls:Fe,asCallHierarchyOutgoingCall:le,asCallHierarchyOutgoingCalls:Me,asLinkedEditingRanges:Gr}}Jo.createConverter=FR});var Bh=ee(Zo=>{"use strict";Object.defineProperty(Zo,"__esModule",{value:!0});Zo.Delayer=void 0;var Uh=Rt(),tu=class{constructor(t){this.defaultDelay=t,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(t,r=this.defaultDelay){return this.task=t,r>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(n=>{this.onSuccess=n}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var n=this.task();return this.task=void 0,n})),(r>=0||this.timeout===void 0)&&(this.timeout=Uh.RAL().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},r>=0?r:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let t=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,t}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(Uh.RAL().timer.clearTimeout(this.timeout),this.timeout=void 0)}};Zo.Delayer=tu});var es=ee(Dr=>{"use strict";Object.defineProperty(Dr,"__esModule",{value:!0});Dr.generateUuid=Dr.parse=Dr.isUUID=Dr.v4=Dr.empty=void 0;var no=class{constructor(t){this._value=t}asHex(){return this._value}equals(t){return this.asHex()===t.asHex()}},We=class extends no{constructor(){super([We._randomHex(),We._randomHex(),We._randomHex(),We._randomHex(),We._randomHex(),We._randomHex(),We._randomHex(),We._randomHex(),"-",We._randomHex(),We._randomHex(),We._randomHex(),We._randomHex(),"-","4",We._randomHex(),We._randomHex(),We._randomHex(),"-",We._oneOf(We._timeHighBits),We._randomHex(),We._randomHex(),We._randomHex(),"-",We._randomHex(),We._randomHex(),We._randomHex(),We._randomHex(),We._randomHex(),We._randomHex(),We._randomHex(),We._randomHex(),We._randomHex(),We._randomHex(),We._randomHex(),We._randomHex()].join(""))}static _oneOf(t){return t[Math.floor(t.length*Math.random())]}static _randomHex(){return We._oneOf(We._chars)}};We._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];We._timeHighBits=["8","9","a","b"];Dr.empty=new no("00000000-0000-0000-0000-000000000000");function Vh(){return new We}Dr.v4=Vh;var HR=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Gh(e){return HR.test(e)}Dr.isUUID=Gh;function $R(e){if(!Gh(e))throw new Error("invalid uuid");return new no(e)}Dr.parse=$R;function UR(){return Vh().asHex()}Dr.generateUuid=UR});var nu=ee(ts=>{"use strict";Object.defineProperty(ts,"__esModule",{value:!0});ts.ProgressPart=void 0;var Wh=require("vscode"),Kh=Rt(),zh=cn(),ru=class{constructor(t,r,n){this._client=t,this._token=r,this._reported=0,this._disposable=this._client.onProgress(Kh.WorkDoneProgress.type,this._token,o=>{switch(o.kind){case"begin":this.begin(o);break;case"report":this.report(o);break;case"end":this.done(),n&&n(this);break}})}begin(t){Wh.window.withProgress({location:Wh.ProgressLocation.Window,cancellable:t.cancellable,title:t.title},async(r,n)=>(this._progress=r,this._infinite=t.percentage===void 0,this._cancellationToken=n,this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(Kh.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(t),new Promise((o,a)=>{this._resolve=o,this._reject=a})))}report(t){if(this._infinite&&zh.string(t.message))this._progress.report({message:t.message});else if(zh.number(t.percentage)){let r=Math.max(0,Math.min(t.percentage,100)),n=Math.max(0,r-this._reported);this._progress.report({message:t.message,increment:n}),this._reported+=n}}cancel(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._reject&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._resolve&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}};ts.ProgressPart=ru});var yr=ee(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.BaseLanguageClient=Dt.MessageTransports=Dt.TextDocumentFeature=Dt.State=Dt.RevealOutputChannelOn=Dt.CloseAction=Dt.ErrorAction=void 0;var Ce=require("vscode"),j=Rt(),BR=Mc(),VR=jh(),GR=$h(),ft=cn(),Xh=Bh(),ht=es(),WR=nu(),iu=class{error(t){j.RAL().console.error(t)}warn(t){j.RAL().console.warn(t)}info(t){j.RAL().console.info(t)}log(t){j.RAL().console.log(t)}};function KR(e,t,r,n,o){let a=new iu,i=j.createProtocolConnection(e,t,a,o);return i.onError(c=>{r(c[0],c[1],c[2])}),i.onClose(n),{listen:()=>i.listen(),sendRequest:(c,...u)=>i.sendRequest(ft.string(c)?c:c.method,...u),onRequest:(c,u)=>i.onRequest(ft.string(c)?c:c.method,u),sendNotification:(c,u)=>i.sendNotification(ft.string(c)?c:c.method,u),onNotification:(c,u)=>i.onNotification(ft.string(c)?c:c.method,u),onProgress:i.onProgress,sendProgress:i.sendProgress,trace:(c,u,d)=>{let l={sendNotification:!1,traceFormat:j.TraceFormat.Text};d===void 0?i.trace(c,u,l):(ft.boolean(d),i.trace(c,u,d))},initialize:c=>i.sendRequest(j.InitializeRequest.type,c),shutdown:()=>i.sendRequest(j.ShutdownRequest.type,void 0),exit:()=>i.sendNotification(j.ExitNotification.type),onLogMessage:c=>i.onNotification(j.LogMessageNotification.type,c),onShowMessage:c=>i.onNotification(j.ShowMessageNotification.type,c),onTelemetry:c=>i.onNotification(j.TelemetryEventNotification.type,c),didChangeConfiguration:c=>i.sendNotification(j.DidChangeConfigurationNotification.type,c),didChangeWatchedFiles:c=>i.sendNotification(j.DidChangeWatchedFilesNotification.type,c),didOpenTextDocument:c=>i.sendNotification(j.DidOpenTextDocumentNotification.type,c),didChangeTextDocument:c=>i.sendNotification(j.DidChangeTextDocumentNotification.type,c),didCloseTextDocument:c=>i.sendNotification(j.DidCloseTextDocumentNotification.type,c),didSaveTextDocument:c=>i.sendNotification(j.DidSaveTextDocumentNotification.type,c),onDiagnostics:c=>i.onNotification(j.PublishDiagnosticsNotification.type,c),end:()=>i.end(),dispose:()=>i.dispose()}}var ns;(function(e){e[e.Continue=1]="Continue",e[e.Shutdown=2]="Shutdown"})(ns=Dt.ErrorAction||(Dt.ErrorAction={}));var Bn;(function(e){e[e.DoNotRestart=1]="DoNotRestart",e[e.Restart=2]="Restart"})(Bn=Dt.CloseAction||(Dt.CloseAction={}));var ou=class{constructor(t,r){this.name=t,this.maxRestartCount=r,this.restarts=[]}error(t,r,n){return n&&n<=3?ns.Continue:ns.Shutdown}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?Bn.Restart:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?(Ce.window.showErrorMessage(`The ${this.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted.`),Bn.DoNotRestart):(this.restarts.shift(),Bn.Restart)}},io;(function(e){e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error",e[e.Never=4]="Never"})(io=Dt.RevealOutputChannelOn||(Dt.RevealOutputChannelOn={}));var rs;(function(e){e[e.Stopped=1]="Stopped",e[e.Starting=3]="Starting",e[e.Running=2]="Running"})(rs=Dt.State||(Dt.State={}));var Tt;(function(e){e[e.Initial=0]="Initial",e[e.Starting=1]="Starting",e[e.StartFailed=2]="StartFailed",e[e.Running=3]="Running",e[e.Stopping=4]="Stopping",e[e.Stopped=5]="Stopped"})(Tt||(Tt={}));var Yh=[j.SymbolKind.File,j.SymbolKind.Module,j.SymbolKind.Namespace,j.SymbolKind.Package,j.SymbolKind.Class,j.SymbolKind.Method,j.SymbolKind.Property,j.SymbolKind.Field,j.SymbolKind.Constructor,j.SymbolKind.Enum,j.SymbolKind.Interface,j.SymbolKind.Function,j.SymbolKind.Variable,j.SymbolKind.Constant,j.SymbolKind.String,j.SymbolKind.Number,j.SymbolKind.Boolean,j.SymbolKind.Array,j.SymbolKind.Object,j.SymbolKind.Key,j.SymbolKind.Null,j.SymbolKind.EnumMember,j.SymbolKind.Struct,j.SymbolKind.Event,j.SymbolKind.Operator,j.SymbolKind.TypeParameter],zR=[j.CompletionItemKind.Text,j.CompletionItemKind.Method,j.CompletionItemKind.Function,j.CompletionItemKind.Constructor,j.CompletionItemKind.Field,j.CompletionItemKind.Variable,j.CompletionItemKind.Class,j.CompletionItemKind.Interface,j.CompletionItemKind.Module,j.CompletionItemKind.Property,j.CompletionItemKind.Unit,j.CompletionItemKind.Value,j.CompletionItemKind.Enum,j.CompletionItemKind.Keyword,j.CompletionItemKind.Snippet,j.CompletionItemKind.Color,j.CompletionItemKind.File,j.CompletionItemKind.Reference,j.CompletionItemKind.Folder,j.CompletionItemKind.EnumMember,j.CompletionItemKind.Constant,j.CompletionItemKind.Struct,j.CompletionItemKind.Event,j.CompletionItemKind.Operator,j.CompletionItemKind.TypeParameter],Qh=[j.SymbolTag.Deprecated];function Ie(e,t){return e[t]===void 0&&(e[t]={}),e[t]}var oo;(function(e){function t(r){let n=Ce.workspace.getConfiguration("files",r);return{trimTrailingWhitespace:n.get("trimTrailingWhitespace"),trimFinalNewlines:n.get("trimFinalNewlines"),insertFinalNewline:n.get("insertFinalNewline")}}e.fromConfiguration=t})(oo||(oo={}));var su;(function(e){function t(r){let n=r;return n&&ft.func(n.register)&&ft.func(n.unregister)&&ft.func(n.dispose)&&n.registrationType!==void 0}e.is=t})(su||(su={}));var Fr=class{constructor(t,r,n,o,a,i){this._client=t,this._event=r,this._type=n,this._middleware=o,this._createParams=a,this._selectorFilter=i,this._selectors=new Map}static textDocumentFilter(t,r){for(let n of t)if(Ce.languages.match(n,r))return!0;return!1}register(t){!t.registerOptions.documentSelector||(this._listener||(this._listener=this._event(this.callback,this)),this._selectors.set(t.id,t.registerOptions.documentSelector))}callback(t){(!this._selectorFilter||this._selectorFilter(this._selectors.values(),t))&&(this._middleware?this._middleware(t,r=>this._client.sendNotification(this._type,this._createParams(r))):this._client.sendNotification(this._type,this._createParams(t)),this.notificationSent(t))}notificationSent(t){}unregister(t){this._selectors.delete(t),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(t){for(let r of this._selectors.values())if(Ce.languages.match(r,t))return{send:n=>{this.callback(n)}}}},au=class extends Fr{constructor(t,r){super(t,Ce.workspace.onDidOpenTextDocument,j.DidOpenTextDocumentNotification.type,t.clientOptions.middleware.didOpen,n=>t.code2ProtocolConverter.asOpenTextDocumentParams(n),Fr.textDocumentFilter),this._syncedDocuments=r}fillClientCapabilities(t){Ie(Ie(t,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(t,r){let n=t.resolvedTextDocumentSync;r&&n&&n.openClose&&this.register({id:ht.generateUuid(),registerOptions:{documentSelector:r}})}get registrationType(){return j.DidOpenTextDocumentNotification.type}register(t){if(super.register(t),!t.registerOptions.documentSelector)return;let r=t.registerOptions.documentSelector;Ce.workspace.textDocuments.forEach(n=>{let o=n.uri.toString();if(!this._syncedDocuments.has(o)&&Ce.languages.match(r,n)){let a=this._client.clientOptions.middleware,i=s=>{this._client.sendNotification(this._type,this._createParams(s))};a.didOpen?a.didOpen(n,i):i(n),this._syncedDocuments.set(o,n)}})}notificationSent(t){super.notificationSent(t),this._syncedDocuments.set(t.uri.toString(),t)}},cu=class extends Fr{constructor(t,r){super(t,Ce.workspace.onDidCloseTextDocument,j.DidCloseTextDocumentNotification.type,t.clientOptions.middleware.didClose,n=>t.code2ProtocolConverter.asCloseTextDocumentParams(n),Fr.textDocumentFilter),this._syncedDocuments=r}get registrationType(){return j.DidCloseTextDocumentNotification.type}fillClientCapabilities(t){Ie(Ie(t,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(t,r){let n=t.resolvedTextDocumentSync;r&&n&&n.openClose&&this.register({id:ht.generateUuid(),registerOptions:{documentSelector:r}})}notificationSent(t){super.notificationSent(t),this._syncedDocuments.delete(t.uri.toString())}unregister(t){let r=this._selectors.get(t);super.unregister(t);let n=this._selectors.values();this._syncedDocuments.forEach(o=>{if(Ce.languages.match(r,o)&&!this._selectorFilter(n,o)){let a=this._client.clientOptions.middleware,i=s=>{this._client.sendNotification(this._type,this._createParams(s))};this._syncedDocuments.delete(o.uri.toString()),a.didClose?a.didClose(o,i):i(o)}})}},uu=class{constructor(t){this._client=t,this._changeData=new Map,this._forcingDelivery=!1}get registrationType(){return j.DidChangeTextDocumentNotification.type}fillClientCapabilities(t){Ie(Ie(t,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(t,r){let n=t.resolvedTextDocumentSync;r&&n&&n.change!==void 0&&n.change!==j.TextDocumentSyncKind.None&&this.register({id:ht.generateUuid(),registerOptions:Object.assign({},{documentSelector:r},{syncKind:n.change})})}register(t){!t.registerOptions.documentSelector||(this._listener||(this._listener=Ce.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(t.id,{documentSelector:t.registerOptions.documentSelector,syncKind:t.registerOptions.syncKind}))}callback(t){if(t.contentChanges.length!==0){for(let r of this._changeData.values())if(Ce.languages.match(r.documentSelector,t.document)){let n=this._client.clientOptions.middleware;if(r.syncKind===j.TextDocumentSyncKind.Incremental){let o=this._client.code2ProtocolConverter.asChangeTextDocumentParams(t);n.didChange?n.didChange(t,()=>this._client.sendNotification(j.DidChangeTextDocumentNotification.type,o)):this._client.sendNotification(j.DidChangeTextDocumentNotification.type,o)}else if(r.syncKind===j.TextDocumentSyncKind.Full){let o=a=>{this._changeDelayer?(this._changeDelayer.uri!==a.document.uri.toString()&&(this.forceDelivery(),this._changeDelayer.uri=a.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(j.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(a.document))})):(this._changeDelayer={uri:a.document.uri.toString(),delayer:new Xh.Delayer(200)},this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(j.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(a.document))},-1))};n.didChange?n.didChange(t,o):o(t)}}}}unregister(t){this._changeData.delete(t),this._changeData.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}forceDelivery(){if(!(this._forcingDelivery||!this._changeDelayer))try{this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}getProvider(t){for(let r of this._changeData.values())if(Ce.languages.match(r.documentSelector,t))return{send:n=>{this.callback(n)}}}},lu=class extends Fr{constructor(t){super(t,Ce.workspace.onWillSaveTextDocument,j.WillSaveTextDocumentNotification.type,t.clientOptions.middleware.willSave,r=>t.code2ProtocolConverter.asWillSaveTextDocumentParams(r),(r,n)=>Fr.textDocumentFilter(r,n.document))}get registrationType(){return j.WillSaveTextDocumentNotification.type}fillClientCapabilities(t){let r=Ie(Ie(t,"textDocument"),"synchronization");r.willSave=!0}initialize(t,r){let n=t.resolvedTextDocumentSync;r&&n&&n.willSave&&this.register({id:ht.generateUuid(),registerOptions:{documentSelector:r}})}},du=class{constructor(t){this._client=t,this._selectors=new Map}get registrationType(){return j.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(t){let r=Ie(Ie(t,"textDocument"),"synchronization");r.willSaveWaitUntil=!0}initialize(t,r){let n=t.resolvedTextDocumentSync;r&&n&&n.willSaveWaitUntil&&this.register({id:ht.generateUuid(),registerOptions:{documentSelector:r}})}register(t){!t.registerOptions.documentSelector||(this._listener||(this._listener=Ce.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(t.id,t.registerOptions.documentSelector))}callback(t){if(Fr.textDocumentFilter(this._selectors.values(),t.document)){let r=this._client.clientOptions.middleware,n=o=>this._client.sendRequest(j.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(o)).then(a=>{let i=this._client.protocol2CodeConverter.asTextEdits(a);return i===void 0?[]:i});t.waitUntil(r.willSaveWaitUntil?r.willSaveWaitUntil(t,n):n(t))}}unregister(t){this._selectors.delete(t),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}},pu=class extends Fr{constructor(t){super(t,Ce.workspace.onDidSaveTextDocument,j.DidSaveTextDocumentNotification.type,t.clientOptions.middleware.didSave,r=>t.code2ProtocolConverter.asSaveTextDocumentParams(r,this._includeText),Fr.textDocumentFilter),this._includeText=!1}get registrationType(){return j.DidSaveTextDocumentNotification.type}fillClientCapabilities(t){Ie(Ie(t,"textDocument"),"synchronization").didSave=!0}initialize(t,r){let n=t.resolvedTextDocumentSync;if(r&&n&&n.save){let o=typeof n.save=="boolean"?{includeText:!1}:{includeText:!!n.save.includeText};this.register({id:ht.generateUuid(),registerOptions:Object.assign({},{documentSelector:r},o)})}}register(t){this._includeText=!!t.registerOptions.includeText,super.register(t)}},fu=class{constructor(t,r){this._client=t,this._notifyFileEvent=r,this._watchers=new Map}get registrationType(){return j.DidChangeWatchedFilesNotification.type}fillClientCapabilities(t){Ie(Ie(t,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0}initialize(t,r){}register(t){if(!Array.isArray(t.registerOptions.watchers))return;let r=[];for(let n of t.registerOptions.watchers){if(!ft.string(n.globPattern))continue;let o=!0,a=!0,i=!0;n.kind!==void 0&&n.kind!==null&&(o=(n.kind&j.WatchKind.Create)!==0,a=(n.kind&j.WatchKind.Change)!==0,i=(n.kind&j.WatchKind.Delete)!==0);let s=Ce.workspace.createFileSystemWatcher(n.globPattern,!o,!a,!i);this.hookListeners(s,o,a,i),r.push(s)}this._watchers.set(t.id,r)}registerRaw(t,r){let n=[];for(let o of r)this.hookListeners(o,!0,!0,!0,n);this._watchers.set(t,n)}hookListeners(t,r,n,o,a){r&&t.onDidCreate(i=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(i),type:j.FileChangeType.Created}),null,a),n&&t.onDidChange(i=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(i),type:j.FileChangeType.Changed}),null,a),o&&t.onDidDelete(i=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(i),type:j.FileChangeType.Deleted}),null,a)}unregister(t){let r=this._watchers.get(t);if(r)for(let n of r)n.dispose()}dispose(){this._watchers.forEach(t=>{for(let r of t)r.dispose()}),this._watchers.clear()}},Xt=class{constructor(t,r){this._client=t,this._registrationType=r,this._registrations=new Map}get registrationType(){return this._registrationType}register(t){if(!t.registerOptions.documentSelector)return;let r=this.registerLanguageProvider(t.registerOptions);this._registrations.set(t.id,{disposable:r[0],data:t,provider:r[1]})}unregister(t){let r=this._registrations.get(t);r!==void 0&&r.disposable.dispose()}dispose(){this._registrations.forEach(t=>{t.disposable.dispose()}),this._registrations.clear()}getRegistration(t,r){if(r){if(j.TextDocumentRegistrationOptions.is(r)){let n=j.StaticRegistrationOptions.hasId(r)?r.id:ht.generateUuid(),o=r.documentSelector||t;if(o)return[n,Object.assign({},r,{documentSelector:o})]}else if(ft.boolean(r)&&r===!0||j.WorkDoneProgressOptions.is(r)){if(!t)return[void 0,void 0];let n=ft.boolean(r)&&r===!0?{documentSelector:t}:Object.assign({},r,{documentSelector:t});return[ht.generateUuid(),n]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(t,r){if(!(!t||!r))return ft.boolean(r)&&r===!0?{documentSelector:t}:Object.assign({},r,{documentSelector:t})}getProvider(t){for(let r of this._registrations.values()){let n=r.data.registerOptions.documentSelector;if(n!==null&&Ce.languages.match(n,t))return r.provider}}getAllProviders(){let t=[];for(let r of this._registrations.values())t.push(r.provider);return t}};Dt.TextDocumentFeature=Xt;var hu=class{constructor(t,r){this._client=t,this._registrationType=r,this._registrations=new Map}get registrationType(){return this._registrationType}register(t){let r=this.registerLanguageProvider(t.registerOptions);this._registrations.set(t.id,{disposable:r[0],provider:r[1]})}unregister(t){let r=this._registrations.get(t);r!==void 0&&r.disposable.dispose()}dispose(){this._registrations.forEach(t=>{t.disposable.dispose()}),this._registrations.clear()}getProviders(){let t=[];for(let r of this._registrations.values())t.push(r.provider);return t}},gu=class extends Xt{constructor(t){super(t,j.CompletionRequest.type)}fillClientCapabilities(t){let r=Ie(Ie(t,"textDocument"),"completion");r.dynamicRegistration=!0,r.contextSupport=!0,r.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[j.MarkupKind.Markdown,j.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[j.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[j.InsertTextMode.asIs,j.InsertTextMode.adjustIndentation]}},r.completionItemKind={valueSet:zR}}initialize(t,r){let n=this.getRegistrationOptions(r,t.completionProvider);!n||this.register({id:ht.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r=t.triggerCharacters||[],n={provideCompletionItems:(o,a,i,s)=>{let c=this._client,u=this._client.clientOptions.middleware,d=(l,p,f,g)=>c.sendRequest(j.CompletionRequest.type,c.code2ProtocolConverter.asCompletionParams(l,p,f),g).then(c.protocol2CodeConverter.asCompletionResult,m=>c.handleFailedRequest(j.CompletionRequest.type,m,null));return u.provideCompletionItem?u.provideCompletionItem(o,a,s,i,d):d(o,a,s,i)},resolveCompletionItem:t.resolveProvider?(o,a)=>{let i=this._client,s=this._client.clientOptions.middleware,c=(u,d)=>i.sendRequest(j.CompletionResolveRequest.type,i.code2ProtocolConverter.asCompletionItem(u),d).then(i.protocol2CodeConverter.asCompletionItem,l=>i.handleFailedRequest(j.CompletionResolveRequest.type,l,u));return s.resolveCompletionItem?s.resolveCompletionItem(o,a,c):c(o,a)}:void 0};return[Ce.languages.registerCompletionItemProvider(t.documentSelector,n,...r),n]}},mu=class extends Xt{constructor(t){super(t,j.HoverRequest.type)}fillClientCapabilities(t){let r=Ie(Ie(t,"textDocument"),"hover");r.dynamicRegistration=!0,r.contentFormat=[j.MarkupKind.Markdown,j.MarkupKind.PlainText]}initialize(t,r){let n=this.getRegistrationOptions(r,t.hoverProvider);!n||this.register({id:ht.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideHover:(n,o,a)=>{let i=this._client,s=(u,d,l)=>i.sendRequest(j.HoverRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(u,d),l).then(i.protocol2CodeConverter.asHover,p=>i.handleFailedRequest(j.HoverRequest.type,p,null)),c=i.clientOptions.middleware;return c.provideHover?c.provideHover(n,o,a,s):s(n,o,a)}};return[Ce.languages.registerHoverProvider(t.documentSelector,r),r]}},vu=class extends Xt{constructor(t){super(t,j.SignatureHelpRequest.type)}fillClientCapabilities(t){let r=Ie(Ie(t,"textDocument"),"signatureHelp");r.dynamicRegistration=!0,r.signatureInformation={documentationFormat:[j.MarkupKind.Markdown,j.MarkupKind.PlainText]},r.signatureInformation.parameterInformation={labelOffsetSupport:!0},r.signatureInformation.activeParameterSupport=!0,r.contextSupport=!0}initialize(t,r){let n=this.getRegistrationOptions(r,t.signatureHelpProvider);!n||this.register({id:ht.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideSignatureHelp:(o,a,i,s)=>{let c=this._client,u=(l,p,f,g)=>c.sendRequest(j.SignatureHelpRequest.type,c.code2ProtocolConverter.asSignatureHelpParams(l,p,f),g).then(c.protocol2CodeConverter.asSignatureHelp,m=>c.handleFailedRequest(j.SignatureHelpRequest.type,m,null)),d=c.clientOptions.middleware;return d.provideSignatureHelp?d.provideSignatureHelp(o,a,s,i,u):u(o,a,s,i)}},n;if(t.retriggerCharacters===void 0){let o=t.triggerCharacters||[];n=Ce.languages.registerSignatureHelpProvider(t.documentSelector,r,...o)}else{let o={triggerCharacters:t.triggerCharacters||[],retriggerCharacters:t.retriggerCharacters||[]};n=Ce.languages.registerSignatureHelpProvider(t.documentSelector,r,o)}return[n,r]}},_u=class extends Xt{constructor(t){super(t,j.DefinitionRequest.type)}fillClientCapabilities(t){let r=Ie(Ie(t,"textDocument"),"definition");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(t,r){let n=this.getRegistrationOptions(r,t.definitionProvider);!n||this.register({id:ht.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideDefinition:(n,o,a)=>{let i=this._client,s=(u,d,l)=>i.sendRequest(j.DefinitionRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(u,d),l).then(i.protocol2CodeConverter.asDefinitionResult,p=>i.handleFailedRequest(j.DefinitionRequest.type,p,null)),c=i.clientOptions.middleware;return c.provideDefinition?c.provideDefinition(n,o,a,s):s(n,o,a)}};return[Ce.languages.registerDefinitionProvider(t.documentSelector,r),r]}},yu=class extends Xt{constructor(t){super(t,j.ReferencesRequest.type)}fillClientCapabilities(t){Ie(Ie(t,"textDocument"),"references").dynamicRegistration=!0}initialize(t,r){let n=this.getRegistrationOptions(r,t.referencesProvider);!n||this.register({id:ht.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideReferences:(n,o,a,i)=>{let s=this._client,c=(d,l,p,f)=>s.sendRequest(j.ReferencesRequest.type,s.code2ProtocolConverter.asReferenceParams(d,l,p),f).then(s.protocol2CodeConverter.asReferences,g=>s.handleFailedRequest(j.ReferencesRequest.type,g,null)),u=s.clientOptions.middleware;return u.provideReferences?u.provideReferences(n,o,a,i,c):c(n,o,a,i)}};return[Ce.languages.registerReferenceProvider(t.documentSelector,r),r]}},Eu=class extends Xt{constructor(t){super(t,j.DocumentHighlightRequest.type)}fillClientCapabilities(t){Ie(Ie(t,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(t,r){let n=this.getRegistrationOptions(r,t.documentHighlightProvider);!n||this.register({id:ht.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideDocumentHighlights:(n,o,a)=>{let i=this._client,s=(u,d,l)=>i.sendRequest(j.DocumentHighlightRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(u,d),l).then(i.protocol2CodeConverter.asDocumentHighlights,p=>i.handleFailedRequest(j.DocumentHighlightRequest.type,p,null)),c=i.clientOptions.middleware;return c.provideDocumentHighlights?c.provideDocumentHighlights(n,o,a,s):s(n,o,a)}};return[Ce.languages.registerDocumentHighlightProvider(t.documentSelector,r),r]}},bu=class extends Xt{constructor(t){super(t,j.DocumentSymbolRequest.type)}fillClientCapabilities(t){let r=Ie(Ie(t,"textDocument"),"documentSymbol");r.dynamicRegistration=!0,r.symbolKind={valueSet:Yh},r.hierarchicalDocumentSymbolSupport=!0,r.tagSupport={valueSet:Qh},r.labelSupport=!0}initialize(t,r){let n=this.getRegistrationOptions(r,t.documentSymbolProvider);!n||this.register({id:ht.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideDocumentSymbols:(o,a)=>{let i=this._client,s=(u,d)=>i.sendRequest(j.DocumentSymbolRequest.type,i.code2ProtocolConverter.asDocumentSymbolParams(u),d).then(l=>{if(l!==null){if(l.length===0)return[];{let p=l[0];return j.DocumentSymbol.is(p)?i.protocol2CodeConverter.asDocumentSymbols(l):i.protocol2CodeConverter.asSymbolInformations(l)}}},l=>i.handleFailedRequest(j.DocumentSymbolRequest.type,l,null)),c=i.clientOptions.middleware;return c.provideDocumentSymbols?c.provideDocumentSymbols(o,a,s):s(o,a)}},n=t.label!==void 0?{label:t.label}:void 0;return[Ce.languages.registerDocumentSymbolProvider(t.documentSelector,r,n),r]}},Cu=class extends hu{constructor(t){super(t,j.WorkspaceSymbolRequest.type)}fillClientCapabilities(t){let r=Ie(Ie(t,"workspace"),"symbol");r.dynamicRegistration=!0,r.symbolKind={valueSet:Yh},r.tagSupport={valueSet:Qh}}initialize(t){!t.workspaceSymbolProvider||this.register({id:ht.generateUuid(),registerOptions:t.workspaceSymbolProvider===!0?{workDoneProgress:!1}:t.workspaceSymbolProvider})}registerLanguageProvider(t){let r={provideWorkspaceSymbols:(n,o)=>{let a=this._client,i=(c,u)=>a.sendRequest(j.WorkspaceSymbolRequest.type,{query:c},u).then(a.protocol2CodeConverter.asSymbolInformations,d=>a.handleFailedRequest(j.WorkspaceSymbolRequest.type,d,null)),s=a.clientOptions.middleware;return s.provideWorkspaceSymbols?s.provideWorkspaceSymbols(n,o,i):i(n,o)}};return[Ce.languages.registerWorkspaceSymbolProvider(r),r]}},Tu=class extends Xt{constructor(t){super(t,j.CodeActionRequest.type)}fillClientCapabilities(t){let r=Ie(Ie(t,"textDocument"),"codeAction");r.dynamicRegistration=!0,r.isPreferredSupport=!0,r.disabledSupport=!0,r.dataSupport=!0,r.resolveSupport={properties:["edit"]},r.codeActionLiteralSupport={codeActionKind:{valueSet:[j.CodeActionKind.Empty,j.CodeActionKind.QuickFix,j.CodeActionKind.Refactor,j.CodeActionKind.RefactorExtract,j.CodeActionKind.RefactorInline,j.CodeActionKind.RefactorRewrite,j.CodeActionKind.Source,j.CodeActionKind.SourceOrganizeImports]}},r.honorsChangeAnnotations=!1}initialize(t,r){let n=this.getRegistrationOptions(r,t.codeActionProvider);!n||this.register({id:ht.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideCodeActions:(n,o,a,i)=>{let s=this._client,c=(d,l,p,f)=>{let g={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(d),range:s.code2ProtocolConverter.asRange(l),context:s.code2ProtocolConverter.asCodeActionContext(p)};return s.sendRequest(j.CodeActionRequest.type,g,f).then(m=>{if(m===null)return;let _=[];for(let E of m)j.Command.is(E)?_.push(s.protocol2CodeConverter.asCommand(E)):_.push(s.protocol2CodeConverter.asCodeAction(E));return _},m=>s.handleFailedRequest(j.CodeActionRequest.type,m,null))},u=s.clientOptions.middleware;return u.provideCodeActions?u.provideCodeActions(n,o,a,i,c):c(n,o,a,i)},resolveCodeAction:t.resolveProvider?(n,o)=>{let a=this._client,i=this._client.clientOptions.middleware,s=(c,u)=>a.sendRequest(j.CodeActionResolveRequest.type,a.code2ProtocolConverter.asCodeAction(c),u).then(a.protocol2CodeConverter.asCodeAction,d=>a.handleFailedRequest(j.CodeActionResolveRequest.type,d,c));return i.resolveCodeAction?i.resolveCodeAction(n,o,s):s(n,o)}:void 0};return[Ce.languages.registerCodeActionsProvider(t.documentSelector,r,t.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(t.codeActionKinds)}:void 0),r]}},Su=class extends Xt{constructor(t){super(t,j.CodeLensRequest.type)}fillClientCapabilities(t){Ie(Ie(t,"textDocument"),"codeLens").dynamicRegistration=!0,Ie(Ie(t,"workspace"),"codeLens").refreshSupport=!0}initialize(t,r){this._client.onRequest(j.CodeLensRefreshRequest.type,async()=>{for(let a of this.getAllProviders())a.onDidChangeCodeLensEmitter.fire()});let o=this.getRegistrationOptions(r,t.codeLensProvider);!o||this.register({id:ht.generateUuid(),registerOptions:o})}registerLanguageProvider(t){let r=new Ce.EventEmitter,n={onDidChangeCodeLenses:r.event,provideCodeLenses:(o,a)=>{let i=this._client,s=(u,d)=>i.sendRequest(j.CodeLensRequest.type,i.code2ProtocolConverter.asCodeLensParams(u),d).then(i.protocol2CodeConverter.asCodeLenses,l=>i.handleFailedRequest(j.CodeLensRequest.type,l,null)),c=i.clientOptions.middleware;return c.provideCodeLenses?c.provideCodeLenses(o,a,s):s(o,a)},resolveCodeLens:t.resolveProvider?(o,a)=>{let i=this._client,s=(u,d)=>i.sendRequest(j.CodeLensResolveRequest.type,i.code2ProtocolConverter.asCodeLens(u),d).then(i.protocol2CodeConverter.asCodeLens,l=>i.handleFailedRequest(j.CodeLensResolveRequest.type,l,u)),c=i.clientOptions.middleware;return c.resolveCodeLens?c.resolveCodeLens(o,a,s):s(o,a)}:void 0};return[Ce.languages.registerCodeLensProvider(t.documentSelector,n),{provider:n,onDidChangeCodeLensEmitter:r}]}},Ru=class extends Xt{constructor(t){super(t,j.DocumentFormattingRequest.type)}fillClientCapabilities(t){Ie(Ie(t,"textDocument"),"formatting").dynamicRegistration=!0}initialize(t,r){let n=this.getRegistrationOptions(r,t.documentFormattingProvider);!n||this.register({id:ht.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideDocumentFormattingEdits:(n,o,a)=>{let i=this._client,s=(u,d,l)=>{let p={textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(u),options:i.code2ProtocolConverter.asFormattingOptions(d,oo.fromConfiguration(u))};return i.sendRequest(j.DocumentFormattingRequest.type,p,l).then(i.protocol2CodeConverter.asTextEdits,f=>i.handleFailedRequest(j.DocumentFormattingRequest.type,f,null))},c=i.clientOptions.middleware;return c.provideDocumentFormattingEdits?c.provideDocumentFormattingEdits(n,o,a,s):s(n,o,a)}};return[Ce.languages.registerDocumentFormattingEditProvider(t.documentSelector,r),r]}},wu=class extends Xt{constructor(t){super(t,j.DocumentRangeFormattingRequest.type)}fillClientCapabilities(t){Ie(Ie(t,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(t,r){let n=this.getRegistrationOptions(r,t.documentRangeFormattingProvider);!n||this.register({id:ht.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideDocumentRangeFormattingEdits:(n,o,a,i)=>{let s=this._client,c=(d,l,p,f)=>{let g={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(d),range:s.code2ProtocolConverter.asRange(l),options:s.code2ProtocolConverter.asFormattingOptions(p,oo.fromConfiguration(d))};return s.sendRequest(j.DocumentRangeFormattingRequest.type,g,f).then(s.protocol2CodeConverter.asTextEdits,m=>s.handleFailedRequest(j.DocumentRangeFormattingRequest.type,m,null))},u=s.clientOptions.middleware;return u.provideDocumentRangeFormattingEdits?u.provideDocumentRangeFormattingEdits(n,o,a,i,c):c(n,o,a,i)}};return[Ce.languages.registerDocumentRangeFormattingEditProvider(t.documentSelector,r),r]}},Pu=class extends Xt{constructor(t){super(t,j.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(t){Ie(Ie(t,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(t,r){let n=this.getRegistrationOptions(r,t.documentOnTypeFormattingProvider);!n||this.register({id:ht.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideOnTypeFormattingEdits:(o,a,i,s,c)=>{let u=this._client,d=(p,f,g,m,_)=>{let E={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(p),position:u.code2ProtocolConverter.asPosition(f),ch:g,options:u.code2ProtocolConverter.asFormattingOptions(m,oo.fromConfiguration(p))};return u.sendRequest(j.DocumentOnTypeFormattingRequest.type,E,_).then(u.protocol2CodeConverter.asTextEdits,T=>u.handleFailedRequest(j.DocumentOnTypeFormattingRequest.type,T,null))},l=u.clientOptions.middleware;return l.provideOnTypeFormattingEdits?l.provideOnTypeFormattingEdits(o,a,i,s,c,d):d(o,a,i,s,c)}},n=t.moreTriggerCharacter||[];return[Ce.languages.registerOnTypeFormattingEditProvider(t.documentSelector,r,t.firstTriggerCharacter,...n),r]}},Ou=class extends Xt{constructor(t){super(t,j.RenameRequest.type)}fillClientCapabilities(t){let r=Ie(Ie(t,"textDocument"),"rename");r.dynamicRegistration=!0,r.prepareSupport=!0,r.prepareSupportDefaultBehavior=j.PrepareSupportDefaultBehavior.Identifier,r.honorsChangeAnnotations=!0}initialize(t,r){let n=this.getRegistrationOptions(r,t.renameProvider);!n||(ft.boolean(t.renameProvider)&&(n.prepareProvider=!1),this.register({id:ht.generateUuid(),registerOptions:n}))}registerLanguageProvider(t){let r={provideRenameEdits:(n,o,a,i)=>{let s=this._client,c=(d,l,p,f)=>{let g={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(d),position:s.code2ProtocolConverter.asPosition(l),newName:p};return s.sendRequest(j.RenameRequest.type,g,f).then(s.protocol2CodeConverter.asWorkspaceEdit,m=>s.handleFailedRequest(j.RenameRequest.type,m,null))},u=s.clientOptions.middleware;return u.provideRenameEdits?u.provideRenameEdits(n,o,a,i,c):c(n,o,a,i)},prepareRename:t.prepareProvider?(n,o,a)=>{let i=this._client,s=(u,d,l)=>{let p={textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(u),position:i.code2ProtocolConverter.asPosition(d)};return i.sendRequest(j.PrepareRenameRequest.type,p,l).then(f=>j.Range.is(f)?i.protocol2CodeConverter.asRange(f):this.isDefaultBehavior(f)?f.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):f&&j.Range.is(f.range)?{range:i.protocol2CodeConverter.asRange(f.range),placeholder:f.placeholder}:Promise.reject(new Error("The element can't be renamed.")),f=>i.handleFailedRequest(j.PrepareRenameRequest.type,f,void 0))},c=i.clientOptions.middleware;return c.prepareRename?c.prepareRename(n,o,a,s):s(n,o,a)}:void 0};return[Ce.languages.registerRenameProvider(t.documentSelector,r),r]}isDefaultBehavior(t){let r=t;return r&&ft.boolean(r.defaultBehavior)}},Iu=class extends Xt{constructor(t){super(t,j.DocumentLinkRequest.type)}fillClientCapabilities(t){let r=Ie(Ie(t,"textDocument"),"documentLink");r.dynamicRegistration=!0,r.tooltipSupport=!0}initialize(t,r){let n=this.getRegistrationOptions(r,t.documentLinkProvider);!n||this.register({id:ht.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideDocumentLinks:(n,o)=>{let a=this._client,i=(c,u)=>a.sendRequest(j.DocumentLinkRequest.type,a.code2ProtocolConverter.asDocumentLinkParams(c),u).then(a.protocol2CodeConverter.asDocumentLinks,d=>a.handleFailedRequest(j.DocumentLinkRequest.type,d,null)),s=a.clientOptions.middleware;return s.provideDocumentLinks?s.provideDocumentLinks(n,o,i):i(n,o)},resolveDocumentLink:t.resolveProvider?(n,o)=>{let a=this._client,i=(c,u)=>a.sendRequest(j.DocumentLinkResolveRequest.type,a.code2ProtocolConverter.asDocumentLink(c),u).then(a.protocol2CodeConverter.asDocumentLink,d=>a.handleFailedRequest(j.DocumentLinkResolveRequest.type,d,c)),s=a.clientOptions.middleware;return s.resolveDocumentLink?s.resolveDocumentLink(n,o,i):i(n,o)}:void 0};return[Ce.languages.registerDocumentLinkProvider(t.documentSelector,r),r]}},Du=class{constructor(t){this._client=t,this._listeners=new Map}get registrationType(){return j.DidChangeConfigurationNotification.type}fillClientCapabilities(t){Ie(Ie(t,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let t=this._client.clientOptions.synchronize.configurationSection;t!==void 0&&this.register({id:ht.generateUuid(),registerOptions:{section:t}})}register(t){let r=Ce.workspace.onDidChangeConfiguration(n=>{this.onDidChangeConfiguration(t.registerOptions.section,n)});this._listeners.set(t.id,r),t.registerOptions.section!==void 0&&this.onDidChangeConfiguration(t.registerOptions.section,void 0)}unregister(t){let r=this._listeners.get(t);r&&(this._listeners.delete(t),r.dispose())}dispose(){for(let t of this._listeners.values())t.dispose();this._listeners.clear()}onDidChangeConfiguration(t,r){let n;if(ft.string(t)?n=[t]:n=t,n!==void 0&&r!==void 0&&!n.some(s=>r.affectsConfiguration(s)))return;let o=i=>{if(i===void 0){this._client.sendNotification(j.DidChangeConfigurationNotification.type,{settings:null});return}this._client.sendNotification(j.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(i)})},a=this.getMiddleware();a?a(n,o):o(n)}extractSettingsInformation(t){function r(a,i){let s=a;for(let c=0;c<i.length-1;c++){let u=s[i[c]];u||(u=Object.create(null),s[i[c]]=u),s=u}return s}let n=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,o=Object.create(null);for(let a=0;a<t.length;a++){let i=t[a],s=i.indexOf("."),c=null;if(s>=0?c=Ce.workspace.getConfiguration(i.substr(0,s),n).get(i.substr(s+1)):c=Ce.workspace.getConfiguration(void 0,n).get(i),c){let u=t[a].split(".");r(o,u)[u[u.length-1]]=BR.toJSONObject(c)}}return o}getMiddleware(){let t=this._client.clientOptions.middleware;if(t.workspace&&t.workspace.didChangeConfiguration)return t.workspace.didChangeConfiguration}},Au=class{constructor(t){this._client=t,this._commands=new Map}get registrationType(){return j.ExecuteCommandRequest.type}fillClientCapabilities(t){Ie(Ie(t,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(t){!t.executeCommandProvider||this.register({id:ht.generateUuid(),registerOptions:Object.assign({},t.executeCommandProvider)})}register(t){let r=this._client,n=r.clientOptions.middleware,o=(a,i)=>{let s={command:a,arguments:i};return r.sendRequest(j.ExecuteCommandRequest.type,s).then(void 0,c=>r.handleFailedRequest(j.ExecuteCommandRequest.type,c,void 0))};if(t.registerOptions.commands){let a=[];for(let i of t.registerOptions.commands)a.push(Ce.commands.registerCommand(i,(...s)=>n.executeCommand?n.executeCommand(i,s,o):o(i,s)));this._commands.set(t.id,a)}}unregister(t){let r=this._commands.get(t);r&&r.forEach(n=>n.dispose())}dispose(){this._commands.forEach(t=>{t.forEach(r=>r.dispose())}),this._commands.clear()}},XR;(function(e){function t(r){return r&&j.MessageReader.is(r.reader)&&j.MessageWriter.is(r.writer)}e.is=t})(XR=Dt.MessageTransports||(Dt.MessageTransports={}));var is=class{constructor(t,r){this._resolve=t,this._reject=r,this._used=!1}get isUsed(){return this._used}resolve(){this._used=!0,this._resolve()}reject(t){this._used=!0,this._reject(t)}},Vn=class{constructor(t,r,n){var o;this._traceFormat=j.TraceFormat.Text,this._features=[],this._dynamicFeatures=new Map,this._id=t,this._name=r,n=n||{};let a={isTrusted:!1};n.markdown!==void 0&&n.markdown.isTrusted===!0&&(a.isTrusted=!0),this._clientOptions={documentSelector:n.documentSelector||[],synchronize:n.synchronize||{},diagnosticCollectionName:n.diagnosticCollectionName,outputChannelName:n.outputChannelName||this._name,revealOutputChannelOn:n.revealOutputChannelOn||io.Error,stdioEncoding:n.stdioEncoding||"utf8",initializationOptions:n.initializationOptions,initializationFailedHandler:n.initializationFailedHandler,progressOnInitialization:!!n.progressOnInitialization,errorHandler:n.errorHandler||this.createDefaultErrorHandler((o=n.connectionOptions)===null||o===void 0?void 0:o.maxRestartCount),middleware:n.middleware||{},uriConverters:n.uriConverters,workspaceFolder:n.workspaceFolder,connectionOptions:n.connectionOptions,markdown:a},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=Tt.Initial,this._connectionPromise=void 0,this._resolvedConnection=void 0,this._initializeResult=void 0,n.outputChannel?(this._outputChannel=n.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=n.traceOutputChannel,this._listeners=void 0,this._providers=void 0,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new Xh.Delayer(250),this._onReady=new Promise((i,s)=>{this._onReadyCallbacks=new is(i,s)}),this._onStop=void 0,this._telemetryEmitter=new j.Emitter,this._stateChangeEmitter=new j.Emitter,this._trace=j.Trace.Off,this._tracer={log:(i,s)=>{ft.string(i)?this.logTrace(i,s):this.logObjectTrace(i)}},this._c2p=VR.createConverter(n.uriConverters?n.uriConverters.code2Protocol:void 0),this._p2c=GR.createConverter(n.uriConverters?n.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get state(){return this._state}set state(t){let r=this.getPublicState();this._state=t;let n=this.getPublicState();n!==r&&this._stateChangeEmitter.fire({oldState:r,newState:n})}getPublicState(){return this.state===Tt.Running?rs.Running:this.state===Tt.Starting?rs.Starting:rs.Stopped}get initializeResult(){return this._initializeResult}sendRequest(t,...r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(t,...r)}catch(n){throw this.error(`Sending request ${ft.string(t)?t:t.method} failed.`,n),n}}onRequest(t,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{return this._resolvedConnection.onRequest(t,r)}catch(n){throw this.error(`Registering request handler ${ft.string(t)?t:t.method} failed.`,n),n}}sendNotification(t,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendNotification(t,r)}catch(n){throw this.error(`Sending notification ${ft.string(t)?t:t.method} failed.`,n),n}}onNotification(t,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{return this._resolvedConnection.onNotification(t,r)}catch(n){throw this.error(`Registering notification handler ${ft.string(t)?t:t.method} failed.`,n),n}}onProgress(t,r,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{if(j.WorkDoneProgress.is(t)){let o=this._clientOptions.middleware.handleWorkDoneProgress;if(o!==void 0)return this._resolvedConnection.onProgress(t,r,a=>{o(r,a,()=>n(a))})}return this._resolvedConnection.onProgress(t,r,n)}catch(o){throw this.error(`Registering progress handler for token ${r} failed.`,o),o}}sendProgress(t,r,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendProgress(t,r,n)}catch(o){throw this.error(`Sending progress for token ${r} failed.`,o),o}}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=Ce.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(t){if(t!==void 0&&t<0)throw new Error(`Invalid maxRestartCount: ${t}`);return new ou(this._name,t??4)}set trace(t){this._trace=t,this.onReady().then(()=>{this.resolveConnection().then(r=>{r.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})})},()=>{})}data2String(t){if(t instanceof j.ResponseError){let r=t;return`  Message: ${r.message}
  Code: ${r.code} ${r.data?`
`+r.data.toString():""}`}return t instanceof Error?ft.string(t.stack)?t.stack:t.message:ft.string(t)?t:t.toString()}info(t,r,n=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${t}`),r&&this.outputChannel.appendLine(this.data2String(r)),n&&this._clientOptions.revealOutputChannelOn<=io.Info&&this.showNotificationMessage()}warn(t,r,n=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${t}`),r&&this.outputChannel.appendLine(this.data2String(r)),n&&this._clientOptions.revealOutputChannelOn<=io.Warn&&this.showNotificationMessage()}error(t,r,n=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${t}`),r&&this.outputChannel.appendLine(this.data2String(r)),n&&this._clientOptions.revealOutputChannelOn<=io.Error&&this.showNotificationMessage()}showNotificationMessage(){Ce.window.showInformationMessage("A request has failed. See the output for more information.","Go to output").then(()=>{this.outputChannel.show(!0)})}logTrace(t,r){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${t}`),r&&this.traceOutputChannel.appendLine(this.data2String(r))}logObjectTrace(t){t.isLSPMessage&&t.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),t&&this.traceOutputChannel.appendLine(`${JSON.stringify(t)}`)}needsStart(){return this.state===Tt.Initial||this.state===Tt.Stopping||this.state===Tt.Stopped}needsStop(){return this.state===Tt.Starting||this.state===Tt.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===Tt.Running&&!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&&(this._onReady=new Promise((t,r)=>{this._onReadyCallbacks=new is(t,r)})),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?Ce.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):Ce.languages.createDiagnosticCollection()),this.state=Tt.Starting,this.resolveConnection().then(t=>(t.onLogMessage(r=>{switch(r.type){case j.MessageType.Error:this.error(r.message,void 0,!1);break;case j.MessageType.Warning:this.warn(r.message,void 0,!1);break;case j.MessageType.Info:this.info(r.message,void 0,!1);break;default:this.outputChannel.appendLine(r.message)}}),t.onShowMessage(r=>{switch(r.type){case j.MessageType.Error:Ce.window.showErrorMessage(r.message);break;case j.MessageType.Warning:Ce.window.showWarningMessage(r.message);break;case j.MessageType.Info:Ce.window.showInformationMessage(r.message);break;default:Ce.window.showInformationMessage(r.message)}}),t.onRequest(j.ShowMessageRequest.type,r=>{let n;switch(r.type){case j.MessageType.Error:n=Ce.window.showErrorMessage;break;case j.MessageType.Warning:n=Ce.window.showWarningMessage;break;case j.MessageType.Info:n=Ce.window.showInformationMessage;break;default:n=Ce.window.showInformationMessage}let o=r.actions||[];return n(r.message,...o)}),t.onTelemetry(r=>{this._telemetryEmitter.fire(r)}),t.onRequest(j.ShowDocumentRequest.type,async r=>{var n;let o=async i=>{let s=this.protocol2CodeConverter.asUri(i.uri);try{if(i.external===!0)return{success:await Ce.env.openExternal(s)};{let c={};return i.selection!==void 0&&(c.selection=this.protocol2CodeConverter.asRange(i.selection)),i.takeFocus===void 0||i.takeFocus===!1?c.preserveFocus=!0:i.takeFocus===!0&&(c.preserveFocus=!1),await Ce.window.showTextDocument(s,c),{success:!0}}}catch{return{success:!0}}},a=(n=this._clientOptions.middleware.window)===null||n===void 0?void 0:n.showDocument;return a!==void 0?a(r,o):o(r)}),t.listen(),this.initialize(t))).then(void 0,t=>{this.state=Tt.StartFailed,this._onReadyCallbacks.reject(t),this.error("Starting client failed",t),Ce.window.showErrorMessage(`Couldn't start client ${this._name}`)}),new Ce.Disposable(()=>{this.needsStop()&&this.stop()})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(t){this.refreshTrace(t,!1);let r=this._clientOptions.initializationOptions,n=this._clientOptions.workspaceFolder?this._clientOptions.workspaceFolder.uri.fsPath:this._clientGetRootPath(),o={processId:null,clientInfo:{name:Ce.env.appName,version:Ce.version},locale:this.getLocale(),rootPath:n||null,rootUri:n?this._c2p.asUri(Ce.Uri.file(n)):null,capabilities:this.computeClientCapabilities(),initializationOptions:ft.func(r)?r():r,trace:j.Trace.toString(this._trace),workspaceFolders:null};if(this.fillInitializeParams(o),this._clientOptions.progressOnInitialization){let a=ht.generateUuid(),i=new WR.ProgressPart(t,a);return o.workDoneToken=a,this.doInitialize(t,o).then(s=>(i.done(),s),s=>{throw i.cancel(),s})}else return this.doInitialize(t,o)}doInitialize(t,r){return t.initialize(r).then(n=>{this._resolvedConnection=t,this._initializeResult=n,this.state=Tt.Running;let o;return ft.number(n.capabilities.textDocumentSync)?n.capabilities.textDocumentSync===j.TextDocumentSyncKind.None?o={openClose:!1,change:j.TextDocumentSyncKind.None,save:void 0}:o={openClose:!0,change:n.capabilities.textDocumentSync,save:{includeText:!1}}:n.capabilities.textDocumentSync!==void 0&&n.capabilities.textDocumentSync!==null&&(o=n.capabilities.textDocumentSync),this._capabilities=Object.assign({},n.capabilities,{resolvedTextDocumentSync:o}),t.onDiagnostics(a=>this.handleDiagnostics(a)),t.onRequest(j.RegistrationRequest.type,a=>this.handleRegistrationRequest(a)),t.onRequest("client/registerFeature",a=>this.handleRegistrationRequest(a)),t.onRequest(j.UnregistrationRequest.type,a=>this.handleUnregistrationRequest(a)),t.onRequest("client/unregisterFeature",a=>this.handleUnregistrationRequest(a)),t.onRequest(j.ApplyWorkspaceEditRequest.type,a=>this.handleApplyWorkspaceEdit(a)),t.sendNotification(j.InitializedNotification.type,{}),this.hookFileEvents(t),this.hookConfigurationChanged(t),this.initializeFeatures(t),this._onReadyCallbacks.resolve(),n}).then(void 0,n=>{throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(n)?this.initialize(t):(this.stop(),this._onReadyCallbacks.reject(n)):n instanceof j.ResponseError&&n.data&&n.data.retry?Ce.window.showErrorMessage(n.message,{title:"Retry",id:"retry"}).then(o=>{o&&o.id==="retry"?this.initialize(t):(this.stop(),this._onReadyCallbacks.reject(n))}):(n&&n.message&&Ce.window.showErrorMessage(n.message),this.error("Server initialization failed.",n),this.stop(),this._onReadyCallbacks.reject(n)),n})}_clientGetRootPath(){let t=Ce.workspace.workspaceFolders;if(!t||t.length===0)return;let r=t[0];if(r.uri.scheme==="file")return r.uri.fsPath}stop(){return this._initializeResult=void 0,this._connectionPromise?this.state===Tt.Stopping&&this._onStop?this._onStop:(this.state=Tt.Stopping,this.cleanUp(!1),this._onStop=this.resolveConnection().then(t=>t.shutdown().then(()=>{t.exit(),t.end(),t.dispose(),this.state=Tt.Stopped,this.cleanUpChannel(),this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0}))):(this.state=Tt.Stopped,Promise.resolve())}cleanUp(t=!0,r=!0){this._listeners&&(this._listeners.forEach(n=>n.dispose()),this._listeners=void 0),this._providers&&(this._providers.forEach(n=>n.dispose()),this._providers=void 0),this._syncedDocuments&&this._syncedDocuments.clear();for(let n of this._features.values())n.dispose();t&&this.cleanUpChannel(),r&&this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0)}cleanUpChannel(){this._outputChannel&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(t){var r;let n=this;function o(i){n._fileEvents.push(i),n._fileEventDelayer.trigger(()=>{n.onReady().then(()=>{n.resolveConnection().then(s=>{n.isConnectionActive()&&(n.forceDocumentSync(),s.didChangeWatchedFiles({changes:n._fileEvents})),n._fileEvents=[]})},s=>{n.error("Notify file events failed.",s)})})}let a=(r=this.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;a?.didChangeWatchedFile?a.didChangeWatchedFile(t,o):o(t)}forceDocumentSync(){this._didChangeTextDocumentFeature===void 0&&(this._didChangeTextDocumentFeature=this._dynamicFeatures.get(j.DidChangeTextDocumentNotification.type.method)),this._didChangeTextDocumentFeature.forceDelivery()}handleDiagnostics(t){if(!this._diagnostics)return;let r=this._p2c.asUri(t.uri),n=this._p2c.asDiagnostics(t.diagnostics),o=this.clientOptions.middleware;o.handleDiagnostics?o.handleDiagnostics(r,n,(a,i)=>this.setDiagnostics(a,i)):this.setDiagnostics(r,n)}setDiagnostics(t,r){!this._diagnostics||this._diagnostics.set(t,r)}createConnection(){let t=(n,o,a)=>{this.handleConnectionError(n,o,a)},r=()=>{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then(n=>KR(n.reader,n.writer,t,r,this._clientOptions.connectionOptions))}handleConnectionClosed(){if(this.state===Tt.Stopping||this.state===Tt.Stopped)return;try{this._resolvedConnection&&this._resolvedConnection.dispose()}catch{}let t=Bn.DoNotRestart;try{t=this._clientOptions.errorHandler.closed()}catch{}this._connectionPromise=void 0,this._resolvedConnection=void 0,t===Bn.DoNotRestart?(this.error("Connection to server got closed. Server will not be restarted."),this.state===Tt.Starting?(this._onReadyCallbacks.reject(new Error("Connection to server got closed. Server will not be restarted.")),this.state=Tt.StartFailed):this.state=Tt.Stopped,this.cleanUp(!1,!0)):t===Bn.Restart&&(this.info("Connection to server got closed. Server will restart."),this.cleanUp(!1,!1),this.state=Tt.Initial,this.start())}handleConnectionError(t,r,n){this._clientOptions.errorHandler.error(t,r,n)===ns.Shutdown&&(this.error("Connection to server is erroring. Shutting down server."),this.stop())}hookConfigurationChanged(t){Ce.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(t,!0)})}refreshTrace(t,r=!1){let n=Ce.workspace.getConfiguration(this._id),o=j.Trace.Off,a=j.TraceFormat.Text;if(n){let i=n.get("trace.server","off");typeof i=="string"?o=j.Trace.fromString(i):(o=j.Trace.fromString(n.get("trace.server.verbosity","off")),a=j.TraceFormat.fromString(n.get("trace.server.format","text")))}this._trace=o,this._traceFormat=a,t.trace(this._trace,this._tracer,{sendNotification:r,traceFormat:this._traceFormat})}hookFileEvents(t){let r=this._clientOptions.synchronize.fileEvents;if(!r)return;let n;ft.array(r)?n=r:n=[r],n&&this._dynamicFeatures.get(j.DidChangeWatchedFilesNotification.type.method).registerRaw(ht.generateUuid(),n)}registerFeatures(t){for(let r of t)this.registerFeature(r)}registerFeature(t){if(this._features.push(t),su.is(t)){let r=t.registrationType;this._dynamicFeatures.set(r.method,t)}}getFeature(t){return this._dynamicFeatures.get(t)}registerBuiltinFeatures(){this.registerFeature(new Du(this)),this.registerFeature(new au(this,this._syncedDocuments)),this.registerFeature(new uu(this)),this.registerFeature(new lu(this)),this.registerFeature(new du(this)),this.registerFeature(new pu(this)),this.registerFeature(new cu(this,this._syncedDocuments)),this.registerFeature(new fu(this,t=>this.notifyFileEvent(t))),this.registerFeature(new gu(this)),this.registerFeature(new mu(this)),this.registerFeature(new vu(this)),this.registerFeature(new _u(this)),this.registerFeature(new yu(this)),this.registerFeature(new Eu(this)),this.registerFeature(new bu(this)),this.registerFeature(new Cu(this)),this.registerFeature(new Tu(this)),this.registerFeature(new Su(this)),this.registerFeature(new Ru(this)),this.registerFeature(new wu(this)),this.registerFeature(new Pu(this)),this.registerFeature(new Ou(this)),this.registerFeature(new Iu(this)),this.registerFeature(new Au(this))}fillInitializeParams(t){for(let r of this._features)ft.func(r.fillInitializeParams)&&r.fillInitializeParams(t)}computeClientCapabilities(){let t={};Ie(t,"workspace").applyEdit=!0;let r=Ie(Ie(t,"workspace"),"workspaceEdit");r.documentChanges=!0,r.resourceOperations=[j.ResourceOperationKind.Create,j.ResourceOperationKind.Rename,j.ResourceOperationKind.Delete],r.failureHandling=j.FailureHandlingKind.TextOnlyTransactional,r.normalizesLineEndings=!0,r.changeAnnotationSupport={groupsOnLabel:!0};let n=Ie(Ie(t,"textDocument"),"publishDiagnostics");n.relatedInformation=!0,n.versionSupport=!1,n.tagSupport={valueSet:[j.DiagnosticTag.Unnecessary,j.DiagnosticTag.Deprecated]},n.codeDescriptionSupport=!0,n.dataSupport=!0;let o=Ie(t,"window"),a=Ie(o,"showMessage");a.messageActionItem={additionalPropertiesSupport:!0};let i=Ie(o,"showDocument");i.support=!0;let s=Ie(t,"general");s.regularExpressions={engine:"ECMAScript",version:"ES2020"},s.markdown={parser:"marked",version:"1.1.0"};for(let c of this._features)c.fillClientCapabilities(t);return t}initializeFeatures(t){let r=this._clientOptions.documentSelector;for(let n of this._features)n.initialize(this._capabilities,r)}handleRegistrationRequest(t){return new Promise((r,n)=>{for(let o of t.registrations){let a=this._dynamicFeatures.get(o.method);if(a===void 0){n(new Error(`No feature implementation for ${o.method} found. Registration failed.`));return}let i=o.registerOptions||{};i.documentSelector=i.documentSelector||this._clientOptions.documentSelector;let s={id:o.id,registerOptions:i};try{a.register(s)}catch(c){n(c);return}}r()})}handleUnregistrationRequest(t){return new Promise((r,n)=>{for(let o of t.unregisterations){let a=this._dynamicFeatures.get(o.method);if(!a){n(new Error(`No feature implementation for ${o.method} found. Unregistration failed.`));return}a.unregister(o.id)}r()})}handleApplyWorkspaceEdit(t){let r=t.edit,n=new Map;Ce.workspace.textDocuments.forEach(a=>n.set(a.uri.toString(),a));let o=!1;if(r.documentChanges){for(let a of r.documentChanges)if(j.TextDocumentEdit.is(a)&&a.textDocument.version&&a.textDocument.version>=0){let i=n.get(a.textDocument.uri);if(i&&i.version!==a.textDocument.version){o=!0;break}}}return o?Promise.resolve({applied:!1}):ft.asPromise(Ce.workspace.applyEdit(this._p2c.asWorkspaceEdit(t.edit)).then(a=>({applied:a})))}handleFailedRequest(t,r,n){if(r instanceof j.ResponseError){if(r.code===j.LSPErrorCodes.RequestCancelled)throw this.makeCancelError();if(r.code===j.LSPErrorCodes.ContentModified)return n}throw this.error(`Request ${t.method} failed.`,r),r}makeCancelError(){let t=new Error(Vn.Canceled);return t.name=Vn.Canceled,t}};Dt.BaseLanguageClient=Vn;Vn.Canceled="Canceled"});var Zh=ee(ss=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});ss.ColorProviderFeature=void 0;var os=require("vscode"),so=Rt(),YR=yr();function Jh(e,t){return e[t]===void 0&&(e[t]={}),e[t]}var xu=class extends YR.TextDocumentFeature{constructor(t){super(t,so.DocumentColorRequest.type)}fillClientCapabilities(t){Jh(Jh(t,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(t,r){let[n,o]=this.getRegistration(r,t.colorProvider);!n||!o||this.register({id:n,registerOptions:o})}registerLanguageProvider(t){let r={provideColorPresentations:(n,o,a)=>{let i=this._client,s=(u,d,l)=>{let p={color:u,textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(d.document),range:i.code2ProtocolConverter.asRange(d.range)};return i.sendRequest(so.ColorPresentationRequest.type,p,l).then(this.asColorPresentations.bind(this),f=>i.handleFailedRequest(so.ColorPresentationRequest.type,f,null))},c=i.clientOptions.middleware;return c.provideColorPresentations?c.provideColorPresentations(n,o,a,s):s(n,o,a)},provideDocumentColors:(n,o)=>{let a=this._client,i=(c,u)=>{let d={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(c)};return a.sendRequest(so.DocumentColorRequest.type,d,u).then(this.asColorInformations.bind(this),l=>a.handleFailedRequest(so.ColorPresentationRequest.type,l,null))},s=a.clientOptions.middleware;return s.provideDocumentColors?s.provideDocumentColors(n,o,i):i(n,o)}};return[os.languages.registerColorProvider(t.documentSelector,r),r]}asColor(t){return new os.Color(t.red,t.green,t.blue,t.alpha)}asColorInformations(t){return Array.isArray(t)?t.map(r=>new os.ColorInformation(this._client.protocol2CodeConverter.asRange(r.range),this.asColor(r.color))):[]}asColorPresentations(t){return Array.isArray(t)?t.map(r=>{let n=new os.ColorPresentation(r.label);return n.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(r.additionalTextEdits),n.textEdit=this._client.protocol2CodeConverter.asTextEdit(r.textEdit),n}):[]}};ss.ColorProviderFeature=xu});var tg=ee(as=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0});as.ImplementationFeature=void 0;var QR=require("vscode"),Nu=Rt(),JR=yr();function eg(e,t){return e[t]===void 0&&(e[t]={}),e[t]}var ku=class extends JR.TextDocumentFeature{constructor(t){super(t,Nu.ImplementationRequest.type)}fillClientCapabilities(t){let r=eg(eg(t,"textDocument"),"implementation");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(t,r){let[n,o]=this.getRegistration(r,t.implementationProvider);!n||!o||this.register({id:n,registerOptions:o})}registerLanguageProvider(t){let r={provideImplementation:(n,o,a)=>{let i=this._client,s=(u,d,l)=>i.sendRequest(Nu.ImplementationRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(u,d),l).then(i.protocol2CodeConverter.asDefinitionResult,p=>i.handleFailedRequest(Nu.ImplementationRequest.type,p,null)),c=i.clientOptions.middleware;return c.provideImplementation?c.provideImplementation(n,o,a,s):s(n,o,a)}};return[QR.languages.registerImplementationProvider(t.documentSelector,r),r]}};as.ImplementationFeature=ku});var rg=ee(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});us.TypeDefinitionFeature=void 0;var ZR=require("vscode"),Mu=Rt(),ew=yr();function cs(e,t){return e[t]===void 0&&(e[t]={}),e[t]}var qu=class extends ew.TextDocumentFeature{constructor(t){super(t,Mu.TypeDefinitionRequest.type)}fillClientCapabilities(t){cs(cs(t,"textDocument"),"typeDefinition").dynamicRegistration=!0;let r=cs(cs(t,"textDocument"),"typeDefinition");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(t,r){let[n,o]=this.getRegistration(r,t.typeDefinitionProvider);!n||!o||this.register({id:n,registerOptions:o})}registerLanguageProvider(t){let r={provideTypeDefinition:(n,o,a)=>{let i=this._client,s=(u,d,l)=>i.sendRequest(Mu.TypeDefinitionRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(u,d),l).then(i.protocol2CodeConverter.asDefinitionResult,p=>i.handleFailedRequest(Mu.TypeDefinitionRequest.type,p,null)),c=i.clientOptions.middleware;return c.provideTypeDefinition?c.provideTypeDefinition(n,o,a,s):s(n,o,a)}};return[ZR.languages.registerTypeDefinitionProvider(t.documentSelector,r),r]}};us.TypeDefinitionFeature=qu});var ng=ee(pi=>{"use strict";Object.defineProperty(pi,"__esModule",{value:!0});pi.WorkspaceFoldersFeature=pi.arrayDiff=void 0;var tw=es(),ls=require("vscode"),Lu=Rt();function ju(e,t){if(e!==void 0)return e[t]}function Fu(e,t){return e.filter(r=>t.indexOf(r)<0)}pi.arrayDiff=Fu;var Hu=class{constructor(t){this._client=t,this._listeners=new Map}get registrationType(){return Lu.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(t){let r=ls.workspace.workspaceFolders;this.initializeWithFolders(r),r===void 0?t.workspaceFolders=null:t.workspaceFolders=r.map(n=>this.asProtocol(n))}initializeWithFolders(t){this._initialFolders=t}fillClientCapabilities(t){t.workspace=t.workspace||{},t.workspace.workspaceFolders=!0}initialize(t){let r=this._client;r.onRequest(Lu.WorkspaceFoldersRequest.type,a=>{let i=()=>{let c=ls.workspace.workspaceFolders;return c===void 0?null:c.map(d=>this.asProtocol(d))},s=r.clientOptions.middleware.workspace;return s&&s.workspaceFolders?s.workspaceFolders(a,i):i(a)});let n=ju(ju(ju(t,"workspace"),"workspaceFolders"),"changeNotifications"),o;typeof n=="string"?o=n:n===!0&&(o=tw.generateUuid()),o&&this.register({id:o,registerOptions:void 0})}sendInitialEvent(t){if(this._initialFolders&&t){let r=Fu(this._initialFolders,t),n=Fu(t,this._initialFolders);(n.length>0||r.length>0)&&this.doSendEvent(n,r)}else this._initialFolders?this.doSendEvent([],this._initialFolders):t&&this.doSendEvent(t,[])}doSendEvent(t,r){let n={event:{added:t.map(o=>this.asProtocol(o)),removed:r.map(o=>this.asProtocol(o))}};this._client.sendNotification(Lu.DidChangeWorkspaceFoldersNotification.type,n)}register(t){let r=t.id,n=this._client,o=ls.workspace.onDidChangeWorkspaceFolders(a=>{let i=c=>{this.doSendEvent(c.added,c.removed)},s=n.clientOptions.middleware.workspace;s&&s.didChangeWorkspaceFolders?s.didChangeWorkspaceFolders(a,i):i(a)});this._listeners.set(r,o),this.sendInitialEvent(ls.workspace.workspaceFolders)}unregister(t){let r=this._listeners.get(t);r!==void 0&&(this._listeners.delete(t),r.dispose())}dispose(){for(let t of this._listeners.values())t.dispose();this._listeners.clear()}asProtocol(t){return t===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(t.uri),name:t.name}}};pi.WorkspaceFoldersFeature=Hu});var og=ee(ds=>{"use strict";Object.defineProperty(ds,"__esModule",{value:!0});ds.FoldingRangeFeature=void 0;var ao=require("vscode"),fi=Rt(),rw=yr();function ig(e,t){return e[t]===void 0&&(e[t]={}),e[t]}var hi=class extends rw.TextDocumentFeature{constructor(t){super(t,fi.FoldingRangeRequest.type)}fillClientCapabilities(t){let r=ig(ig(t,"textDocument"),"foldingRange");r.dynamicRegistration=!0,r.rangeLimit=5e3,r.lineFoldingOnly=!0}initialize(t,r){let[n,o]=this.getRegistration(r,t.foldingRangeProvider);!n||!o||this.register({id:n,registerOptions:o})}registerLanguageProvider(t){let r={provideFoldingRanges:(n,o,a)=>{let i=this._client,s=(u,d,l)=>{let p={textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(u)};return i.sendRequest(fi.FoldingRangeRequest.type,p,l).then(hi.asFoldingRanges,f=>i.handleFailedRequest(fi.FoldingRangeRequest.type,f,null))},c=i.clientOptions.middleware;return c.provideFoldingRanges?c.provideFoldingRanges(n,o,a,s):s(n,o,a)}};return[ao.languages.registerFoldingRangeProvider(t.documentSelector,r),r]}static asFoldingRangeKind(t){if(t)switch(t){case fi.FoldingRangeKind.Comment:return ao.FoldingRangeKind.Comment;case fi.FoldingRangeKind.Imports:return ao.FoldingRangeKind.Imports;case fi.FoldingRangeKind.Region:return ao.FoldingRangeKind.Region}}static asFoldingRanges(t){return Array.isArray(t)?t.map(r=>new ao.FoldingRange(r.startLine,r.endLine,hi.asFoldingRangeKind(r.kind))):[]}};ds.FoldingRangeFeature=hi});var ag=ee(ps=>{"use strict";Object.defineProperty(ps,"__esModule",{value:!0});ps.DeclarationFeature=void 0;var nw=require("vscode"),$u=Rt(),iw=yr();function sg(e,t){return e[t]===void 0&&(e[t]={}),e[t]}var Uu=class extends iw.TextDocumentFeature{constructor(t){super(t,$u.DeclarationRequest.type)}fillClientCapabilities(t){let r=sg(sg(t,"textDocument"),"declaration");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(t,r){let[n,o]=this.getRegistration(r,t.declarationProvider);!n||!o||this.register({id:n,registerOptions:o})}registerLanguageProvider(t){let r={provideDeclaration:(n,o,a)=>{let i=this._client,s=(u,d,l)=>i.sendRequest($u.DeclarationRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(u,d),l).then(i.protocol2CodeConverter.asDeclarationResult,p=>i.handleFailedRequest($u.DeclarationRequest.type,p,null)),c=i.clientOptions.middleware;return c.provideDeclaration?c.provideDeclaration(n,o,a,s):s(n,o,a)}};return[nw.languages.registerDeclarationProvider(t.documentSelector,r),r]}};ps.DeclarationFeature=Uu});var ug=ee(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});fs.SelectionRangeFeature=void 0;var ow=require("vscode"),Bu=Rt(),sw=yr();function cg(e,t){return e[t]===void 0&&(e[t]=Object.create(null)),e[t]}var Vu=class extends sw.TextDocumentFeature{constructor(t){super(t,Bu.SelectionRangeRequest.type)}fillClientCapabilities(t){let r=cg(cg(t,"textDocument"),"selectionRange");r.dynamicRegistration=!0}initialize(t,r){let[n,o]=this.getRegistration(r,t.selectionRangeProvider);!n||!o||this.register({id:n,registerOptions:o})}registerLanguageProvider(t){let r={provideSelectionRanges:(n,o,a)=>{let i=this._client,s=(u,d,l)=>{let p={textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(u),positions:i.code2ProtocolConverter.asPositions(d)};return i.sendRequest(Bu.SelectionRangeRequest.type,p,l).then(f=>i.protocol2CodeConverter.asSelectionRanges(f),f=>i.handleFailedRequest(Bu.SelectionRangeRequest.type,f,null))},c=i.clientOptions.middleware;return c.provideSelectionRanges?c.provideSelectionRanges(n,o,a,s):s(n,o,a)}};return[ow.languages.registerSelectionRangeProvider(t.documentSelector,r),r]}};fs.SelectionRangeFeature=Vu});var lg=ee(hs=>{"use strict";Object.defineProperty(hs,"__esModule",{value:!0});hs.ProgressFeature=void 0;var aw=Rt(),cw=nu();function uw(e,t){return e[t]===void 0&&(e[t]=Object.create(null)),e[t]}var Gu=class{constructor(t){this._client=t,this.activeParts=new Set}fillClientCapabilities(t){uw(t,"window").workDoneProgress=!0}initialize(){let t=this._client,r=o=>{this.activeParts.delete(o)},n=o=>{this.activeParts.add(new cw.ProgressPart(this._client,o.token,r))};t.onRequest(aw.WorkDoneProgressCreateRequest.type,n)}dispose(){for(let t of this.activeParts)t.done();this.activeParts.clear()}};hs.ProgressFeature=Gu});var pg=ee(gs=>{"use strict";Object.defineProperty(gs,"__esModule",{value:!0});gs.CallHierarchyFeature=void 0;var lw=require("vscode"),Gn=Rt(),dw=yr();function dg(e,t){return e[t]===void 0&&(e[t]={}),e[t]}var Wu=class{constructor(t){this.client=t,this.middleware=t.clientOptions.middleware}prepareCallHierarchy(t,r,n){let o=this.client,a=this.middleware,i=(s,c,u)=>{let d=o.code2ProtocolConverter.asTextDocumentPositionParams(s,c);return o.sendRequest(Gn.CallHierarchyPrepareRequest.type,d,u).then(l=>o.protocol2CodeConverter.asCallHierarchyItems(l),l=>o.handleFailedRequest(Gn.CallHierarchyPrepareRequest.type,l,null))};return a.prepareCallHierarchy?a.prepareCallHierarchy(t,r,n,i):i(t,r,n)}provideCallHierarchyIncomingCalls(t,r){let n=this.client,o=this.middleware,a=(i,s)=>{let c={item:n.code2ProtocolConverter.asCallHierarchyItem(i)};return n.sendRequest(Gn.CallHierarchyIncomingCallsRequest.type,c,s).then(u=>n.protocol2CodeConverter.asCallHierarchyIncomingCalls(u),u=>n.handleFailedRequest(Gn.CallHierarchyIncomingCallsRequest.type,u,null))};return o.provideCallHierarchyIncomingCalls?o.provideCallHierarchyIncomingCalls(t,r,a):a(t,r)}provideCallHierarchyOutgoingCalls(t,r){let n=this.client,o=this.middleware,a=(i,s)=>{let c={item:n.code2ProtocolConverter.asCallHierarchyItem(i)};return n.sendRequest(Gn.CallHierarchyOutgoingCallsRequest.type,c,s).then(u=>n.protocol2CodeConverter.asCallHierarchyOutgoingCalls(u),u=>n.handleFailedRequest(Gn.CallHierarchyOutgoingCallsRequest.type,u,null))};return o.provideCallHierarchyOutgoingCalls?o.provideCallHierarchyOutgoingCalls(t,r,a):a(t,r)}},Ku=class extends dw.TextDocumentFeature{constructor(t){super(t,Gn.CallHierarchyPrepareRequest.type)}fillClientCapabilities(t){let n=dg(dg(t,"textDocument"),"callHierarchy");n.dynamicRegistration=!0}initialize(t,r){let[n,o]=this.getRegistration(r,t.callHierarchyProvider);!n||!o||this.register({id:n,registerOptions:o})}registerLanguageProvider(t){let r=this._client,n=new Wu(r);return[lw.languages.registerCallHierarchyProvider(t.documentSelector,n),n]}};gs.CallHierarchyFeature=Ku});var fg=ee(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});_s.SemanticTokensFeature=void 0;var ms=require("vscode"),pw=yr(),$e=Rt(),fw=cn();function vs(e,t){return e[t]===void 0&&(e[t]={}),e[t]}var zu=class extends pw.TextDocumentFeature{constructor(t){super(t,$e.SemanticTokensRegistrationType.type)}fillClientCapabilities(t){let r=vs(vs(t,"textDocument"),"semanticTokens");r.dynamicRegistration=!0,r.tokenTypes=[$e.SemanticTokenTypes.namespace,$e.SemanticTokenTypes.type,$e.SemanticTokenTypes.class,$e.SemanticTokenTypes.enum,$e.SemanticTokenTypes.interface,$e.SemanticTokenTypes.struct,$e.SemanticTokenTypes.typeParameter,$e.SemanticTokenTypes.parameter,$e.SemanticTokenTypes.variable,$e.SemanticTokenTypes.property,$e.SemanticTokenTypes.enumMember,$e.SemanticTokenTypes.event,$e.SemanticTokenTypes.function,$e.SemanticTokenTypes.method,$e.SemanticTokenTypes.macro,$e.SemanticTokenTypes.keyword,$e.SemanticTokenTypes.modifier,$e.SemanticTokenTypes.comment,$e.SemanticTokenTypes.string,$e.SemanticTokenTypes.number,$e.SemanticTokenTypes.regexp,$e.SemanticTokenTypes.operator],r.tokenModifiers=[$e.SemanticTokenModifiers.declaration,$e.SemanticTokenModifiers.definition,$e.SemanticTokenModifiers.readonly,$e.SemanticTokenModifiers.static,$e.SemanticTokenModifiers.deprecated,$e.SemanticTokenModifiers.abstract,$e.SemanticTokenModifiers.async,$e.SemanticTokenModifiers.modification,$e.SemanticTokenModifiers.documentation,$e.SemanticTokenModifiers.defaultLibrary],r.formats=[$e.TokenFormat.Relative],r.requests={range:!0,full:{delta:!0}},r.multilineTokenSupport=!1,r.overlappingTokenSupport=!1,vs(vs(t,"workspace"),"semanticTokens").refreshSupport=!0}initialize(t,r){this._client.onRequest($e.SemanticTokensRefreshRequest.type,async()=>{for(let i of this.getAllProviders())i.onDidChangeSemanticTokensEmitter.fire()});let[o,a]=this.getRegistration(r,t.semanticTokensProvider);!o||!a||this.register({id:o,registerOptions:a})}registerLanguageProvider(t){let r=fw.boolean(t.full)?t.full:t.full!==void 0,n=t.full!==void 0&&typeof t.full!="boolean"&&t.full.delta===!0,o=new ms.EventEmitter,a=r?{onDidChangeSemanticTokens:o.event,provideDocumentSemanticTokens:(l,p)=>{let f=this._client,g=f.clientOptions.middleware,m=(_,E)=>{let T={textDocument:f.code2ProtocolConverter.asTextDocumentIdentifier(_)};return f.sendRequest($e.SemanticTokensRequest.type,T,E).then(w=>f.protocol2CodeConverter.asSemanticTokens(w),w=>f.handleFailedRequest($e.SemanticTokensRequest.type,w,null))};return g.provideDocumentSemanticTokens?g.provideDocumentSemanticTokens(l,p,m):m(l,p)},provideDocumentSemanticTokensEdits:n?(l,p,f)=>{let g=this._client,m=g.clientOptions.middleware,_=(E,T,w)=>{let R={textDocument:g.code2ProtocolConverter.asTextDocumentIdentifier(E),previousResultId:T};return g.sendRequest($e.SemanticTokensDeltaRequest.type,R,w).then(I=>$e.SemanticTokens.is(I)?g.protocol2CodeConverter.asSemanticTokens(I):g.protocol2CodeConverter.asSemanticTokensEdits(I),I=>g.handleFailedRequest($e.SemanticTokensDeltaRequest.type,I,null))};return m.provideDocumentSemanticTokensEdits?m.provideDocumentSemanticTokensEdits(l,p,f,_):_(l,p,f)}:void 0}:void 0,s=t.range===!0?{provideDocumentRangeSemanticTokens:(l,p,f)=>{let g=this._client,m=g.clientOptions.middleware,_=(E,T,w)=>{let R={textDocument:g.code2ProtocolConverter.asTextDocumentIdentifier(E),range:g.code2ProtocolConverter.asRange(T)};return g.sendRequest($e.SemanticTokensRangeRequest.type,R,w).then(I=>g.protocol2CodeConverter.asSemanticTokens(I),I=>g.handleFailedRequest($e.SemanticTokensRangeRequest.type,I,null))};return m.provideDocumentRangeSemanticTokens?m.provideDocumentRangeSemanticTokens(l,p,f,_):_(l,p,f)}}:void 0,c=[],d=this._client.protocol2CodeConverter.asSemanticTokensLegend(t.legend);return a!==void 0&&c.push(ms.languages.registerDocumentSemanticTokensProvider(t.documentSelector,a,d)),s!==void 0&&c.push(ms.languages.registerDocumentRangeSemanticTokensProvider(t.documentSelector,s,d)),[new ms.Disposable(()=>c.forEach(l=>l.dispose())),{range:s,full:a,onDidChangeSemanticTokensEmitter:o}]}};_s.SemanticTokensFeature=zu});var gg=ee((rD,hg)=>{hg.exports=function(e,t){for(var r=[],n=0;n<e.length;n++){var o=t(e[n],n);hw(o)?r.push.apply(r,o):r.push(o)}return r};var hw=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}});var Eg=ee((nD,yg)=>{"use strict";yg.exports=vg;function vg(e,t,r){e instanceof RegExp&&(e=mg(e,r)),t instanceof RegExp&&(t=mg(t,r));var n=_g(e,t,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+e.length,n[1]),post:r.slice(n[1]+t.length)}}function mg(e,t){var r=t.match(e);return r?r[0]:null}vg.range=_g;function _g(e,t,r){var n,o,a,i,s,c=r.indexOf(e),u=r.indexOf(t,c+1),d=c;if(c>=0&&u>0){if(e===t)return[c,u];for(n=[],a=r.length;d>=0&&!s;)d==c?(n.push(d),c=r.indexOf(e,d+1)):n.length==1?s=[n.pop(),u]:(o=n.pop(),o<a&&(a=o,i=u),u=r.indexOf(t,d+1)),d=c<u&&c>=0?c:u;n.length&&(s=[a,i])}return s}});var Og=ee((iD,Pg)=>{var gw=gg(),bg=Eg();Pg.exports=_w;var Cg="\0SLASH"+Math.random()+"\0",Tg="\0OPEN"+Math.random()+"\0",Yu="\0CLOSE"+Math.random()+"\0",Sg="\0COMMA"+Math.random()+"\0",Rg="\0PERIOD"+Math.random()+"\0";function Xu(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function mw(e){return e.split("\\\\").join(Cg).split("\\{").join(Tg).split("\\}").join(Yu).split("\\,").join(Sg).split("\\.").join(Rg)}function vw(e){return e.split(Cg).join("\\").split(Tg).join("{").split(Yu).join("}").split(Sg).join(",").split(Rg).join(".")}function wg(e){if(!e)return[""];var t=[],r=bg("{","}",e);if(!r)return e.split(",");var n=r.pre,o=r.body,a=r.post,i=n.split(",");i[i.length-1]+="{"+o+"}";var s=wg(a);return a.length&&(i[i.length-1]+=s.shift(),i.push.apply(i,s)),t.push.apply(t,i),t}function _w(e){return e?(e.substr(0,2)==="{}"&&(e="\\{\\}"+e.substr(2)),gi(mw(e),!0).map(vw)):[]}function yw(e){return"{"+e+"}"}function Ew(e){return/^-?0\d/.test(e)}function bw(e,t){return e<=t}function Cw(e,t){return e>=t}function gi(e,t){var r=[],n=bg("{","}",e);if(!n||/\$$/.test(n.pre))return[e];var o=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),a=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),i=o||a,s=n.body.indexOf(",")>=0;if(!i&&!s)return n.post.match(/,.*\}/)?(e=n.pre+"{"+n.body+Yu+n.post,gi(e)):[e];var c;if(i)c=n.body.split(/\.\./);else if(c=wg(n.body),c.length===1&&(c=gi(c[0],!1).map(yw),c.length===1)){var d=n.post.length?gi(n.post,!1):[""];return d.map(function(U){return n.pre+c[0]+U})}var u=n.pre,d=n.post.length?gi(n.post,!1):[""],l;if(i){var p=Xu(c[0]),f=Xu(c[1]),g=Math.max(c[0].length,c[1].length),m=c.length==3?Math.abs(Xu(c[2])):1,_=bw,E=f<p;E&&(m*=-1,_=Cw);var T=c.some(Ew);l=[];for(var w=p;_(w,f);w+=m){var R;if(a)R=String.fromCharCode(w),R==="\\"&&(R="");else if(R=String(w),T){var I=g-R.length;if(I>0){var H=new Array(I+1).join("0");w<0?R="-"+H+R.slice(1):R=H+R}}l.push(R)}}else l=gw(c,function(te){return gi(te,!1)});for(var z=0;z<l.length;z++)for(var K=0;K<d.length;K++){var J=u+l[z]+d[K];(!t||i||J)&&r.push(J)}return r}});var kg=ee((oD,Ng)=>{Ng.exports=Er;Er.Minimatch=Yt;var co=function(){try{return require("path")}catch{}}()||{sep:"/"};Er.sep=co.sep;var Zu=Er.GLOBSTAR=Yt.GLOBSTAR={},Tw=Og(),Ig={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Qu="[^/]",Ju=Qu+"*?",Sw="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Rw="(?:(?!(?:\\/|^)\\.).)*?",Dg=ww("().*{}+?[]^$\\!");function ww(e){return e.split("").reduce(function(t,r){return t[r]=!0,t},{})}var Ag=/\/+/;Er.filter=Pw;function Pw(e,t){return t=t||{},function(r,n,o){return Er(r,e,t)}}function hn(e,t){t=t||{};var r={};return Object.keys(e).forEach(function(n){r[n]=e[n]}),Object.keys(t).forEach(function(n){r[n]=t[n]}),r}Er.defaults=function(e){if(!e||typeof e!="object"||!Object.keys(e).length)return Er;var t=Er,r=function(o,a,i){return t(o,a,hn(e,i))};return r.Minimatch=function(o,a){return new t.Minimatch(o,hn(e,a))},r.Minimatch.defaults=function(o){return t.defaults(hn(e,o)).Minimatch},r.filter=function(o,a){return t.filter(o,hn(e,a))},r.defaults=function(o){return t.defaults(hn(e,o))},r.makeRe=function(o,a){return t.makeRe(o,hn(e,a))},r.braceExpand=function(o,a){return t.braceExpand(o,hn(e,a))},r.match=function(n,o,a){return t.match(n,o,hn(e,a))},r};Yt.defaults=function(e){return Er.defaults(e).Minimatch};function Er(e,t,r){return Es(t),r||(r={}),!r.nocomment&&t.charAt(0)==="#"?!1:new Yt(t,r).match(e)}function Yt(e,t){if(!(this instanceof Yt))return new Yt(e,t);Es(e),t||(t={}),e=e.trim(),!t.allowWindowsEscape&&co.sep!=="/"&&(e=e.split(co.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.make()}Yt.prototype.debug=function(){};Yt.prototype.make=Ow;function Ow(){var e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();var r=this.globSet=this.braceExpand();t.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,r),r=this.globParts=r.map(function(n){return n.split(Ag)}),this.debug(this.pattern,r),r=r.map(function(n,o,a){return n.map(this.parse,this)},this),this.debug(this.pattern,r),r=r.filter(function(n){return n.indexOf(!1)===-1}),this.debug(this.pattern,r),this.set=r}Yt.prototype.parseNegate=Iw;function Iw(){var e=this.pattern,t=!1,r=this.options,n=0;if(!r.nonegate){for(var o=0,a=e.length;o<a&&e.charAt(o)==="!";o++)t=!t,n++;n&&(this.pattern=e.substr(n)),this.negate=t}}Er.braceExpand=function(e,t){return xg(e,t)};Yt.prototype.braceExpand=xg;function xg(e,t){return t||(this instanceof Yt?t=this.options:t={}),e=typeof e>"u"?this.pattern:e,Es(e),t.nobrace||!/\{(?:(?!\{).)*\}/.test(e)?[e]:Tw(e)}var Dw=1024*64,Es=function(e){if(typeof e!="string")throw new TypeError("invalid pattern");if(e.length>Dw)throw new TypeError("pattern is too long")};Yt.prototype.parse=Aw;var ys={};function Aw(e,t){Es(e);var r=this.options;if(e==="**")if(r.noglobstar)e="*";else return Zu;if(e==="")return"";var n="",o=!!r.nocase,a=!1,i=[],s=[],c,u=!1,d=-1,l=-1,p=e.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",f=this;function g(){if(c){switch(c){case"*":n+=Ju,o=!0;break;case"?":n+=Qu,o=!0;break;default:n+="\\"+c;break}f.debug("clearStateChar %j %j",c,n),c=!1}}for(var m=0,_=e.length,E;m<_&&(E=e.charAt(m));m++){if(this.debug("%s	%s %s %j",e,m,n,E),a&&Dg[E]){n+="\\"+E,a=!1;continue}switch(E){case"/":return!1;case"\\":g(),a=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,m,n,E),u){this.debug("  in class"),E==="!"&&m===l+1&&(E="^"),n+=E;continue}f.debug("call clearStateChar %j",c),g(),c=E,r.noext&&g();continue;case"(":if(u){n+="(";continue}if(!c){n+="\\(";continue}i.push({type:c,start:m-1,reStart:n.length,open:Ig[c].open,close:Ig[c].close}),n+=c==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",c,n),c=!1;continue;case")":if(u||!i.length){n+="\\)";continue}g(),o=!0;var T=i.pop();n+=T.close,T.type==="!"&&s.push(T),T.reEnd=n.length;continue;case"|":if(u||!i.length||a){n+="\\|",a=!1;continue}g(),n+="|";continue;case"[":if(g(),u){n+="\\"+E;continue}u=!0,l=m,d=n.length,n+=E;continue;case"]":if(m===l+1||!u){n+="\\"+E,a=!1;continue}var w=e.substring(l+1,m);try{RegExp("["+w+"]")}catch{var R=this.parse(w,ys);n=n.substr(0,d)+"\\["+R[0]+"\\]",o=o||R[1],u=!1;continue}o=!0,u=!1,n+=E;continue;default:g(),a?a=!1:Dg[E]&&!(E==="^"&&u)&&(n+="\\"),n+=E}}for(u&&(w=e.substr(l+1),R=this.parse(w,ys),n=n.substr(0,d)+"\\["+R[0],o=o||R[1]),T=i.pop();T;T=i.pop()){var I=n.slice(T.reStart+T.open.length);this.debug("setting tail",n,T),I=I.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(pe,he,be){return be||(be="\\"),he+he+be+"|"}),this.debug(`tail=%j
   %s`,I,I,T,n);var H=T.type==="*"?Ju:T.type==="?"?Qu:"\\"+T.type;o=!0,n=n.slice(0,T.reStart)+H+"\\("+I}g(),a&&(n+="\\\\");var z=!1;switch(n.charAt(0)){case"[":case".":case"(":z=!0}for(var K=s.length-1;K>-1;K--){var J=s[K],te=n.slice(0,J.reStart),U=n.slice(J.reStart,J.reEnd-8),V=n.slice(J.reEnd-8,J.reEnd),Q=n.slice(J.reEnd);V+=Q;var ne=te.split("(").length-1,ve=Q;for(m=0;m<ne;m++)ve=ve.replace(/\)[+*?]?/,"");Q=ve;var de="";Q===""&&t!==ys&&(de="$");var X=te+U+Q+de+V;n=X}if(n!==""&&o&&(n="(?=.)"+n),z&&(n=p+n),t===ys)return[n,o];if(!o)return Nw(e);var ce=r.nocase?"i":"";try{var ie=new RegExp("^"+n+"$",ce)}catch{return new RegExp("$.")}return ie._glob=e,ie._src=n,ie}Er.makeRe=function(e,t){return new Yt(e,t||{}).makeRe()};Yt.prototype.makeRe=xw;function xw(){if(this.regexp||this.regexp===!1)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,r=t.noglobstar?Ju:t.dot?Sw:Rw,n=t.nocase?"i":"",o=e.map(function(a){return a.map(function(i){return i===Zu?r:typeof i=="string"?kw(i):i._src}).join("\\/")}).join("|");o="^(?:"+o+")$",this.negate&&(o="^(?!"+o+").*$");try{this.regexp=new RegExp(o,n)}catch{this.regexp=!1}return this.regexp}Er.match=function(e,t,r){r=r||{};var n=new Yt(t,r);return e=e.filter(function(o){return n.match(o)}),n.options.nonull&&!e.length&&e.push(t),e};Yt.prototype.match=function(t,r){if(typeof r>"u"&&(r=this.partial),this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return t==="";if(t==="/"&&r)return!0;var n=this.options;co.sep!=="/"&&(t=t.split(co.sep).join("/")),t=t.split(Ag),this.debug(this.pattern,"split",t);var o=this.set;this.debug(this.pattern,"set",o);var a,i;for(i=t.length-1;i>=0&&(a=t[i],!a);i--);for(i=0;i<o.length;i++){var s=o[i],c=t;n.matchBase&&s.length===1&&(c=[a]);var u=this.matchOne(c,s,r);if(u)return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate};Yt.prototype.matchOne=function(e,t,r){var n=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var o=0,a=0,i=e.length,s=t.length;o<i&&a<s;o++,a++){this.debug("matchOne loop");var c=t[a],u=e[o];if(this.debug(t,c,u),c===!1)return!1;if(c===Zu){this.debug("GLOBSTAR",[t,c,u]);var d=o,l=a+1;if(l===s){for(this.debug("** at the end");o<i;o++)if(e[o]==="."||e[o]===".."||!n.dot&&e[o].charAt(0)===".")return!1;return!0}for(;d<i;){var p=e[d];if(this.debug(`
globstar while`,e,d,t,l,p),this.matchOne(e.slice(d),t.slice(l),r))return this.debug("globstar found match!",d,i,p),!0;if(p==="."||p===".."||!n.dot&&p.charAt(0)==="."){this.debug("dot detected!",e,d,t,l);break}this.debug("globstar swallow a segment, and continue"),d++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,d,t,l),d===i))}var f;if(typeof c=="string"?(f=u===c,this.debug("string match",c,u,f)):(f=u.match(c),this.debug("pattern match",c,u,f)),!f)return!1}if(o===i&&a===s)return!0;if(o===i)return r;if(a===s)return o===i-1&&e[o]==="";throw new Error("wtf?")};function Nw(e){return e.replace(/\\(.)/g,"$1")}function kw(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var Lg=ee(gr=>{"use strict";Object.defineProperty(gr,"__esModule",{value:!0});gr.WillDeleteFilesFeature=gr.WillRenameFilesFeature=gr.WillCreateFilesFeature=gr.DidDeleteFilesFeature=gr.DidRenameFilesFeature=gr.DidCreateFilesFeature=void 0;var Br=require("vscode"),Mw=kg(),en=Rt(),qw=es();function Mg(e,t){return e[t]===void 0&&(e[t]={}),e[t]}function Lw(e,t){return e[t]}function qg(e,t,r){e[t]=r}var gn=class{constructor(t,r,n,o,a){this._filters=new Map,this._client=t,this._event=r,this._registrationType=n,this._clientCapability=o,this._serverCapability=a}get registrationType(){return this._registrationType}fillClientCapabilities(t){let r=Mg(Mg(t,"workspace"),"fileOperations");qg(r,"dynamicRegistration",!0),qg(r,this._clientCapability,!0)}initialize(t){var r;let n=(r=t.workspace)===null||r===void 0?void 0:r.fileOperations,o=n!==void 0?Lw(n,this._serverCapability):void 0;if(o?.filters!==void 0)try{this.register({id:qw.generateUuid(),registerOptions:{filters:o.filters}})}catch(a){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${a}`)}}register(t){this._listener||(this._listener=this._event(this.send,this));let r=t.registerOptions.filters.map(n=>{let o=new Mw.Minimatch(n.pattern.glob,gn.asMinimatchOptions(n.pattern.options));if(!o.makeRe())throw new Error(`Invalid pattern ${n.pattern.glob}!`);return{scheme:n.scheme,matcher:o,kind:n.pattern.matches}});this._filters.set(t.id,r)}unregister(t){this._filters.delete(t),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}async filter(t,r){let n=await Promise.all(t.files.map(async a=>{let i=r(a),s=i.fsPath.replace(/\\/g,"/");for(let c of this._filters.values())for(let u of c)if(!(u.scheme!==void 0&&u.scheme!==i.scheme)){if(u.matcher.match(s)){if(u.kind===void 0)return!0;let d=await gn.getFileType(i);if(d===void 0)return this._client.error(`Failed to determine file type for ${i.toString()}.`),!0;if(d===Br.FileType.File&&u.kind===en.FileOperationPatternKind.file||d===Br.FileType.Directory&&u.kind===en.FileOperationPatternKind.folder)return!0}else if(u.kind===en.FileOperationPatternKind.folder&&await gn.getFileType(i)===Br.FileType.Directory&&u.matcher.match(`${s}/`))return!0}return!1})),o=t.files.filter((a,i)=>n[i]);return Object.assign(Object.assign({},t),{files:o})}static async getFileType(t){try{return(await Br.workspace.fs.stat(t)).type}catch{return}}static asMinimatchOptions(t){if(t!==void 0&&t.ignoreCase===!0)return{nocase:!0}}},uo=class extends gn{constructor(t,r,n,o,a,i,s){super(t,r,n,o,a),this._notificationType=n,this._accessUri=i,this._createParams=s}async send(t){let r=await this.filter(t,this._accessUri);if(r.files.length){let n=async o=>{this._client.sendNotification(this._notificationType,this._createParams(o))};this.doSend(r,n)}}},el=class extends uo{constructor(t){super(t,Br.workspace.onDidCreateFiles,en.DidCreateFilesNotification.type,"didCreate","didCreate",r=>r,t.code2ProtocolConverter.asDidCreateFilesParams)}doSend(t,r){var n;let o=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return o?.didCreateFiles?o.didCreateFiles(t,r):r(t)}};gr.DidCreateFilesFeature=el;var tl=class extends uo{constructor(t){super(t,Br.workspace.onDidRenameFiles,en.DidRenameFilesNotification.type,"didRename","didRename",r=>r.oldUri,t.code2ProtocolConverter.asDidRenameFilesParams)}doSend(t,r){var n;let o=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return o?.didRenameFiles?o.didRenameFiles(t,r):r(t)}};gr.DidRenameFilesFeature=tl;var rl=class extends uo{constructor(t){super(t,Br.workspace.onDidDeleteFiles,en.DidDeleteFilesNotification.type,"didDelete","didDelete",r=>r,t.code2ProtocolConverter.asDidDeleteFilesParams)}doSend(t,r){var n;let o=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return o?.didDeleteFiles?o.didDeleteFiles(t,r):r(t)}};gr.DidDeleteFilesFeature=rl;var lo=class extends gn{constructor(t,r,n,o,a,i,s){super(t,r,n,o,a),this._requestType=n,this._accessUri=i,this._createParams=s}async send(t){let r=this.waitUntil(t);t.waitUntil(r)}async waitUntil(t){let r=await this.filter(t,this._accessUri);if(r.files.length){let n=o=>this._client.sendRequest(this._requestType,this._createParams(o)).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(r,n)}else return}},nl=class extends lo{constructor(t){super(t,Br.workspace.onWillCreateFiles,en.WillCreateFilesRequest.type,"willCreate","willCreate",r=>r,t.code2ProtocolConverter.asWillCreateFilesParams)}doSend(t,r){var n;let o=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return o?.willCreateFiles?o.willCreateFiles(t,r):r(t)}};gr.WillCreateFilesFeature=nl;var il=class extends lo{constructor(t){super(t,Br.workspace.onWillRenameFiles,en.WillRenameFilesRequest.type,"willRename","willRename",r=>r.oldUri,t.code2ProtocolConverter.asWillRenameFilesParams)}doSend(t,r){var n;let o=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return o?.willRenameFiles?o.willRenameFiles(t,r):r(t)}};gr.WillRenameFilesFeature=il;var ol=class extends lo{constructor(t){super(t,Br.workspace.onWillDeleteFiles,en.WillDeleteFilesRequest.type,"willDelete","willDelete",r=>r,t.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(t,r){var n;let o=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return o?.willDeleteFiles?o.willDeleteFiles(t,r):r(t)}};gr.WillDeleteFilesFeature=ol});var Fg=ee(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});bs.LinkedEditingFeature=void 0;var jw=require("vscode"),sl=Rt(),Fw=yr();function jg(e,t){return e[t]===void 0&&(e[t]={}),e[t]}var al=class extends Fw.TextDocumentFeature{constructor(t){super(t,sl.LinkedEditingRangeRequest.type)}fillClientCapabilities(t){let r=jg(jg(t,"textDocument"),"linkedEditingRange");r.dynamicRegistration=!0}initialize(t,r){let[n,o]=this.getRegistration(r,t.linkedEditingRangeProvider);!n||!o||this.register({id:n,registerOptions:o})}registerLanguageProvider(t){let r={provideLinkedEditingRanges:(n,o,a)=>{let i=this._client,s=(u,d,l)=>i.sendRequest(sl.LinkedEditingRangeRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(u,d),l).then(i.protocol2CodeConverter.asLinkedEditingRanges,p=>i.handleFailedRequest(sl.LinkedEditingRangeRequest.type,p,null)),c=i.clientOptions.middleware;return c.provideLinkedEditingRange?c.provideLinkedEditingRange(n,o,a,s):s(n,o,a)}};return[jw.languages.registerLinkedEditingRangeProvider(t.documentSelector,r),r]}};bs.LinkedEditingFeature=al});var ul=ee(Wn=>{"use strict";Object.defineProperty(Wn,"__esModule",{value:!0});Wn.ProposedFeatures=Wn.CommonLanguageClient=void 0;var Hw=yr(),$w=Zh(),Uw=Mc(),Bw=tg(),Vw=rg(),Gw=ng(),Ww=og(),Kw=ag(),zw=ug(),Xw=lg(),Yw=pg(),Qw=fg(),mi=Lg(),Jw=Fg(),cl=class extends Hw.BaseLanguageClient{constructor(t,r,n){super(t,r,n)}registerProposedFeatures(){this.registerFeatures(Hg.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new Uw.ConfigurationFeature(this)),this.registerFeature(new Vw.TypeDefinitionFeature(this)),this.registerFeature(new Bw.ImplementationFeature(this)),this.registerFeature(new $w.ColorProviderFeature(this)),this.registerFeature(new Gw.WorkspaceFoldersFeature(this)),this.registerFeature(new Ww.FoldingRangeFeature(this)),this.registerFeature(new Kw.DeclarationFeature(this)),this.registerFeature(new zw.SelectionRangeFeature(this)),this.registerFeature(new Xw.ProgressFeature(this)),this.registerFeature(new Yw.CallHierarchyFeature(this)),this.registerFeature(new Qw.SemanticTokensFeature(this)),this.registerFeature(new Jw.LinkedEditingFeature(this)),this.registerFeature(new mi.DidCreateFilesFeature(this)),this.registerFeature(new mi.DidRenameFilesFeature(this)),this.registerFeature(new mi.DidDeleteFilesFeature(this)),this.registerFeature(new mi.WillCreateFilesFeature(this)),this.registerFeature(new mi.WillRenameFilesFeature(this)),this.registerFeature(new mi.WillDeleteFilesFeature(this))}};Wn.CommonLanguageClient=cl;var Hg;(function(e){function t(r){return[]}e.createAll=t})(Hg=Wn.ProposedFeatures||(Wn.ProposedFeatures={}))});var Ug=ee(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});Cs.terminate=void 0;var $g=require("child_process"),Zw=require("path"),eP=process.platform==="win32",tP=process.platform==="darwin",rP=process.platform==="linux";function nP(e,t){if(eP)try{let o={stdio:["pipe","pipe","ignore"]};return t&&(o.cwd=t),$g.execFileSync("taskkill",["/T","/F","/PID",e.pid.toString()],o),!0}catch{return!1}else if(rP||tP)try{var r=Zw.join(__dirname,"terminateProcess.sh"),n=$g.spawnSync(r,[e.pid.toString()]);return!n.error}catch{return!1}else return e.kill("SIGKILL"),!0}Cs.terminate=nP});var ll=ee((lD,Bg)=>{"use strict";Bg.exports=Rt()});var Vg=ee(tn=>{"use strict";var iP=tn&&tn.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),dl=tn&&tn.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&iP(t,e,r)};Object.defineProperty(tn,"__esModule",{value:!0});dl(Rt(),tn);dl(yr(),tn);dl(ul(),tn)});var po=ee(ur=>{"use strict";var oP=ur&&ur.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Kg=ur&&ur.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&oP(t,e,r)};Object.defineProperty(ur,"__esModule",{value:!0});ur.SettingMonitor=ur.LanguageClient=ur.TransportKind=void 0;var Kn=require("child_process"),pl=require("fs"),fl=require("path"),Gg=If(),mn=require("vscode"),jt=cn(),sP=ul(),aP=yr(),cP=Ug(),Lt=ll();Kg(ll(),ur);Kg(Vg(),ur);var Wg="^1.52.0",hl;(function(e){function t(r){return jt.string(r.command)}e.is=t})(hl||(hl={}));var Qt;(function(e){e[e.stdio=0]="stdio",e[e.ipc=1]="ipc",e[e.pipe=2]="pipe",e[e.socket=3]="socket"})(Qt=ur.TransportKind||(ur.TransportKind={}));var vi;(function(e){function t(r){let n=r;return n&&n.kind===Qt.socket&&jt.number(n.port)}e.isSocket=t})(vi||(vi={}));var gl;(function(e){function t(r){return jt.string(r.module)}e.is=t})(gl||(gl={}));var ml;(function(e){function t(r){let n=r;return n&&n.writer!==void 0&&n.reader!==void 0}e.is=t})(ml||(ml={}));var vl;(function(e){function t(r){let n=r;return n&&n.process!==void 0&&typeof n.detached=="boolean"}e.is=t})(vl||(vl={}));var _l=class extends sP.CommonLanguageClient{constructor(t,r,n,o,a){let i,s,c,u,d;jt.string(r)?(i=t,s=r,c=n,u=o,d=!!a):(i=t.toLowerCase(),s=t,c=r,u=n,d=o),d===void 0&&(d=!1),super(i,s,u),this._serverOptions=c,this._forceDebug=d;try{this.checkVersion()}catch(l){throw jt.string(l.message)&&this.outputChannel.appendLine(l.message),l}}checkVersion(){let t=Gg.parse(mn.version);if(!t)throw new Error(`No valid VS Code version detected. Version string is: ${mn.version}`);if(t.prerelease&&t.prerelease.length>0&&(t.prerelease=[]),!Gg.satisfies(t,Wg))throw new Error(`The language client requires VS Code version ${Wg} but received version ${mn.version}`)}stop(){return super.stop().then(()=>{if(this._serverProcess){let t=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(t),this._isDetached=void 0}})}checkProcessDied(t){!t||setTimeout(()=>{try{process.kill(t.pid,0),cP.terminate(t)}catch{}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(t){super.fillInitializeParams(t),t.processId===null&&(t.processId=process.pid)}createMessageTransports(t){function r(d,l){if(!d&&!l)return;let p=Object.create(null);return Object.keys(process.env).forEach(f=>p[f]=process.env[f]),l&&(p.ELECTRON_RUN_AS_NODE="1",p.ELECTRON_NO_ASAR="1"),d&&Object.keys(d).forEach(f=>p[f]=d[f]),p}let n=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],o=["--debug","--debug-brk","--inspect","--inspect-brk"];function a(){let d=process.execArgv;return d?d.some(l=>n.some(p=>l.startsWith(p))||o.some(p=>l===p)):!1}function i(d){if(d.stdin===null||d.stdout===null||d.stderr===null)throw new Error("Process created without stdio streams")}let s=this._serverOptions;if(jt.func(s))return s().then(d=>{if(aP.MessageTransports.is(d))return this._isDetached=!!d.detached,d;if(ml.is(d))return this._isDetached=!!d.detached,{reader:new Lt.StreamMessageReader(d.reader),writer:new Lt.StreamMessageWriter(d.writer)};{let l;return vl.is(d)?(l=d.process,this._isDetached=d.detached):(l=d,this._isDetached=!1),l.stderr.on("data",p=>this.outputChannel.append(jt.string(p)?p:p.toString(t))),{reader:new Lt.StreamMessageReader(l.stdout),writer:new Lt.StreamMessageWriter(l.stdin)}}});let c,u=s;return u.run||u.debug?this._forceDebug||a()?c=u.debug:c=u.run:c=s,this._getServerWorkingDir(c.options).then(d=>{if(gl.is(c)&&c.module){let l=c,p=l.transport||Qt.stdio;if(l.runtime){let f=[],g=l.options||Object.create(null);g.execArgv&&g.execArgv.forEach(T=>f.push(T)),f.push(l.module),l.args&&l.args.forEach(T=>f.push(T));let m=Object.create(null);m.cwd=d,m.env=r(g.env,!1);let _=this._getRuntimePath(l.runtime,d),E;if(p===Qt.ipc?(m.stdio=[null,null,null,"ipc"],f.push("--node-ipc")):p===Qt.stdio?f.push("--stdio"):p===Qt.pipe?(E=Lt.generateRandomPipeName(),f.push(`--pipe=${E}`)):vi.isSocket(p)&&f.push(`--socket=${p.port}`),f.push(`--clientProcessId=${process.pid.toString()}`),p===Qt.ipc||p===Qt.stdio){let T=Kn.spawn(_,f,m);return!T||!T.pid?Promise.reject(`Launching server using runtime ${_} failed.`):(this._serverProcess=T,T.stderr.on("data",w=>this.outputChannel.append(jt.string(w)?w:w.toString(t))),p===Qt.ipc?(T.stdout.on("data",w=>this.outputChannel.append(jt.string(w)?w:w.toString(t))),Promise.resolve({reader:new Lt.IPCMessageReader(T),writer:new Lt.IPCMessageWriter(T)})):Promise.resolve({reader:new Lt.StreamMessageReader(T.stdout),writer:new Lt.StreamMessageWriter(T.stdin)}))}else{if(p===Qt.pipe)return Lt.createClientPipeTransport(E).then(T=>{let w=Kn.spawn(_,f,m);return!w||!w.pid?Promise.reject(`Launching server using runtime ${_} failed.`):(this._serverProcess=w,w.stderr.on("data",R=>this.outputChannel.append(jt.string(R)?R:R.toString(t))),w.stdout.on("data",R=>this.outputChannel.append(jt.string(R)?R:R.toString(t))),T.onConnected().then(R=>({reader:R[0],writer:R[1]})))});if(vi.isSocket(p))return Lt.createClientSocketTransport(p.port).then(T=>{let w=Kn.spawn(_,f,m);return!w||!w.pid?Promise.reject(`Launching server using runtime ${_} failed.`):(this._serverProcess=w,w.stderr.on("data",R=>this.outputChannel.append(jt.string(R)?R:R.toString(t))),w.stdout.on("data",R=>this.outputChannel.append(jt.string(R)?R:R.toString(t))),T.onConnected().then(R=>({reader:R[0],writer:R[1]})))})}}else{let f;return new Promise((g,m)=>{let _=l.args&&l.args.slice()||[];p===Qt.ipc?_.push("--node-ipc"):p===Qt.stdio?_.push("--stdio"):p===Qt.pipe?(f=Lt.generateRandomPipeName(),_.push(`--pipe=${f}`)):vi.isSocket(p)&&_.push(`--socket=${p.port}`),_.push(`--clientProcessId=${process.pid.toString()}`);let E=l.options||Object.create(null);if(E.env=r(E.env,!0),E.execArgv=E.execArgv||[],E.cwd=d,E.silent=!0,p===Qt.ipc||p===Qt.stdio){let T=Kn.fork(l.module,_||[],E);i(T),this._serverProcess=T,T.stderr.on("data",w=>this.outputChannel.append(jt.string(w)?w:w.toString(t))),p===Qt.ipc?(T.stdout.on("data",w=>this.outputChannel.append(jt.string(w)?w:w.toString(t))),g({reader:new Lt.IPCMessageReader(this._serverProcess),writer:new Lt.IPCMessageWriter(this._serverProcess)})):g({reader:new Lt.StreamMessageReader(T.stdout),writer:new Lt.StreamMessageWriter(T.stdin)})}else p===Qt.pipe?Lt.createClientPipeTransport(f).then(T=>{let w=Kn.fork(l.module,_||[],E);i(w),this._serverProcess=w,w.stderr.on("data",R=>this.outputChannel.append(jt.string(R)?R:R.toString(t))),w.stdout.on("data",R=>this.outputChannel.append(jt.string(R)?R:R.toString(t))),T.onConnected().then(R=>{g({reader:R[0],writer:R[1]})})}):vi.isSocket(p)&&Lt.createClientSocketTransport(p.port).then(T=>{let w=Kn.fork(l.module,_||[],E);i(w),this._serverProcess=w,w.stderr.on("data",R=>this.outputChannel.append(jt.string(R)?R:R.toString(t))),w.stdout.on("data",R=>this.outputChannel.append(jt.string(R)?R:R.toString(t))),T.onConnected().then(R=>{g({reader:R[0],writer:R[1]})})})})}}else if(hl.is(c)&&c.command){let l=c,p=l.args||[],f=Object.assign({},l.options);f.cwd=f.cwd||d;let g=Kn.spawn(l.command,p,f);return!g||!g.pid?Promise.reject(`Launching server using command ${l.command} failed.`):(g.stderr.on("data",m=>this.outputChannel.append(jt.string(m)?m:m.toString(t))),this._serverProcess=g,this._isDetached=!!f.detached,Promise.resolve({reader:new Lt.StreamMessageReader(g.stdout),writer:new Lt.StreamMessageWriter(g.stdin)}))}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(s,null,4)))})}_getRuntimePath(t,r){if(fl.isAbsolute(t))return t;let n=this._mainGetRootPath();if(n!==void 0){let o=fl.join(n,t);if(pl.existsSync(o))return o}if(r!==void 0){let o=fl.join(r,t);if(pl.existsSync(o))return o}return t}_mainGetRootPath(){let t=mn.workspace.workspaceFolders;if(!t||t.length===0)return;let r=t[0];if(r.uri.scheme==="file")return r.uri.fsPath}_getServerWorkingDir(t){let r=t&&t.cwd;return r||(r=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),r?new Promise(n=>{pl.lstat(r,(o,a)=>{n(!o&&a.isDirectory()?r:void 0)})}):Promise.resolve(void 0)}getLocale(){let t=process.env.VSCODE_NLS_CONFIG;if(t===void 0)return"en";let r;try{r=JSON.parse(t)}catch{}return r===void 0||typeof r.locale!="string"?"en":r.locale}};ur.LanguageClient=_l;var yl=class{constructor(t,r){this._client=t,this._setting=r,this._listeners=[]}start(){return mn.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new mn.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let t=this._setting.indexOf("."),r=t>=0?this._setting.substr(0,t):this._setting,n=t>=0?this._setting.substr(t+1):void 0,o=n?mn.workspace.getConfiguration(r).get(n,!1):mn.workspace.getConfiguration(r);o&&this._client.needsStart()?this._client.start():!o&&this._client.needsStop()&&this._client.stop()}};ur.SettingMonitor=yl});var El=ee((fD,zg)=>{"use strict";zg.exports=po()});var Rs=ee((fo,Tl)=>{(function(e,t){if(typeof fo=="object"&&typeof Tl=="object")Tl.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var r=t();for(var n in r)(typeof fo=="object"?fo:e)[n]=r[n]}})(fo,function(){return(()=>{"use strict";var e={470:r=>{function n(i){if(typeof i!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(i))}function o(i,s){for(var c,u="",d=0,l=-1,p=0,f=0;f<=i.length;++f){if(f<i.length)c=i.charCodeAt(f);else{if(c===47)break;c=47}if(c===47){if(!(l===f-1||p===1))if(l!==f-1&&p===2){if(u.length<2||d!==2||u.charCodeAt(u.length-1)!==46||u.charCodeAt(u.length-2)!==46){if(u.length>2){var g=u.lastIndexOf("/");if(g!==u.length-1){g===-1?(u="",d=0):d=(u=u.slice(0,g)).length-1-u.lastIndexOf("/"),l=f,p=0;continue}}else if(u.length===2||u.length===1){u="",d=0,l=f,p=0;continue}}s&&(u.length>0?u+="/..":u="..",d=2)}else u.length>0?u+="/"+i.slice(l+1,f):u=i.slice(l+1,f),d=f-l-1;l=f,p=0}else c===46&&p!==-1?++p:p=-1}return u}var a={resolve:function(){for(var i,s="",c=!1,u=arguments.length-1;u>=-1&&!c;u--){var d;u>=0?d=arguments[u]:(i===void 0&&(i=process.cwd()),d=i),n(d),d.length!==0&&(s=d+"/"+s,c=d.charCodeAt(0)===47)}return s=o(s,!c),c?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(i){if(n(i),i.length===0)return".";var s=i.charCodeAt(0)===47,c=i.charCodeAt(i.length-1)===47;return(i=o(i,!s)).length!==0||s||(i="."),i.length>0&&c&&(i+="/"),s?"/"+i:i},isAbsolute:function(i){return n(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,s=0;s<arguments.length;++s){var c=arguments[s];n(c),c.length>0&&(i===void 0?i=c:i+="/"+c)}return i===void 0?".":a.normalize(i)},relative:function(i,s){if(n(i),n(s),i===s||(i=a.resolve(i))===(s=a.resolve(s)))return"";for(var c=1;c<i.length&&i.charCodeAt(c)===47;++c);for(var u=i.length,d=u-c,l=1;l<s.length&&s.charCodeAt(l)===47;++l);for(var p=s.length-l,f=d<p?d:p,g=-1,m=0;m<=f;++m){if(m===f){if(p>f){if(s.charCodeAt(l+m)===47)return s.slice(l+m+1);if(m===0)return s.slice(l+m)}else d>f&&(i.charCodeAt(c+m)===47?g=m:m===0&&(g=0));break}var _=i.charCodeAt(c+m);if(_!==s.charCodeAt(l+m))break;_===47&&(g=m)}var E="";for(m=c+g+1;m<=u;++m)m!==u&&i.charCodeAt(m)!==47||(E.length===0?E+="..":E+="/..");return E.length>0?E+s.slice(l+g):(l+=g,s.charCodeAt(l)===47&&++l,s.slice(l))},_makeLong:function(i){return i},dirname:function(i){if(n(i),i.length===0)return".";for(var s=i.charCodeAt(0),c=s===47,u=-1,d=!0,l=i.length-1;l>=1;--l)if((s=i.charCodeAt(l))===47){if(!d){u=l;break}}else d=!1;return u===-1?c?"/":".":c&&u===1?"//":i.slice(0,u)},basename:function(i,s){if(s!==void 0&&typeof s!="string")throw new TypeError('"ext" argument must be a string');n(i);var c,u=0,d=-1,l=!0;if(s!==void 0&&s.length>0&&s.length<=i.length){if(s.length===i.length&&s===i)return"";var p=s.length-1,f=-1;for(c=i.length-1;c>=0;--c){var g=i.charCodeAt(c);if(g===47){if(!l){u=c+1;break}}else f===-1&&(l=!1,f=c+1),p>=0&&(g===s.charCodeAt(p)?--p==-1&&(d=c):(p=-1,d=f))}return u===d?d=f:d===-1&&(d=i.length),i.slice(u,d)}for(c=i.length-1;c>=0;--c)if(i.charCodeAt(c)===47){if(!l){u=c+1;break}}else d===-1&&(l=!1,d=c+1);return d===-1?"":i.slice(u,d)},extname:function(i){n(i);for(var s=-1,c=0,u=-1,d=!0,l=0,p=i.length-1;p>=0;--p){var f=i.charCodeAt(p);if(f!==47)u===-1&&(d=!1,u=p+1),f===46?s===-1?s=p:l!==1&&(l=1):s!==-1&&(l=-1);else if(!d){c=p+1;break}}return s===-1||u===-1||l===0||l===1&&s===u-1&&s===c+1?"":i.slice(s,u)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return function(s,c){var u=c.dir||c.root,d=c.base||(c.name||"")+(c.ext||"");return u?u===c.root?u+d:u+"/"+d:d}(0,i)},parse:function(i){n(i);var s={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return s;var c,u=i.charCodeAt(0),d=u===47;d?(s.root="/",c=1):c=0;for(var l=-1,p=0,f=-1,g=!0,m=i.length-1,_=0;m>=c;--m)if((u=i.charCodeAt(m))!==47)f===-1&&(g=!1,f=m+1),u===46?l===-1?l=m:_!==1&&(_=1):l!==-1&&(_=-1);else if(!g){p=m+1;break}return l===-1||f===-1||_===0||_===1&&l===f-1&&l===p+1?f!==-1&&(s.base=s.name=p===0&&d?i.slice(1,f):i.slice(p,f)):(p===0&&d?(s.name=i.slice(1,l),s.base=i.slice(1,f)):(s.name=i.slice(p,l),s.base=i.slice(p,f)),s.ext=i.slice(l,f)),p>0?s.dir=i.slice(0,p-1):d&&(s.dir="/"),s},sep:"/",delimiter:":",win32:null,posix:null};a.posix=a,r.exports=a},465:(r,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Utils=n.URI=void 0;var a=o(796);Object.defineProperty(n,"URI",{enumerable:!0,get:function(){return a.URI}});var i=o(679);Object.defineProperty(n,"Utils",{enumerable:!0,get:function(){return i.Utils}})},674:(r,n)=>{if(Object.defineProperty(n,"__esModule",{value:!0}),n.isWindows=void 0,typeof process=="object")n.isWindows=process.platform==="win32";else if(typeof navigator=="object"){var o=navigator.userAgent;n.isWindows=o.indexOf("Windows")>=0}},796:function(r,n,o){var a,i,s=this&&this.__extends||(a=function(U,V){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,ne){Q.__proto__=ne}||function(Q,ne){for(var ve in ne)Object.prototype.hasOwnProperty.call(ne,ve)&&(Q[ve]=ne[ve])})(U,V)},function(U,V){if(typeof V!="function"&&V!==null)throw new TypeError("Class extends value "+String(V)+" is not a constructor or null");function Q(){this.constructor=U}a(U,V),U.prototype=V===null?Object.create(V):(Q.prototype=V.prototype,new Q)});Object.defineProperty(n,"__esModule",{value:!0}),n.uriToFsPath=n.URI=void 0;var c=o(674),u=/^\w[\w\d+.-]*$/,d=/^\//,l=/^\/\//;function p(U,V){if(!U.scheme&&V)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(U.authority,'", path: "').concat(U.path,'", query: "').concat(U.query,'", fragment: "').concat(U.fragment,'"}'));if(U.scheme&&!u.test(U.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(U.path){if(U.authority){if(!d.test(U.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(U.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}var f="",g="/",m=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,_=function(){function U(V,Q,ne,ve,de,X){X===void 0&&(X=!1),typeof V=="object"?(this.scheme=V.scheme||f,this.authority=V.authority||f,this.path=V.path||f,this.query=V.query||f,this.fragment=V.fragment||f):(this.scheme=function(ce,ie){return ce||ie?ce:"file"}(V,X),this.authority=Q||f,this.path=function(ce,ie){switch(ce){case"https":case"http":case"file":ie?ie[0]!==g&&(ie=g+ie):ie=g}return ie}(this.scheme,ne||f),this.query=ve||f,this.fragment=de||f,p(this,X))}return U.isUri=function(V){return V instanceof U||!!V&&typeof V.authority=="string"&&typeof V.fragment=="string"&&typeof V.path=="string"&&typeof V.query=="string"&&typeof V.scheme=="string"&&typeof V.fsPath=="string"&&typeof V.with=="function"&&typeof V.toString=="function"},Object.defineProperty(U.prototype,"fsPath",{get:function(){return H(this,!1)},enumerable:!1,configurable:!0}),U.prototype.with=function(V){if(!V)return this;var Q=V.scheme,ne=V.authority,ve=V.path,de=V.query,X=V.fragment;return Q===void 0?Q=this.scheme:Q===null&&(Q=f),ne===void 0?ne=this.authority:ne===null&&(ne=f),ve===void 0?ve=this.path:ve===null&&(ve=f),de===void 0?de=this.query:de===null&&(de=f),X===void 0?X=this.fragment:X===null&&(X=f),Q===this.scheme&&ne===this.authority&&ve===this.path&&de===this.query&&X===this.fragment?this:new T(Q,ne,ve,de,X)},U.parse=function(V,Q){Q===void 0&&(Q=!1);var ne=m.exec(V);return ne?new T(ne[2]||f,te(ne[4]||f),te(ne[5]||f),te(ne[7]||f),te(ne[9]||f),Q):new T(f,f,f,f,f)},U.file=function(V){var Q=f;if(c.isWindows&&(V=V.replace(/\\/g,g)),V[0]===g&&V[1]===g){var ne=V.indexOf(g,2);ne===-1?(Q=V.substring(2),V=g):(Q=V.substring(2,ne),V=V.substring(ne)||g)}return new T("file",Q,V,f,f)},U.from=function(V){var Q=new T(V.scheme,V.authority,V.path,V.query,V.fragment);return p(Q,!0),Q},U.prototype.toString=function(V){return V===void 0&&(V=!1),z(this,V)},U.prototype.toJSON=function(){return this},U.revive=function(V){if(V){if(V instanceof U)return V;var Q=new T(V);return Q._formatted=V.external,Q._fsPath=V._sep===E?V.fsPath:null,Q}return V},U}();n.URI=_;var E=c.isWindows?1:void 0,T=function(U){function V(){var Q=U!==null&&U.apply(this,arguments)||this;return Q._formatted=null,Q._fsPath=null,Q}return s(V,U),Object.defineProperty(V.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=H(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),V.prototype.toString=function(Q){return Q===void 0&&(Q=!1),Q?z(this,!0):(this._formatted||(this._formatted=z(this,!1)),this._formatted)},V.prototype.toJSON=function(){var Q={$mid:1};return this._fsPath&&(Q.fsPath=this._fsPath,Q._sep=E),this._formatted&&(Q.external=this._formatted),this.path&&(Q.path=this.path),this.scheme&&(Q.scheme=this.scheme),this.authority&&(Q.authority=this.authority),this.query&&(Q.query=this.query),this.fragment&&(Q.fragment=this.fragment),Q},V}(_),w=((i={})[58]="%3A",i[47]="%2F",i[63]="%3F",i[35]="%23",i[91]="%5B",i[93]="%5D",i[64]="%40",i[33]="%21",i[36]="%24",i[38]="%26",i[39]="%27",i[40]="%28",i[41]="%29",i[42]="%2A",i[43]="%2B",i[44]="%2C",i[59]="%3B",i[61]="%3D",i[32]="%20",i);function R(U,V){for(var Q=void 0,ne=-1,ve=0;ve<U.length;ve++){var de=U.charCodeAt(ve);if(de>=97&&de<=122||de>=65&&de<=90||de>=48&&de<=57||de===45||de===46||de===95||de===126||V&&de===47)ne!==-1&&(Q+=encodeURIComponent(U.substring(ne,ve)),ne=-1),Q!==void 0&&(Q+=U.charAt(ve));else{Q===void 0&&(Q=U.substr(0,ve));var X=w[de];X!==void 0?(ne!==-1&&(Q+=encodeURIComponent(U.substring(ne,ve)),ne=-1),Q+=X):ne===-1&&(ne=ve)}}return ne!==-1&&(Q+=encodeURIComponent(U.substring(ne))),Q!==void 0?Q:U}function I(U){for(var V=void 0,Q=0;Q<U.length;Q++){var ne=U.charCodeAt(Q);ne===35||ne===63?(V===void 0&&(V=U.substr(0,Q)),V+=w[ne]):V!==void 0&&(V+=U[Q])}return V!==void 0?V:U}function H(U,V){var Q;return Q=U.authority&&U.path.length>1&&U.scheme==="file"?"//".concat(U.authority).concat(U.path):U.path.charCodeAt(0)===47&&(U.path.charCodeAt(1)>=65&&U.path.charCodeAt(1)<=90||U.path.charCodeAt(1)>=97&&U.path.charCodeAt(1)<=122)&&U.path.charCodeAt(2)===58?V?U.path.substr(1):U.path[1].toLowerCase()+U.path.substr(2):U.path,c.isWindows&&(Q=Q.replace(/\//g,"\\")),Q}function z(U,V){var Q=V?I:R,ne="",ve=U.scheme,de=U.authority,X=U.path,ce=U.query,ie=U.fragment;if(ve&&(ne+=ve,ne+=":"),(de||ve==="file")&&(ne+=g,ne+=g),de){var pe=de.indexOf("@");if(pe!==-1){var he=de.substr(0,pe);de=de.substr(pe+1),(pe=he.indexOf(":"))===-1?ne+=Q(he,!1):(ne+=Q(he.substr(0,pe),!1),ne+=":",ne+=Q(he.substr(pe+1),!1)),ne+="@"}(pe=(de=de.toLowerCase()).indexOf(":"))===-1?ne+=Q(de,!1):(ne+=Q(de.substr(0,pe),!1),ne+=de.substr(pe))}if(X){if(X.length>=3&&X.charCodeAt(0)===47&&X.charCodeAt(2)===58)(be=X.charCodeAt(1))>=65&&be<=90&&(X="/".concat(String.fromCharCode(be+32),":").concat(X.substr(3)));else if(X.length>=2&&X.charCodeAt(1)===58){var be;(be=X.charCodeAt(0))>=65&&be<=90&&(X="".concat(String.fromCharCode(be+32),":").concat(X.substr(2)))}ne+=Q(X,!0)}return ce&&(ne+="?",ne+=Q(ce,!1)),ie&&(ne+="#",ne+=V?ie:R(ie,!1)),ne}function K(U){try{return decodeURIComponent(U)}catch{return U.length>3?U.substr(0,3)+K(U.substr(3)):U}}n.uriToFsPath=H;var J=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function te(U){return U.match(J)?U.replace(J,function(V){return K(V)}):U}},679:function(r,n,o){var a=this&&this.__spreadArray||function(u,d,l){if(l||arguments.length===2)for(var p,f=0,g=d.length;f<g;f++)!p&&f in d||(p||(p=Array.prototype.slice.call(d,0,f)),p[f]=d[f]);return u.concat(p||Array.prototype.slice.call(d))};Object.defineProperty(n,"__esModule",{value:!0}),n.Utils=void 0;var i,s=o(470),c=s.posix||s;(i=n.Utils||(n.Utils={})).joinPath=function(u){for(var d=[],l=1;l<arguments.length;l++)d[l-1]=arguments[l];return u.with({path:c.join.apply(c,a([u.path],d,!1))})},i.resolvePath=function(u){for(var d=[],l=1;l<arguments.length;l++)d[l-1]=arguments[l];var p=u.path||"/";return u.with({path:c.resolve.apply(c,a([p],d,!1))})},i.dirname=function(u){var d=c.dirname(u.path);return d.length===1&&d.charCodeAt(0)===46?u:u.with({path:d})},i.basename=function(u){return c.basename(u.path)},i.extname=function(u){return c.extname(u.path)}}},t={};return function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}(465)})()})});var gm=ee((PD,hm)=>{hm.exports=fm;fm.sync=fP;var dm=require("fs");function pP(e,t){var r=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var o=r[n].toLowerCase();if(o&&e.substr(-o.length).toLowerCase()===o)return!0}return!1}function pm(e,t,r){return!e.isSymbolicLink()&&!e.isFile()?!1:pP(t,r)}function fm(e,t,r){dm.stat(e,function(n,o){r(n,n?!1:pm(o,e,t))})}function fP(e,t){return pm(dm.statSync(e),e,t)}});var Em=ee((OD,ym)=>{ym.exports=vm;vm.sync=hP;var mm=require("fs");function vm(e,t,r){mm.stat(e,function(n,o){r(n,n?!1:_m(o,t))})}function hP(e,t){return _m(mm.statSync(e),t)}function _m(e,t){return e.isFile()&&gP(e,t)}function gP(e,t){var r=e.mode,n=e.uid,o=e.gid,a=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),i=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),s=parseInt("100",8),c=parseInt("010",8),u=parseInt("001",8),d=s|c,l=r&u||r&c&&o===i||r&s&&n===a||r&d&&a===0;return l}});var Cm=ee((DD,bm)=>{var ID=require("fs"),Is;process.platform==="win32"||global.TESTING_WINDOWS?Is=gm():Is=Em();bm.exports=Pl;Pl.sync=mP;function Pl(e,t,r){if(typeof t=="function"&&(r=t,t={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,o){Pl(e,t||{},function(a,i){a?o(a):n(i)})})}Is(e,t||{},function(n,o){n&&(n.code==="EACCES"||t&&t.ignoreErrors)&&(n=null,o=!1),r(n,o)})}function mP(e,t){try{return Is.sync(e,t||{})}catch(r){if(t&&t.ignoreErrors||r.code==="EACCES")return!1;throw r}}});var Im=ee((AD,Om)=>{var Ei=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",Tm=require("path"),vP=Ei?";":":",Sm=Cm(),Rm=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),wm=(e,t)=>{let r=t.colon||vP,n=e.match(/\//)||Ei&&e.match(/\\/)?[""]:[...Ei?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(r)],o=Ei?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",a=Ei?o.split(r):[""];return Ei&&e.indexOf(".")!==-1&&a[0]!==""&&a.unshift(""),{pathEnv:n,pathExt:a,pathExtExe:o}},Pm=(e,t,r)=>{typeof t=="function"&&(r=t,t={}),t||(t={});let{pathEnv:n,pathExt:o,pathExtExe:a}=wm(e,t),i=[],s=u=>new Promise((d,l)=>{if(u===n.length)return t.all&&i.length?d(i):l(Rm(e));let p=n[u],f=/^".*"$/.test(p)?p.slice(1,-1):p,g=Tm.join(f,e),m=!f&&/^\.[\\\/]/.test(e)?e.slice(0,2)+g:g;d(c(m,u,0))}),c=(u,d,l)=>new Promise((p,f)=>{if(l===o.length)return p(s(d+1));let g=o[l];Sm(u+g,{pathExt:a},(m,_)=>{if(!m&&_)if(t.all)i.push(u+g);else return p(u+g);return p(c(u,d,l+1))})});return r?s(0).then(u=>r(null,u),r):s(0)},_P=(e,t)=>{t=t||{};let{pathEnv:r,pathExt:n,pathExtExe:o}=wm(e,t),a=[];for(let i=0;i<r.length;i++){let s=r[i],c=/^".*"$/.test(s)?s.slice(1,-1):s,u=Tm.join(c,e),d=!c&&/^\.[\\\/]/.test(e)?e.slice(0,2)+u:u;for(let l=0;l<n.length;l++){let p=d+n[l];try{if(Sm.sync(p,{pathExt:o}))if(t.all)a.push(p);else return p}catch{}}}if(t.all&&a.length)return a;if(t.nothrow)return null;throw Rm(e)};Om.exports=Pm;Pm.sync=_P});var OP={};bv(OP,{activate:()=>SP,deactivate:()=>RP});module.exports=Cv(OP);var zn=st(require("vscode")),$m=st(Nd()),bn=st(El());var Jg=st(require("net")),Ts=st(require("vscode"));var nt=st(require("vscode")),Xg=st(po());function Ft(e,t){return nt.workspace.getConfiguration(e,t)}function bl(e,t){let r=nt.ConfigurationTarget.Global,n=nt.workspace.getConfiguration(e).inspect(t);return n===void 0||(n.globalValue&&(r=nt.ConfigurationTarget.Global),n.workspaceFolderValue&&(r=nt.ConfigurationTarget.WorkspaceFolder),n.workspaceValue&&(r=nt.ConfigurationTarget.Workspace)),r}function Yg(e){for(let t=0;t<e.length;t++){let r=e[t],n=nt.workspace.getConfiguration(r.section).inspect(r.name);if(n!==void 0&&(n.globalValue!==void 0||n.workspaceFolderValue!==void 0||n.workspaceValue!==void 0))return!0}return!1}async function br(e,t,r){let n=nt.ConfigurationTarget.Global,o=nt.workspace.getConfiguration(e).inspect(t);if(o===void 0)return n;let a=e==="terraform-ls"?"terraform":e,i;o.globalValue!==void 0&&(i=o.globalValue,n=nt.ConfigurationTarget.Global),o.workspaceFolderValue!==void 0&&(i=o.workspaceFolderValue,n=nt.ConfigurationTarget.WorkspaceFolder),o.workspaceValue!==void 0&&(i=o.workspaceValue,n=nt.ConfigurationTarget.Workspace),await nt.workspace.getConfiguration(a).update(r,i,n),await nt.workspace.getConfiguration(e).update(t,void 0,n)}async function Cl(e,t){let r=nt.workspace.getConfiguration(e).inspect(t);r!==void 0&&(r.globalValue!==void 0&&await nt.workspace.getConfiguration(e).update(t,void 0,nt.ConfigurationTarget.Global),r.workspaceFolderValue!==void 0&&await nt.workspace.getConfiguration(e).update(t,void 0,nt.ConfigurationTarget.WorkspaceFolder),r.workspaceValue!==void 0&&await nt.workspace.getConfiguration(e).update(t,void 0,nt.ConfigurationTarget.Workspace))}function vn(){return nt.window.visibleTextEditors.find(e=>!!e.viewColumn)}function _i(e){return e===void 0||e.isUntitled?!1:!!e.fileName.endsWith("tf")}async function Qg(e,t,r){let n="Unknown Error";if(e instanceof Xg.ResponseError?(n=e.data,r.sendTelemetryException(e)):e instanceof Error?(n=e.message,r.sendTelemetryException(e)):typeof e=="string"&&(n=e,r.sendTelemetryException(new Error(e))),n==="INVALID_URI_WSL"){if(t.globalState.get("terraform.disableWSLNotification")===!0)return;let o="It looks like you opened a WSL url using a Windows UNC path outside of the [Remote WSL extension](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl). The HashiCorp Terraform Extension works seamlessly with the Remote WSL Extension, but cannot work with this URL. Would you like to reopen this folder in the WSL Extension?",a=await nt.window.showErrorMessage(o,{detail:o,modal:!1},{title:"Reopen Folder in WSL"},{title:"More Info"},{title:"Supress"});if(a===void 0)return;switch(a.title){case"Suppress":r.sendTelemetryEvent("disableWSLNotification"),t.globalState.update("terraform.disableWSLNotification",!0);break;case"Reopen Folder in WSL":r.sendTelemetryEvent("reopenInWSL"),await nt.commands.executeCommand("remote-wsl.reopenInWSL");break;case"More Info":r.sendTelemetryEvent("wslMoreInfo"),await nt.commands.executeCommand("vscode.open",nt.Uri.parse("https://github.com/hashicorp/vscode-terraform/blob/v2.24.0/README.md#remote-extension-support"))}}else nt.window.showErrorMessage(n)}async function Zg(e,t){let r,n=Ft("terraform").get("languageServer.tcp.port");if(n){let s=Ts.workspace.getConfiguration("terraform").inspect("languageServer.path");return s!==void 0&&(s.globalValue||s.workspaceFolderValue||s.workspaceValue)&&Ts.window.showWarningMessage("You cannot use terraform.languageServer.tcp.port with terraform.languageServer.path. Ignoring terraform.languageServer.path and proceeding to connect via TCP"),r=async()=>{let c=new Jg.Socket;return c.connect({port:n,host:"localhost"}),{writer:c,reader:c}},t.appendLine(`Connecting to language server via TCP at localhost:${n}`),r}let o=await e.resolvedPathToBinary(),a=Ft("terraform").get("languageServer.args",[]);t.appendLine(`Launching language server: ${o} ${a.join(" ")}`);let i={command:o,args:a,options:{}};return r={run:i,debug:i},r}function em(e,t){return e?e.capabilities.executeCommandProvider?.commands.includes(t)??!1:!1}var yi=st(require("os")),Hr=st(require("vscode")),uP=require("child_process"),Ss=class{constructor(t){this.ctx=t;this.ctx.subscriptions.push(Hr.commands.registerCommand("terraform.generateBugReport",async()=>{let r=await Hr.window.showInputBox({title:"Generate a Bug Report",prompt:"Enter a short description of the problem or hit enter to submit now",placeHolder:"For example: I'm having trouble getting autocomplete to work when I..."}),n=this.getExtensions(),o=await this.generateBody(n,r),i=`https://github.com/hashicorp/vscode-terraform/issues/new?body=${encodeURIComponent(o)}`;Hr.commands.executeCommand("vscode.open",Hr.Uri.parse(i))}))}dispose(){}async generateBody(t,r){return r||(r=`Steps To Reproduce
=====

Steps to reproduce the behavior:

1. Go to '...'
2. Type '...'
3. See error

Include any relevant Terraform configuration or project structure:

\`\`\`terraform
resource "github_repository" "test" {
  name = "vscode-terraform"
}
\`\`\`


You can use 'tree' to output ASCII-based hierarchy of your project.

If applicable, add screenshots to help explain your problem.

Expected Behavior
-----

<!-- What should have happened? -->

Actual Behavior
-----

<!-- What actually happened? -->

Additional context
-----

<!--
Add any other context about the problem here.
Note whether you use any tools for managing Terraform version/execution (e.g. 'tfenv')
any credentials helpers, or whether you have any other Terraform extensions installed.
-->
`),`Issue Description
=====

${r}

Environment Information
=====

Terraform Information
-----

${this.generateRuntimeMarkdown(await this.getRuntimeInfo())}

Visual Studio Code
-----

| Name | Version |
| --- | --- |
| Operating System | ${yi.type()} ${yi.arch()} ${yi.release()} |
| VSCode | ${Hr.version}|

Visual Studio Code Extensions
-----

<details><summary>Visual Studio Code Extensions(Click to Expand)</summary>

${this.generateExtesnionMarkdown(t)}
</details>

Extension Logs
-----

> Find this from the first few lines of the relevant Output pane:
View -> Output -> 'HashiCorp Terraform'

`}generateExtesnionMarkdown(t){if(!t.length)return"none";let r=`|Extension|Author|Version|
|---|---|---|`,n=t.map(a=>`|${a.name}|${a.publisher}|${a.version}|`).join(`
`);return`${r}
${n}`}generateRuntimeMarkdown(t){return`
Version:	${t.version}
Platform:	${t.platform}
Outdated:	${t.outdated}
    `}getExtensions(){return Hr.extensions.all.filter(r=>r.packageJSON.isBuiltin===!1).sort((r,n)=>r.packageJSON.name.toLowerCase()<n.packageJSON.name.toLowerCase()?-1:r.packageJSON.name.toLowerCase()>n.packageJSON.name.toLowerCase()?1:0).map(r=>({name:r.packageJSON.name,publisher:r.packageJSON.publisher,version:r.packageJSON.version}))}async getRuntimeInfo(){let t="terraform",r=uP.spawnSync,n=r(t,["version","-json"]);if(n.error===void 0)try{let a=n.stdout.toString(),i=JSON.parse(a);return{version:i.terraform_version,platform:i.platform,outdated:i.terraform_outdated}}catch{}let o=r(t,["version"]);if(o.error===void 0)try{let a=o.stdout.toString()||o.stderr.toString(),s=new RegExp("v?(?<version>[0-9]+(?:.[0-9]+)*(?:-[A-Za-z0-9.]+)?)").exec(a),c=s&&s.length>1?s[1]:"Not found",u=a.split(`
`)[1].replace("on ","");return{version:c,platform:u,outdated:!0}}catch{}return{version:"Not found",platform:"Not found",outdated:!1}}};var cm=st(require("path"));var Jt=st(require("vscode")),tm=st(El()),rm=st(Rs());async function lP(e,t,r){return await ho("terraform-ls.module.callers",e,t,r)}async function nm(e,t,r){return await ho("terraform-ls.module.calls",e,t,r)}async function im(e,t,r){return await ho("terraform-ls.module.providers",e,t,r)}async function om(e,t){try{let r=Jt.workspace.workspaceFolders,n=await Jt.window.showOpenDialog({canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,title:"Choose which workspace to initialize with terraform init",defaultUri:r?r[0]?.uri:void 0,openLabel:"Initialize"});if(n===void 0)return;let o=n[0];return ho("terraform-ls.terraform.init",o.toString(),e,t)}catch(r){r instanceof Error?Jt.window.showErrorMessage(r.message):typeof r=="string"&&Jt.window.showErrorMessage(r)}}async function sm(e,t){try{await am("initCurrent",e,t)}catch(r){r instanceof Error?Jt.window.showErrorMessage(r.message):typeof r=="string"&&Jt.window.showErrorMessage(r)}}async function ws(e,t,r,n=!1){try{await am(e,t,r,n)}catch(o){o instanceof Error?Jt.window.showErrorMessage(o.message):typeof o=="string"&&Jt.window.showErrorMessage(o)}}async function am(e,t,r,n=!1){let o=vn();if(o===void 0){Jt.window.showErrorMessage(`Open a Terraform module file and then run terraform ${e} again`);return}let a=rm.Utils.dirname(o.document.uri),i=await lP(a.toString(),t,r),s=await dP(a,i.callers);if(s===void 0)return;if(n){let u=`Terraform ${s}`,d=Jt.Uri.parse(s),l=await Jt.window.showInputBox({value:`terraform ${e}`,prompt:`Run in ${s}`});if(l===void 0)return;let p=Jt.window.terminals.find(f=>f.name===u)||Jt.window.createTerminal({name:`Terraform ${s}`,cwd:d});p.sendText(l),p.show(),r.sendTelemetryEvent("execShellCommand",{command:e});return}let c=`terraform-ls.terraform.${e}`;return ho(c,s,t,r)}async function ho(e,t,r,n){if(await r.onReady(),e==="terraform-ls.terraform.initCurrent"&&(n.sendTelemetryEvent("execWorkspaceCommand",{command:e}),e="terraform-ls.terraform.init"),!em(r.initializeResult,e))throw new Error(`${e} not supported by this terraform-ls version`);let a={command:e,arguments:[`uri=${t}`]};return r.sendRequest(tm.ExecuteCommandRequest.type,a)}async function dP(e,t){let r;if(t===void 0)return e.toString();if(t.length>1){let n=await Jt.window.showQuickPick(t.map(o=>o.uri),{canPickMany:!1,title:"Choose which workspace to initialize with terraform init"});if(n===void 0)return n;r=n}else t.length===1?r=t[0].uri:r=e.toString();return r}var At=st(require("vscode")),um=st(Rs());var Rl=class extends At.TreeItem{constructor(r,n,o,a,i,s,c){super(r,c.length>=1?At.TreeItemCollapsibleState.Collapsed:At.TreeItemCollapsibleState.None);this.label=r;this.sourceAddr=n;this.version=o;this.sourceType=a;this.docsLink=i;this.terraformIcon=s;this.children=c;this.iconPath=this.getIcon(this.sourceType);this.description=this.version?`${this.version}`:"",this.version===void 0?this.tooltip=`${this.sourceAddr}`:this.tooltip=`${this.sourceAddr}@${this.version}`}getIcon(r){switch(r){case"tfregistry":return{light:this.terraformIcon,dark:this.terraformIcon};case"local":return new At.ThemeIcon("symbol-folder");case"github":return new At.ThemeIcon("github");case"git":return new At.ThemeIcon("git-branch");default:return new At.ThemeIcon("extensions-view-icon")}}},Ps=class{constructor(t,r,n){this.client=r;this.reporter=n;this._onDidChangeTreeData=new At.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this.svg="";this.svg=t.asAbsolutePath(cm.join("assets","icons","terraform.svg")),t.subscriptions.push(At.commands.registerCommand("terraform.modules.refreshList",()=>this.refresh()),At.commands.registerCommand("terraform.modules.openDocumentation",o=>{o.docsLink&&At.env.openExternal(At.Uri.parse(o.docsLink))}),At.window.onDidChangeActiveTextEditor(async o=>{let a=vn();!_i(a?.document)||o&&a&&this.refresh()}))}refresh(){this._onDidChangeTreeData.fire()}getTreeItem(t){return t}getChildren(t){if(t)return Promise.resolve(t.children);{let r=this.getModules();return Promise.resolve(r)}}async getModules(){let t=vn();if(t?.document===void 0)return[];if(!_i(t.document))return[];let r=t.document.uri,n=um.Utils.dirname(r);if(this.client===void 0)return[];try{let o=await nm(n.toString(),this.client,this.reporter);return o===null?[]:o.module_calls.map(i=>this.toModuleCall(i.name,i.source_addr,i.version,i.source_type,i.docs_link,this.svg,i.dependent_modules))}catch{return[]}}toModuleCall(t,r,n,o,a,i,s){let c=[];return s.length!==0&&(c=s.map(u=>this.toModuleCall(u.name,u.source_addr,u.version,u.source_type,u.docs_link,i,u.dependent_modules))),new Rl(t,r,n,o,a,i,c)}};var Zt=st(require("vscode")),lm=st(Rs());var wl=class extends Zt.TreeItem{constructor(r,n,o,a,i){super(n,Zt.TreeItemCollapsibleState.None);this.fullName=r;this.displayName=n;this.requiredVersion=o;this.installedVersion=a;this.docsLink=i;this.description=a??"",this.iconPath=new Zt.ThemeIcon("package"),this.tooltip=`${r} ${o??""}`,i&&(this.contextValue="moduleProviderHasDocs")}},Os=class{constructor(t,r,n){this.client=r;this.reporter=n;this.didChangeTreeData=new Zt.EventEmitter;this.onDidChangeTreeData=this.didChangeTreeData.event;t.subscriptions.push(Zt.commands.registerCommand("terraform.providers.refreshList",()=>this.refresh()),Zt.window.onDidChangeActiveTextEditor(async o=>{let a=vn();!_i(a?.document)||o&&a&&this.refresh()}),Zt.commands.registerCommand("terraform.providers.openDocumentation",o=>{o.docsLink&&Zt.env.openExternal(Zt.Uri.parse(o.docsLink))}))}refresh(){this.didChangeTreeData.fire()}getTreeItem(t){return t}getChildren(t){return t?[]:this.getProvider()}async getProvider(){let t=vn();if(t?.document===void 0)return[];if(!_i(t.document))return[];let r=t.document.uri,n=lm.Utils.dirname(r);if(this.client===void 0)return[];try{let o=await im(n.toString(),this.client,this.reporter);return o===null?[]:Object.entries(o.provider_requirements).map(([a,i])=>new wl(a,i.display_name,i.version_constraint,o.installed_providers[a],i.docs_link))}catch{return[]}}};var _n=st(require("path")),As=st(require("vscode")),Dm=st(Im());var yP="bin",Ds=class{constructor(t){this.context=t;this.customBinPath=Ft("terraform").get("languageServer.path")}installPath(){return _n.join(this.context.extensionPath,yP)}hasCustomBinPath(){return!!this.customBinPath}binPath(){return this.customBinPath?this.customBinPath:_n.resolve(this.installPath(),this.binName())}binName(){return this.customBinPath?_n.basename(this.customBinPath):process.platform==="win32"?"terraform-ls.exe":"terraform-ls"}async resolvedPathToBinary(){let t=this.binPath(),r;try{_n.isAbsolute(t)?(await As.workspace.fs.stat(As.Uri.file(t)),r=t):r=Dm.sync(t),console.log(`Found server at ${r}`)}catch(n){let o="";throw this.customBinPath&&(o='. Check "terraform.languageServer.path" in your settings.'),new Error(`Unable to launch language server: ${n instanceof Error?n.message:n}${o}`)}return r}};var xm=st(require("vscode")),Am=1,xs=class{constructor(t,r){this.client=t;this.reporter=r;this.disposables=[]}fillClientCapabilities(t){t.experimental||(t.experimental={}),t.experimental.telemetryVersion=Am}initialize(){xm.env.isTelemetryEnabled!==!1&&this.disposables.push(this.client.onTelemetry(t=>{if(t.v!==Am){console.log(`unsupported telemetry event: ${t}`);return}this.reporter.sendRawTelemetryEvent(t.name,t.properties)}))}dispose(){this.disposables.forEach(t=>t.dispose())}};var rn=st(require("vscode")),km=st(po());var Nm="client.showReferences",EP="editor.action.showReferences",Ns=class{constructor(t){this._client=t;this.registeredCommands=[];this.isEnabled=Ft("terraform").get("codelens.referenceCount",!1)}fillClientCapabilities(t){this.isEnabled!==!1&&(t.experimental||(t.experimental={}),t.experimental.showReferencesCommandId=Nm)}initialize(t){if(!t.experimental?.referenceCountCodeLens||this.isEnabled===!1)return;let r=rn.commands.registerCommand(Nm,async(n,o)=>{let a=this._client,i=rn.window?.activeTextEditor?.document;if(!i)return;let s=new rn.Position(n.line,n.character),c={includeDeclaration:o.includeDeclaration},u=a.getFeature(km.ReferencesRequest.method).getProvider(i);if(!u)return;let d=new rn.CancellationTokenSource,l=await u.provideReferences(i,s,c,d.token);await rn.commands.executeCommand(EP,i.uri,s,l)});this.registeredCommands.push(r)}dispose(){this.registeredCommands.forEach(function(t,r,n){t.dispose(),n.splice(r,1)})}};var ks=class{constructor(t,r){this._client=t;this.manifest=r}fillClientCapabilities(t){if(!t.textDocument||!t.textDocument.semanticTokens)return;let r=this.tokenTypesFromExtManifest(this.manifest),n=this.tokenModifiersFromExtManifest(this.manifest),o=t.textDocument.semanticTokens.tokenTypes;t.textDocument.semanticTokens.tokenTypes=o.concat(r);let a=t.textDocument.semanticTokens.tokenModifiers;t.textDocument.semanticTokens.tokenModifiers=a.concat(n)}initialize(t){}dispose(){}tokenTypesFromExtManifest(t){return t.contributes.semanticTokenTypes?t.contributes.semanticTokenTypes.map(r=>r.id):[]}tokenModifiersFromExtManifest(t){return t.contributes.semanticTokenModifiers?t.contributes.semanticTokenModifiers.map(r=>r.id):[]}};var qm=st(require("vscode")),Mm="client.refreshModuleProviders",Ms=class{constructor(t,r){this.client=t;this.view=r;this.disposables=[]}fillClientCapabilities(t){t.experimental||(t.experimental={}),t.experimental.refreshModuleProvidersCommandId=Mm}async initialize(t){if(this.disposables.push(qm.window.registerTreeDataProvider("terraform.providers",this.view)),!t.experimental?.refreshModuleProviders){console.log("Server doesn't support client.refreshModuleProviders");return}await this.client.onReady();let r=this.client.onRequest(Mm,()=>{this.view?.refresh()});this.disposables.push(r)}dispose(){this.disposables.forEach(t=>t.dispose())}};var jm=st(require("vscode")),Lm="client.refreshModuleCalls",qs=class{constructor(t,r){this.client=t;this.view=r;this.disposables=[]}fillClientCapabilities(t){t.experimental||(t.experimental={}),t.experimental.refreshModuleCallsCommandId=Lm}async initialize(t){if(this.disposables.push(jm.window.registerTreeDataProvider("terraform.modules",this.view)),!t.experimental?.refreshModuleCalls){console.log("Server does not support client.refreshModuleCalls");return}await this.client.onReady();let r=this.client.onRequest(Lm,()=>{this.view?.refresh()});this.disposables.push(r)}dispose(){this.disposables.forEach(t=>t.dispose())}};var Cr=st(require("vscode"));function Fm(){let e=Ft("terraform").get("languageServer.terraform",{path:"",timeout:"",logFilePath:""}),t=Ft("terraform").get("languageServer.indexing",{ignoreDirectoryNames:[],ignorePaths:[]}),r=Ft("terraform").get("languageServer.ignoreSingleFileWarning",!1),n=Ft("terraform").get("experimentalFeatures"),o=Ft("terraform").get("languageServer.rootModules",[]);if(o.length>0&&t.ignorePaths.length>0)throw new Error("Only one of rootModules and indexing.ignorePaths can be set at the same time, please remove the conflicting config and reload");return{experimentalFeatures:n,ignoreSingleFileWarning:r,terraform:e,...o.length>0&&{rootModulePaths:o},indexing:t}}async function Ol(e){if(e.globalState.get("terraform.disableSettingsMigration",!1)||Yg([{section:"terraform",name:"languageServer.external"},{section:"terraform",name:"languageServer.pathToBinary"},{section:"terraform-ls",name:"rootModules"},{section:"terraform-ls",name:"excludeRootModules"},{section:"terraform-ls",name:"ignoreDirectoryNames"},{section:"terraform-ls",name:"terraformExecPath"},{section:"terraform-ls",name:"terraformExecTimeout"},{section:"terraform-ls",name:"terraformLogFilePath"},{section:"terraform-ls",name:"experimentalFeatures"}])===!1)return;let r=`Automatic migration will change your settings file!

To read more about the this change click "More Info" and delay changing anything`,n=await Cr.window.showInformationMessage("Terraform Extension settings have moved in the latest update",{detail:r,modal:!1},{title:"More Info"},{title:"Migrate"},{title:"Open Settings"},{title:"Suppress"});if(n!==void 0){switch(n.title){case"Suppress":e.globalState.update("terraform.disableSettingsMigration",!0);return;case"Open Settings":await Cr.commands.executeCommand("workbench.action.openSettings","@ext:hashicorp.terraform");return;case"More Info":await Cr.commands.executeCommand("vscode.open",Cr.Uri.parse("https://github.com/hashicorp/vscode-terraform/blob/v2.24.0/docs/settings-migration.md")),await Ol(e);return;case"Migrate":}await br("terraform","languageServer.external","languageServer.enable"),await br("terraform","languageServer.pathToBinary","languageServer.path"),await br("terraform","languageServer.args","languageServer.args"),await br("terraform","languageServer.ignoreSingleFileWarning","languageServer.ignoreSingleFileWarning"),await Cl("terraform","languageServer"),await br("terraform-ls","rootModules","languageServer.rootModules"),await br("terraform-ls","excludeRootModules","languageServer.indexing.ignorePaths"),await br("terraform-ls","ignoreDirectoryNames","languageServer.indexing.ignoreDirectoryNames"),await br("terraform-ls","terraformExecPath","languageServer.terraform.path"),await br("terraform-ls","terraformExecTimeout","languageServer.terraform.timeout"),await br("terraform-ls","terraformLogFilePath","languageServer.terraform.logFilePath"),await br("terraform-ls","experimentalFeatures.validateOnSave","experimentalFeatures.validateOnSave"),await br("terraform-ls","experimentalFeatures.prefillRequiredFields","experimentalFeatures.prefillRequiredFields"),await Cl("terraform-ls","experimentalFeatures"),await Cr.commands.executeCommand("workbench.action.reloadWindow")}}function Hm(e){let t=Cr.extensions.getExtension("hashicorp.terraform"),r=Cr.extensions.getExtension("hashicorp.terraform-preview"),n="Please ensure only one is enabled or installed and reload this window";if(e==="hashicorp.terraform-preview"){if(t!==void 0)return Cr.window.showErrorMessage("Terraform Preview cannot be used while Terraform Stable is also enabled."+n),!0}else if(e==="hashicorp.terraform"&&r!==void 0)return Cr.window.showErrorMessage("Terraform Stable cannot be used while Terraform Preview is also enabled."+n),!0;return!1}var yn=st(require("vscode"));var Ls=class{constructor(){this.commands=[yn.workspace.onDidChangeConfiguration(async t=>{if(t.affectsConfiguration("terraform")||t.affectsConfiguration("terraform-ls")){let r="Reload VSCode window to apply language server changes";await yn.window.showInformationMessage(r,"Reload")==="Reload"&&yn.commands.executeCommand("workbench.action.reloadWindow")}}),yn.commands.registerCommand("terraform.enableLanguageServer",async()=>{if(Ft("terraform").get("languageServer.enable")===!0)return;let t=bl("terraform","languageServer.enable");await Ft("terraform").update("languageServer.enable",!0,t)}),yn.commands.registerCommand("terraform.disableLanguageServer",async()=>{if(Ft("terraform").get("languageServer.enable")===!1)return;let t=bl("terraform","languageServer.enable");await Ft("terraform").update("languageServer.enable",!1,t)})]}dispose(){this.commands.forEach(t=>t.dispose())}};var bi=st(require("vscode"));var js=class{constructor(t,r){this.client=t;this.reporter=r;this.commands=[bi.commands.registerCommand("terraform.init",async()=>{await om(this.client,this.reporter)}),bi.commands.registerCommand("terraform.initCurrent",async()=>{await sm(this.client,this.reporter)}),bi.commands.registerCommand("terraform.apply",async()=>{await ws("apply",this.client,this.reporter,!0)}),bi.commands.registerCommand("terraform.plan",async()=>{await ws("plan",this.client,this.reporter,!0)}),bi.commands.registerCommand("terraform.validate",async()=>{await ws("validate",this.client,this.reporter)})]}dispose(){this.commands.forEach(t=>t.dispose())}};var En=st(require("vscode")),Hs=st(po()),Fs=class{constructor(t,r){this.outputChannel=t;this.reporter=r}error(t,r,n){return En.window.showErrorMessage(`Terraform LS connection error: (${n})
${t.message}
${r?.jsonrpc}`),this.reporter.sendTelemetryException(t),Hs.ErrorAction.Continue}closed(){return this.reporter.sendTelemetryException(new Error("Failure to start terraform-ls")),this.outputChannel.appendLine("Failure to start terraform-ls. Please check your configuration settings and reload this window"),En.window.showErrorMessage("Failure to start terraform-ls. Please check your configuration settings and reload this window",{detail:"",modal:!1},{title:"Open Settings"},{title:"Open Logs"},{title:"More Info"}).then(async t=>{if(t!==void 0)switch(t.title){case"Open Logs":this.outputChannel.show();break;case"Open Settings":await En.commands.executeCommand("workbench.action.openSettings","@ext:hashicorp.terraform");break;case"More Info":await En.commands.executeCommand("vscode.open",En.Uri.parse("https://github.com/hashicorp/vscode-terraform#troubleshooting"));break}}),Hs.CloseAction.DoNotRestart}};var bP="terraform",CP="HashiCorp Terraform",TP=[{scheme:"file",language:"terraform"},{scheme:"file",language:"terraform-vars"}],Il=zn.window.createOutputChannel(CP),lr,dr;async function SP(e){let t=e.extension.packageJSON;if(lr=new $m.default(e.extension.id,t.version,t.appInsightsKey),e.subscriptions.push(lr),Hm(e.extension.id)){lr.sendTelemetryEvent("previewExtensionPresentWithStable");return}if(await Ol(e),Ft("terraform").get("languageServer.enable")===!1){lr.sendTelemetryEvent("disabledTerraformLS");return}let r=new Ds(e);r.hasCustomBinPath()&&lr.sendTelemetryEvent("usePathToBinary");let n=await Zg(r,Il),o=Fm(),a=new Fs(Il,lr),i={documentSelector:TP,synchronize:{fileEvents:[zn.workspace.createFileSystemWatcher("**/*.tf"),zn.workspace.createFileSystemWatcher("**/*.tfvars")]},initializationOptions:o,initializationFailedHandler:()=>!1,errorHandler:a,outputChannel:Il,revealOutputChannelOn:bn.RevealOutputChannelOn.Never};dr=new bn.LanguageClient(bP,n,i),dr.onDidChangeState(s=>{console.log(`Client: ${bn.State[s.oldState]} --> ${bn.State[s.newState]}`),s.newState===bn.State.Stopped&&lr.sendTelemetryEvent("stopClient")}),dr.registerFeatures([new ks(dr,t),new Ms(dr,new Os(e,dr,lr)),new qs(dr,new Ps(e,dr,lr)),new xs(dr,lr),new Ns(dr)]),e.subscriptions.push(new Ss(e),new Ls,new js(dr,lr)),await wP(e)}async function RP(){PP()}async function wP(e){try{console.log("Starting client"),e.subscriptions.push(dr.start()),await dr.onReady(),lr.sendTelemetryEvent("startClient");let t=dr.initializeResult;if(t!==void 0){let r=t.capabilities.workspace?.workspaceFolders?.supported;console.log(`Multi-folder support: ${r}`)}}catch(t){await Qg(t,e,lr)}}async function PP(){try{await dr?.stop()}catch(e){console.log(e),e instanceof Error?(lr.sendTelemetryException(e),zn.window.showErrorMessage(e.message)):typeof e=="string"&&(zn.window.showErrorMessage(e),lr.sendTelemetryException(new Error(e)))}}0&&(module.exports={activate,deactivate});
